import"./modulepreload-polyfill-B5Qt9EMX.js";import{f as Qe,d as z,c as T,Z as S,_ as p,$ as s,A as a,E as g,Y as y,Q as h,B as Xe,a0 as Nt,r as E,w as G,g as Ie,o as X,a1 as k,a2 as D,F as Q,a3 as te,u as P,P as Tt,U as Dt,n as ne,a4 as nt,a5 as Mt,a6 as Ut,a7 as et,a8 as At,a9 as Rt,aa as Ot}from"./@vue-cTl6YTVR.js";import{V as W,a as tt,b as Pe,c as se,d as ie,e as U,f as F,g as J,h as Ne,i as re,j as Z,k as ye,l as Te,m as De,n as ke,o as oe,p as zt,q as Le,r as Bt,s as Ft,t as ve,u as jt,v as Kt,w as ze,x as qt,y as Be,z as ue,A as _e,B as Ht,C as Jt,D as Wt,E as Gt,F as le,G as be,H as Ee,I as Yt,J as ht,K as Zt,L as Qt,M as Xt,N as eo,O as to,P as oo}from"./vuetify-1S7o9-SW.js";import{u as ot,a as at,c as ao,b as lo}from"./vue-router-pwNgS7Oi.js";import{v as de}from"./uuid-C6aID195.js";import{m as _t,d as no}from"./marked-BM9-l-yy.js";import{z as he,H as yt,s as kt,E as ro,A as so}from"./@codemirror-Boys7jSw.js";import{b as io}from"./codemirror-BNiQPaZe.js";import{c}from"./@lezer-C8D-pblS.js";import{R as uo}from"./@videojs-player-CeoXG8FN.js";import"./video.js-Cp1N-q-1.js";import"./crelt-C8TCjufn.js";import"./@marijn-DXwl3gUT.js";import"./style-mod-Bs6eFhZE.js";import"./w3c-keyname-Vcq4gwWv.js";import"./global-Ao-oLW3a.js";import"./@babel-CCFhuYdL.js";import"./keycode-COWoYAhk.js";import"./safe-json-parse-CN2GHVL4.js";import"./@videojs-B_-B0e53.js";import"./is-function-C0BzV8h3.js";import"./url-toolkit-Dcj1b7Pi.js";import"./videojs-vtt.js-DcT8v0yT.js";import"./m3u8-parser-CpICl_Sf.js";import"./mpd-parser-RiEq4NZi.js";import"./@xmldom-BH8vc9mM.js";import"./mux.js-BqethXN8.js";const co=["en-US","ja-JP","hi-IN","fa-IR"],mo="en-US",ce={"en-US":{direction:"ltr",name:"English (US)"},"ja-JP":{direction:"ltr",name:"日本語"},"hi-IN":{direction:"ltr",name:"हिन्दी"},"fa-IR":{direction:"rtl",name:"فارسی"}},po={"en-US":{light:"Light",dark:"Dark"},"ja-JP":{light:"ライト",dark:"ダーク"},"hi-IN":{light:"हल्का",dark:"गहरा"},"fa-IR":{light:"روشن",dark:"تیره"}},vo={"en-US":{notebooks:"Notebooks",curriculum:"Curriculum",settings:"Settings"},"ja-JP":{notebooks:"ノートブック",curriculum:"カリキュラム",settings:"設定"},"hi-IN":{notebooks:"नोटबुक",curriculum:"पाठ्यक्रम",settings:"सेटिंग्स"},"fa-IR":{notebooks:"دفترچه‌ها",curriculum:"برنامه درسی",settings:"تنظیمات"}},Me={"en-US":{title:"Notebooks",addNotebook:"Add",blank:"Blank",fromTemplate:"From template",fromFile:"From File",fromUrl:"From URL",delete:"Delete",lastEdited:"Last edited",back:"Back",notebookViewer:"Notebook Viewer",saved:"Saved",saving:"Saving...",saveError:"Save Error",loadingNotebook:"Loading notebook...",failedToLoad:"Failed to load notebook",backToNotebooks:"Back to Notebooks",untitledNotebook:"Untitled Notebook",justNow:"Just now",hoursAgo:"hours ago",hourAgo:"hour ago",daysAgo:"days ago",dayAgo:"day ago",urlDialogTitle:"Import from URL",urlDialogLabel:"Enter notebook URL",urlDialogOpen:"Open",urlDialogCancel:"Close",urlDialogError:"Error",urlDialogErrorMessage:"Failed to fetch notebook from URL",urlDialogInvalidUrl:"Please enter a valid URL (must start with http:// or https://)"},"ja-JP":{title:"ノートブック",addNotebook:"追加",blank:"空白",fromTemplate:"テンプレートから",fromFile:"ファイルから",fromUrl:"URLから",delete:"削除",lastEdited:"最終編集",back:"戻る",notebookViewer:"ノートブックビューア",saved:"保存済み",saving:"保存中...",saveError:"保存エラー",loadingNotebook:"ノートブックを読み込み中...",failedToLoad:"ノートブックの読み込みに失敗しました",backToNotebooks:"ノートブックに戻る",untitledNotebook:"無題のノートブック",justNow:"たった今",hoursAgo:"時間前",hourAgo:"時間前",daysAgo:"日前",dayAgo:"日前",urlDialogTitle:"URLからインポート",urlDialogLabel:"ノートブックのURLを入力",urlDialogOpen:"開く",urlDialogCancel:"閉じる",urlDialogError:"エラー",urlDialogErrorMessage:"URLからノートブックを取得できませんでした",urlDialogInvalidUrl:"有効なURLを入力してください（http://またはhttps://で始まる必要があります）"},"hi-IN":{title:"नोटबुक",addNotebook:"जोड़ें",blank:"खाली",fromTemplate:"टेम्प्लेट से",fromFile:"फ़ाइल से",fromUrl:"URL से",delete:"हटाएं",lastEdited:"अंतिम संपादन",back:"वापस",notebookViewer:"नोटबुक व्यूअर",saved:"सहेजा गया",saving:"सहेज रहे हैं...",saveError:"सहेजने में त्रुटि",loadingNotebook:"नोटबुक लोड हो रहा है...",failedToLoad:"नोटबुक लोड करने में विफल",backToNotebooks:"नोटबुक पर वापस जाएं",untitledNotebook:"बिना शीर्षक नोटबुक",justNow:"अभी",hoursAgo:"घंटे पहले",hourAgo:"घंटा पहले",daysAgo:"दिन पहले",dayAgo:"दिन पहले",urlDialogTitle:"URL से आयात करें",urlDialogLabel:"नोटबुक URL दर्ज करें",urlDialogOpen:"खोलें",urlDialogCancel:"बंद करें",urlDialogError:"त्रुटि",urlDialogErrorMessage:"URL से नोटबुक प्राप्त करने में विफल",urlDialogInvalidUrl:"कृपया एक वैध URL दर्ज करें (http:// या https:// से शुरू होना चाहिए)"},"fa-IR":{title:"دفترچه‌ها",addNotebook:"افزودن",blank:"خالی",fromTemplate:"از قالب",fromFile:"از فایل",fromUrl:"از URL",delete:"حذف",lastEdited:"آخرین ویرایش",back:"بازگشت",notebookViewer:"نمایشگر دفترچه",saved:"ذخیره شد",saving:"در حال ذخیره...",saveError:"خطا در ذخیره",loadingNotebook:"در حال بارگذاری دفترچه...",failedToLoad:"بارگذاری دفترچه ناموفق بود",backToNotebooks:"بازگشت به دفترچه‌ها",untitledNotebook:"دفترچه بدون عنوان",justNow:"همین الان",hoursAgo:"ساعت پیش",hourAgo:"ساعت پیش",daysAgo:"روز پیش",dayAgo:"روز پیش",urlDialogTitle:"وارد کردن از URL",urlDialogLabel:"URL دفترچه را وارد کنید",urlDialogOpen:"باز کردن",urlDialogCancel:"بستن",urlDialogError:"خطا",urlDialogErrorMessage:"دریافت دفترچه از URL ناموفق بود",urlDialogInvalidUrl:"لطفاً یک URL معتبر وارد کنید (باید با http:// یا https:// شروع شود)"}},wt={"en-US":{title:"Settings",appearance:"Appearance",language:"Language",about:"About",theme:"Theme",version:"Version",appName:"K12 Notebook - Web Shell",aiProviders:"AI Providers",add:"Add",providerName:"Provider Name",providerUrl:"Provider URL",apiKey:"API Key",models:"Models",refreshModels:"Refresh Models",defaultProvider:"Default Provider",removeProvider:"Remove Provider",editProvider:"Edit Provider",saveProvider:"Save Provider",cancelEdit:"Cancel",noProviders:"No AI providers configured",loadingModels:"Loading models...",errorLoadingModels:"Error loading models",invalidUrl:"Invalid URL format",providerNameRequired:"Provider name is required",apiKeyRequired:"API key is required",urlRequired:"URL is required",setDefault:"Set Default"},"ja-JP":{title:"設定",appearance:"外観",language:"言語",about:"について",theme:"テーマ",version:"バージョン",appName:"K12ノートブック - ウェブシェル",aiProviders:"AIプロバイダー",add:"追加",providerName:"プロバイダー名",providerUrl:"プロバイダーURL",apiKey:"APIキー",models:"モデル",refreshModels:"モデルを更新",defaultProvider:"デフォルトプロバイダー",removeProvider:"プロバイダーを削除",editProvider:"プロバイダーを編集",saveProvider:"プロバイダーを保存",cancelEdit:"キャンセル",noProviders:"AIプロバイダーが設定されていません",loadingModels:"モデルを読み込み中...",errorLoadingModels:"モデルの読み込みエラー",invalidUrl:"無効なURL形式",providerNameRequired:"プロバイダー名は必須です",apiKeyRequired:"APIキーは必須です",urlRequired:"URLは必須です",setDefault:"デフォルトに設定"},"hi-IN":{title:"सेटिंग्स",appearance:"दिखावट",language:"भाषा",about:"के बारे में",theme:"थीम",version:"संस्करण",appName:"K12 नोटबुक - वेब शेल",aiProviders:"AI प्रदाता",add:"जोड़ें",providerName:"प्रदाता का नाम",providerUrl:"प्रदाता URL",apiKey:"API की",models:"मॉडल",refreshModels:"मॉडल रीफ्रेश करें",defaultProvider:"डिफ़ॉल्ट प्रदाता",removeProvider:"प्रदाता हटाएं",editProvider:"प्रदाता संपादित करें",saveProvider:"प्रदाता सहेजें",cancelEdit:"रद्द करें",noProviders:"कोई AI प्रदाता कॉन्फ़िगर नहीं",loadingModels:"मॉडल लोड हो रहे हैं...",errorLoadingModels:"मॉडल लोड करने में त्रुटि",invalidUrl:"अमान्य URL प्रारूप",providerNameRequired:"प्रदाता का नाम आवश्यक है",apiKeyRequired:"API की आवश्यक है",urlRequired:"URL आवश्यक है",setDefault:"डिफ़ॉल्ट सेट करें"},"fa-IR":{title:"تنظیمات",appearance:"ظاهر",language:"زبان",about:"درباره",theme:"تم",version:"نسخه",appName:"دفترچه K12 - پوسته وب",aiProviders:"ارائه‌دهندگان هوش مصنوعی",add:"افزودن",providerName:"نام ارائه‌دهنده",providerUrl:"آدرس ارائه‌دهنده",apiKey:"کلید API",models:"مدل‌ها",refreshModels:"بروزرسانی مدل‌ها",defaultProvider:"ارائه‌دهنده پیش‌فرض",removeProvider:"حذف ارائه‌دهنده",editProvider:"ویرایش ارائه‌دهنده",saveProvider:"ذخیره ارائه‌دهنده",cancelEdit:"لغو",noProviders:"هیچ ارائه‌دهنده هوش مصنوعی پیکربندی نشده",loadingModels:"در حال بارگذاری مدل‌ها...",errorLoadingModels:"خطا در بارگذاری مدل‌ها",invalidUrl:"فرمت آدرس نامعتبر",providerNameRequired:"نام ارائه‌دهنده الزامی است",apiKeyRequired:"کلید API الزامی است",urlRequired:"آدرس الزامی است",setDefault:"تنظیم به عنوان پیش‌فرض"}},Ue={"en-US":{notebookStarting:"The notebook is starting up...",notebookStartError:"The notebook could not be started because of an error:",inputDialogTitle:"Enter Input",inputDialogLabel:"Input",inputDialogCancel:"Cancel",inputDialogSubmit:"Submit",globalsDialogTitle:"Global Variables",addVariable:"Add",variableName:"Variable Name",defaultValue:"Default Value",addLocale:"Add Locale",deleteVariable:"Delete Variable",save:"Save",cancel:"Cancel",languageOverride:"Language Override",noLanguageOverride:"None"},"ja-JP":{notebookStarting:"ノートブックを起動中...",notebookStartError:"エラーのためノートブックを起動できませんでした:",inputDialogTitle:"入力してください",inputDialogLabel:"入力",inputDialogCancel:"キャンセル",inputDialogSubmit:"送信",globalsDialogTitle:"グローバル変数",addVariable:"変数を追加",variableName:"変数名",defaultValue:"デフォルト値",addLocale:"ロケールを追加",deleteVariable:"変数を削除",save:"保存",cancel:"キャンセル",languageOverride:"言語オーバーライド",noLanguageOverride:"なし"},"hi-IN":{notebookStarting:"नोटबुक शुरू हो रहा है...",notebookStartError:"त्रुटि के कारण नोटबुक शुरू नहीं हो सका:",inputDialogTitle:"इनपुट दर्ज करें",inputDialogLabel:"इनपुट",inputDialogCancel:"रद्द करें",inputDialogSubmit:"जमा करें",globalsDialogTitle:"ग्लोबल वेरिएबल्स",addVariable:"वेरिएबल जोड़ें",variableName:"वेरिएबल नाम",defaultValue:"डिफ़ॉल्ट मान",addLocale:"लोकेल जोड़ें",deleteVariable:"वेरिएबल हटाएं",save:"सेव करें",cancel:"रद्द करें",languageOverride:"भाषा ओवरराइड",noLanguageOverride:"कोई नहीं"},"fa-IR":{notebookStarting:"دفترچه در حال راه‌اندازی است...",notebookStartError:"دفترچه به دلیل خطا راه‌اندازی نشد:",inputDialogTitle:"ورودی را وارد کنید",inputDialogLabel:"ورودی",inputDialogCancel:"لغو",inputDialogSubmit:"ارسال",globalsDialogTitle:"متغیرهای سراسری",addVariable:"افزودن متغیر",variableName:"نام متغیر",defaultValue:"مقدار پیش‌فرض",addLocale:"افزودن زبان",deleteVariable:"حذف متغیر",save:"ذخیره",cancel:"لغو",languageOverride:"بازنویسی زبان",noLanguageOverride:"هیچ"}},fo=["light","dark"],go="dark";class We{static async fetchModels(e,t){try{const o=`${e}/models`,r=await fetch(o,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return(await r.json()).data||[]}catch(o){throw console.error("Error fetching models:",o),o}}static validateUrl(e){try{return new URL(e),!0}catch{return!1}}static generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}}const bo=()=>{const l=localStorage.getItem("aiProviders");return l?JSON.parse(l):[]},we=l=>{localStorage.setItem("aiProviders",JSON.stringify(l))},R=Qe({theme:localStorage.getItem("theme")||go,locale:localStorage.getItem("locale")||mo,aiProviders:bo(),setTheme(l){this.theme=l,localStorage.setItem("theme",l)},setLocale(l){this.locale=l,localStorage.setItem("locale",l)},addProvider(l){const e={...l,id:We.generateId(),isDefault:this.aiProviders.length===0};this.aiProviders.push(e),we(this.aiProviders)},removeProvider(l){const e=this.aiProviders.findIndex(o=>o.id===l);if(e===-1)return;const t=this.aiProviders[e].isDefault;this.aiProviders.splice(e,1),t&&this.aiProviders.length>0&&(this.aiProviders[0].isDefault=!0),we(this.aiProviders)},updateProvider(l,e){const t=this.aiProviders.find(o=>o.id===l);t&&(Object.assign(t,e),we(this.aiProviders))},setDefaultProvider(l){this.aiProviders.forEach(t=>t.isDefault=!1);const e=this.aiProviders.find(t=>t.id===l);e&&(e.isDefault=!0,we(this.aiProviders))},getDefaultProvider(){return this.aiProviders.find(l=>l.isDefault)}}),ho={class:"d-flex justify-end mb-2"},_o={class:"d-flex align-center"},yo={class:"flex-grow-1"},ko={class:"text-h6 mb-1"},wo={class:"text-caption text-medium-emphasis mb-0"},xo=z({__name:"NotebookCard",props:{notebook:{}},emits:["delete"],setup(l,{emit:e}){const t=l,o=e,r=ot(),i=T(()=>Me[R.locale]),d=u=>{const b=Math.floor((new Date().getTime()-u.getTime())/(1e3*60*60));if(b<1)return i.value.justNow;if(b<24){const C=b===1?i.value.hourAgo:i.value.hoursAgo;return`${b} ${C}`}else{const C=Math.floor(b/24),V=C===1?i.value.dayAgo:i.value.daysAgo;return`${C} ${V}`}},n=()=>{r.push(`/notebooks/${t.notebook.id}`)},m=()=>{o("delete",t.notebook.id)};return(u,_)=>(p(),S(J,{class:"notebook-card",hover:"",onClick:n},{default:s(()=>[a(W,{class:"pb-2"},{default:s(()=>[g("div",ho,[a(tt,null,{activator:s(({props:b})=>[a(U,Xe({icon:"mdi-dots-vertical",variant:"text",size:"small"},b,{onClick:_[0]||(_[0]=Nt(()=>{},["stop"]))}),null,16)]),default:s(()=>[a(Pe,null,{default:s(()=>[a(se,{onClick:m},{default:s(()=>[a(ie,null,{default:s(()=>[y(h(i.value.delete),1)]),_:1})]),_:1})]),_:1})]),_:1})]),g("div",_o,[a(F,{icon:"mdi-notebook-outline",size:"large",color:"primary",class:"me-3"}),g("div",yo,[g("h3",ko,h(u.notebook.title),1),g("p",wo,h(i.value.lastEdited)+": "+h(d(u.notebook.lastModified||u.notebook.created)),1)])])]),_:1})]),_:1}))}}),H=(l,e)=>{const t=l.__vccOpts||l;for(const[o,r]of e)t[o]=r;return t},Co=H(xo,[["__scopeId","data-v-3a1233ae"]]),So="NotebookDB",Y="notebooks",Lo=2,Ae=async()=>new Promise((l,e)=>{const t=indexedDB.open(So,Lo);t.onerror=()=>e(t.error),t.onsuccess=()=>l(t.result),t.onupgradeneeded=o=>{const r=t.result;if(r.objectStoreNames.contains(Y)){if(o.oldVersion<2){const i=t.transaction;if(i){const d=i.objectStore(Y);d.openCursor().onsuccess=n=>{const m=n.target.result;if(m){const u=m.value;u.created||(u.created=u.lastModified||Date.now(),m.update(u)),m.continue()}}}}}else{const i=r.createObjectStore(Y,{keyPath:"id"});i.createIndex("lastModified","lastModified"),i.createIndex("created","created")}}}),Re=async(l,e)=>{const t=await Ae();if(!t.objectStoreNames.contains(Y))throw new Error("Database not properly initialized");return new Promise((o,r)=>{try{const i=t.transaction(Y,"readwrite"),d=i.objectStore(Y),n=d.get(l);n.onsuccess=()=>{const m=n.result,u=Date.now(),_={id:l,notebook:e,lastModified:u,created:(m==null?void 0:m.created)||u},b=d.put(_);b.onsuccess=()=>o(),b.onerror=()=>r(b.error)},n.onerror=()=>r(n.error),i.oncomplete=()=>t.close()}catch(i){r(i)}})},xt=async l=>{const e=await Ae();if(!e.objectStoreNames.contains(Y))throw new Error("Database not properly initialized");return new Promise((t,o)=>{try{const r=e.transaction(Y,"readonly"),d=r.objectStore(Y).get(l);d.onsuccess=()=>{const n=d.result;if(!n){o(new Error("Notebook not found"));return}t(n.notebook)},d.onerror=()=>o(d.error),r.oncomplete=()=>e.close()}catch(r){o(r)}})},xe=async()=>{const l=await Ae();if(!l.objectStoreNames.contains(Y))throw new Error("Database not properly initialized");return new Promise((e,t)=>{try{const o=l.transaction(Y,"readonly"),i=o.objectStore(Y).getAll();i.onsuccess=()=>{const n=i.result.map(m=>{var u;return{id:m.id,title:((u=m.notebook.metadata)==null?void 0:u.title)||"Untitled Notebook",lastModified:new Date(m.lastModified),created:new Date(m.created)}});n.sort((m,u)=>u.created.getTime()-m.created.getTime()),e(n)},i.onerror=()=>t(i.error),o.oncomplete=()=>l.close()}catch(o){t(o)}})},Eo=async l=>{const e=await Ae();if(!e.objectStoreNames.contains(Y))throw new Error("Database not properly initialized");return new Promise((t,o)=>{try{const r=e.transaction(Y,"readwrite");r.objectStore(Y).delete(l),r.oncomplete=()=>t(),r.onerror=()=>o(r.error)}catch(r){o(r)}})},Vo=async()=>{try{const l=await fetch("./templates/blank.ipynb");if(!l.ok)throw new Error(`Failed to load blank notebook template: ${l.statusText}`);const e=await l.json();return e.cells.forEach(t=>{t.id||(t.id=de())}),e}catch(l){throw new Error(`Failed to load blank notebook template: ${l instanceof Error?l.message:String(l)}`)}},$o=async l=>new Promise((e,t)=>{const o=new FileReader;o.onload=async r=>{var i;try{const d=(i=r.target)==null?void 0:i.result,n=JSON.parse(d);if(!n.cells||!Array.isArray(n.cells))throw new Error("Invalid notebook format: missing or invalid cells array");n.metadata||(n.metadata={}),n.nbformat||(n.nbformat=4),n.nbformat_minor||(n.nbformat_minor=2),n.cells.forEach(u=>{u.id||(u.id=de()),u.metadata||(u.metadata={}),u.source||(u.source=[])}),n.metadata.title||(n.metadata.title=l.name.replace(".ipynb","")||"Imported Notebook");const m=de();await Re(m,n),e(m)}catch(d){t(new Error(`Failed to parse notebook file: ${d instanceof Error?d.message:String(d)}`))}},o.onerror=()=>{t(new Error("Failed to read the selected file"))},o.readAsText(l)}),Io=l=>{try{const e=new URL(l);return e.protocol==="http:"||e.protocol==="https:"}catch{return!1}},Po=async l=>{if(!Io(l))throw new Error("Please enter a valid URL (must start with http:// or https://)");try{const e=await fetch(l);if(!e.ok)throw new Error(`Failed to fetch notebook: ${e.status} ${e.statusText}`);const t=await e.text(),o=JSON.parse(t);if(!o.cells||!Array.isArray(o.cells))throw new Error("Invalid notebook format: missing or invalid cells array");if(o.metadata||(o.metadata={}),o.nbformat||(o.nbformat=4),o.nbformat_minor||(o.nbformat_minor=2),o.cells.forEach(i=>{i.id||(i.id=de()),i.metadata||(i.metadata={}),i.source||(i.source=[])}),!o.metadata.title){const d=new URL(l).pathname.split("/").pop()||"imported-notebook.ipynb";o.metadata.title=d.replace(".ipynb","")||"Imported Notebook"}const r=de();return await Re(r,o),r}catch(e){throw e instanceof Error?e:new Error(`Failed to import notebook from URL: ${String(e)}`)}},No=z({__name:"UrlInputDialog",props:{show:{type:Boolean}},emits:["cancel","submit"],setup(l,{emit:e}){const t=l,o=e,r=T(()=>Me[R.locale]),i=E(""),d=E(),n=E(""),m=()=>{const b=i.value.trim();if(!b){n.value=r.value.urlDialogInvalidUrl;return}try{const C=new URL(b);if(C.protocol!=="http:"&&C.protocol!=="https:"){n.value=r.value.urlDialogInvalidUrl;return}}catch{n.value=r.value.urlDialogInvalidUrl;return}n.value="",o("submit",b),i.value=""},u=()=>{o("cancel"),i.value="",n.value=""};G(()=>t.show,async b=>{var C;b&&(await Ie(),(C=d.value)==null||C.focus(),n.value="")});const _=b=>{b.key==="Enter"?(b.preventDefault(),m()):b.key==="Escape"&&(b.preventDefault(),u())};return G(i,()=>{n.value&&(n.value="")}),(b,C)=>(p(),S(Ne,{"model-value":b.show,"max-width":"500px",persistent:"",onKeydown:_},{default:s(()=>[a(J,null,{default:s(()=>[a(re,null,{default:s(()=>[y(h(r.value.urlDialogTitle),1)]),_:1}),a(W,null,{default:s(()=>[a(Z,{ref_key:"inputFieldRef",ref:d,modelValue:i.value,"onUpdate:modelValue":C[0]||(C[0]=V=>i.value=V),label:r.value.urlDialogLabel,"error-messages":n.value,variant:"outlined",density:"compact",placeholder:"https://example.com/notebook.ipynb",onKeydown:_},null,8,["modelValue","label","error-messages"])]),_:1}),a(ye,null,{default:s(()=>[a(Te),a(U,{color:"grey",variant:"text",onClick:u},{default:s(()=>[y(h(r.value.urlDialogCancel),1)]),_:1}),a(U,{color:"primary",variant:"text",onClick:m},{default:s(()=>[y(h(r.value.urlDialogOpen),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),To={class:"notebook-index"},Do={class:"d-flex align-center mb-6 header-container"},Mo={class:"text-h4 notebook-title flex-grow-1"},Uo={key:0,class:"text-center mt-8"},Ao=z({__name:"NotebookIndex",setup(l){const e=T(()=>Me[R.locale]),t=T(()=>ce[R.locale].direction==="rtl"),o=E([]),r=E(!1),i=E({show:!1,title:"",message:""});X(async()=>{try{const V=await xe();o.value=V}catch(V){console.error("Failed to load notebooks:",V)}});const d=async V=>{try{await Eo(V);const $=o.value.findIndex(f=>f.id===V);$>-1&&o.value.splice($,1),console.log("Notebook deleted successfully:",V)}catch($){console.error("Failed to delete notebook:",$)}},n=async()=>{try{console.log("Create blank notebook");const V=await Vo(),$=de();await Re($,V),console.log("Created notebook with id:",$);const f=await xe();o.value=f}catch(V){console.error("Failed to create blank notebook:",V)}},m=async()=>{try{const V=document.createElement("input");V.type="file",V.accept=".ipynb",V.style.display="none",V.onchange=async $=>{var w;const f=(w=$.target.files)==null?void 0:w[0];if(!f){console.log("No file selected");return}try{const I=await $o(f);console.log("Notebook imported successfully:",I);const K=await xe();o.value=K}catch(I){console.error("Failed to import notebook:",I),alert(`Failed to import notebook: ${I instanceof Error?I.message:"Unknown error"}`)}},document.body.appendChild(V),V.click(),document.body.removeChild(V)}catch(V){console.error("Failed to import notebook:",V),alert("Failed to import notebook. Please try again.")}},u=()=>{r.value=!0},_=async V=>{r.value=!1;try{console.log("Importing notebook from URL:",V);const $=await Po(V);console.log("Notebook imported successfully:",$);const f=await xe();o.value=f}catch($){console.error("Failed to import notebook from URL:",$),setTimeout(()=>{i.value={show:!0,title:e.value.urlDialogError,message:$ instanceof Error?$.message:e.value.urlDialogErrorMessage}},150)}},b=()=>{r.value=!1},C=()=>{i.value.show=!1};return(V,$)=>(p(),k("div",To,[a(De,{fluid:"",class:"pa-4"},{default:s(()=>[g("div",Do,[g("h1",Mo,h(e.value.title),1),a(tt,null,{activator:s(({props:f})=>[a(U,Xe({color:"primary"},f,{"prepend-icon":t.value?void 0:"mdi-plus","append-icon":t.value?"mdi-plus":void 0}),{default:s(()=>[y(h(e.value.addNotebook),1)]),_:2},1040,["prepend-icon","append-icon"])]),default:s(()=>[a(Pe,null,{default:s(()=>[a(se,{onClick:n},{default:s(()=>[a(ie,null,{default:s(()=>[y(h(e.value.blank),1)]),_:1})]),_:1}),a(se,{onClick:m},{default:s(()=>[a(ie,null,{default:s(()=>[y(h(e.value.fromFile),1)]),_:1})]),_:1}),a(se,{onClick:u},{default:s(()=>[a(ie,null,{default:s(()=>[y(h(e.value.fromUrl),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a(ke,null,{default:s(()=>[(p(!0),k(Q,null,te(o.value,f=>(p(),S(oe,{key:f.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:s(()=>[a(Co,{notebook:f,onDelete:d},null,8,["notebook"])]),_:2},1024))),128))]),_:1}),o.value.length===0?(p(),k("div",Uo,[a(F,{icon:"mdi-notebook-outline",size:"64",color:"grey"}),$[1]||($[1]=g("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No notebooks yet",-1)),$[2]||($[2]=g("p",{class:"text-body-2 text-medium-emphasis"},"Create your first notebook to get started",-1))])):D("",!0)]),_:1}),a(No,{show:r.value,onSubmit:_,onCancel:b},null,8,["show"]),a(Ne,{modelValue:i.value.show,"onUpdate:modelValue":$[0]||($[0]=f=>i.value.show=f),"max-width":"400px"},{default:s(()=>[a(J,null,{default:s(()=>[a(re,null,{default:s(()=>[y(h(i.value.title),1)]),_:1}),a(W,null,{default:s(()=>[g("p",null,h(i.value.message),1)]),_:1}),a(ye,null,{default:s(()=>[a(Te),a(U,{color:"primary",variant:"text",onClick:C},{default:s(()=>[y(h(e.value.urlDialogCancel),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),Ro=H(Ao,[["__scopeId","data-v-32f10594"]]),Oo={cells:[],metadata:{},nbformat:4,nbformat_minor:2},N=Qe({content:{},updated:null,clear(){this.updated=null,this.content=Oo},findCell(l){return this.content.cells?this.content.cells.find(e=>e.id===l):null},getSource(l){const e=this.findCell(l);return e?e.source:null},setSource(l,e){const t=this.findCell(l);t&&(e=e.map(o=>o+`
`),t.source=e,this.updated=Date.now())},getLocalizedSource(l,e){const t=this.findCell(l);if(!t)return;let o=t.source;return e===null||t.metadata.i18n&&t.metadata.i18n[e]&&(o=t.metadata.i18n[e]),o},setLocalizedSource(l,e,t){const o=this.findCell(l);o&&(t===null?this.setSource(l,e):(e=e.map(r=>r+`
`),o.metadata.i18n||(o.metadata.i18n={}),o.metadata.i18n[t]=e,this.updated=Date.now()))},parseGlobals(l,e){var r;if(e===null)return l;const t=(r=this.content.metadata)==null?void 0:r.globals;return t?l.map(i=>i.replace(/\{\{\s*(\w+)\s*\}\}/g,(d,n)=>{const m=t[n];if(!m)return d;const u=m[e]||m.default;return u===void 0?d:`${u}`})):l},clearOutputs(l){const e=this.findCell(l);e&&(e.outputs=[],this.updated=Date.now())},getOutputTypes(l){var o,r,i;let e=[];const t=this.findCell(l);return t&&(((o=t.outputs)==null?void 0:o.findIndex(d=>d.output_type==="execute_result"))!==-1&&e.push("result"),((r=t.outputs)==null?void 0:r.findIndex(d=>d.output_type==="stream"&&d.name==="stdout"))!==-1&&e.push("stdout"),((i=t.outputs)==null?void 0:i.findIndex(d=>d.output_type==="error"))!==-1&&e.push("error")),e},addStdout(l,e){const t=this.findCell(l);if(t){t.outputs||(t.outputs=[]);const o=t.outputs.findIndex(r=>r.output_type==="stream"&&r.name==="stdout");o!==-1?(t.outputs[o].text||(t.outputs[o].text=[]),t.outputs[o].text.push(e)):t.outputs.push({output_type:"stream",name:"stdout",text:[e]}),this.updated=Date.now()}},getStdout(l){var o;let e="";const t=this.findCell(l);return t&&((o=t.outputs)==null||o.forEach(r=>{var i;r.output_type==="stream"&&(e+=((i=r.text)==null?void 0:i.join(""))||"")})),e},setResult(l,e){const t=this.findCell(l);if(t){t.outputs||(t.outputs=[]);const o=t.outputs.findIndex(r=>r.output_type==="execute_result");if(o!==-1){const r=t.outputs[o].data||{};t.outputs[o].data={...r,...e}}else t.outputs.push({output_type:"execute_result",data:e});this.updated=Date.now()}},getResult(l){var o;let e={};const t=this.findCell(l);return t&&((o=t.outputs)==null||o.forEach(r=>{r.output_type==="execute_result"&&r.data&&(e=r.data)})),e},setError(l,e){const t=this.findCell(l);if(t){t.outputs||(t.outputs=[]);const o=Array.isArray(e)?e:e.split(`
`);t.outputs.push({output_type:"error",traceback:o}),this.updated=Date.now()}},getError(l){var o;let e="";const t=this.findCell(l);return t&&((o=t.outputs)==null||o.forEach(r=>{var i;r.output_type==="error"&&(e+=((i=r.traceback)==null?void 0:i.join(""))||"")})),e},loadNotebook(l){l.cells&&(l.cells.forEach(e=>{(!e.id||typeof e.id!="string"||e.id.trim()==="")&&(e.id=de())}),this.content=l)},hasTag(l,e){const t=this.findCell(l);return!t||!t.metadata.tags?!1:t.metadata.tags.includes(e)},addTag(l,e){const t=this.findCell(l);t&&(t.metadata.tags||(t.metadata.tags=[]),t.metadata.tags.includes(e)||(t.metadata.tags.push(e),this.updated=Date.now()))},removeTag(l,e){const t=this.findCell(l);if(t&&t.metadata.tags){const o=t.metadata.tags.indexOf(e);o!==-1&&(t.metadata.tags.splice(o,1),this.updated=Date.now())}},toggleTag(l,e){this.hasTag(l,e)?this.removeTag(l,e):this.addTag(l,e)},getGlobals(){return this.content.metadata||(this.content.metadata={}),this.content.metadata.globals||(this.content.metadata.globals={}),this.content.metadata.globals},setGlobal(l,e){const t=this.getGlobals();t[l]=e,this.updated=Date.now()},deleteGlobal(l){const e=this.getGlobals();delete e[l],this.updated=Date.now()}}),zo=2e3,Bo=2e3;function Fo(l){const e=E("idle"),t=E(null);let o=null;const r=async d=>{o&&clearTimeout(o),o=setTimeout(async()=>{try{console.log(`Auto-Save: Saving Notebook ${l}`),e.value="saving";const n=JSON.parse(JSON.stringify(d));await Re(l,n),e.value="saved",t.value=new Date,console.log(`Auto-Save: Saved Notebook ${l}`),setTimeout(()=>{e.value==="saved"&&(e.value="idle")},Bo)}catch(n){console.error("Auto-Save: Failed:",n),e.value="error"}},zo)},i=G(()=>N.updated,()=>{var d;N.updated!=null&&N.content&&((d=N.content.cells)==null?void 0:d.length)>0&&r(N.content)});return{saveStatus:e,lastSaved:t,stopWatcher:i}}const A=Qe({executionStatus:"idle",workerStatus:"initializing",runningCellId:null,interruptBuffer:null,fatalErrorTrace:"",inputStatus:"idle",inputPrompt:null,userInput:null,setInterruptBuffer(l){this.interruptBuffer=l},clearInterruptBuffer(){this.interruptBuffer&&(this.interruptBuffer[0]=0)},interruptExecution(){this.interruptBuffer&&(this.interruptBuffer[0]=2),this.executionStatus="idle"},setWorkerStatus(l){this.workerStatus=l},executeCell(l){this.executionStatus==="idle"&&this.workerStatus==="ready"&&(this.runningCellId=l,this.executionStatus="queued")},executionCompleted(){this.runningCellId=null,this.executionStatus="idle"},setFatalError(l){this.workerStatus="error",this.fatalErrorTrace=l},requestUserInput(l){this.inputStatus="waiting",this.userInput=null,this.inputPrompt=l},submitUserInput(l){this.inputStatus="submitted",this.userInput=l}}),jo=["innerHTML"],Ko=z({__name:"MarkdownCell",props:{cell:{},locale:{},editMode:{type:Boolean}},setup(l){const e=l,t=E("");G([()=>e.editMode,()=>e.locale],([d,n])=>{if(d){const m=N.getLocalizedSource(e.cell.id,n);t.value=m?m.join(""):""}},{immediate:!0});const o=d=>{const n=d.split(`
`);N.setLocalizedSource(e.cell.id,n,e.locale)},r=d=>d?_t.parse(d.join("")):"",i=T(()=>{const d=N.getLocalizedSource(e.cell.id,e.locale)||[];return N.parseGlobals(d,e.locale)});return(d,n)=>(p(),S(J,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:s(()=>[a(W,null,{default:s(()=>[d.editMode?(p(),S(zt,{key:1,modelValue:t.value,"onUpdate:modelValue":[n[0]||(n[0]=m=>t.value=m),o],variant:"outlined","auto-grow":"",rows:"3","hide-details":"",class:"markdown-editor"},null,8,["modelValue"])):(p(),k("div",{key:0,innerHTML:r(i.value)},null,8,jo))]),_:1})]),_:1}))}}),Ct=H(Ko,[["__scopeId","data-v-7b690760"]]),qo=z({__name:"CodeControls",props:{id:{}},setup(l){const e=l,t=()=>{N.clearOutputs(e.id),A.executeCell(e.id)},o=()=>{N.clearOutputs(e.id)},r=()=>{A.interruptExecution()},i=T(()=>N.hasTag(e.id,"hide_code")),d=()=>{N.toggleTag(e.id,"hide_code")};return(n,m)=>(p(),k("div",null,[g("div",null,[a(Le,{rounded:"lg"},{default:s(()=>[a(U,{size:"32",icon:"mdi-play-outline",onClick:t,disabled:P(A).executionStatus!=="idle"||P(A).workerStatus!=="ready",loading:P(A).workerStatus!=="ready","aria-label":"Run code"},null,8,["disabled","loading"]),a(U,{size:"32",icon:"mdi-stop",onClick:r,disabled:P(A).executionStatus==="idle"||P(A).runningCellId!==n.id,"aria-label":"Stop code"},null,8,["disabled"])]),_:1}),a(Le,{rounded:"lg",class:"pl-4"},{default:s(()=>[a(U,{size:"32",icon:"mdi-broom",onClick:o})]),_:1}),a(Le,{rounded:"lg",class:"pl-2"},{default:s(()=>[a(U,{size:"32",icon:i.value?"mdi-eye-off":"mdi-eye",onClick:d,"aria-label":i.value?"Show code":"Hide code"},null,8,["icon","aria-label"])]),_:1})])]))}}),rt="#2e3440",St="#3b4252",st="#434c5e",Ce="#4c566a",Ge="#e5e9f0",Ye="#eceff4",Fe="#8fbcbb",it="#88c0d0",Ho="#81a1c1",ee="#5e81ac",Jo="#bf616a",me="#d08770",je="#ebcb8b",ut="#a3be8c",Wo="#b48ead",dt="#d30102",lt=Ye,Ke=lt,Go="#ffffff",qe=Ge,Yo=lt,ct=St,Zo=he.theme({"&":{color:rt,backgroundColor:Go},".cm-content":{caretColor:ct,fontFamily:"JetBrainsMono, monospace"},".cm-cursor, .cm-dropCursor":{borderLeftColor:ct},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Yo},".cm-panels":{backgroundColor:lt,color:Ce},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:`1px solid ${Ce}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:Ge},".cm-activeLine":{backgroundColor:Ke},".cm-selectionMatch":{backgroundColor:Ge},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${Ce}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:Ye},".cm-gutters":{backgroundColor:Ye,color:rt,border:"none"},".cm-activeLineGutter":{backgroundColor:Ke},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:qe},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:qe,borderBottomColor:qe},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Ke,color:Ce}}},{dark:!1}),Qo=yt.define([{tag:c.keyword,color:ee},{tag:[c.name,c.deleted,c.character,c.propertyName,c.macroName],color:me},{tag:[c.variableName],color:me},{tag:[c.function(c.variableName)],color:ee},{tag:[c.labelName],color:Ho},{tag:[c.color,c.constant(c.name),c.standard(c.name)],color:ee},{tag:[c.definition(c.name),c.separator],color:ut},{tag:[c.brace],color:Fe},{tag:[c.annotation],color:dt},{tag:[c.number,c.changed,c.annotation,c.modifier,c.self,c.namespace],color:it},{tag:[c.typeName,c.className],color:je},{tag:[c.operator,c.operatorKeyword],color:ut},{tag:[c.tagName],color:Wo},{tag:[c.squareBracket],color:Jo},{tag:[c.angleBracket],color:me},{tag:[c.attributeName],color:je},{tag:[c.regexp],color:ee},{tag:[c.quote],color:St},{tag:[c.string],color:me},{tag:c.link,color:Fe,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[c.url,c.escape,c.special(c.string)],color:me},{tag:[c.meta],color:it},{tag:[c.comment],color:st,fontStyle:"italic"},{tag:c.strong,fontWeight:"bold",color:ee},{tag:c.emphasis,fontStyle:"italic",color:ee},{tag:c.strikethrough,textDecoration:"line-through"},{tag:c.heading,fontWeight:"bold",color:ee},{tag:c.special(c.heading1),fontWeight:"bold",color:ee},{tag:c.heading1,fontWeight:"bold",color:ee},{tag:[c.heading2,c.heading3,c.heading4],fontWeight:"bold",color:ee},{tag:[c.heading5,c.heading6],color:ee},{tag:[c.atom,c.bool,c.special(c.variableName)],color:me},{tag:[c.processingInstruction,c.inserted],color:Fe},{tag:[c.contentSeparator],color:je},{tag:c.invalid,color:st,borderBottom:`1px dotted ${dt}`}]),Xo=[Zo,kt(Qo)],Lt="#2e3235",Et="#505d64",Ze="#606f7a",$e="#707d8b",ea="#a0a4ae",Ve="#bdbdbd",ta="#e0e0e0",oa="#fdf6e3",pe="#ff5f52",aa="#ff6e40",la="#fa5788",ae="#facf4e",mt="#ffad42",ge="#56c8d8",na="#7186f0",He="#cf6edf",ra="#6abf69",pt="#99d066",vt="#4ebaaa",ft=pe,gt="#202325",Se="#414b46",sa=Lt,Je=Et,ia=Et,bt=ea,ua=he.theme({"&":{color:Ve,backgroundColor:sa},".cm-content":{caretColor:bt,fontFamily:"JetBrainsMono, monospace"},".cm-cursor, .cm-dropCursor":{borderLeftColor:bt},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:ia},".cm-panels":{backgroundColor:gt,color:$e},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{outline:`1px solid ${ae}`,backgroundColor:"transparent"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:Se},".cm-activeLine":{backgroundColor:Se},".cm-selectionMatch":{backgroundColor:gt,outline:`1px solid ${vt}`},"&.cm-focused .cm-matchingBracket":{color:ta,outline:`1px solid ${vt}`},"&.cm-focused .cm-nonmatchingBracket":{color:pe},".cm-gutters":{backgroundColor:Lt,borderRight:"1px solid #4f5b66",color:Ze},".cm-activeLineGutter":{backgroundColor:Se,color:oa},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Je},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Je,borderBottomColor:Je},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Se,color:$e}}},{dark:!0}),da=yt.define([{tag:c.keyword,color:He},{tag:[c.name,c.deleted,c.character,c.macroName],color:ge},{tag:[c.propertyName],color:ae},{tag:[c.variableName],color:Ve},{tag:[c.function(c.variableName)],color:ge},{tag:[c.labelName],color:He},{tag:[c.color,c.constant(c.name),c.standard(c.name)],color:ae},{tag:[c.definition(c.name),c.separator],color:la},{tag:[c.brace],color:He},{tag:[c.annotation],color:ft},{tag:[c.number,c.changed,c.annotation,c.modifier,c.self,c.namespace],color:mt},{tag:[c.typeName,c.className],color:mt},{tag:[c.operator,c.operatorKeyword],color:na},{tag:[c.tagName],color:aa},{tag:[c.squareBracket],color:pe},{tag:[c.angleBracket],color:Ze},{tag:[c.attributeName],color:Ve},{tag:[c.regexp],color:ft},{tag:[c.quote],color:ra},{tag:[c.string],color:pt},{tag:c.link,color:ge,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[c.url,c.escape,c.special(c.string)],color:ae},{tag:[c.meta],color:$e},{tag:[c.comment],color:$e,fontStyle:"italic"},{tag:c.monospace,color:Ve},{tag:c.strong,fontWeight:"bold",color:pe},{tag:c.emphasis,fontStyle:"italic",color:pt},{tag:c.strikethrough,textDecoration:"line-through"},{tag:c.heading,fontWeight:"bold",color:ae},{tag:c.heading1,fontWeight:"bold",color:ae},{tag:[c.heading2,c.heading3,c.heading4],fontWeight:"bold",color:ae},{tag:[c.heading5,c.heading6],color:ae},{tag:[c.atom,c.bool,c.special(c.variableName)],color:ge},{tag:[c.processingInstruction,c.inserted],color:pe},{tag:[c.contentSeparator],color:ge},{tag:c.invalid,color:Ze,borderBottom:`1px dotted ${pe}`}]),ca=[ua,kt(da)],ma=["id"],pa=z({__name:"CodeEditor",props:{metadata:{},id:{},theme:{},editMode:{type:Boolean},locale:{}},setup(l){const e=l;let t=null,o=!1;const r=T(()=>{const i=N.getSource(e.id)||[];return e.editMode?i:N.parseGlobals(i,e.locale)});return X(()=>{let i=Xo;switch(e.theme){case"dark":i=ca;break}const d=ro.create({doc:r.value?r.value.join(""):"",extensions:[io,so(),i,he.lineWrapping,he.updateListener.of(n=>{if(n.docChanged&&!o){const m=n.state.doc.toString();N.setSource(e.id,m.includes(`
`)?m.split(`
`):[m])}})]});t=new he({state:d,parent:document.getElementById("code-editor-"+e.id)})}),G(()=>r.value,i=>{if(t&&i&&!o){const d=t.state.doc.toString(),n=i.join(""),m=d.replace(/\n+$/,""),u=n.replace(/\n+$/,"");m!==u&&(o=!0,t.dispatch({changes:{from:0,to:t.state.doc.length,insert:n}}),o=!1)}},{deep:!0}),(i,d)=>(p(),k("div",{id:`code-editor-${e.id}`},null,8,ma))}}),va=z({__name:"Console",props:{stdout:{}},setup(l){const e=l,t=E(null),o=()=>{if(!t.value)return;const n=`${(e.stdout?e.stdout.split(`
`).length:1)*1.2+1.5}em`;t.value.style.height=n};return G(()=>e.stdout,()=>{o()},{immediate:!0}),X(()=>{o()}),(r,i)=>(p(),k("textarea",{ref_key:"consoleRef",ref:t,class:"output-console",readonly:""},h(r.stdout),513))}}),fa=H(va,[["__scopeId","data-v-43c05e2b"]]),ga={class:"output-console",readonly:""},ba=z({__name:"Error",props:{stderr:{}},setup(l){return(e,t)=>(p(),k("textarea",ga,h(e.stderr),1))}}),ha=H(ba,[["__scopeId","data-v-62cb5501"]]),_a=z({__name:"TextPlain",props:{value:{}},setup(l){const e=E(null);return(t,o)=>(p(),k("textarea",{ref_key:"consoleRef",ref:e,class:"output-console",readonly:""},h(Array.isArray(t.value)?t.value.join(""):t.value),513))}}),ya=H(_a,[["__scopeId","data-v-6e2abbc4"]]),ka=["src"],wa=z({__name:"ImagePng",props:{value:{}},setup(l){return(e,t)=>(p(),k("img",{src:`data:image/png;base64,${e.value}`},null,8,ka))}}),xa=["src"],Ca=z({__name:"ImageSvg",props:{value:{}},setup(l){return(e,t)=>(p(),k("img",{src:`data:image/svg+xml;charset=utf-8,${encodeURIComponent(e.value)}`},null,8,xa))}}),Sa=z({__name:"Result",props:{value:{}},setup(l){return(e,t)=>(p(),k(Q,null,[e.value["image/svg+xml"]?(p(),S(Ca,{key:0,value:e.value["image/svg+xml"]},null,8,["value"])):D("",!0),e.value["image/png"]?(p(),S(wa,{key:1,value:e.value["image/png"]},null,8,["value"])):D("",!0),e.value["text/plain"]?(p(),S(ya,{key:2,value:e.value["text/plain"]},null,8,["value"])):D("",!0)],64))}});function La(l){if(!l)return[];const e=[];return l.forEach((t,o)=>{const i=t.replace(/\n$/,"").trim();if(!i||i.startsWith("#"))return;const d=i.match(/^(\w+)\s*=\s*(.+?)\s*#\s*@param(.*)$/);if(!d)return;const[,n,m,u]=d;try{const _=Ea(m),b=Va(u.trim()),C=$a(_,b);e.push({name:n,value:_,type:C,config:b,lineNumber:o})}catch(_){console.warn(`Failed to parse parameter on line ${o+1}: ${t}`,_)}}),e}function Ea(l){const e=l.trim();if(e==="True")return!0;if(e==="False")return!1;if(e==="None")return null;const t=e.match(/^["'](.*)["']$/);return t?t[1]:e.match(/^-?\d+\.?\d*$/)?e.includes(".")?parseFloat(e):parseInt(e,10):e}function Va(l){if(!l)return{};const e=l.match(/^\[(.+)\]$/);if(e)return{options:e[1].split(",").map(i=>{const d=i.trim(),n=d.match(/^["'](.*)["']$/);return n?n[1]:d})};const t=l.match(/^\{(.+)\}$/);if(t)try{const o=t[1],r={};return o.split(",").forEach(d=>{const[n,m]=d.split(":").map(u=>u.trim());if(n&&m){const u=n.replace(/["']/g,""),_=m.replace(/["']/g,"");u==="type"?r.type=_:(u==="min"||u==="max"||u==="step")&&(r[u]=parseFloat(_))}}),r}catch{return console.warn("Failed to parse config JSON:",l),{}}return{}}function $a(l,e){return e.type==="slider"?"slider":e.type==="boolean"?"boolean":e.options&&e.options.length>0?"dropdown":typeof l=="boolean"?"boolean":"value"}function Ia(l,e,t){if(!l||e.lineNumber>=l.length)return l;const o=[...l],r=o[e.lineNumber],i=r.endsWith(`
`),n=r.replace(/\n$/,"").match(/^(\w+\s*=\s*)(.+?)(\s*#\s*@param.*)$/);if(n){const[,m,,u]=n,_=Pa(t);o[e.lineNumber]=`${m}${_}${u}${i?`
`:""}`}return o}function Pa(l){return typeof l=="boolean"?l?"True":"False":l==null?"None":typeof l=="string"?`"${l}"`:String(l)}const Na={key:0,class:"parameter-controls mb-4"},Ta={class:"parameter-grid"},Da={key:1,class:"slider-container"},Ma={class:"slider-layout"},Ua={key:3,class:"boolean-container"},Aa=z({__name:"ParameterControls",props:{source:{},cellId:{}},emits:["parameter-changed"],setup(l,{emit:e}){const t=l,o=e,r=T(()=>La(t.source)),i=(n,m)=>{if(!t.source)return;const u=Ia(t.source,n,m);o("parameter-changed",u)},d=n=>n.name.replace(/_/g," ").toLowerCase().replace(/\b\w/g,m=>m.toUpperCase());return(n,m)=>r.value.length>0?(p(),k("div",Na,[a(J,{variant:"outlined",class:"pa-4"},{default:s(()=>[g("div",Ta,[(p(!0),k(Q,null,te(r.value,u=>{var _,b,C,V;return p(),k("div",{key:u.name,class:"parameter-item"},[u.type==="value"?(p(),S(Z,{key:0,label:d(u),"model-value":u.value,"onUpdate:modelValue":$=>i(u,$),variant:"outlined",density:"compact","hide-details":""},null,8,["label","model-value","onUpdate:modelValue"])):u.type==="slider"?(p(),k("div",Da,[a(Bt,{class:"text-caption mb-1"},{default:s(()=>[y(h(d(u)),1)]),_:2},1024),g("div",Ma,[a(Ft,{"model-value":u.value,"onUpdate:modelValue":$=>i(u,$),min:((_=u.config)==null?void 0:_.min)??0,max:((b=u.config)==null?void 0:b.max)??100,step:((C=u.config)==null?void 0:C.step)??1,"thumb-label":"",class:"slider-control","hide-details":""},null,8,["model-value","onUpdate:modelValue","min","max","step"]),a(Z,{"model-value":u.value,readonly:"",variant:"outlined",density:"compact",class:"value-display","hide-details":""},null,8,["model-value"])])])):u.type==="dropdown"?(p(),S(ve,{key:2,label:d(u),"model-value":u.value,"onUpdate:modelValue":$=>i(u,$),items:((V=u.config)==null?void 0:V.options)||[],variant:"outlined",density:"compact","hide-details":""},null,8,["label","model-value","onUpdate:modelValue","items"])):u.type==="boolean"?(p(),k("div",Ua,[a(jt,{"model-value":u.value,"onUpdate:modelValue":$=>i(u,$),label:d(u),color:"primary","hide-details":"",inset:""},null,8,["model-value","onUpdate:modelValue","label"])])):D("",!0)])}),128))])]),_:1})])):D("",!0)}}),Ra=H(Aa,[["__scopeId","data-v-9ab33d5a"]]),Vt=z({__name:"CodeCell",props:{cell:{},theme:{},locale:{},editMode:{type:Boolean}},setup(l){const e=l;let t=[];t=N.getOutputTypes(e.cell.id);const o=()=>{if(t.indexOf("result")!==-1)return"result";if(t.indexOf("stdout")!==-1)return"stdout";if(t.indexOf("error")!==-1)return"error"},r=E("result");G(()=>e.cell.outputs,()=>{t=N.getOutputTypes(e.cell.id),r.value="none",r.value=o()||r.value},{deep:!0});const i=m=>{const u=N.findCell(e.cell.id);u&&(u.source=m,N.updated=Date.now())},d=T(()=>N.hasTag(e.cell.id,"hide_code")),n=T(()=>{const m=e.locale,u=N.getLocalizedSource(e.cell.id,m)||[];return N.parseGlobals(u,m)});return(m,u)=>(p(),k("div",null,[a(Ra,{source:n.value,"cell-id":m.cell.id,onParameterChanged:i},null,8,["source","cell-id"]),a(J,{"max-width":"800",variant:"elevated",elevation:"2",color:"surface-light",class:"mb-2 pt-2 pb-2 ma-auto rounded-lg"},{default:s(()=>[d.value?D("",!0):(p(),S(W,{key:0},{default:s(()=>[a(pa,{id:m.cell.id,metadata:m.cell.metadata,theme:e.theme,locale:e.locale,editMode:e.editMode},null,8,["id","metadata","theme","locale","editMode"])]),_:1})),a(ye,{class:"pl-4 pr-4 d-flex justify-space-between"},{default:s(()=>[a(qo,{id:m.cell.id},null,8,["id"]),a(Kt,{modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=_=>r.value=_),class:"ml-auto"},{default:s(()=>[P(t).indexOf("result")!==-1?(p(),S(ze,{key:0,value:"result",icon:"",size:"32",rounded:"lg","min-width":"48"},{default:s(()=>[a(F,{icon:"mdi-monitor"})]),_:1})):D("",!0),P(t).indexOf("stdout")!==-1?(p(),S(ze,{key:1,value:"stdout",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:s(()=>[a(F,{icon:"mdi-console"})]),_:1})):D("",!0),P(t).indexOf("error")!==-1?(p(),S(ze,{key:2,value:"error",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:s(()=>[a(F,{icon:"mdi-alert-circle-outline"})]),_:1})):D("",!0)]),_:1},8,["modelValue"])]),_:1}),Tt(a(W,null,{default:s(()=>[a(qt,{modelValue:r.value,"onUpdate:modelValue":u[1]||(u[1]=_=>r.value=_),direction:"vertical"},{default:s(()=>[a(Be,{value:"result"},{default:s(()=>[a(Sa,{value:P(N).getResult(m.cell.id)},null,8,["value"])]),_:1}),a(Be,{value:"stdout",direction:"vertical"},{default:s(()=>[a(fa,{stdout:P(N).getStdout(m.cell.id)},null,8,["stdout"])]),_:1}),a(Be,{value:"error",direction:"vertical"},{default:s(()=>[a(ha,{stderr:P(N).getError(m.cell.id)},null,8,["stderr"])]),_:1})]),_:1},8,["modelValue"])]),_:1},512),[[Dt,e.cell.outputs?e.cell.outputs.length>0:!1]])]),_:1})]))}}),Oa={key:1,class:"video-container"},za={key:0,class:"video-iframe-container"},Ba=["src","width","height"],Fa={key:1,class:"video-fallback"},ja={class:"text-body-2 mb-4"},Ka={class:"text-caption mt-2 text-grey"},qa={key:2,class:"video-player-container"},Ha={key:2,class:"text-center pa-4"},Ja=z({__name:"VideoCell",props:{cell:{},locale:{}},setup(l){const e=l,t=E(null),o=E(null),r=E(null),i=E(!1);E(!1);const d=f=>{const w=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,/youtube\.com\/v\/([^&\n?#]+)/];for(const I of w){const K=f.match(I);if(K)return K[1]}return null},n=f=>{const w=[/vimeo\.com\/(\d+)/,/player\.vimeo\.com\/video\/(\d+)/];for(const I of w){const K=f.match(I);if(K)return K[1]}return null},m=f=>{const w=f.url,I=d(w);if(I)return{url:`https://www.youtube.com/embed/${I}`,provider:"youtube",isEmbed:!0};const K=n(w);return K?{url:`https://player.vimeo.com/video/${K}`,provider:"vimeo",isEmbed:!0}:{url:w,provider:"direct",isEmbed:!1}},u=()=>{try{const f=N.getLocalizedSource(e.cell.id,e.locale);if(!f||f.length===0)throw new Error("No video configuration found");const w=f.join("").trim(),I=JSON.parse(w);if(!I.url)throw new Error("Video URL is required");o.value={controls:!0,autoplay:!1,width:"100%",height:"auto",loop:!1,muted:!1,...I},r.value=m(I),t.value=null}catch(f){t.value=f instanceof Error?f.message:"Invalid video configuration",o.value=null,r.value=null}},_=T(()=>{if(!o.value||!r.value)return{};const f={controls:o.value.controls,autoplay:o.value.autoplay,loop:o.value.loop,muted:o.value.muted,fluid:!0,responsive:!0,playbackRates:[.5,1,1.25,1.5,2],plugins:{}};return o.value.poster&&(f.poster=o.value.poster),r.value.provider==="direct"&&(f.sources=[{src:r.value.url,type:"video/mp4"}]),f}),b=T(()=>{var f;return((f=r.value)==null?void 0:f.isEmbed)||!1}),C=T(()=>{if(!r.value||!o.value)return"";const f=new URL(r.value.url);return o.value.autoplay&&f.searchParams.set("autoplay","1"),o.value.controls||f.searchParams.set("controls","0"),o.value.loop&&f.searchParams.set("loop","1"),o.value.muted&&f.searchParams.set("muted","1"),f.toString()}),V=()=>{i.value=!0},$=()=>{var f;(f=o.value)!=null&&f.url&&window.open(o.value.url,"_blank")};return X(()=>{var f;u(),((f=r.value)==null?void 0:f.provider)==="vimeo"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&setTimeout(()=>{i.value||(i.value=!0)},2e3)}),G(()=>e.locale,()=>{u()}),(f,w)=>(p(),S(J,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:s(()=>[a(W,null,{default:s(()=>[t.value?(p(),S(ue,{key:0,type:"error",variant:"tonal",text:t.value,class:"mb-4"},null,8,["text"])):o.value&&r.value?(p(),k("div",Oa,[b.value&&!i.value?(p(),k("div",za,[g("iframe",{src:C.value,width:o.value.width,height:o.value.height==="auto"?"315":o.value.height,frameborder:"0",allowfullscreen:"",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",class:"video-iframe",onError:V},null,40,Ba)])):b.value&&i.value?(p(),k("div",Fa,[a(J,{variant:"outlined",class:"pa-6 text-center"},{default:s(()=>[a(F,{size:"64",color:"grey-darken-1",class:"mb-4"},{default:s(()=>w[0]||(w[0]=[y("mdi-video-off",-1)])),_:1,__:[0]}),w[3]||(w[3]=g("h3",{class:"text-h6 mb-2"},"Video Embedding Restricted",-1)),g("p",ja,[y(" This "+h(r.value.provider)+" video cannot be embedded in this environment. ",1),w[1]||(w[1]=g("br",null,null,-1)),w[2]||(w[2]=y(" This is common when running on localhost due to CORS restrictions. ",-1))]),a(U,{color:"primary",variant:"elevated",onClick:$,"prepend-icon":"mdi-open-in-new"},{default:s(()=>[y(" Watch on "+h(r.value.provider==="youtube"?"YouTube":"Vimeo"),1)]),_:1}),g("p",Ka," URL: "+h(o.value.url),1)]),_:1,__:[3]})])):(p(),k("div",qa,[a(P(uo),{options:_.value,class:"video-player"},null,8,["options"])]))])):(p(),k("div",Ha,[a(_e,{indeterminate:"",color:"primary"}),w[4]||(w[4]=g("p",{class:"mt-2 text-body-2"},"Loading video...",-1))]))]),_:1})]),_:1}))}}),$t=H(Ja,[["__scopeId","data-v-5fea9b43"]]);function Wa(l){return new URLSearchParams(window.location.search).get(l)}async function Ga(l,e,t){var o;try{const r={model:l.model,messages:e,temperature:l.temperature??.7,stream:!1};l.max_tokens&&l.max_tokens!==-1&&(r.max_tokens=l.max_tokens),console.log("Sending request to:",l.url),console.log("Request body:",JSON.stringify(r,null,2));const i={"Content-Type":"application/json",Accept:"application/json"};t&&(i.Authorization=`Bearer ${t}`,console.log("Using API key authentication"));const d=await fetch(l.url,{method:"POST",headers:i,body:JSON.stringify(r)});if(console.log("Response status:",d.status),console.log("Response headers:",d.headers),!d.ok){let u=`HTTP ${d.status}: ${d.statusText}`;try{u=((o=(await d.json()).error)==null?void 0:o.message)||u}catch{}throw new Error(u)}const n=await d.json();if(!n.choices||n.choices.length===0)throw new Error("No response choices returned from API");const m=n.choices[0].message;if(!m||!m.content)throw new Error("Invalid response format from API");return{role:"assistant",content:m.content}}catch(r){throw r instanceof TypeError&&r.message.includes("fetch")?new Error("Unable to connect to the AI service. Please check if LM Studio is running and accessible."):r instanceof Error?r:new Error("An unexpected error occurred while communicating with the AI service.")}}const Ya={key:1,class:"chat-container"},Za={class:"text-body-2"},Qa={class:"message-role"},Xa=["innerHTML"],el=["innerHTML"],tl={key:1,class:"message-content"},ol={key:0,class:"message-wrapper assistant"},al={class:"message-bubble assistant"},ll={class:"message-content"},nl={key:1,class:"empty-chat"},rl={class:"chat-input-area"},sl={class:"chat-config-info mt-3"},il={class:"config-chips"},ul={class:"chat-actions"},dl={key:2,class:"text-center pa-4"},cl=z({__name:"ChatCell",props:{cell:{},locale:{}},setup(l){const e=l,t=E(null),o=E(null),r=E(""),i=E(!1),d=E(),n=E(null),m=()=>{try{const L=N.getLocalizedSource(e.cell.id,e.locale);if(!L||L.length===0)throw new Error("No chat configuration found");const v=L.join("").trim(),x=JSON.parse(v);if(!x.url)throw new Error("Chat URL is required");if(!x.model)throw new Error("Model name is required");if(!x.messages||!Array.isArray(x.messages))throw new Error("Messages array is required");o.value={temperature:.7,max_tokens:-1,stream:!1,...x},n.value=Wa("OPENAI_API_KEY"),n.value&&console.log("Found OPENAI_API_KEY in URL parameters"),t.value=null}catch(L){t.value=L instanceof Error?L.message:"Invalid chat configuration",o.value=null}},u=T(()=>o.value?o.value.messages.filter(L=>L.role!=="system"):[]),_=T(()=>o.value?o.value.messages.find(L=>L.role==="system"):null),b=L=>{const v=/<think>([\s\S]*?)<\/think>/gi;let x=null,M=L;const q=L.match(v);return q&&q.length>0&&(x=q.map(Oe=>Oe.replace(/<\/?think>/gi,"").trim()).join(`

`),M=L.replace(v,"").trim()),{thinkingContent:x,mainContent:M,hasThinking:!!x}},C=L=>{try{const v=_t(L,{breaks:!0,gfm:!0});return typeof v=="string"?v:L}catch(v){return console.error("Failed to render markdown:",v),L}},V=L=>{const v=b(L.content);return{...v,renderedMain:L.role==="assistant"?C(v.mainContent):v.mainContent,renderedThinking:v.thinkingContent?C(v.thinkingContent):null}},$=async()=>{await Ie(),d.value&&(d.value.scrollTop=d.value.scrollHeight)},f=()=>{if(o.value)try{const v=JSON.stringify(o.value,null,2).split(`
`);N.setSource(e.cell.id,v)}catch(L){console.error("Failed to save chat configuration:",L)}},w=async()=>{if(!r.value.trim()||!o.value||i.value)return;const L={role:"user",content:r.value.trim()};o.value.messages.push(L);const v=r.value.trim();r.value="",f(),await $(),i.value=!0,t.value=null;try{const x=await Ga(o.value,o.value.messages,n.value);o.value.messages.push(x),f(),await $()}catch(x){const M=x instanceof Error?x.message:"Failed to get response from AI";t.value=M,o.value.messages.pop(),f(),r.value=v}finally{i.value=!1}},I=()=>{o.value&&(o.value.messages=o.value.messages.filter(L=>L.role==="system"),f())},K=L=>{L.key==="Enter"&&!L.shiftKey&&(L.preventDefault(),w())};return X(()=>{m()}),G(()=>e.locale,()=>{m()}),(L,v)=>(p(),S(J,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:s(()=>[a(W,null,{default:s(()=>[t.value?(p(),S(ue,{key:0,type:"error",variant:"tonal",text:t.value,class:"mb-4"},null,8,["text"])):o.value?(p(),k("div",Ya,[_.value?(p(),S(ue,{key:0,type:"info",variant:"tonal",density:"compact",class:"mb-4"},{default:s(()=>[v[1]||(v[1]=g("div",{class:"text-caption text-grey-darken-1 mb-1"},"System Message:",-1)),g("div",Za,h(_.value.content),1)]),_:1,__:[1]})):D("",!0),g("div",{class:"chat-messages",ref_key:"messagesContainer",ref:d},[(p(!0),k(Q,null,te(u.value,(x,M)=>(p(),k("div",{key:M,class:ne(["message-wrapper",x.role])},[g("div",{class:ne(["message-bubble",x.role])},[g("div",Qa,h(x.role),1),x.role==="assistant"?(p(),k(Q,{key:0},[V(x).hasThinking?(p(),S(Ht,{key:0,variant:"accordion",class:"thinking-panel mb-2"},{default:s(()=>[a(Jt,null,{default:s(()=>[a(Wt,{class:"thinking-title"},{default:s(()=>[a(F,{start:"",size:"small"},{default:s(()=>v[2]||(v[2]=[y("mdi-brain",-1)])),_:1,__:[2]}),v[3]||(v[3]=g("span",{class:"text-caption"},"Thinking Process",-1))]),_:1,__:[3]}),a(Gt,null,{default:s(()=>[g("div",{class:"thinking-content markdown-content",innerHTML:V(x).renderedThinking},null,8,Xa)]),_:2},1024)]),_:2},1024)]),_:2},1024)):D("",!0),g("div",{class:"message-content markdown-content",innerHTML:V(x).renderedMain},null,8,el)],64)):(p(),k("div",tl,h(x.content),1))],2)],2))),128)),i.value?(p(),k("div",ol,[g("div",al,[v[5]||(v[5]=g("div",{class:"message-role"},"assistant",-1)),g("div",ll,[a(_e,{size:"16",width:"2",indeterminate:"",class:"mr-2"}),v[4]||(v[4]=y(" Thinking... ",-1))])])])):D("",!0),u.value.length===0&&!i.value?(p(),k("div",nl,[a(F,{size:"48",color:"grey-lighten-1",class:"mb-2"},{default:s(()=>v[6]||(v[6]=[y("mdi-chat-outline",-1)])),_:1,__:[6]}),v[7]||(v[7]=g("p",{class:"text-body-2 text-grey"},"Start a conversation...",-1))])):D("",!0)],512),g("div",rl,[a(Z,{modelValue:r.value,"onUpdate:modelValue":v[0]||(v[0]=x=>r.value=x),placeholder:"Type your message...",variant:"outlined",density:"comfortable","hide-details":"",disabled:i.value,onKeypress:K,class:"chat-input"},{"append-inner":s(()=>[a(U,{icon:"mdi-send",size:"small",color:"primary",variant:"text",disabled:!r.value.trim()||i.value,onClick:w},null,8,["disabled"])]),_:1},8,["modelValue","disabled"])]),g("div",sl,[g("div",il,[a(le,{size:"small",variant:"outlined",class:"mr-2"},{default:s(()=>[a(F,{start:""},{default:s(()=>v[8]||(v[8]=[y("mdi-server",-1)])),_:1,__:[8]}),y(" "+h(o.value.model),1)]),_:1}),a(le,{size:"small",variant:"outlined",class:"mr-2"},{default:s(()=>[a(F,{start:""},{default:s(()=>v[9]||(v[9]=[y("mdi-thermometer",-1)])),_:1,__:[9]}),y(" T: "+h(o.value.temperature),1)]),_:1}),a(le,{size:"small",variant:"outlined",class:"mr-2"},{default:s(()=>[a(F,{start:""},{default:s(()=>v[10]||(v[10]=[y("mdi-counter",-1)])),_:1,__:[10]}),y(" Max: "+h(o.value.max_tokens===-1?"∞":o.value.max_tokens),1)]),_:1}),n.value?(p(),S(le,{key:0,size:"small",variant:"outlined",color:"success",class:"mr-2"},{default:s(()=>[a(F,{start:""},{default:s(()=>v[11]||(v[11]=[y("mdi-key",-1)])),_:1,__:[11]}),v[12]||(v[12]=y(" Authenticated ",-1))]),_:1,__:[12]})):D("",!0)]),g("div",ul,[u.value.length>0?(p(),S(U,{key:0,size:"small",variant:"outlined",color:"warning","prepend-icon":"mdi-broom",onClick:I,disabled:i.value},{default:s(()=>v[13]||(v[13]=[y(" Clear Chat ",-1)])),_:1,__:[13]},8,["disabled"])):D("",!0)])])])):(p(),k("div",dl,[a(_e,{indeterminate:"",color:"primary"}),v[14]||(v[14]=g("p",{class:"mt-2 text-body-2"},"Loading chat...",-1))]))]),_:1})]),_:1}))}}),It=H(cl,[["__scopeId","data-v-1ffdee27"]]),Pt=z({__name:"InputDialog",props:{locale:{}},setup(l){const e=l,t=T(()=>Ue[e.locale||"en-US"]),o=E(""),r=E(),i=T({get:()=>A.inputStatus==="waiting",set:u=>{u||(A.inputStatus="idle")}}),d=()=>{A.submitUserInput(o.value),o.value=""},n=()=>{A.submitUserInput(""),o.value=""};G(()=>i.value,async u=>{var _;u&&(await Ie(),(_=r.value)==null||_.focus())});const m=u=>{u.key==="Enter"?(u.preventDefault(),d()):u.key==="Escape"&&(u.preventDefault(),n())};return(u,_)=>(p(),S(Ne,{modelValue:i.value,"onUpdate:modelValue":_[1]||(_[1]=b=>i.value=b),"max-width":"400px",persistent:"",onKeydown:m},{default:s(()=>[a(J,null,{default:s(()=>[a(re,null,{default:s(()=>[y(h(P(A).inputPrompt||t.value.inputDialogTitle),1)]),_:1}),a(W,null,{default:s(()=>[a(Z,{ref_key:"inputFieldRef",ref:r,modelValue:o.value,"onUpdate:modelValue":_[0]||(_[0]=b=>o.value=b),label:t.value.inputDialogLabel,variant:"outlined",density:"compact",onKeydown:m},null,8,["modelValue","label"])]),_:1}),a(ye,null,{default:s(()=>[a(Te),a(U,{color:"grey",variant:"text",onClick:n},{default:s(()=>[y(h(t.value.inputDialogCancel),1)]),_:1}),a(U,{color:"primary",variant:"text",onClick:d},{default:s(()=>[y(h(t.value.inputDialogSubmit),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),ml={class:"pa-3"},pl={class:"pa-3"},vl={key:0,class:"pa-4 h-100"},fl={class:"d-flex align-center"},gl={class:"mb-4"},bl={key:1,class:"pa-4 text-center"},hl=z({__name:"GlobalsDialog",props:{locale:{},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(l,{emit:e}){const t=l,o=e,r=T(()=>Ue[t.locale]),i=T({get:()=>t.modelValue,set:O=>o("update:modelValue",O)}),d=E({}),n=E(null),m=E(""),u=E(!1),_=T(()=>Object.keys(d.value).sort()),b=T(()=>n.value?d.value[n.value]||{}:null),C=T(()=>b.value?Object.keys(b.value).filter(O=>O!=="default"):[]),V=T(()=>{const O=Object.keys(ce),B=C.value;return O.filter(j=>!B.includes(j))}),$=()=>{d.value=JSON.parse(JSON.stringify(N.getGlobals())),_.value.length>0&&!n.value&&(n.value=_.value[0])},f=O=>{n.value=O,u.value=!1},w=()=>{u.value=!0,m.value="",n.value=null},I=()=>{m.value.trim()&&/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(m.value)&&(d.value[m.value]||(d.value[m.value]={default:""},n.value=m.value,u.value=!1,m.value=""))},K=()=>{if(!n.value)return;delete d.value[n.value];const O=_.value;O.length>0?n.value=O[0]:n.value=null},L=O=>{!n.value||!O||(d.value[n.value]||(d.value[n.value]={}),d.value[n.value][O]="")},v=O=>{!n.value||O==="default"||delete d.value[n.value][O]},x=O=>{!n.value||!O.trim()||/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(O)&&O!==n.value&&(d.value[O]||(d.value[O]=d.value[n.value],delete d.value[n.value],n.value=O))},M=()=>{Object.entries(d.value).forEach(([B,j])=>{N.setGlobal(B,j)});const O=N.getGlobals();Object.keys(O).forEach(B=>{d.value[B]||N.deleteGlobal(B)}),q()},q=()=>{i.value=!1,n.value=null,u.value=!1},Oe=O=>{var B;return O==="default"?"Default":((B=ce[O])==null?void 0:B.name)||O};return G(()=>t.modelValue,O=>{O&&$()}),(O,B)=>(p(),S(Ne,{modelValue:i.value,"onUpdate:modelValue":B[4]||(B[4]=j=>i.value=j),"max-width":"900px",persistent:""},{default:s(()=>[a(J,{height:"700px"},{default:s(()=>[a(re,{class:"d-flex align-center"},{default:s(()=>[a(F,{class:"me-2"},{default:s(()=>B[5]||(B[5]=[y("mdi-variable",-1)])),_:1,__:[5]}),y(" "+h(r.value.globalsDialogTitle),1)]),_:1}),a(W,{class:"pa-0"},{default:s(()=>[a(ke,{"no-gutters":"",style:{height:"580px"}},{default:s(()=>[a(oe,{cols:"4",class:"border-e"},{default:s(()=>[g("div",ml,[u.value?(p(),S(Z,{key:0,modelValue:m.value,"onUpdate:modelValue":B[1]||(B[1]=j=>m.value=j),label:r.value.variableName,variant:"outlined",density:"compact",onKeydown:[nt(I,["enter"]),B[2]||(B[2]=nt(j=>u.value=!1,["escape"]))],autofocus:""},{"append-inner":s(()=>[a(U,{icon:"mdi-check",size:"small",variant:"text",onClick:I}),a(U,{icon:"mdi-close",size:"small",variant:"text",onClick:B[0]||(B[0]=j=>u.value=!1)})]),_:1},8,["modelValue","label"])):D("",!0)]),a(Pe,{density:"compact",class:"px-2"},{default:s(()=>[(p(!0),k(Q,null,te(_.value,j=>(p(),S(se,{key:j,active:n.value===j,onClick:fe=>f(j),rounded:""},{default:s(()=>[a(ie,null,{default:s(()=>[y(h(j),1)]),_:2},1024)]),_:2},1032,["active","onClick"]))),128))]),_:1}),g("div",pl,[a(U,{onClick:w,block:"",variant:"outlined","prepend-icon":"mdi-plus",disabled:u.value},{default:s(()=>[y(h(r.value.addVariable),1)]),_:1},8,["disabled"])])]),_:1}),a(oe,{cols:"8"},{default:s(()=>[n.value?(p(),k("div",vl,[g("div",fl,[a(Z,{"model-value":n.value,label:r.value.variableName,variant:"outlined",density:"compact",class:"me-2","onUpdate:modelValue":x},null,8,["model-value","label"]),a(U,{icon:"mdi-delete",color:"error",variant:"outlined",size:"small",style:{"margin-top":"-20px"},onClick:K})]),a(Z,{modelValue:d.value[n.value].default,"onUpdate:modelValue":B[3]||(B[3]=j=>d.value[n.value].default=j),label:r.value.defaultValue,variant:"outlined",density:"compact",class:"mb-4"},null,8,["modelValue","label"]),g("div",gl,[B[6]||(B[6]=g("h4",{class:"text-subtitle-1 mb-2"},"Locale Values",-1)),(p(!0),k(Q,null,te(C.value,j=>(p(),k("div",{key:j,class:"d-flex align-center mb-2"},[a(le,{size:"small",class:"me-2",style:{"min-width":"100px"}},{default:s(()=>[y(h(j),1)]),_:2},1024),a(Z,{modelValue:d.value[n.value][j],"onUpdate:modelValue":fe=>d.value[n.value][j]=fe,variant:"outlined",density:"compact",class:"me-2","hide-details":""},null,8,["modelValue","onUpdate:modelValue"]),a(U,{icon:"mdi-close",size:"small",variant:"text",onClick:fe=>v(j)},null,8,["onClick"])]))),128))]),V.value.length>0?(p(),S(ve,{key:0,items:V.value,label:r.value.addLocale,variant:"outlined",density:"compact","onUpdate:modelValue":L},{item:s(({props:j,item:fe})=>[a(se,Mt(Ut(j)),{default:s(()=>[a(ie,null,{default:s(()=>[y(h(Oe(fe.value)),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["items","label"])):D("",!0)])):u.value?D("",!0):(p(),k("div",bl,[a(F,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:s(()=>B[7]||(B[7]=[y("mdi-variable",-1)])),_:1,__:[7]}),B[8]||(B[8]=g("p",{class:"text-grey"},"Select a variable to edit, or add a new one.",-1))]))]),_:1})]),_:1})]),_:1}),a(ye,null,{default:s(()=>[a(Te),a(U,{onClick:q},{default:s(()=>[y(h(r.value.cancel),1)]),_:1}),a(U,{onClick:M,color:"primary"},{default:s(()=>[y(h(r.value.save),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),_l=H(hl,[["__scopeId","data-v-46213e9d"]]),yl={class:"editor-container"},kl={class:"d-flex align-center flex-column"},wl={class:"d-flex align-center gap-2 mb-2"},xl=z({__name:"Editor",props:{id:{},theme:{},locale:{}},setup(l){const e=l,t=E("default"),o=T(()=>t.value&&t.value!=="default"?t.value:t.value&&t.value==="default"?null:e.locale),r=T(()=>Ue[e.locale]),i=E(!1),d=T(()=>{const n=[{value:"default",title:r.value.noLanguageOverride}];return Object.entries(ce).forEach(([m,u])=>{n.push({value:m,title:u.name})}),n});return(n,m)=>(p(),k("div",yl,[a(be,null,{default:s(()=>[P(A).workerStatus=="initializing"?(p(),S(ue,{key:0,text:r.value.notebookStarting,type:"info",variant:"tonal",density:"compact"},null,8,["text"])):D("",!0)]),_:1}),a(be,null,{default:s(()=>[P(A).workerStatus=="error"?(p(),S(ue,{key:0,text:`${r.value.notebookStartError} ${P(A).fatalErrorTrace}`,type:"error",variant:"tonal",density:"compact"},null,8,["text"])):D("",!0)]),_:1}),a(be,null,{default:s(()=>[g("div",kl,[g("div",wl,[a(ve,{modelValue:t.value,"onUpdate:modelValue":m[0]||(m[0]=u=>t.value=u),items:d.value,label:r.value.languageOverride,density:"compact",variant:"outlined",style:{"min-width":"150px"},"hide-details":""},null,8,["modelValue","items","label"]),a(Le,{divided:""},{default:s(()=>[a(U,{icon:"mdi-variable",onClick:m[1]||(m[1]=u=>i.value=!0)})]),_:1})])])]),_:1}),(p(!0),k(Q,null,te(P(N).content.cells,u=>{var _,b;return p(),k("div",null,[u.cell_type==="markdown"?(p(),S(P(Ct),{key:0,cell:u,metadata:u.metadata,locale:o.value,editMode:!0},null,8,["cell","metadata","locale"])):D("",!0),u.cell_type==="code"?(p(),S(P(Vt),{key:1,cell:u,theme:e.theme,locale:o.value,editMode:!0},null,8,["cell","theme","locale"])):D("",!0),u.cell_type==="raw"&&((_=u.metadata.tags)!=null&&_.includes("video"))?(p(),S(P($t),{key:2,cell:u,locale:o.value},null,8,["cell","locale"])):D("",!0),u.cell_type==="raw"&&((b=u.metadata.tags)!=null&&b.includes("chat"))?(p(),S(P(It),{key:3,cell:u,locale:o.value},null,8,["cell","locale"])):D("",!0)])}),256)),a(Pt,{locale:e.locale},null,8,["locale"]),a(_l,{modelValue:i.value,"onUpdate:modelValue":m[2]||(m[2]=u=>i.value=u),locale:e.locale},null,8,["modelValue","locale"])]))}}),Cl=H(xl,[["__scopeId","data-v-bca9abeb"]]),Sl={class:"viewer-container"},Ll=z({__name:"Viewer",props:{id:{},theme:{},locale:{}},setup(l){const e=l,t=T(()=>Ue[e.locale]);return(o,r)=>(p(),k("div",Sl,[a(be,null,{default:s(()=>[P(A).workerStatus=="initializing"?(p(),S(ue,{key:0,text:t.value.notebookStarting,type:"info",variant:"tonal",density:"compact"},null,8,["text"])):D("",!0)]),_:1}),a(be,null,{default:s(()=>[P(A).workerStatus=="error"?(p(),S(ue,{key:0,text:`${t.value.notebookStartError} ${P(A).fatalErrorTrace}`,type:"error",variant:"tonal",density:"compact"},null,8,["text"])):D("",!0)]),_:1}),(p(!0),k(Q,null,te(P(N).content.cells,i=>{var d,n;return p(),k("div",null,[i.cell_type==="markdown"?(p(),S(P(Ct),{key:0,cell:i,metadata:i.metadata,locale:e.locale,editMode:!1},null,8,["cell","metadata","locale"])):D("",!0),i.cell_type==="code"?(p(),S(P(Vt),{key:1,cell:i,theme:e.theme,locale:e.locale,editMode:!1},null,8,["cell","theme","locale"])):D("",!0),i.cell_type==="raw"&&((d=i.metadata.tags)!=null&&d.includes("video"))?(p(),S(P($t),{key:2,cell:i,locale:e.locale},null,8,["cell","locale"])):D("",!0),i.cell_type==="raw"&&((n=i.metadata.tags)!=null&&n.includes("chat"))?(p(),S(P(It),{key:3,cell:i,locale:e.locale},null,8,["cell","locale"])):D("",!0)])}),256)),a(Pt,{locale:e.locale},null,8,["locale"])]))}}),El=H(Ll,[["__scopeId","data-v-17948943"]]),Vl=z({__name:"PyodideProvider",props:{notebookId:{},locale:{}},setup(l){const e=l;let t;return X(async()=>{console.log("PyodideProvider: Starting new worker for "+e.notebookId),A.setWorkerStatus("initializing"),t=new Worker(new URL("/sendai/assets/PyodideWorker-DCpjE9aV.js",import.meta.url),{type:"module"}),t.postMessage({type:"initialize"}),t.onmessage=async o=>{const{type:r,text:i,result:d,message:n,error:m,interruptBuffer:u}=o.data;switch(r){case"initialized":console.log("PyodideProvider: Pyodide is initialized"),A.setWorkerStatus("ready"),u&&(A.setInterruptBuffer(new Int32Array(u)),console.log("PyodideProvider: Set Interrupt Buffer"));break;case"stdout":A.runningCellId&&N.addStdout(A.runningCellId,i);break;case"input_request":A.requestUserInput(n);break;case"execute_result":A.runningCellId&&d&&N.setResult(A.runningCellId,d);break;case"execute_completed":A.executionCompleted();break;case"error":A.runningCellId&&N.setError(A.runningCellId,m),A.executionCompleted();break;case"fatal":A.setFatalError(m);break}}}),et(async()=>{console.log("PyodideProvider: Terminating worker."),A.setWorkerStatus("terminating"),t.terminate()}),G(()=>A.executionStatus,o=>{if(o==="queued"&&A.runningCellId!=null){const r=N.parseGlobals(N.getLocalizedSource(A.runningCellId,e.locale)||[],e.locale);t.postMessage({type:"run",cellId:A.runningCellId,code:r==null?void 0:r.join("")})}}),G(()=>A.inputStatus,o=>{o==="submitted"&&t.postMessage({type:"input_response",value:A.userInput})}),(o,r)=>At(o.$slots,"default")}}),$l=z({__name:"Renderer",props:{id:{},initialNotebook:{},theme:{},locale:{},editMode:{type:Boolean}},setup(l){const e=l;return X(()=>{N.loadNotebook(e.initialNotebook)}),G(()=>e.initialNotebook,t=>{N.loadNotebook(t)}),(t,o)=>(p(),S(Vl,{notebookId:t.id,locale:t.locale},{default:s(()=>[t.editMode?(p(),S(Cl,{key:0,id:t.id,theme:t.theme,locale:t.locale},null,8,["id","theme","locale"])):(p(),S(El,{key:1,id:t.id,theme:t.theme,locale:t.locale},null,8,["id","theme","locale"]))]),_:1},8,["notebookId","locale"]))}}),Il={class:"ai-assistant"},Pl={class:"assistant-header"},Nl={class:"d-flex align-center justify-space-between"},Tl={class:"d-flex align-center"},Dl={class:"message-role"},Ml=["innerHTML"],Ul={key:1,class:"message-content"},Al={key:0,class:"message-wrapper assistant"},Rl={class:"message-bubble assistant"},Ol={class:"message-content"},zl={key:0,class:"preset-questions"},Bl={class:"preset-chips"},Fl={class:"chat-input-area"},jl=z({__name:"AIAssistant",props:{notebookTitle:{}},setup(l){const e=l,t=E([]),o=E(""),r=E(!1),i=E(),d=["What does this notebook do?","Localize this notebook into Japanese","Explain the code in this notebook","How can I improve this notebook?","What are the key concepts covered here?"],n=T(()=>t.value.length>0),m=f=>{try{const w=no(f,{breaks:!0,gfm:!0});return typeof w=="string"?w:f}catch(w){return console.error("Failed to render markdown:",w),f}},u=async()=>{await Ie(),i.value&&(i.value.scrollTop=i.value.scrollHeight)},_=(f,w)=>{const I={id:Date.now().toString(),role:f,content:w,timestamp:new Date};t.value.push(I),u()},b=async()=>{if(!o.value.trim()||r.value)return;const f=o.value.trim();o.value="",_("user",f),r.value=!0,setTimeout(()=>{let w="";f.toLowerCase().includes("what does")||f.toLowerCase().includes("notebook do")?w=`This notebook appears to be a **${e.notebookTitle||"Jupyter-style"}** educational notebook. Based on the structure, it likely contains:

- **Interactive code cells** for hands-on learning
- **Markdown explanations** to guide students through concepts
- **Visualizations** to help illustrate key points

The notebook follows a pedagogical approach where students can:
1. Read explanations
2. Run code examples
3. Experiment with modifications
4. See immediate results

Would you like me to analyze any specific sections in more detail?`:f.toLowerCase().includes("japanese")||f.toLowerCase().includes("localize")?w=`I can help you localize this notebook into Japanese! Here's what the process would involve:

## Translation Strategy:
- **Markdown text**: Translate all explanatory content
- **Code comments**: Translate inline documentation
- **Variable names**: Consider using English for compatibility
- **Output text**: Translate user-facing messages

## Key Considerations:
- Maintain technical accuracy
- Preserve code functionality
- Use appropriate Japanese technical terminology
- Consider cultural context for examples

Would you like me to start with a specific section, or would you prefer a complete translation approach?`:f.toLowerCase().includes("explain")||f.toLowerCase().includes("code")?w=`I'd be happy to explain the code in this notebook! Here's what I can help with:

## Code Analysis:
- **Algorithm explanations**: Break down complex logic step-by-step
- **Function purposes**: Explain what each function does
- **Data structures**: Clarify how data is organized and manipulated
- **Best practices**: Point out good coding patterns

## Learning Support:
- Identify key programming concepts
- Suggest related topics to explore
- Provide alternative implementations
- Explain error messages if any occur

Which specific code section would you like me to focus on first?`:f.toLowerCase().includes("improve")?w=`Great question! Here are some ways to enhance this notebook:

## Content Improvements:
- **Add more examples**: Include edge cases and variations
- **Interactive exercises**: Create hands-on challenges
- **Visual aids**: Add diagrams, charts, or animations
- **Real-world applications**: Connect concepts to practical uses

## Technical Enhancements:
- **Error handling**: Add try-catch blocks for robustness
- **Performance optimization**: Suggest more efficient algorithms
- **Code documentation**: Improve comments and docstrings
- **Testing**: Add unit tests for key functions

## Pedagogical Enhancements:
- **Learning objectives**: Clearly state what students will learn
- **Prerequisites**: List required background knowledge
- **Assessment**: Add quiz questions or coding challenges
- **Resources**: Link to additional reading materials

What aspect would you like to focus on improving?`:f.toLowerCase().includes("concepts")||f.toLowerCase().includes("key")?w=`Based on this notebook, here are the key concepts typically covered:

## Core Programming Concepts:
- **Variables and data types**
- **Control structures** (loops, conditionals)
- **Functions and modularity**
- **Data structures** (lists, dictionaries, etc.)

## Problem-Solving Skills:
- **Algorithmic thinking**
- **Debugging techniques**
- **Code optimization**
- **Testing and validation**

## Practical Applications:
- **Data analysis and visualization**
- **Mathematical computations**
- **Interactive programming**
- **Documentation and presentation**

## Learning Outcomes:
Students should be able to:
1. Understand the underlying logic
2. Modify and extend the code
3. Apply concepts to new problems
4. Debug and troubleshoot issues

Would you like me to elaborate on any of these concepts?`:w=`I'm here to help you with this notebook! I can assist with:

- **Understanding the content** and learning objectives
- **Explaining code** and algorithms step by step
- **Suggesting improvements** and best practices
- **Localizing content** into different languages
- **Identifying key concepts** and learning outcomes

Feel free to ask specific questions about any part of the notebook, or use one of the preset questions below to get started!`,_("assistant",w),r.value=!1},1e3+Math.random()*1e3)},C=f=>{o.value=f,b()},V=()=>{t.value=[]},$=f=>{f.key==="Enter"&&!f.shiftKey&&(f.preventDefault(),b())};return X(()=>{_("assistant",`Hello! I'm your AI assistant for this notebook. I can help you understand the content, explain code, suggest improvements, and much more.

Try asking me a question or use one of the preset options below to get started!`)}),(f,w)=>(p(),k("div",Il,[g("div",Pl,[g("div",Nl,[g("div",Tl,[a(F,{icon:"mdi-assistant",class:"me-2",color:"primary"}),w[1]||(w[1]=g("h3",{class:"text-h6"},"AI Assistant",-1))]),n.value?(p(),S(U,{key:0,icon:"mdi-broom",size:"small",variant:"text",color:"warning",onClick:V,disabled:r.value},{default:s(()=>[a(F,null,{default:s(()=>w[2]||(w[2]=[y("mdi-broom",-1)])),_:1,__:[2]}),a(Ee,{activator:"parent",location:"bottom"},{default:s(()=>w[3]||(w[3]=[y("Clear Chat",-1)])),_:1,__:[3]})]),_:1},8,["disabled"])):D("",!0)])]),g("div",{class:"chat-messages",ref_key:"messagesContainer",ref:i},[(p(!0),k(Q,null,te(t.value,I=>(p(),k("div",{key:I.id,class:ne(["message-wrapper",I.role])},[g("div",{class:ne(["message-bubble",I.role])},[g("div",Dl,h(I.role),1),I.role==="assistant"?(p(),k("div",{key:0,class:"message-content markdown-content",innerHTML:m(I.content)},null,8,Ml)):(p(),k("div",Ul,h(I.content),1))],2)],2))),128)),r.value?(p(),k("div",Al,[g("div",Rl,[w[5]||(w[5]=g("div",{class:"message-role"},"assistant",-1)),g("div",Ol,[a(_e,{size:"16",width:"2",indeterminate:"",class:"me-2"}),w[4]||(w[4]=y(" Thinking... ",-1))])])])):D("",!0)],512),!n.value||t.value.length===1?(p(),k("div",zl,[w[6]||(w[6]=g("div",{class:"text-caption text-medium-emphasis mb-2"},"Quick questions:",-1)),g("div",Bl,[(p(),k(Q,null,te(d,I=>a(le,{key:I,size:"small",variant:"outlined",class:"ma-1",onClick:K=>C(I),disabled:r.value},{default:s(()=>[y(h(I),1)]),_:2},1032,["onClick","disabled"])),64))])])):D("",!0),g("div",Fl,[a(Z,{modelValue:o.value,"onUpdate:modelValue":w[0]||(w[0]=I=>o.value=I),placeholder:"Ask me anything about this notebook...",variant:"outlined",density:"comfortable","hide-details":"",disabled:r.value,onKeypress:$,class:"chat-input"},{"append-inner":s(()=>[a(U,{icon:"mdi-send",size:"small",color:"primary",variant:"text",disabled:!o.value.trim()||r.value,onClick:b},null,8,["disabled"])]),_:1},8,["modelValue","disabled"])])]))}}),Kl=H(jl,[["__scopeId","data-v-e0b1e283"]]),ql={class:"notebook"},Hl={class:"d-flex align-center mb-6 notebook-header"},Jl={class:"d-flex align-center flex-grow-1"},Wl={class:"text-h4 notebook-title"},Gl={key:1,class:"loading"},Yl={class:"text-center"},Zl={class:"text-h5 mb-2"},Ql={class:"text-body-1 text-medium-emphasis mb-4"},Xl=z({__name:"Notebook",setup(l){const e=at(),t=ot(),o=T(()=>Me[R.locale]),r=T(()=>ce[R.locale].direction==="rtl"),i=T(()=>e.params.id),d=E(null),n=E(!0),m=E(null),u=E(!1),_=E(!1),b=E(!1),{saveStatus:C,stopWatcher:V}=Fo(i.value);X(async()=>{try{n.value=!0,m.value=null,d.value=await xt(i.value)}catch(K){console.error("Failed to load notebook:",K),m.value=K instanceof Error?K.message:"Failed to load notebook"}finally{n.value=!1}});const $=()=>{t.push("/notebooks")},f=()=>{u.value=!u.value},w=()=>{b.value=!b.value},I=()=>{_.value=!_.value};return et(()=>{N.clear(),V()}),(K,L)=>(p(),k("div",ql,[a(De,{fluid:"",class:"pa-4"},{default:s(()=>{var v,x;return[g("div",Hl,[g("div",Jl,[a(U,{icon:r.value?"mdi-arrow-right":"mdi-arrow-left",variant:"text",onClick:$,class:ne(r.value?"ms-3":"me-3")},null,8,["icon","class"]),g("h1",Wl,h(((x=(v=d.value)==null?void 0:v.metadata)==null?void 0:x.title)||o.value.untitledNotebook),1)]),P(C)!=="idle"?(p(),S(le,{key:0,color:P(C)==="saved"?"success":P(C)==="saving"?"info":"error",size:"small",variant:"tonal"},{default:s(()=>[a(F,{icon:P(C)==="saved"?"mdi-check":P(C)==="saving"?"mdi-loading":"mdi-alert",class:ne([{"mdi-spin":P(C)==="saving"},"me-1"]),size:"small"},null,8,["icon","class"]),y(" "+h(P(C)==="saved"?o.value.saved:P(C)==="saving"?o.value.saving:o.value.saveError),1)]),_:1},8,["color"])):D("",!0),g("div",{class:ne(["d-flex align-center",r.value?"ms-3":"me-3"])},[a(U,{icon:"mdi-pencil",variant:"text",size:"small",color:u.value?"primary":"default",onClick:f,class:"me-2"},{default:s(()=>[a(F,null,{default:s(()=>L[1]||(L[1]=[y("mdi-pencil",-1)])),_:1,__:[1]}),a(Ee,{activator:"parent",location:"bottom"},{default:s(()=>L[2]||(L[2]=[y(" Edit Notebook ",-1)])),_:1,__:[2]})]),_:1},8,["color"]),a(U,{icon:"mdi-assistant",variant:"text",size:"small",color:b.value?"primary":"default",onClick:w,class:"me-2"},{default:s(()=>[a(F,null,{default:s(()=>L[3]||(L[3]=[y("mdi-assistant",-1)])),_:1,__:[3]}),a(Ee,{activator:"parent",location:"bottom"},{default:s(()=>L[4]||(L[4]=[y(" AI Assistant ",-1)])),_:1,__:[4]})]),_:1},8,["color"]),a(U,{icon:"mdi-paperclip",variant:"text",size:"small",color:_.value?"primary":"default",onClick:I},{default:s(()=>[a(F,null,{default:s(()=>L[5]||(L[5]=[y("mdi-paperclip",-1)])),_:1,__:[5]}),a(Ee,{activator:"parent",location:"bottom"},{default:s(()=>L[6]||(L[6]=[y(" Resources ",-1)])),_:1,__:[6]})]),_:1},8,["color"])],2)]),d.value&&!n.value&&!m.value?(p(),S($l,{key:0,"initial-notebook":d.value,id:i.value,theme:P(R).theme,locale:P(R).locale,editMode:u.value},null,8,["initial-notebook","id","theme","locale","editMode"])):n.value?(p(),k("div",Gl,[a(_e,{indeterminate:"",color:"primary"}),g("p",null,h(o.value.loadingNotebook),1)])):m.value?(p(),S(J,{key:2,class:"pa-6"},{default:s(()=>[g("div",Yl,[a(F,{icon:"mdi-alert-circle",size:"64",color:"error",class:"mb-4"}),g("h2",Zl,h(o.value.failedToLoad),1),g("p",Ql,h(m.value),1),a(U,{color:"primary",onClick:$},{default:s(()=>[y(h(o.value.backToNotebooks),1)]),_:1})])]),_:1})):D("",!0)]}),_:1}),a(Yt,{modelValue:b.value,"onUpdate:modelValue":L[0]||(L[0]=v=>b.value=v),location:"end",width:400,temporary:!1,class:"ai-assistant-drawer"},{default:s(()=>{var v,x;return[a(Kl,{"notebook-title":(x=(v=d.value)==null?void 0:v.metadata)==null?void 0:x.title},null,8,["notebook-title"])]}),_:1},8,["modelValue"])]))}}),en=H(Xl,[["__scopeId","data-v-1fe59cb0"]]),tn={class:"notebook-json"},on=z({__name:"NotebookJSON",setup(l){const e=at(),t=T(()=>e.params.id),o=E(null),r=E(!0),i=E(null);X(async()=>{try{r.value=!0,i.value=null,o.value=await xt(t.value)}catch(n){console.error("Failed to load notebook:",n),i.value=n instanceof Error?n.message:"Failed to load notebook"}finally{r.value=!1}});const d=T(()=>i.value?JSON.stringify({error:i.value,message:"Notebook not found or could not be loaded"},null,2):o.value?JSON.stringify(o.value,null,2):JSON.stringify({message:"Loading..."},null,2));return(n,m)=>(p(),k("div",tn,[g("pre",null,h(d.value),1)]))}}),an=H(on,[["__scopeId","data-v-738b6e09"]]),ln={class:"curriculum-view"},nn=z({__name:"Curriculum",setup(l){return(e,t)=>(p(),k("div",ln,[a(De,null,{default:s(()=>[a(ke,null,{default:s(()=>[a(oe,{cols:"12"},{default:s(()=>[t[1]||(t[1]=g("h1",{class:"text-h4 mb-4"},"Curriculum",-1)),a(J,null,{default:s(()=>[a(W,null,{default:s(()=>t[0]||(t[0]=[g("p",{class:"text-body-1"}," Curriculum content will be implemented here. This section will contain educational materials, lessons, and structured learning paths. ",-1)])),_:1,__:[0]})]),_:1})]),_:1,__:[1]})]),_:1})]),_:1})]))}}),rn=H(nn,[["__scopeId","data-v-4427f550"]]),sn=[{name:"LM Studio",url:"http://localhost:1234/v1"},{name:"OpenRouter",url:"https://openrouter.ai/api/v1"},{name:"OpenAI",url:"https://api.openai.com/v1"}],un={key:0,class:"text-center py-8"},dn={class:"text-body-1 text-medium-emphasis"},cn={key:1,class:"provider-list"},mn={class:"d-flex align-center gap-2 mb-2"},pn={key:0},vn={class:"d-flex justify-space-between align-start mb-3"},fn={class:"flex-grow-1"},gn={class:"text-h6"},bn={class:"text-body-2 text-medium-emphasis"},hn={key:0,class:"text-body-2"},_n={class:"d-flex gap-2 flex-shrink-0"},yn={key:1},kn={class:"d-flex gap-2"},wn={key:0,class:"text-error text-caption mt-1"},xn={class:"d-flex justify-end gap-2 mt-3"},Cn=z({__name:"AIProviderManager",setup(l){const e=sn,t=E(null),o=E({}),r=E({}),i=E({}),d=T(()=>wt[R.locale]),n=E({name:"",url:"",apiKey:"",selectedModel:"",type:""}),m=v=>{t.value=v.id,n.value={name:v.name,url:v.url,apiKey:v.apiKey,selectedModel:v.selectedModel,type:v.type},i.value={}},u=()=>{t.value=null,n.value={name:"",url:"",apiKey:"",selectedModel:"",type:""},i.value={}},_=()=>(i.value={},n.value.name.trim()||(i.value.name=d.value.providerNameRequired),n.value.url.trim()?We.validateUrl(n.value.url)||(i.value.url=d.value.invalidUrl):i.value.url=d.value.urlRequired,n.value.apiKey.trim()||(i.value.apiKey=d.value.apiKeyRequired),Object.keys(i.value).length===0),b=async()=>{if(!_()||!t.value)return;const v={name:n.value.name.trim(),url:n.value.url.trim(),apiKey:n.value.apiKey.trim(),selectedModel:n.value.selectedModel,type:n.value.type};R.updateProvider(t.value,v),u()},C=v=>{const x={name:v.name,url:v.url,apiKey:"",selectedModel:"",type:v.name,models:[]};R.addProvider(x);const M=R.aiProviders[R.aiProviders.length-1];M&&m(M)},V=v=>{R.removeProvider(v)},$=v=>{R.setDefaultProvider(v)},f=async v=>{if(!(!v.apiKey||!v.url)){o.value[v.id]=!0,r.value[v.id]="";try{const x=await We.fetchModels(v.url,v.apiKey);R.updateProvider(v.id,{models:x}),!v.selectedModel&&x.length>0&&R.updateProvider(v.id,{selectedModel:x[0].id})}catch(x){r.value[v.id]=d.value.errorLoadingModels,console.error("Error fetching models:",x)}finally{o.value[v.id]=!1}}},w=(v,x)=>{R.updateProvider(v,{selectedModel:x})};let I=null;const K=async()=>{I&&clearTimeout(I),I=setTimeout(async()=>{if(n.value.apiKey.trim()&&n.value.url.trim()&&t.value){const v=R.aiProviders.find(x=>x.id===t.value);v&&(R.updateProvider(t.value,{apiKey:n.value.apiKey.trim(),url:n.value.url.trim()}),await f({...v,apiKey:n.value.apiKey.trim(),url:n.value.url.trim()}))}},1e3)},L=async()=>{I&&clearTimeout(I),I=setTimeout(async()=>{if(n.value.apiKey.trim()&&n.value.url.trim()&&t.value){const v=R.aiProviders.find(x=>x.id===t.value);v&&(R.updateProvider(t.value,{apiKey:n.value.apiKey.trim(),url:n.value.url.trim()}),await f({...v,apiKey:n.value.apiKey.trim(),url:n.value.url.trim()}))}},1e3)};return X(()=>{R.aiProviders.forEach(v=>{v.apiKey&&v.url&&(!v.models||v.models.length===0)&&f(v)})}),(v,x)=>(p(),S(J,{class:"mb-4"},{default:s(()=>[a(re,{class:"d-flex justify-space-between align-center"},{default:s(()=>[y(h(d.value.aiProviders)+" ",1),a(tt,null,{activator:s(({props:M})=>[a(U,Xe({color:"primary",variant:"outlined"},M,{"prepend-icon":"mdi-plus"}),{default:s(()=>[y(h(d.value.add),1)]),_:2},1040)]),default:s(()=>[a(Pe,null,{default:s(()=>[(p(!0),k(Q,null,te(P(e),M=>(p(),S(se,{key:M.name,onClick:q=>C(M)},{default:s(()=>[a(ie,null,{default:s(()=>[y(h(M.name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),a(W,null,{default:s(()=>[P(R).aiProviders.length===0?(p(),k("div",un,[a(F,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:s(()=>x[4]||(x[4]=[y("mdi-robot-outline",-1)])),_:1,__:[4]}),g("p",dn,h(d.value.noProviders),1)])):(p(),k("div",cn,[(p(!0),k(Q,null,te(P(R).aiProviders,M=>(p(),S(J,{key:M.id,class:"mb-3",variant:M.isDefault?"tonal":"outlined"},{default:s(()=>[a(W,null,{default:s(()=>[g("div",mn,[M.isDefault?(p(),S(le,{key:0,color:"primary",size:"small"},{default:s(()=>[y(h(d.value.defaultProvider),1)]),_:1})):D("",!0),M.isDefault?D("",!0):(p(),S(U,{key:1,size:"small",variant:"outlined",onClick:q=>$(M.id)},{default:s(()=>[y(h(d.value.setDefault),1)]),_:2},1032,["onClick"]))]),t.value!==M.id?(p(),k("div",pn,[g("div",vn,[g("div",fn,[g("h3",gn,h(M.name),1),g("p",bn,h(M.url),1),M.selectedModel?(p(),k("p",hn," Model: "+h(M.selectedModel),1)):D("",!0)]),g("div",_n,[a(U,{size:"small",variant:"outlined",icon:"mdi-pencil",onClick:q=>m(M)},null,8,["onClick"]),a(U,{size:"small",variant:"outlined",color:"error",icon:"mdi-delete",onClick:q=>V(M.id)},null,8,["onClick"])])])])):(p(),k("div",yn,[a(ke,null,{default:s(()=>[a(oe,{cols:"12",md:"6"},{default:s(()=>[a(Z,{modelValue:n.value.name,"onUpdate:modelValue":x[0]||(x[0]=q=>n.value.name=q),label:d.value.providerName,"error-messages":i.value.name,variant:"outlined",density:"compact"},null,8,["modelValue","label","error-messages"])]),_:1}),a(oe,{cols:"12",md:"6"},{default:s(()=>[a(Z,{modelValue:n.value.url,"onUpdate:modelValue":[x[1]||(x[1]=q=>n.value.url=q),L],label:d.value.providerUrl,"error-messages":i.value.url,variant:"outlined",density:"compact"},null,8,["modelValue","label","error-messages"])]),_:1}),a(oe,{cols:"12",md:"8"},{default:s(()=>[a(Z,{modelValue:n.value.apiKey,"onUpdate:modelValue":[x[2]||(x[2]=q=>n.value.apiKey=q),K],label:d.value.apiKey,"error-messages":i.value.apiKey,type:"password",variant:"outlined",density:"compact"},null,8,["modelValue","label","error-messages"])]),_:1}),a(oe,{cols:"12",md:"4"},{default:s(()=>[g("div",kn,[a(ve,{modelValue:n.value.selectedModel,"onUpdate:modelValue":[x[3]||(x[3]=q=>n.value.selectedModel=q),q=>w(M.id,q)],items:M.models||[],"item-title":"id","item-value":"id",label:d.value.models,variant:"outlined",density:"compact",loading:o.value[M.id],disabled:!M.models||M.models.length===0},null,8,["modelValue","items","label","loading","disabled","onUpdate:modelValue"]),a(U,{icon:"mdi-refresh",size:"small",variant:"outlined",loading:o.value[M.id],disabled:!n.value.apiKey||!n.value.url,onClick:q=>f(M)},null,8,["loading","disabled","onClick"])]),r.value[M.id]?(p(),k("div",wn,h(r.value[M.id]),1)):D("",!0)]),_:2},1024)]),_:2},1024),g("div",xn,[a(U,{variant:"outlined",onClick:u},{default:s(()=>[y(h(d.value.cancelEdit),1)]),_:1}),a(U,{color:"primary",onClick:b},{default:s(()=>[y(h(d.value.saveProvider),1)]),_:1})])]))]),_:2},1024)]),_:2},1032,["variant"]))),128))]))]),_:1})]),_:1}))}}),Sn=H(Cn,[["__scopeId","data-v-57b64f3c"]]),Ln={class:"settings-view"},En={class:"text-h4 mb-4 settings-title"},Vn={class:"text-body-1"},$n={class:"text-body-2 text-medium-emphasis"},In=z({__name:"Settings",setup(l){const e=ht(),t=E(R.theme),o=E(R.locale),r=T(()=>fo.map(u=>({title:po[R.locale][u],value:u}))),i=co.map(u=>({title:ce[u].name,value:u})),d=T(()=>wt[R.locale]);X(()=>{e.global.name.value=R.theme}),G(t,u=>{e.global.name.value=u});const n=u=>{R.setTheme(u),t.value=u},m=u=>{R.setLocale(u),o.value=u};return(u,_)=>(p(),k("div",Ln,[a(De,null,{default:s(()=>[a(ke,null,{default:s(()=>[a(oe,{cols:"12"},{default:s(()=>[g("h1",En,h(d.value.title),1),a(J,{class:"mb-4"},{default:s(()=>[a(re,null,{default:s(()=>[y(h(d.value.appearance),1)]),_:1}),a(W,null,{default:s(()=>[a(ve,{modelValue:t.value,"onUpdate:modelValue":[_[0]||(_[0]=b=>t.value=b),n],items:r.value,label:d.value.theme,"item-title":"title","item-value":"value"},null,8,["modelValue","items","label"])]),_:1})]),_:1}),a(J,{class:"mb-4"},{default:s(()=>[a(re,null,{default:s(()=>[y(h(d.value.language),1)]),_:1}),a(W,null,{default:s(()=>[a(ve,{modelValue:o.value,"onUpdate:modelValue":[_[1]||(_[1]=b=>o.value=b),m],items:P(i),label:d.value.language,"item-title":"title","item-value":"value"},null,8,["modelValue","items","label"])]),_:1})]),_:1}),a(Sn),a(J,null,{default:s(()=>[a(re,null,{default:s(()=>[y(h(d.value.about),1)]),_:1}),a(W,null,{default:s(()=>[g("p",Vn,h(d.value.appName),1),g("p",$n,h(d.value.version)+" 0.1.0 ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}}),Pn=H(In,[["__scopeId","data-v-f778c09e"]]),Nn=[{path:"/",redirect:"notebooks"},{path:"/notebooks",name:"notebooks",component:Ro},{path:"/notebooks/:id/json",name:"notebook-json",component:an},{path:"/notebooks/:id",name:"notebook",component:en},{path:"/curriculum",name:"curriculum",component:rn},{path:"/settings",name:"settings",component:Pn}],Tn=ao({history:lo("/sendai/"),routes:Nn}),Dn={class:"content-container"},Mn=z({__name:"BaseLayout",setup(l){const e=()=>{const b=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${b}px`)},t=ot(),o=at(),r={"/notebooks":0,"/curriculum":1,"/settings":2},i={0:"/notebooks",1:"/curriculum",2:"/settings"},d=T({get:()=>r[o.path]??0,set:b=>{const C=i[b];C&&o.path!==C&&t.push(C)}}),n=ht(),m=T(()=>vo[R.locale]),u=T(()=>ce[R.locale].direction),_=T(()=>R.locale);return G([u,_],([b,C])=>{document.documentElement.dir=b,document.documentElement.lang=C},{immediate:!0}),X(()=>{n.global.name.value=R.theme,document.documentElement.dir=u.value,document.documentElement.lang=_.value,e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e)}),et(()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}),(b,C)=>{const V=Rt("router-view");return p(),S(Zt,null,{default:s(()=>[a(Qt,null,{default:s(()=>[g("div",Dn,[a(V)])]),_:1}),a(Xt,{modelValue:d.value,"onUpdate:modelValue":C[0]||(C[0]=$=>d.value=$),color:"primary",grow:"",class:ne({"rtl-navigation":u.value==="rtl"})},{default:s(()=>[a(U,{value:"0"},{default:s(()=>[a(F,null,{default:s(()=>C[1]||(C[1]=[y("mdi-notebook",-1)])),_:1,__:[1]}),g("span",null,h(m.value.notebooks),1)]),_:1}),a(U,{value:"1"},{default:s(()=>[a(F,null,{default:s(()=>C[2]||(C[2]=[y("mdi-school",-1)])),_:1,__:[2]}),g("span",null,h(m.value.curriculum),1)]),_:1}),a(U,{value:"2"},{default:s(()=>[a(F,null,{default:s(()=>C[3]||(C[3]=[y("mdi-cog",-1)])),_:1,__:[3]}),g("span",null,h(m.value.settings),1)]),_:1})]),_:1},8,["modelValue","class"])]),_:1})}}}),Un=H(Mn,[["__scopeId","data-v-77271b7e"]]),An=z({__name:"App",setup(l){return(e,t)=>(p(),S(Un))}}),Rn=eo({theme:{defaultTheme:"dark",themes:{light:{colors:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}},dark:{colors:{primary:"#2196F3",secondary:"#424242",accent:"#FF4081",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}},icons:{defaultSet:"mdi",aliases:oo,sets:{mdi:to}}});Ot(An).use(Rn).use(Tn).mount("#app");
