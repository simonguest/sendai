import{b as ke,d as C,c as N,V as w,W as p,X as m,v as c,Y as v,U as T,M as k,x as We,Z as ot,r as L,B as O,_ as S,$ as E,F as X,a0 as ye,w as F,u as h,L as at,Q as nt,a1 as we,a2 as rt,n as lt,a3 as me,a4 as st,a5 as it}from"./@vue--moNiIM6.js";import{V as M,a as He,b as qe,c as pe,d as ge,e as I,f as A,g as B,h as Z,i as Se,j as Ce,k as oe,l as fe,m as ct,n as ut,o as be,p as dt,q as Ke,r as mt,s as ae,t as pt,u as ne,v as gt,w as G,x as ft,y as Ie,z as Le,A as bt,B as ht,C as Je,D as _t,E as vt,F as kt,G as yt,H as wt,I as St}from"./vuetify-Ds40i8XH.js";import{u as xe,a as Ge,c as Ct,b as xt}from"./vue-router-ClIoaLts.js";import{v as q}from"./uuid-C6aID195.js";import{m as Nt}from"./marked-DKjyhwJX.js";import{z as H,H as Ye,s as Qe,E as Et,A as Tt}from"./@codemirror-DLu3zILg.js";import{b as $t}from"./codemirror-BG8Os8gr.js";import{c as n}from"./@lezer-C8D-pblS.js";import"./crelt-C8TCjufn.js";import"./@marijn-DXwl3gUT.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function t(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(l){if(l.ep)return;l.ep=!0;const i=t(l);fetch(l.href,i)}})();const It=["en-US","ja-JP","hi-IN","fa-IR"],Lt="en-US",ee={"en-US":{direction:"ltr",name:"English (US)"},"ja-JP":{direction:"ltr",name:"日本語"},"hi-IN":{direction:"ltr",name:"हिन्दी"},"fa-IR":{direction:"rtl",name:"فارسی"}},Vt={"en-US":{light:"Light",dark:"Dark"},"ja-JP":{light:"ライト",dark:"ダーク"},"hi-IN":{light:"हल्का",dark:"गहरा"},"fa-IR":{light:"روشن",dark:"تیره"}},Dt={"en-US":{notebooks:"Notebooks",curriculum:"Curriculum",settings:"Settings"},"ja-JP":{notebooks:"ノートブック",curriculum:"カリキュラム",settings:"設定"},"hi-IN":{notebooks:"नोटबुक",curriculum:"पाठ्यक्रम",settings:"सेटिंग्स"},"fa-IR":{notebooks:"دفترچه‌ها",curriculum:"برنامه درسی",settings:"تنظیمات"}},Ne={"en-US":{title:"Notebooks",addNotebook:"Add",blank:"Blank",fromTemplate:"From template",importNotebook:"Import notebook",delete:"Delete",lastEdited:"Last edited",back:"Back",notebookViewer:"Notebook Viewer",saved:"Saved",saving:"Saving...",saveError:"Save Error",loadingNotebook:"Loading notebook...",failedToLoad:"Failed to load notebook",backToNotebooks:"Back to Notebooks",untitledNotebook:"Untitled Notebook",justNow:"Just now",hoursAgo:"hours ago",hourAgo:"hour ago",daysAgo:"days ago",dayAgo:"day ago"},"ja-JP":{title:"ノートブック",addNotebook:"Add",blank:"空白",fromTemplate:"テンプレートから",importNotebook:"ノートブックをインポート",delete:"削除",lastEdited:"最終編集",back:"戻る",notebookViewer:"ノートブックビューア",saved:"保存済み",saving:"保存中...",saveError:"保存エラー",loadingNotebook:"ノートブックを読み込み中...",failedToLoad:"ノートブックの読み込みに失敗しました",backToNotebooks:"ノートブックに戻る",untitledNotebook:"無題のノートブック",justNow:"たった今",hoursAgo:"時間前",hourAgo:"時間前",daysAgo:"日前",dayAgo:"日前"},"hi-IN":{title:"नोटबुक",addNotebook:"Add",blank:"खाली",fromTemplate:"टेम्प्लेट से",importNotebook:"नोटबुक आयात करें",delete:"हटाएं",lastEdited:"अंतिम संपादन",back:"वापस",notebookViewer:"नोटबुक व्यूअर",saved:"सहेजा गया",saving:"सहेज रहे हैं...",saveError:"सहेजने में त्रुटि",loadingNotebook:"नोटबुक लोड हो रहा है...",failedToLoad:"नोटबुक लोड करने में विफल",backToNotebooks:"नोटबुक पर वापस जाएं",untitledNotebook:"बिना शीर्षक नोटबुक",justNow:"अभी",hoursAgo:"घंटे पहले",hourAgo:"घंटा पहले",daysAgo:"दिन पहले",dayAgo:"दिन पहले"},"fa-IR":{title:"دفترچه‌ها",addNotebook:"Add",blank:"خالی",fromTemplate:"از قالب",importNotebook:"وارد کردن دفترچه",delete:"حذف",lastEdited:"آخرین ویرایش",back:"بازگشت",notebookViewer:"نمایشگر دفترچه",saved:"ذخیره شد",saving:"در حال ذخیره...",saveError:"خطا در ذخیره",loadingNotebook:"در حال بارگذاری دفترچه...",failedToLoad:"بارگذاری دفترچه ناموفق بود",backToNotebooks:"بازگشت به دفترچه‌ها",untitledNotebook:"دفترچه بدون عنوان",justNow:"همین الان",hoursAgo:"ساعت پیش",hourAgo:"ساعت پیش",daysAgo:"روز پیش",dayAgo:"روز پیش"}},At={"en-US":{title:"Settings",appearance:"Appearance",language:"Language",about:"About",theme:"Theme",version:"Version",appName:"K12 Notebook - Web Shell"},"ja-JP":{title:"設定",appearance:"外観",language:"言語",about:"について",theme:"テーマ",version:"バージョン",appName:"K12ノートブック - ウェブシェル"},"hi-IN":{title:"सेटिंग्स",appearance:"दिखावट",language:"भाषा",about:"के बारे में",theme:"थीम",version:"संस्करण",appName:"K12 नोटबुक - वेब शेल"},"fa-IR":{title:"تنظیمات",appearance:"ظاهر",language:"زبان",about:"درباره",theme:"تم",version:"نسخه",appName:"دفترچه K12 - پوسته وب"}},Xe={"en-US":{notebookStarting:"The notebook is starting up...",notebookStartError:"The notebook could not be started because of an error:",inputDialogTitle:"Enter Input",inputDialogLabel:"Input",inputDialogCancel:"Cancel",inputDialogSubmit:"Submit"},"ja-JP":{notebookStarting:"ノートブックを起動中...",notebookStartError:"エラーのためノートブックを起動できませんでした:",inputDialogTitle:"入力してください",inputDialogLabel:"入力",inputDialogCancel:"キャンセル",inputDialogSubmit:"送信"},"hi-IN":{notebookStarting:"नोटबुक शुरू हो रहा है...",notebookStartError:"त्रुटि के कारण नोटबुक शुरू नहीं हो सका:",inputDialogTitle:"इनपुट दर्ज करें",inputDialogLabel:"इनपुट",inputDialogCancel:"रद्द करें",inputDialogSubmit:"जमा करें"},"fa-IR":{notebookStarting:"دفترچه در حال راه‌اندازی است...",notebookStartError:"دفترچه به دلیل خطا راه‌اندازی نشد:",inputDialogTitle:"ورودی را وارد کنید",inputDialogLabel:"ورودی",inputDialogCancel:"لغو",inputDialogSubmit:"ارسال"}},Bt=["light","dark"],Ft="dark",x=ke({theme:localStorage.getItem("theme")||Ft,locale:localStorage.getItem("locale")||Lt,setTheme(o){this.theme=o,localStorage.setItem("theme",o)},setLocale(o){this.locale=o,localStorage.setItem("locale",o)}}),Pt={class:"d-flex justify-end mb-2"},Mt={class:"d-flex align-center"},Ut={class:"flex-grow-1"},Ot={class:"text-h6 mb-1"},zt={class:"text-caption text-medium-emphasis mb-0"},Rt=C({__name:"NotebookCard",props:{notebook:{}},emits:["delete"],setup(o,{emit:e}){const t=o,a=e,l=xe(),i=N(()=>Ne[x.locale]),u=r=>{const g=Math.floor((new Date().getTime()-r.getTime())/(1e3*60*60));if(g<1)return i.value.justNow;if(g<24){const _=g===1?i.value.hourAgo:i.value.hoursAgo;return`${g} ${_}`}else{const _=Math.floor(g/24),z=_===1?i.value.dayAgo:i.value.daysAgo;return`${_} ${z}`}},s=()=>{l.push(`/notebooks/${t.notebook.id}`)},d=()=>{a("delete",t.notebook.id)};return(r,f)=>(p(),w(B,{class:"notebook-card",hover:"",onClick:s},{default:m(()=>[c(M,{class:"pb-2"},{default:m(()=>[v("div",Pt,[c(He,null,{activator:m(({props:g})=>[c(I,We({icon:"mdi-dots-vertical",variant:"text",size:"small"},g,{onClick:f[0]||(f[0]=ot(()=>{},["stop"]))}),null,16)]),default:m(()=>[c(qe,null,{default:m(()=>[c(pe,{onClick:d},{default:m(()=>[c(ge,null,{default:m(()=>[T(k(i.value.delete),1)]),_:1})]),_:1})]),_:1})]),_:1})]),v("div",Mt,[c(A,{icon:"mdi-notebook-outline",size:"large",color:"primary",class:"me-3"}),v("div",Ut,[v("h3",Ot,k(r.notebook.title),1),v("p",zt,k(i.value.lastEdited)+": "+k(u(r.notebook.lastModified||r.notebook.created)),1)])])]),_:1})]),_:1}))}}),P=(o,e)=>{const t=o.__vccOpts||o;for(const[a,l]of e)t[a]=l;return t},jt=P(Rt,[["__scopeId","data-v-3a1233ae"]]),Wt="NotebookDB",$="notebooks",Ht=2,te=async()=>new Promise((o,e)=>{const t=indexedDB.open(Wt,Ht);t.onerror=()=>e(t.error),t.onsuccess=()=>o(t.result),t.onupgradeneeded=a=>{const l=t.result;if(l.objectStoreNames.contains($)){if(a.oldVersion<2){const i=t.transaction;if(i){const u=i.objectStore($);u.openCursor().onsuccess=s=>{const d=s.target.result;if(d){const r=d.value;r.created||(r.created=r.lastModified||Date.now(),d.update(r)),d.continue()}}}}}else{const i=l.createObjectStore($,{keyPath:"id"});i.createIndex("lastModified","lastModified"),i.createIndex("created","created")}}}),Ee=async(o,e)=>{const t=await te();if(!t.objectStoreNames.contains($))throw new Error("Database not properly initialized");return new Promise((a,l)=>{try{const i=t.transaction($,"readwrite"),u=i.objectStore($),s=u.get(o);s.onsuccess=()=>{const d=s.result,r=Date.now(),f={id:o,notebook:e,lastModified:r,created:(d==null?void 0:d.created)||r},g=u.put(f);g.onsuccess=()=>a(),g.onerror=()=>l(g.error)},s.onerror=()=>l(s.error),i.oncomplete=()=>t.close()}catch(i){l(i)}})},qt=async o=>{const e=await te();if(!e.objectStoreNames.contains($))throw new Error("Database not properly initialized");return new Promise((t,a)=>{try{const l=e.transaction($,"readonly"),u=l.objectStore($).get(o);u.onsuccess=()=>{const s=u.result;if(!s){a(new Error("Notebook not found"));return}t(s.notebook)},u.onerror=()=>a(u.error),l.oncomplete=()=>e.close()}catch(l){a(l)}})},re=async()=>{const o=await te();if(!o.objectStoreNames.contains($))throw new Error("Database not properly initialized");return new Promise((e,t)=>{try{const a=o.transaction($,"readonly"),i=a.objectStore($).getAll();i.onsuccess=()=>{const s=i.result.map(d=>{var r;return{id:d.id,title:((r=d.notebook.metadata)==null?void 0:r.title)||"Untitled Notebook",lastModified:new Date(d.lastModified),created:new Date(d.created)}});s.sort((d,r)=>r.created.getTime()-d.created.getTime()),e(s)},i.onerror=()=>t(i.error),a.oncomplete=()=>o.close()}catch(a){t(a)}})},Kt=async o=>{const e=await te();if(!e.objectStoreNames.contains($))throw new Error("Database not properly initialized");return new Promise((t,a)=>{try{const l=e.transaction($,"readwrite");l.objectStore($).delete(o),l.oncomplete=()=>t(),l.onerror=()=>a(l.error)}catch(l){a(l)}})},Jt=async()=>{try{const o=await fetch("./templates/blank.ipynb");if(!o.ok)throw new Error(`Failed to load blank notebook template: ${o.statusText}`);const e=await o.json();return e.cells.forEach(t=>{t.id||(t.id=q())}),e}catch(o){throw new Error(`Failed to load blank notebook template: ${o instanceof Error?o.message:String(o)}`)}},Gt=async o=>new Promise((e,t)=>{const a=new FileReader;a.onload=async l=>{var i;try{const u=(i=l.target)==null?void 0:i.result,s=JSON.parse(u);if(!s.cells||!Array.isArray(s.cells))throw new Error("Invalid notebook format: missing or invalid cells array");s.metadata||(s.metadata={}),s.nbformat||(s.nbformat=4),s.nbformat_minor||(s.nbformat_minor=2),s.cells.forEach(r=>{r.id||(r.id=q()),r.metadata||(r.metadata={}),r.source||(r.source=[])}),s.metadata.title||(s.metadata.title=o.name.replace(".ipynb","")||"Imported Notebook");const d=q();await Ee(d,s),e(d)}catch(u){t(new Error(`Failed to parse notebook file: ${u instanceof Error?u.message:String(u)}`))}},a.onerror=()=>{t(new Error("Failed to read the selected file"))},a.readAsText(o)}),Yt={class:"notebook-index"},Qt={class:"d-flex align-center mb-6 header-container"},Xt={class:"text-h4 notebook-title flex-grow-1"},Zt={key:0,class:"text-center mt-8"},eo=C({__name:"NotebookIndex",setup(o){const e=N(()=>Ne[x.locale]),t=N(()=>ee[x.locale].direction==="rtl"),a=L([]);O(async()=>{try{const s=await re();a.value=s}catch(s){console.error("Failed to load notebooks:",s)}});const l=async s=>{try{await Kt(s);const d=a.value.findIndex(r=>r.id===s);d>-1&&a.value.splice(d,1),console.log("Notebook deleted successfully:",s)}catch(d){console.error("Failed to delete notebook:",d)}},i=async()=>{try{console.log("Create blank notebook");const s=await Jt(),d=q();await Ee(d,s),console.log("Created notebook with id:",d);const r=await re();a.value=r}catch(s){console.error("Failed to create blank notebook:",s)}},u=async()=>{try{const s=document.createElement("input");s.type="file",s.accept=".ipynb",s.style.display="none",s.onchange=async d=>{var f;const r=(f=d.target.files)==null?void 0:f[0];if(!r){console.log("No file selected");return}try{const g=await Gt(r);console.log("Notebook imported successfully:",g);const _=await re();a.value=_}catch(g){console.error("Failed to import notebook:",g),alert(`Failed to import notebook: ${g instanceof Error?g.message:"Unknown error"}`)}},document.body.appendChild(s),s.click(),document.body.removeChild(s)}catch(s){console.error("Failed to import notebook:",s),alert("Failed to import notebook. Please try again.")}};return(s,d)=>(p(),S("div",Yt,[c(Z,{fluid:"",class:"pa-4"},{default:m(()=>[v("div",Qt,[v("h1",Xt,k(e.value.title),1),c(He,null,{activator:m(({props:r})=>[c(I,We({color:"primary"},r,{"prepend-icon":t.value?void 0:"mdi-plus","append-icon":t.value?"mdi-plus":void 0}),{default:m(()=>[T(k(e.value.addNotebook),1)]),_:2},1040,["prepend-icon","append-icon"])]),default:m(()=>[c(qe,null,{default:m(()=>[c(pe,{onClick:i},{default:m(()=>[c(ge,null,{default:m(()=>[T(k(e.value.blank),1)]),_:1})]),_:1}),c(pe,{onClick:u},{default:m(()=>[c(ge,null,{default:m(()=>[T(k(e.value.importNotebook),1)]),_:1})]),_:1})]),_:1})]),_:1})]),c(Se,null,{default:m(()=>[(p(!0),S(X,null,ye(a.value,r=>(p(),w(Ce,{key:r.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:m(()=>[c(jt,{notebook:r,onDelete:l},null,8,["notebook"])]),_:2},1024))),128))]),_:1}),a.value.length===0?(p(),S("div",Zt,[c(A,{icon:"mdi-notebook-outline",size:"64",color:"grey"}),d[0]||(d[0]=v("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No notebooks yet",-1)),d[1]||(d[1]=v("p",{class:"text-body-2 text-medium-emphasis"},"Create your first notebook to get started",-1))])):E("",!0)]),_:1})]))}}),to=P(eo,[["__scopeId","data-v-d8ce6114"]]),oo={cells:[],metadata:{},nbformat:4,nbformat_minor:2},y=ke({content:{},updated:null,clear(){this.updated=null,this.content=oo},findCell(o){return this.content.cells?this.content.cells.find(e=>e.id===o):null},getSource(o){const e=this.findCell(o);return e?e.source:null},getLocalizedSource(o,e){var u;const t=this.findCell(o);if(!t)return;let a=t.source;if(t.metadata.i18n&&t.metadata.i18n[e]&&(a=t.metadata.i18n[e]),!a)return;const l=(u=this.content.metadata)==null?void 0:u.globals;return l?a.map(s=>s.replace(/\{\{\s*(\w+)\s*\}\}/g,(d,r)=>{const f=l[r];if(!f)return d;const g=f[e]||f.default;return g===void 0?d:`${g}`})):a},setSource(o,e){const t=this.findCell(o);t&&(e=e.map(a=>a+`
`),t.source=e,this.updated=Date.now())},clearOutputs(o){const e=this.findCell(o);e&&(e.outputs=[],this.updated=Date.now())},getOutputTypes(o){var a,l,i;let e=[];const t=this.findCell(o);return t&&(((a=t.outputs)==null?void 0:a.findIndex(u=>u.output_type==="execute_result"))!==-1&&e.push("result"),((l=t.outputs)==null?void 0:l.findIndex(u=>u.output_type==="stream"&&u.name==="stdout"))!==-1&&e.push("stdout"),((i=t.outputs)==null?void 0:i.findIndex(u=>u.output_type==="error"))!==-1&&e.push("error")),e},addStdout(o,e){const t=this.findCell(o);if(t){t.outputs||(t.outputs=[]);const a=t.outputs.findIndex(l=>l.output_type==="stream"&&l.name==="stdout");a!==-1?(t.outputs[a].text||(t.outputs[a].text=[]),t.outputs[a].text.push(e)):t.outputs.push({output_type:"stream",name:"stdout",text:[e]}),this.updated=Date.now()}},getStdout(o){var a;let e="";const t=this.findCell(o);return t&&((a=t.outputs)==null||a.forEach(l=>{var i;l.output_type==="stream"&&(e+=((i=l.text)==null?void 0:i.join(""))||"")})),e},setResult(o,e){const t=this.findCell(o);if(t){t.outputs||(t.outputs=[]);const a=t.outputs.findIndex(l=>l.output_type==="execute_result");if(a!==-1){const l=t.outputs[a].data||{};t.outputs[a].data={...l,...e}}else t.outputs.push({output_type:"execute_result",data:e});this.updated=Date.now()}},getResult(o){var a;let e={};const t=this.findCell(o);return t&&((a=t.outputs)==null||a.forEach(l=>{l.output_type==="execute_result"&&l.data&&(e=l.data)})),e},setError(o,e){const t=this.findCell(o);if(t){t.outputs||(t.outputs=[]);const a=Array.isArray(e)?e:e.split(`
`);t.outputs.push({output_type:"error",traceback:a}),this.updated=Date.now()}},getError(o){var a;let e="";const t=this.findCell(o);return t&&((a=t.outputs)==null||a.forEach(l=>{var i;l.output_type==="error"&&(e+=((i=l.traceback)==null?void 0:i.join(""))||"")})),e},loadNotebook(o){o.cells&&(o.cells.forEach(e=>{(!e.id||typeof e.id!="string"||e.id.trim()==="")&&(e.id=q())}),this.content=o)},hasTag(o,e){const t=this.findCell(o);return!t||!t.metadata.tags?!1:t.metadata.tags.includes(e)},addTag(o,e){const t=this.findCell(o);t&&(t.metadata.tags||(t.metadata.tags=[]),t.metadata.tags.includes(e)||(t.metadata.tags.push(e),this.updated=Date.now()))},removeTag(o,e){const t=this.findCell(o);if(t&&t.metadata.tags){const a=t.metadata.tags.indexOf(e);a!==-1&&(t.metadata.tags.splice(a,1),this.updated=Date.now())}},toggleTag(o,e){this.hasTag(o,e)?this.removeTag(o,e):this.addTag(o,e)}}),ao=2e3,no=2e3;function ro(o){const e=L("idle"),t=L(null);let a=null;const l=async u=>{a&&clearTimeout(a),a=setTimeout(async()=>{try{console.log(`Auto-Save: Saving Notebook ${o}`),e.value="saving";const s=JSON.parse(JSON.stringify(u));await Ee(o,s),e.value="saved",t.value=new Date,console.log(`Auto-Save: Saved Notebook ${o}`),setTimeout(()=>{e.value==="saved"&&(e.value="idle")},no)}catch(s){console.error("Auto-Save: Failed:",s),e.value="error"}},ao)},i=F(()=>y.updated,()=>{var u;y.updated!=null&&y.content&&((u=y.content.cells)==null?void 0:u.length)>0&&l(y.content)});return{saveStatus:e,lastSaved:t,stopWatcher:i}}const lo=["innerHTML"],so=C({__name:"MarkdownCell",props:{cell:{},locale:{}},setup(o){const e=t=>t?Nt.parse(t.join("")):"";return(t,a)=>(p(),w(B,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:m(()=>[c(M,null,{default:m(()=>[v("div",{innerHTML:e(h(y).getLocalizedSource(t.cell.id,t.locale))},null,8,lo)]),_:1})]),_:1}))}}),b=ke({executionStatus:"idle",workerStatus:"initializing",runningCellId:null,interruptBuffer:null,fatalErrorTrace:"",inputStatus:"idle",inputPrompt:null,userInput:null,setInterruptBuffer(o){this.interruptBuffer=o},clearInterruptBuffer(){this.interruptBuffer&&(this.interruptBuffer[0]=0)},interruptExecution(){this.interruptBuffer&&(this.interruptBuffer[0]=2),this.executionStatus="idle"},setWorkerStatus(o){this.workerStatus=o},executeCell(o){this.executionStatus==="idle"&&this.workerStatus==="ready"&&(this.runningCellId=o,this.executionStatus="queued")},executionCompleted(){this.runningCellId=null,this.executionStatus="idle"},setFatalError(o){this.workerStatus="error",this.fatalErrorTrace=o},requestUserInput(o){this.inputStatus="waiting",this.userInput=null,this.inputPrompt=o},submitUserInput(o){this.inputStatus="submitted",this.userInput=o}}),io=C({__name:"CodeControls",props:{id:{}},setup(o){const e=o,t=()=>{y.clearOutputs(e.id),b.executeCell(e.id)},a=()=>{y.clearOutputs(e.id)},l=()=>{b.interruptExecution()},i=N(()=>y.hasTag(e.id,"hide_code")),u=()=>{y.toggleTag(e.id,"hide_code")};return(s,d)=>(p(),S("div",null,[v("div",null,[c(oe,{rounded:"lg"},{default:m(()=>[c(I,{size:"32",icon:"mdi-play-outline",onClick:t,disabled:h(b).executionStatus!=="idle"||h(b).workerStatus!=="ready",loading:h(b).workerStatus!=="ready","aria-label":"Run code"},null,8,["disabled","loading"]),c(I,{size:"32",icon:"mdi-stop",onClick:l,disabled:h(b).executionStatus==="idle"||h(b).runningCellId!==s.id,"aria-label":"Stop code"},null,8,["disabled"])]),_:1}),c(oe,{rounded:"lg",class:"pl-4"},{default:m(()=>[c(I,{size:"32",icon:"mdi-broom",onClick:a})]),_:1}),c(oe,{rounded:"lg",class:"pl-2"},{default:m(()=>[c(I,{size:"32",icon:i.value?"mdi-eye-off":"mdi-eye",onClick:u,"aria-label":i.value?"Show code":"Hide code"},null,8,["icon","aria-label"])]),_:1})])]))}}),Ve="#2e3440",Ze="#3b4252",De="#434c5e",K="#4c566a",he="#e5e9f0",_e="#eceff4",le="#8fbcbb",Ae="#88c0d0",co="#81a1c1",D="#5e81ac",uo="#bf616a",R="#d08770",se="#ebcb8b",Be="#a3be8c",mo="#b48ead",Fe="#d30102",Te=_e,ie=Te,po="#ffffff",ce=he,go=Te,Pe=Ze,fo=H.theme({"&":{color:Ve,backgroundColor:po},".cm-content":{caretColor:Pe,fontFamily:"JetBrainsMono, monospace"},".cm-cursor, .cm-dropCursor":{borderLeftColor:Pe},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:go},".cm-panels":{backgroundColor:Te,color:K},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:`1px solid ${K}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:he},".cm-activeLine":{backgroundColor:ie},".cm-selectionMatch":{backgroundColor:he},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${K}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:_e},".cm-gutters":{backgroundColor:_e,color:Ve,border:"none"},".cm-activeLineGutter":{backgroundColor:ie},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:ce},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:ce,borderBottomColor:ce},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:ie,color:K}}},{dark:!1}),bo=Ye.define([{tag:n.keyword,color:D},{tag:[n.name,n.deleted,n.character,n.propertyName,n.macroName],color:R},{tag:[n.variableName],color:R},{tag:[n.function(n.variableName)],color:D},{tag:[n.labelName],color:co},{tag:[n.color,n.constant(n.name),n.standard(n.name)],color:D},{tag:[n.definition(n.name),n.separator],color:Be},{tag:[n.brace],color:le},{tag:[n.annotation],color:Fe},{tag:[n.number,n.changed,n.annotation,n.modifier,n.self,n.namespace],color:Ae},{tag:[n.typeName,n.className],color:se},{tag:[n.operator,n.operatorKeyword],color:Be},{tag:[n.tagName],color:mo},{tag:[n.squareBracket],color:uo},{tag:[n.angleBracket],color:R},{tag:[n.attributeName],color:se},{tag:[n.regexp],color:D},{tag:[n.quote],color:Ze},{tag:[n.string],color:R},{tag:n.link,color:le,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[n.url,n.escape,n.special(n.string)],color:R},{tag:[n.meta],color:Ae},{tag:[n.comment],color:De,fontStyle:"italic"},{tag:n.strong,fontWeight:"bold",color:D},{tag:n.emphasis,fontStyle:"italic",color:D},{tag:n.strikethrough,textDecoration:"line-through"},{tag:n.heading,fontWeight:"bold",color:D},{tag:n.special(n.heading1),fontWeight:"bold",color:D},{tag:n.heading1,fontWeight:"bold",color:D},{tag:[n.heading2,n.heading3,n.heading4],fontWeight:"bold",color:D},{tag:[n.heading5,n.heading6],color:D},{tag:[n.atom,n.bool,n.special(n.variableName)],color:R},{tag:[n.processingInstruction,n.inserted],color:le},{tag:[n.contentSeparator],color:se},{tag:n.invalid,color:De,borderBottom:`1px dotted ${Fe}`}]),ho=[fo,Qe(bo)],et="#2e3235",tt="#505d64",ve="#606f7a",Q="#707d8b",_o="#a0a4ae",Y="#bdbdbd",vo="#e0e0e0",ko="#fdf6e3",j="#ff5f52",yo="#ff6e40",wo="#fa5788",U="#facf4e",Me="#ffad42",W="#56c8d8",So="#7186f0",ue="#cf6edf",Co="#6abf69",Ue="#99d066",Oe="#4ebaaa",ze=j,Re="#202325",J="#414b46",xo=et,de=tt,No=tt,je=_o,Eo=H.theme({"&":{color:Y,backgroundColor:xo},".cm-content":{caretColor:je,fontFamily:"JetBrainsMono, monospace"},".cm-cursor, .cm-dropCursor":{borderLeftColor:je},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:No},".cm-panels":{backgroundColor:Re,color:Q},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{outline:`1px solid ${U}`,backgroundColor:"transparent"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:J},".cm-activeLine":{backgroundColor:J},".cm-selectionMatch":{backgroundColor:Re,outline:`1px solid ${Oe}`},"&.cm-focused .cm-matchingBracket":{color:vo,outline:`1px solid ${Oe}`},"&.cm-focused .cm-nonmatchingBracket":{color:j},".cm-gutters":{backgroundColor:et,borderRight:"1px solid #4f5b66",color:ve},".cm-activeLineGutter":{backgroundColor:J,color:ko},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:de},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:de,borderBottomColor:de},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:J,color:Q}}},{dark:!0}),To=Ye.define([{tag:n.keyword,color:ue},{tag:[n.name,n.deleted,n.character,n.macroName],color:W},{tag:[n.propertyName],color:U},{tag:[n.variableName],color:Y},{tag:[n.function(n.variableName)],color:W},{tag:[n.labelName],color:ue},{tag:[n.color,n.constant(n.name),n.standard(n.name)],color:U},{tag:[n.definition(n.name),n.separator],color:wo},{tag:[n.brace],color:ue},{tag:[n.annotation],color:ze},{tag:[n.number,n.changed,n.annotation,n.modifier,n.self,n.namespace],color:Me},{tag:[n.typeName,n.className],color:Me},{tag:[n.operator,n.operatorKeyword],color:So},{tag:[n.tagName],color:yo},{tag:[n.squareBracket],color:j},{tag:[n.angleBracket],color:ve},{tag:[n.attributeName],color:Y},{tag:[n.regexp],color:ze},{tag:[n.quote],color:Co},{tag:[n.string],color:Ue},{tag:n.link,color:W,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[n.url,n.escape,n.special(n.string)],color:U},{tag:[n.meta],color:Q},{tag:[n.comment],color:Q,fontStyle:"italic"},{tag:n.monospace,color:Y},{tag:n.strong,fontWeight:"bold",color:j},{tag:n.emphasis,fontStyle:"italic",color:Ue},{tag:n.strikethrough,textDecoration:"line-through"},{tag:n.heading,fontWeight:"bold",color:U},{tag:n.heading1,fontWeight:"bold",color:U},{tag:[n.heading2,n.heading3,n.heading4],fontWeight:"bold",color:U},{tag:[n.heading5,n.heading6],color:U},{tag:[n.atom,n.bool,n.special(n.variableName)],color:W},{tag:[n.processingInstruction,n.inserted],color:j},{tag:[n.contentSeparator],color:W},{tag:n.invalid,color:ve,borderBottom:`1px dotted ${j}`}]),$o=[Eo,Qe(To)],Io=["id"],Lo=C({__name:"CodeEditor",props:{source:{},metadata:{},id:{},theme:{}},setup(o){const e=o;let t=null,a=!1;return O(()=>{let l=ho;switch(e.theme){case"dark":l=$o;break}const i=Et.create({doc:e.source?e.source.join(""):"",extensions:[$t,Tt(),l,H.lineWrapping,H.updateListener.of(u=>{if(u.docChanged&&!a){const s=u.state.doc.toString();y.setSource(e.id,s.includes(`
`)?s.split(`
`):[s])}})]});t=new H({state:i,parent:document.getElementById("code-editor-"+e.id)})}),F(()=>e.source,l=>{if(t&&l&&!a){const i=t.state.doc.toString(),u=l.join(""),s=i.replace(/\n+$/,""),d=u.replace(/\n+$/,"");s!==d&&(a=!0,t.dispatch({changes:{from:0,to:t.state.doc.length,insert:u}}),a=!1)}},{deep:!0}),(l,i)=>(p(),S("div",{id:`code-editor-${e.id}`},null,8,Io))}}),Vo=C({__name:"Console",props:{stdout:{}},setup(o){const e=o,t=L(null),a=()=>{if(!t.value)return;const s=`${(e.stdout?e.stdout.split(`
`).length:1)*1.2+1.5}em`;t.value.style.height=s};return F(()=>e.stdout,()=>{a()},{immediate:!0}),O(()=>{a()}),(l,i)=>(p(),S("textarea",{ref_key:"consoleRef",ref:t,class:"output-console",readonly:""},k(l.stdout),513))}}),Do=P(Vo,[["__scopeId","data-v-43c05e2b"]]),Ao={class:"output-console",readonly:""},Bo=C({__name:"Error",props:{stderr:{}},setup(o){return(e,t)=>(p(),S("textarea",Ao,k(e.stderr),1))}}),Fo=P(Bo,[["__scopeId","data-v-62cb5501"]]),Po=C({__name:"TextPlain",props:{value:{}},setup(o){const e=L(null);return(t,a)=>(p(),S("textarea",{ref_key:"consoleRef",ref:e,class:"output-console",readonly:""},k(Array.isArray(t.value)?t.value.join(""):t.value),513))}}),Mo=P(Po,[["__scopeId","data-v-6e2abbc4"]]),Uo=["src"],Oo=C({__name:"ImagePng",props:{value:{}},setup(o){return(e,t)=>(p(),S("img",{src:`data:image/png;base64,${e.value}`},null,8,Uo))}}),zo=["src"],Ro=C({__name:"ImageSvg",props:{value:{}},setup(o){return(e,t)=>(p(),S("img",{src:`data:image/svg+xml;charset=utf-8,${encodeURIComponent(e.value)}`},null,8,zo))}}),jo=C({__name:"Result",props:{value:{}},setup(o){return(e,t)=>(p(),S(X,null,[e.value["image/svg+xml"]?(p(),w(Ro,{key:0,value:e.value["image/svg+xml"]},null,8,["value"])):E("",!0),e.value["image/png"]?(p(),w(Oo,{key:1,value:e.value["image/png"]},null,8,["value"])):E("",!0),e.value["text/plain"]?(p(),w(Mo,{key:2,value:e.value["text/plain"]},null,8,["value"])):E("",!0)],64))}});function Wo(o){if(!o)return[];const e=[];return o.forEach((t,a)=>{const i=t.replace(/\n$/,"").trim();if(!i||i.startsWith("#"))return;const u=i.match(/^(\w+)\s*=\s*(.+?)\s*#\s*@param(.*)$/);if(!u)return;const[,s,d,r]=u;try{const f=Ho(d),g=qo(r.trim()),_=Ko(f,g);e.push({name:s,value:f,type:_,config:g,lineNumber:a})}catch(f){console.warn(`Failed to parse parameter on line ${a+1}: ${t}`,f)}}),e}function Ho(o){const e=o.trim();if(e==="True")return!0;if(e==="False")return!1;if(e==="None")return null;const t=e.match(/^["'](.*)["']$/);return t?t[1]:e.match(/^-?\d+\.?\d*$/)?e.includes(".")?parseFloat(e):parseInt(e,10):e}function qo(o){if(!o)return{};const e=o.match(/^\[(.+)\]$/);if(e)return{options:e[1].split(",").map(i=>{const u=i.trim(),s=u.match(/^["'](.*)["']$/);return s?s[1]:u})};const t=o.match(/^\{(.+)\}$/);if(t)try{const a=t[1],l={};return a.split(",").forEach(u=>{const[s,d]=u.split(":").map(r=>r.trim());if(s&&d){const r=s.replace(/["']/g,""),f=d.replace(/["']/g,"");r==="type"?l.type=f:(r==="min"||r==="max"||r==="step")&&(l[r]=parseFloat(f))}}),l}catch{return console.warn("Failed to parse config JSON:",o),{}}return{}}function Ko(o,e){return e.type==="slider"?"slider":e.type==="boolean"?"boolean":e.options&&e.options.length>0?"dropdown":typeof o=="boolean"?"boolean":"value"}function Jo(o,e,t){if(!o||e.lineNumber>=o.length)return o;const a=[...o],l=a[e.lineNumber],i=l.endsWith(`
`),s=l.replace(/\n$/,"").match(/^(\w+\s*=\s*)(.+?)(\s*#\s*@param.*)$/);if(s){const[,d,,r]=s,f=Go(t);a[e.lineNumber]=`${d}${f}${r}${i?`
`:""}`}return a}function Go(o){return typeof o=="boolean"?o?"True":"False":o==null?"None":typeof o=="string"?`"${o}"`:String(o)}const Yo={key:0,class:"parameter-controls mb-4"},Qo={class:"parameter-grid"},Xo={key:1,class:"slider-container"},Zo={class:"slider-layout"},ea={key:3,class:"boolean-container"},ta=C({__name:"ParameterControls",props:{source:{},cellId:{}},emits:["parameter-changed"],setup(o,{emit:e}){const t=o,a=e,l=N(()=>Wo(t.source)),i=(s,d)=>{if(!t.source)return;const r=Jo(t.source,s,d);a("parameter-changed",r)},u=s=>s.name.replace(/_/g," ").toLowerCase().replace(/\b\w/g,d=>d.toUpperCase());return(s,d)=>l.value.length>0?(p(),S("div",Yo,[c(B,{variant:"outlined",class:"pa-4"},{default:m(()=>[v("div",Qo,[(p(!0),S(X,null,ye(l.value,r=>{var f,g,_,z;return p(),S("div",{key:r.name,class:"parameter-item"},[r.type==="value"?(p(),w(fe,{key:0,label:u(r),"model-value":r.value,"onUpdate:modelValue":V=>i(r,V),variant:"outlined",density:"compact","hide-details":""},null,8,["label","model-value","onUpdate:modelValue"])):r.type==="slider"?(p(),S("div",Xo,[c(ct,{class:"text-caption mb-1"},{default:m(()=>[T(k(u(r)),1)]),_:2},1024),v("div",Zo,[c(ut,{"model-value":r.value,"onUpdate:modelValue":V=>i(r,V),min:((f=r.config)==null?void 0:f.min)??0,max:((g=r.config)==null?void 0:g.max)??100,step:((_=r.config)==null?void 0:_.step)??1,"thumb-label":"",class:"slider-control","hide-details":""},null,8,["model-value","onUpdate:modelValue","min","max","step"]),c(fe,{"model-value":r.value,readonly:"",variant:"outlined",density:"compact",class:"value-display","hide-details":""},null,8,["model-value"])])])):r.type==="dropdown"?(p(),w(be,{key:2,label:u(r),"model-value":r.value,"onUpdate:modelValue":V=>i(r,V),items:((z=r.config)==null?void 0:z.options)||[],variant:"outlined",density:"compact","hide-details":""},null,8,["label","model-value","onUpdate:modelValue","items"])):r.type==="boolean"?(p(),S("div",ea,[c(dt,{"model-value":r.value,"onUpdate:modelValue":V=>i(r,V),label:u(r),color:"primary","hide-details":"",inset:""},null,8,["model-value","onUpdate:modelValue","label"])])):E("",!0)])}),128))])]),_:1})])):E("",!0)}}),oa=P(ta,[["__scopeId","data-v-9ab33d5a"]]),aa=C({__name:"CodeCell",props:{cell:{},theme:{},locale:{}},setup(o){const e=o;let t=[];t=y.getOutputTypes(e.cell.id);const a=()=>{if(t.indexOf("result")!==-1)return"result";if(t.indexOf("stdout")!==-1)return"stdout";if(t.indexOf("error")!==-1)return"error"},l=L("result");F(()=>e.cell.outputs,()=>{t=y.getOutputTypes(e.cell.id),l.value="none",l.value=a()||l.value},{deep:!0});const i=s=>{const d=y.findCell(e.cell.id);d&&(d.source=s,y.updated=Date.now())},u=N(()=>y.hasTag(e.cell.id,"hide_code"));return(s,d)=>(p(),S("div",null,[c(oa,{source:h(y).getLocalizedSource(s.cell.id,e.locale),"cell-id":s.cell.id,onParameterChanged:i},null,8,["source","cell-id"]),c(B,{"max-width":"800",variant:"elevated",elevation:"2",color:"surface-light",class:"mb-2 pt-2 pb-2 ma-auto rounded-lg"},{default:m(()=>[u.value?E("",!0):(p(),w(M,{key:0},{default:m(()=>[c(Lo,{source:h(y).getLocalizedSource(s.cell.id,e.locale),id:s.cell.id,metadata:s.cell.metadata,theme:e.theme},null,8,["source","id","metadata","theme"])]),_:1})),c(Ke,{class:"pl-4 pr-4 d-flex justify-space-between"},{default:m(()=>[c(io,{id:s.cell.id},null,8,["id"]),c(mt,{modelValue:l.value,"onUpdate:modelValue":d[0]||(d[0]=r=>l.value=r),class:"ml-auto"},{default:m(()=>[h(t).indexOf("result")!==-1?(p(),w(ae,{key:0,value:"result",icon:"",size:"32",rounded:"lg","min-width":"48"},{default:m(()=>[c(A,{icon:"mdi-monitor"})]),_:1})):E("",!0),h(t).indexOf("stdout")!==-1?(p(),w(ae,{key:1,value:"stdout",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:m(()=>[c(A,{icon:"mdi-console"})]),_:1})):E("",!0),h(t).indexOf("error")!==-1?(p(),w(ae,{key:2,value:"error",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:m(()=>[c(A,{icon:"mdi-alert-circle-outline"})]),_:1})):E("",!0)]),_:1},8,["modelValue"])]),_:1}),at(c(M,null,{default:m(()=>[c(pt,{modelValue:l.value,"onUpdate:modelValue":d[1]||(d[1]=r=>l.value=r),direction:"vertical"},{default:m(()=>[c(ne,{value:"result"},{default:m(()=>[c(jo,{value:h(y).getResult(s.cell.id)},null,8,["value"])]),_:1}),c(ne,{value:"stdout",direction:"vertical"},{default:m(()=>[c(Do,{stdout:h(y).getStdout(s.cell.id)},null,8,["stdout"])]),_:1}),c(ne,{value:"error",direction:"vertical"},{default:m(()=>[c(Fo,{stderr:h(y).getError(s.cell.id)},null,8,["stderr"])]),_:1})]),_:1},8,["modelValue"])]),_:1},512),[[nt,e.cell.outputs?e.cell.outputs.length>0:!1]])]),_:1})]))}}),na=C({__name:"PyodideProvider",props:{notebookId:{},locale:{}},setup(o){const e=o;let t;return O(async()=>{console.log("PyodideProvider: Starting new worker for "+e.notebookId),b.setWorkerStatus("initializing"),t=new Worker(new URL("/k12nb/assets/PyodideWorker-CkAqyADK.js",import.meta.url),{type:"module"}),t.postMessage({type:"initialize"}),t.onmessage=async a=>{const{type:l,text:i,result:u,message:s,error:d,interruptBuffer:r}=a.data;switch(l){case"initialized":console.log("PyodideProvider: Pyodide is initialized"),b.setWorkerStatus("ready"),r&&(b.setInterruptBuffer(new Int32Array(r)),console.log("PyodideProvider: Set Interrupt Buffer"));break;case"stdout":b.runningCellId&&y.addStdout(b.runningCellId,i);break;case"input_request":b.requestUserInput(s);break;case"execute_result":b.runningCellId&&u&&y.setResult(b.runningCellId,u);break;case"execute_completed":b.executionCompleted();break;case"error":b.runningCellId&&y.setError(b.runningCellId,d),b.executionCompleted();break;case"fatal":b.setFatalError(d);break}}}),we(async()=>{console.log("PyodideProvider: Terminating worker."),b.setWorkerStatus("terminating"),t.terminate()}),F(()=>b.executionStatus,a=>{if(a==="queued"&&b.runningCellId!=null){const l=y.getLocalizedSource(b.runningCellId,e.locale);t.postMessage({type:"run",cellId:b.runningCellId,code:l==null?void 0:l.join("")})}}),F(()=>b.inputStatus,a=>{a==="submitted"&&t.postMessage({type:"input_response",value:b.userInput})}),(a,l)=>rt(a.$slots,"default")}}),ra=C({__name:"InputDialog",props:{locale:{}},setup(o){const e=o,t=N(()=>Xe[e.locale||"en-US"]),a=L(""),l=L(),i=N({get:()=>b.inputStatus==="waiting",set:r=>{r||(b.inputStatus="idle")}}),u=()=>{b.submitUserInput(a.value),a.value=""},s=()=>{b.submitUserInput(""),a.value=""};F(()=>i.value,async r=>{var f;r&&(await lt(),(f=l.value)==null||f.focus())});const d=r=>{r.key==="Enter"?(r.preventDefault(),u()):r.key==="Escape"&&(r.preventDefault(),s())};return(r,f)=>(p(),w(gt,{modelValue:i.value,"onUpdate:modelValue":f[1]||(f[1]=g=>i.value=g),"max-width":"400px",persistent:"",onKeydown:d},{default:m(()=>[c(B,null,{default:m(()=>[c(G,null,{default:m(()=>[T(k(h(b).inputPrompt||t.value.inputDialogTitle),1)]),_:1}),c(M,null,{default:m(()=>[c(fe,{ref_key:"inputFieldRef",ref:l,modelValue:a.value,"onUpdate:modelValue":f[0]||(f[0]=g=>a.value=g),label:t.value.inputDialogLabel,variant:"outlined",density:"compact",onKeydown:d},null,8,["modelValue","label"])]),_:1}),c(Ke,null,{default:m(()=>[c(ft),c(I,{color:"grey",variant:"text",onClick:s},{default:m(()=>[T(k(t.value.inputDialogCancel),1)]),_:1}),c(I,{color:"primary",variant:"text",onClick:u},{default:m(()=>[T(k(t.value.inputDialogSubmit),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),la={class:"renderer-container"},sa=C({__name:"Renderer",props:{id:{},initialNotebook:{},theme:{},locale:{}},setup(o){const e=o,t=N(()=>Xe[e.locale]);return O(()=>{y.loadNotebook(e.initialNotebook)}),F(()=>e.initialNotebook,a=>{y.loadNotebook(a)}),(a,l)=>(p(),w(na,{notebookId:a.id,locale:e.locale},{default:m(()=>[v("div",la,[c(Ie,null,{default:m(()=>[h(b).workerStatus=="initializing"?(p(),w(Le,{key:0,text:t.value.notebookStarting,type:"info",variant:"tonal",density:"compact"},null,8,["text"])):E("",!0)]),_:1}),c(Ie,null,{default:m(()=>[h(b).workerStatus=="error"?(p(),w(Le,{key:0,text:`${t.value.notebookStartError} ${h(b).fatalErrorTrace}`,type:"error",variant:"tonal",density:"compact"},null,8,["text"])):E("",!0)]),_:1}),(p(!0),S(X,null,ye(h(y).content.cells,i=>(p(),S("div",null,[i.cell_type==="markdown"?(p(),w(h(so),{key:0,cell:i,metadata:i.metadata,locale:e.locale},null,8,["cell","metadata","locale"])):E("",!0),i.cell_type==="code"?(p(),w(h(aa),{key:1,cell:i,theme:e.theme,locale:e.locale},null,8,["cell","theme","locale"])):E("",!0)]))),256))]),c(ra,{locale:e.locale},null,8,["locale"])]),_:1},8,["notebookId","locale"]))}}),ia={class:"notebook"},ca={class:"d-flex align-center mb-6 notebook-header"},ua={class:"d-flex align-center flex-grow-1"},da={class:"text-h4 notebook-title"},ma={key:1,class:"loading"},pa={class:"text-center"},ga={class:"text-h5 mb-2"},fa={class:"text-body-1 text-medium-emphasis mb-4"},ba=C({__name:"Notebook",setup(o){const e=Ge(),t=xe(),a=N(()=>Ne[x.locale]),l=N(()=>ee[x.locale].direction==="rtl"),i=N(()=>e.params.id),u=L(null),s=L(!0),d=L(null),{saveStatus:r,stopWatcher:f}=ro(i.value);O(async()=>{try{s.value=!0,d.value=null,u.value=await qt(i.value)}catch(_){console.error("Failed to load notebook:",_),d.value=_ instanceof Error?_.message:"Failed to load notebook"}finally{s.value=!1}});const g=()=>{t.push("/notebooks")};return we(()=>{y.clear(),f()}),(_,z)=>(p(),S("div",ia,[c(Z,{fluid:"",class:"pa-4"},{default:m(()=>{var V,$e;return[v("div",ca,[v("div",ua,[c(I,{icon:l.value?"mdi-arrow-right":"mdi-arrow-left",variant:"text",onClick:g,class:me(l.value?"ms-3":"me-3")},null,8,["icon","class"]),v("h1",da,k((($e=(V=u.value)==null?void 0:V.metadata)==null?void 0:$e.title)||a.value.untitledNotebook),1)]),h(r)!=="idle"?(p(),w(bt,{key:0,color:h(r)==="saved"?"success":h(r)==="saving"?"info":"error",size:"small",variant:"tonal"},{default:m(()=>[c(A,{icon:h(r)==="saved"?"mdi-check":h(r)==="saving"?"mdi-loading":"mdi-alert",class:me([{"mdi-spin":h(r)==="saving"},"me-1"]),size:"small"},null,8,["icon","class"]),T(" "+k(h(r)==="saved"?a.value.saved:h(r)==="saving"?a.value.saving:a.value.saveError),1)]),_:1},8,["color"])):E("",!0)]),u.value&&!s.value&&!d.value?(p(),w(sa,{key:0,"initial-notebook":u.value,id:i.value,theme:h(x).theme,locale:h(x).locale},null,8,["initial-notebook","id","theme","locale"])):s.value?(p(),S("div",ma,[c(ht,{indeterminate:"",color:"primary"}),v("p",null,k(a.value.loadingNotebook),1)])):d.value?(p(),w(B,{key:2,class:"pa-6"},{default:m(()=>[v("div",pa,[c(A,{icon:"mdi-alert-circle",size:"64",color:"error",class:"mb-4"}),v("h2",ga,k(a.value.failedToLoad),1),v("p",fa,k(d.value),1),c(I,{color:"primary",onClick:g},{default:m(()=>[T(k(a.value.backToNotebooks),1)]),_:1})])]),_:1})):E("",!0)]}),_:1})]))}}),ha=P(ba,[["__scopeId","data-v-226b97bd"]]),_a={class:"curriculum-view"},va=C({__name:"Curriculum",setup(o){return(e,t)=>(p(),S("div",_a,[c(Z,null,{default:m(()=>[c(Se,null,{default:m(()=>[c(Ce,{cols:"12"},{default:m(()=>[t[1]||(t[1]=v("h1",{class:"text-h4 mb-4"},"Curriculum",-1)),c(B,null,{default:m(()=>[c(M,null,{default:m(()=>t[0]||(t[0]=[v("p",{class:"text-body-1"}," Curriculum content will be implemented here. This section will contain educational materials, lessons, and structured learning paths. ",-1)])),_:1,__:[0]})]),_:1})]),_:1,__:[1]})]),_:1})]),_:1})]))}}),ka=P(va,[["__scopeId","data-v-4427f550"]]),ya={class:"settings-view"},wa={class:"text-h4 mb-4 settings-title"},Sa={class:"text-body-1"},Ca={class:"text-body-2 text-medium-emphasis"},xa=C({__name:"Settings",setup(o){const e=Je(),t=L(x.theme),a=L(x.locale),l=N(()=>Bt.map(r=>({title:Vt[x.locale][r],value:r}))),i=It.map(r=>({title:ee[r].name,value:r})),u=N(()=>At[x.locale]);O(()=>{e.global.name.value=x.theme}),F(t,r=>{e.global.name.value=r});const s=r=>{x.setTheme(r),t.value=r},d=r=>{x.setLocale(r),a.value=r};return(r,f)=>(p(),S("div",ya,[c(Z,null,{default:m(()=>[c(Se,null,{default:m(()=>[c(Ce,{cols:"12"},{default:m(()=>[v("h1",wa,k(u.value.title),1),c(B,{class:"mb-4"},{default:m(()=>[c(G,null,{default:m(()=>[T(k(u.value.appearance),1)]),_:1}),c(M,null,{default:m(()=>[c(be,{modelValue:t.value,"onUpdate:modelValue":[f[0]||(f[0]=g=>t.value=g),s],items:l.value,label:u.value.theme,"item-title":"title","item-value":"value"},null,8,["modelValue","items","label"])]),_:1})]),_:1}),c(B,{class:"mb-4"},{default:m(()=>[c(G,null,{default:m(()=>[T(k(u.value.language),1)]),_:1}),c(M,null,{default:m(()=>[c(be,{modelValue:a.value,"onUpdate:modelValue":[f[1]||(f[1]=g=>a.value=g),d],items:h(i),label:u.value.language,"item-title":"title","item-value":"value"},null,8,["modelValue","items","label"])]),_:1})]),_:1}),c(B,null,{default:m(()=>[c(G,null,{default:m(()=>[T(k(u.value.about),1)]),_:1}),c(M,null,{default:m(()=>[v("p",Sa,k(u.value.appName),1),v("p",Ca,k(u.value.version)+" 0.1.0 ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}}),Na=P(xa,[["__scopeId","data-v-b8e54928"]]),Ea=[{path:"/",redirect:"notebooks"},{path:"/notebooks",name:"notebooks",component:to},{path:"/notebooks/:id",name:"notebook",component:ha},{path:"/curriculum",name:"curriculum",component:ka},{path:"/settings",name:"settings",component:Na}],Ta=Ct({history:xt("/k12nb/"),routes:Ea}),$a={class:"content-container"},Ia=C({__name:"BaseLayout",setup(o){const e=()=>{const g=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${g}px`)},t=xe(),a=Ge(),l={"/notebooks":0,"/curriculum":1,"/settings":2},i={0:"/notebooks",1:"/curriculum",2:"/settings"},u=N({get:()=>l[a.path]??0,set:g=>{const _=i[g];_&&a.path!==_&&t.push(_)}}),s=Je(),d=N(()=>Dt[x.locale]),r=N(()=>ee[x.locale].direction),f=N(()=>x.locale);return F([r,f],([g,_])=>{document.documentElement.dir=g,document.documentElement.lang=_},{immediate:!0}),O(()=>{s.global.name.value=x.theme,document.documentElement.dir=r.value,document.documentElement.lang=f.value,e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e)}),we(()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}),(g,_)=>{const z=st("router-view");return p(),w(_t,null,{default:m(()=>[c(vt,null,{default:m(()=>[v("div",$a,[c(z)])]),_:1}),c(kt,{modelValue:u.value,"onUpdate:modelValue":_[0]||(_[0]=V=>u.value=V),color:"primary",grow:"",class:me({"rtl-navigation":r.value==="rtl"})},{default:m(()=>[c(I,{value:"0"},{default:m(()=>[c(A,null,{default:m(()=>_[1]||(_[1]=[T("mdi-notebook")])),_:1,__:[1]}),v("span",null,k(d.value.notebooks),1)]),_:1}),c(I,{value:"1"},{default:m(()=>[c(A,null,{default:m(()=>_[2]||(_[2]=[T("mdi-school")])),_:1,__:[2]}),v("span",null,k(d.value.curriculum),1)]),_:1}),c(I,{value:"2"},{default:m(()=>[c(A,null,{default:m(()=>_[3]||(_[3]=[T("mdi-cog")])),_:1,__:[3]}),v("span",null,k(d.value.settings),1)]),_:1})]),_:1},8,["modelValue","class"])]),_:1})}}}),La=P(Ia,[["__scopeId","data-v-77271b7e"]]),Va=C({__name:"App",setup(o){return(e,t)=>(p(),w(La))}}),Da=yt({theme:{defaultTheme:"dark",themes:{light:{colors:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}},dark:{colors:{primary:"#2196F3",secondary:"#424242",accent:"#FF4081",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}},icons:{defaultSet:"mdi",aliases:St,sets:{mdi:wt}}});it(Va).use(Da).use(Ta).mount("#app");
