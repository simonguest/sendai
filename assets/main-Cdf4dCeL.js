import"./modulepreload-polyfill-B5Qt9EMX.js";import{f as Re,d as A,c as U,W as N,X as p,Y as c,A as l,Z as h,V as C,N as _,B as rt,_ as bt,r as $,w as H,g as Pe,o as J,$ as x,a0 as V,F as ee,a1 as ge,u as E,M as vt,R as _t,n as re,a2 as Fe,a3 as kt,a4 as yt,a5 as wt}from"./@vue-SQFZV1zj.js";import{V as z,a as lt,b as nt,c as ue,d as de,e as P,f as M,g as B,h as Me,i as Q,j as le,k as he,l as Be,m as be,n as Oe,o as ze,p as Ce,q as Ct,r as xt,s as De,t as St,u as Et,v as xe,w as Nt,x as Se,y as ne,z as pe,A as oe,B as Lt,C as Tt,D as $t,E as It,F as We,G as st,H as Dt,I as Vt,J as Ut,K as At,L as Rt,M as Pt}from"./vuetify-D0ajfUnM.js";import{u as je,a as it,c as Ft,b as Mt}from"./vue-router-BGXlbkO3.js";import{v as Y}from"./uuid-C6aID195.js";import{m as ct}from"./marked-DKjyhwJX.js";import{z as ae,H as ut,s as dt,E as Bt,A as Ot}from"./@codemirror-DLu3zILg.js";import{b as zt}from"./codemirror-BG8Os8gr.js";import{c as s}from"./@lezer-C8D-pblS.js";import{R as jt}from"./@videojs-player-CuOeCcZy.js";import"./video.js-BzFRggUd.js";import"./crelt-C8TCjufn.js";import"./@marijn-DXwl3gUT.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";import"./global-Ao-oLW3a.js";import"./@babel-CCFhuYdL.js";import"./keycode-COWoYAhk.js";import"./safe-json-parse-CN2GHVL4.js";import"./@videojs-B_-B0e53.js";import"./is-function-C0BzV8h3.js";import"./url-toolkit-Dcj1b7Pi.js";import"./videojs-vtt.js-DcT8v0yT.js";import"./m3u8-parser-CpICl_Sf.js";import"./mpd-parser-CVldHi6R.js";import"./@xmldom-BH8vc9mM.js";import"./mux.js-BqethXN8.js";const Ht=["en-US","ja-JP","hi-IN","fa-IR"],Wt="en-US",ve={"en-US":{direction:"ltr",name:"English (US)"},"ja-JP":{direction:"ltr",name:"日本語"},"hi-IN":{direction:"ltr",name:"हिन्दी"},"fa-IR":{direction:"rtl",name:"فارسی"}},qt={"en-US":{light:"Light",dark:"Dark"},"ja-JP":{light:"ライト",dark:"ダーク"},"hi-IN":{light:"हल्का",dark:"गहरा"},"fa-IR":{light:"روشن",dark:"تیره"}},Jt={"en-US":{notebooks:"Notebooks",curriculum:"Curriculum",settings:"Settings"},"ja-JP":{notebooks:"ノートブック",curriculum:"カリキュラム",settings:"設定"},"hi-IN":{notebooks:"नोटबुक",curriculum:"पाठ्यक्रम",settings:"सेटिंग्स"},"fa-IR":{notebooks:"دفترچه‌ها",curriculum:"برنامه درسی",settings:"تنظیمات"}},_e={"en-US":{title:"Notebooks",addNotebook:"Add",blank:"Blank",fromTemplate:"From template",fromFile:"From File",fromUrl:"From URL",delete:"Delete",lastEdited:"Last edited",back:"Back",notebookViewer:"Notebook Viewer",saved:"Saved",saving:"Saving...",saveError:"Save Error",loadingNotebook:"Loading notebook...",failedToLoad:"Failed to load notebook",backToNotebooks:"Back to Notebooks",untitledNotebook:"Untitled Notebook",justNow:"Just now",hoursAgo:"hours ago",hourAgo:"hour ago",daysAgo:"days ago",dayAgo:"day ago",urlDialogTitle:"Import from URL",urlDialogLabel:"Enter notebook URL",urlDialogOpen:"Open",urlDialogCancel:"Close",urlDialogError:"Error",urlDialogErrorMessage:"Failed to fetch notebook from URL",urlDialogInvalidUrl:"Please enter a valid URL (must start with http:// or https://)"},"ja-JP":{title:"ノートブック",addNotebook:"追加",blank:"空白",fromTemplate:"テンプレートから",fromFile:"ファイルから",fromUrl:"URLから",delete:"削除",lastEdited:"最終編集",back:"戻る",notebookViewer:"ノートブックビューア",saved:"保存済み",saving:"保存中...",saveError:"保存エラー",loadingNotebook:"ノートブックを読み込み中...",failedToLoad:"ノートブックの読み込みに失敗しました",backToNotebooks:"ノートブックに戻る",untitledNotebook:"無題のノートブック",justNow:"たった今",hoursAgo:"時間前",hourAgo:"時間前",daysAgo:"日前",dayAgo:"日前",urlDialogTitle:"URLからインポート",urlDialogLabel:"ノートブックのURLを入力",urlDialogOpen:"開く",urlDialogCancel:"閉じる",urlDialogError:"エラー",urlDialogErrorMessage:"URLからノートブックを取得できませんでした",urlDialogInvalidUrl:"有効なURLを入力してください（http://またはhttps://で始まる必要があります）"},"hi-IN":{title:"नोटबुक",addNotebook:"जोड़ें",blank:"खाली",fromTemplate:"टेम्प्लेट से",fromFile:"फ़ाइल से",fromUrl:"URL से",delete:"हटाएं",lastEdited:"अंतिम संपादन",back:"वापस",notebookViewer:"नोटबुक व्यूअर",saved:"सहेजा गया",saving:"सहेज रहे हैं...",saveError:"सहेजने में त्रुटि",loadingNotebook:"नोटबुक लोड हो रहा है...",failedToLoad:"नोटबुक लोड करने में विफल",backToNotebooks:"नोटबुक पर वापस जाएं",untitledNotebook:"बिना शीर्षक नोटबुक",justNow:"अभी",hoursAgo:"घंटे पहले",hourAgo:"घंटा पहले",daysAgo:"दिन पहले",dayAgo:"दिन पहले",urlDialogTitle:"URL से आयात करें",urlDialogLabel:"नोटबुक URL दर्ज करें",urlDialogOpen:"खोलें",urlDialogCancel:"बंद करें",urlDialogError:"त्रुटि",urlDialogErrorMessage:"URL से नोटबुक प्राप्त करने में विफल",urlDialogInvalidUrl:"कृपया एक वैध URL दर्ज करें (http:// या https:// से शुरू होना चाहिए)"},"fa-IR":{title:"دفترچه‌ها",addNotebook:"افزودن",blank:"خالی",fromTemplate:"از قالب",fromFile:"از فایل",fromUrl:"از URL",delete:"حذف",lastEdited:"آخرین ویرایش",back:"بازگشت",notebookViewer:"نمایشگر دفترچه",saved:"ذخیره شد",saving:"در حال ذخیره...",saveError:"خطا در ذخیره",loadingNotebook:"در حال بارگذاری دفترچه...",failedToLoad:"بارگذاری دفترچه ناموفق بود",backToNotebooks:"بازگشت به دفترچه‌ها",untitledNotebook:"دفترچه بدون عنوان",justNow:"همین الان",hoursAgo:"ساعت پیش",hourAgo:"ساعت پیش",daysAgo:"روز پیش",dayAgo:"روز پیش",urlDialogTitle:"وارد کردن از URL",urlDialogLabel:"URL دفترچه را وارد کنید",urlDialogOpen:"باز کردن",urlDialogCancel:"بستن",urlDialogError:"خطا",urlDialogErrorMessage:"دریافت دفترچه از URL ناموفق بود",urlDialogInvalidUrl:"لطفاً یک URL معتبر وارد کنید (باید با http:// یا https:// شروع شود)"}},Kt={"en-US":{title:"Settings",appearance:"Appearance",language:"Language",about:"About",theme:"Theme",version:"Version",appName:"K12 Notebook - Web Shell"},"ja-JP":{title:"設定",appearance:"外観",language:"言語",about:"について",theme:"テーマ",version:"バージョン",appName:"K12ノートブック - ウェブシェル"},"hi-IN":{title:"सेटिंग्स",appearance:"दिखावट",language:"भाषा",about:"के बारे में",theme:"थीम",version:"संस्करण",appName:"K12 नोटबुक - वेब शेल"},"fa-IR":{title:"تنظیمات",appearance:"ظاهر",language:"زبان",about:"درباره",theme:"تم",version:"نسخه",appName:"دفترچه K12 - پوسته وب"}},mt={"en-US":{notebookStarting:"The notebook is starting up...",notebookStartError:"The notebook could not be started because of an error:",inputDialogTitle:"Enter Input",inputDialogLabel:"Input",inputDialogCancel:"Cancel",inputDialogSubmit:"Submit"},"ja-JP":{notebookStarting:"ノートブックを起動中...",notebookStartError:"エラーのためノートブックを起動できませんでした:",inputDialogTitle:"入力してください",inputDialogLabel:"入力",inputDialogCancel:"キャンセル",inputDialogSubmit:"送信"},"hi-IN":{notebookStarting:"नोटबुक शुरू हो रहा है...",notebookStartError:"त्रुटि के कारण नोटबुक शुरू नहीं हो सका:",inputDialogTitle:"इनपुट दर्ज करें",inputDialogLabel:"इनपुट",inputDialogCancel:"रद्द करें",inputDialogSubmit:"जमा करें"},"fa-IR":{notebookStarting:"دفترچه در حال راه‌اندازی است...",notebookStartError:"دفترچه به دلیل خطا راه‌اندازی نشد:",inputDialogTitle:"ورودی را وارد کنید",inputDialogLabel:"ورودی",inputDialogCancel:"لغو",inputDialogSubmit:"ارسال"}},Yt=["light","dark"],Gt="dark",R=Re({theme:localStorage.getItem("theme")||Gt,locale:localStorage.getItem("locale")||Wt,setTheme(a){this.theme=a,localStorage.setItem("theme",a)},setLocale(a){this.locale=a,localStorage.setItem("locale",a)}}),Xt={class:"d-flex justify-end mb-2"},Zt={class:"d-flex align-center"},Qt={class:"flex-grow-1"},eo={class:"text-h6 mb-1"},to={class:"text-caption text-medium-emphasis mb-0"},oo=A({__name:"NotebookCard",props:{notebook:{}},emits:["delete"],setup(a,{emit:e}){const t=a,o=e,r=je(),n=U(()=>_e[R.locale]),d=i=>{const f=Math.floor((new Date().getTime()-i.getTime())/(1e3*60*60));if(f<1)return n.value.justNow;if(f<24){const k=f===1?n.value.hourAgo:n.value.hoursAgo;return`${f} ${k}`}else{const k=Math.floor(f/24),y=k===1?n.value.dayAgo:n.value.daysAgo;return`${k} ${y}`}},u=()=>{r.push(`/notebooks/${t.notebook.id}`)},m=()=>{o("delete",t.notebook.id)};return(i,b)=>(p(),N(B,{class:"notebook-card",hover:"",onClick:u},{default:c(()=>[l(z,{class:"pb-2"},{default:c(()=>[h("div",Xt,[l(lt,null,{activator:c(({props:f})=>[l(P,rt({icon:"mdi-dots-vertical",variant:"text",size:"small"},f,{onClick:b[0]||(b[0]=bt(()=>{},["stop"]))}),null,16)]),default:c(()=>[l(nt,null,{default:c(()=>[l(ue,{onClick:m},{default:c(()=>[l(de,null,{default:c(()=>[C(_(n.value.delete),1)]),_:1})]),_:1})]),_:1})]),_:1})]),h("div",Zt,[l(M,{icon:"mdi-notebook-outline",size:"large",color:"primary",class:"me-3"}),h("div",Qt,[h("h3",eo,_(i.notebook.title),1),h("p",to,_(n.value.lastEdited)+": "+_(d(i.notebook.lastModified||i.notebook.created)),1)])])]),_:1})]),_:1}))}}),W=(a,e)=>{const t=a.__vccOpts||a;for(const[o,r]of e)t[o]=r;return t},ao=W(oo,[["__scopeId","data-v-3a1233ae"]]),ro="NotebookDB",O="notebooks",lo=2,ke=async()=>new Promise((a,e)=>{const t=indexedDB.open(ro,lo);t.onerror=()=>e(t.error),t.onsuccess=()=>a(t.result),t.onupgradeneeded=o=>{const r=t.result;if(r.objectStoreNames.contains(O)){if(o.oldVersion<2){const n=t.transaction;if(n){const d=n.objectStore(O);d.openCursor().onsuccess=u=>{const m=u.target.result;if(m){const i=m.value;i.created||(i.created=i.lastModified||Date.now(),m.update(i)),m.continue()}}}}}else{const n=r.createObjectStore(O,{keyPath:"id"});n.createIndex("lastModified","lastModified"),n.createIndex("created","created")}}}),ye=async(a,e)=>{const t=await ke();if(!t.objectStoreNames.contains(O))throw new Error("Database not properly initialized");return new Promise((o,r)=>{try{const n=t.transaction(O,"readwrite"),d=n.objectStore(O),u=d.get(a);u.onsuccess=()=>{const m=u.result,i=Date.now(),b={id:a,notebook:e,lastModified:i,created:(m==null?void 0:m.created)||i},f=d.put(b);f.onsuccess=()=>o(),f.onerror=()=>r(f.error)},u.onerror=()=>r(u.error),n.oncomplete=()=>t.close()}catch(n){r(n)}})},no=async a=>{const e=await ke();if(!e.objectStoreNames.contains(O))throw new Error("Database not properly initialized");return new Promise((t,o)=>{try{const r=e.transaction(O,"readonly"),d=r.objectStore(O).get(a);d.onsuccess=()=>{const u=d.result;if(!u){o(new Error("Notebook not found"));return}t(u.notebook)},d.onerror=()=>o(d.error),r.oncomplete=()=>e.close()}catch(r){o(r)}})},se=async()=>{const a=await ke();if(!a.objectStoreNames.contains(O))throw new Error("Database not properly initialized");return new Promise((e,t)=>{try{const o=a.transaction(O,"readonly"),n=o.objectStore(O).getAll();n.onsuccess=()=>{const u=n.result.map(m=>{var i;return{id:m.id,title:((i=m.notebook.metadata)==null?void 0:i.title)||"Untitled Notebook",lastModified:new Date(m.lastModified),created:new Date(m.created)}});u.sort((m,i)=>i.created.getTime()-m.created.getTime()),e(u)},n.onerror=()=>t(n.error),o.oncomplete=()=>a.close()}catch(o){t(o)}})},so=async a=>{const e=await ke();if(!e.objectStoreNames.contains(O))throw new Error("Database not properly initialized");return new Promise((t,o)=>{try{const r=e.transaction(O,"readwrite");r.objectStore(O).delete(a),r.oncomplete=()=>t(),r.onerror=()=>o(r.error)}catch(r){o(r)}})},io=async()=>{try{const a=await fetch("./templates/blank.ipynb");if(!a.ok)throw new Error(`Failed to load blank notebook template: ${a.statusText}`);const e=await a.json();return e.cells.forEach(t=>{t.id||(t.id=Y())}),e}catch(a){throw new Error(`Failed to load blank notebook template: ${a instanceof Error?a.message:String(a)}`)}},co=async a=>new Promise((e,t)=>{const o=new FileReader;o.onload=async r=>{var n;try{const d=(n=r.target)==null?void 0:n.result,u=JSON.parse(d);if(!u.cells||!Array.isArray(u.cells))throw new Error("Invalid notebook format: missing or invalid cells array");u.metadata||(u.metadata={}),u.nbformat||(u.nbformat=4),u.nbformat_minor||(u.nbformat_minor=2),u.cells.forEach(i=>{i.id||(i.id=Y()),i.metadata||(i.metadata={}),i.source||(i.source=[])}),u.metadata.title||(u.metadata.title=a.name.replace(".ipynb","")||"Imported Notebook");const m=Y();await ye(m,u),e(m)}catch(d){t(new Error(`Failed to parse notebook file: ${d instanceof Error?d.message:String(d)}`))}},o.onerror=()=>{t(new Error("Failed to read the selected file"))},o.readAsText(a)}),uo=a=>{try{const e=new URL(a);return e.protocol==="http:"||e.protocol==="https:"}catch{return!1}},mo=async a=>{if(!uo(a))throw new Error("Please enter a valid URL (must start with http:// or https://)");try{const e=await fetch(a);if(!e.ok)throw new Error(`Failed to fetch notebook: ${e.status} ${e.statusText}`);const t=await e.text(),o=JSON.parse(t);if(!o.cells||!Array.isArray(o.cells))throw new Error("Invalid notebook format: missing or invalid cells array");if(o.metadata||(o.metadata={}),o.nbformat||(o.nbformat=4),o.nbformat_minor||(o.nbformat_minor=2),o.cells.forEach(n=>{n.id||(n.id=Y()),n.metadata||(n.metadata={}),n.source||(n.source=[])}),!o.metadata.title){const d=new URL(a).pathname.split("/").pop()||"imported-notebook.ipynb";o.metadata.title=d.replace(".ipynb","")||"Imported Notebook"}const r=Y();return await ye(r,o),r}catch(e){throw e instanceof Error?e:new Error(`Failed to import notebook from URL: ${String(e)}`)}},po=A({__name:"UrlInputDialog",props:{show:{type:Boolean}},emits:["cancel","submit"],setup(a,{emit:e}){const t=a,o=e,r=U(()=>_e[R.locale]),n=$(""),d=$(),u=$(""),m=()=>{const f=n.value.trim();if(!f){u.value=r.value.urlDialogInvalidUrl;return}try{const k=new URL(f);if(k.protocol!=="http:"&&k.protocol!=="https:"){u.value=r.value.urlDialogInvalidUrl;return}}catch{u.value=r.value.urlDialogInvalidUrl;return}u.value="",o("submit",f),n.value=""},i=()=>{o("cancel"),n.value="",u.value=""};H(()=>t.show,async f=>{var k;f&&(await Pe(),(k=d.value)==null||k.focus(),u.value="")});const b=f=>{f.key==="Enter"?(f.preventDefault(),m()):f.key==="Escape"&&(f.preventDefault(),i())};return H(n,()=>{u.value&&(u.value="")}),(f,k)=>(p(),N(Me,{"model-value":f.show,"max-width":"500px",persistent:"",onKeydown:b},{default:c(()=>[l(B,null,{default:c(()=>[l(Q,null,{default:c(()=>[C(_(r.value.urlDialogTitle),1)]),_:1}),l(z,null,{default:c(()=>[l(le,{ref_key:"inputFieldRef",ref:d,modelValue:n.value,"onUpdate:modelValue":k[0]||(k[0]=y=>n.value=y),label:r.value.urlDialogLabel,"error-messages":u.value,variant:"outlined",density:"compact",placeholder:"https://example.com/notebook.ipynb",onKeydown:b},null,8,["modelValue","label","error-messages"])]),_:1}),l(he,null,{default:c(()=>[l(Be),l(P,{color:"grey",variant:"text",onClick:i},{default:c(()=>[C(_(r.value.urlDialogCancel),1)]),_:1}),l(P,{color:"primary",variant:"text",onClick:m},{default:c(()=>[C(_(r.value.urlDialogOpen),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),fo={class:"notebook-index"},go={class:"d-flex align-center mb-6 header-container"},ho={class:"text-h4 notebook-title flex-grow-1"},bo={key:0,class:"text-center mt-8"},vo=A({__name:"NotebookIndex",setup(a){const e=U(()=>_e[R.locale]),t=U(()=>ve[R.locale].direction==="rtl"),o=$([]),r=$(!1),n=$({show:!1,title:"",message:""});J(async()=>{try{const y=await se();o.value=y}catch(y){console.error("Failed to load notebooks:",y)}});const d=async y=>{try{await so(y);const w=o.value.findIndex(g=>g.id===y);w>-1&&o.value.splice(w,1),console.log("Notebook deleted successfully:",y)}catch(w){console.error("Failed to delete notebook:",w)}},u=async()=>{try{console.log("Create blank notebook");const y=await io(),w=Y();await ye(w,y),console.log("Created notebook with id:",w);const g=await se();o.value=g}catch(y){console.error("Failed to create blank notebook:",y)}},m=async()=>{try{const y=document.createElement("input");y.type="file",y.accept=".ipynb",y.style.display="none",y.onchange=async w=>{var I;const g=(I=w.target.files)==null?void 0:I[0];if(!g){console.log("No file selected");return}try{const F=await co(g);console.log("Notebook imported successfully:",F);const j=await se();o.value=j}catch(F){console.error("Failed to import notebook:",F),alert(`Failed to import notebook: ${F instanceof Error?F.message:"Unknown error"}`)}},document.body.appendChild(y),y.click(),document.body.removeChild(y)}catch(y){console.error("Failed to import notebook:",y),alert("Failed to import notebook. Please try again.")}},i=()=>{r.value=!0},b=async y=>{r.value=!1;try{console.log("Importing notebook from URL:",y);const w=await mo(y);console.log("Notebook imported successfully:",w);const g=await se();o.value=g}catch(w){console.error("Failed to import notebook from URL:",w),setTimeout(()=>{n.value={show:!0,title:e.value.urlDialogError,message:w instanceof Error?w.message:e.value.urlDialogErrorMessage}},150)}},f=()=>{r.value=!1},k=()=>{n.value.show=!1};return(y,w)=>(p(),x("div",fo,[l(be,{fluid:"",class:"pa-4"},{default:c(()=>[h("div",go,[h("h1",ho,_(e.value.title),1),l(lt,null,{activator:c(({props:g})=>[l(P,rt({color:"primary"},g,{"prepend-icon":t.value?void 0:"mdi-plus","append-icon":t.value?"mdi-plus":void 0}),{default:c(()=>[C(_(e.value.addNotebook),1)]),_:2},1040,["prepend-icon","append-icon"])]),default:c(()=>[l(nt,null,{default:c(()=>[l(ue,{onClick:u},{default:c(()=>[l(de,null,{default:c(()=>[C(_(e.value.blank),1)]),_:1})]),_:1}),l(ue,{onClick:m},{default:c(()=>[l(de,null,{default:c(()=>[C(_(e.value.fromFile),1)]),_:1})]),_:1}),l(ue,{onClick:i},{default:c(()=>[l(de,null,{default:c(()=>[C(_(e.value.fromUrl),1)]),_:1})]),_:1})]),_:1})]),_:1})]),l(Oe,null,{default:c(()=>[(p(!0),x(ee,null,ge(o.value,g=>(p(),N(ze,{key:g.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:c(()=>[l(ao,{notebook:g,onDelete:d},null,8,["notebook"])]),_:2},1024))),128))]),_:1}),o.value.length===0?(p(),x("div",bo,[l(M,{icon:"mdi-notebook-outline",size:"64",color:"grey"}),w[1]||(w[1]=h("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No notebooks yet",-1)),w[2]||(w[2]=h("p",{class:"text-body-2 text-medium-emphasis"},"Create your first notebook to get started",-1))])):V("",!0)]),_:1}),l(po,{show:r.value,onSubmit:b,onCancel:f},null,8,["show"]),l(Me,{modelValue:n.value.show,"onUpdate:modelValue":w[0]||(w[0]=g=>n.value.show=g),"max-width":"400px"},{default:c(()=>[l(B,null,{default:c(()=>[l(Q,null,{default:c(()=>[C(_(n.value.title),1)]),_:1}),l(z,null,{default:c(()=>[h("p",null,_(n.value.message),1)]),_:1}),l(he,null,{default:c(()=>[l(Be),l(P,{color:"primary",variant:"text",onClick:k},{default:c(()=>[C(_(e.value.urlDialogCancel),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),_o=W(vo,[["__scopeId","data-v-32f10594"]]),ko={cells:[],metadata:{},nbformat:4,nbformat_minor:2},T=Re({content:{},updated:null,clear(){this.updated=null,this.content=ko},findCell(a){return this.content.cells?this.content.cells.find(e=>e.id===a):null},getSource(a){const e=this.findCell(a);return e?e.source:null},getLocalizedSource(a,e){var d;const t=this.findCell(a);if(!t)return;let o=t.source;if(t.metadata.i18n&&t.metadata.i18n[e]&&(o=t.metadata.i18n[e]),!o)return;const r=(d=this.content.metadata)==null?void 0:d.globals;return r?o.map(u=>u.replace(/\{\{\s*(\w+)\s*\}\}/g,(m,i)=>{const b=r[i];if(!b)return m;const f=b[e]||b.default;return f===void 0?m:`${f}`})):o},setSource(a,e){const t=this.findCell(a);t&&(e=e.map(o=>o+`
`),t.source=e,this.updated=Date.now())},clearOutputs(a){const e=this.findCell(a);e&&(e.outputs=[],this.updated=Date.now())},getOutputTypes(a){var o,r,n;let e=[];const t=this.findCell(a);return t&&(((o=t.outputs)==null?void 0:o.findIndex(d=>d.output_type==="execute_result"))!==-1&&e.push("result"),((r=t.outputs)==null?void 0:r.findIndex(d=>d.output_type==="stream"&&d.name==="stdout"))!==-1&&e.push("stdout"),((n=t.outputs)==null?void 0:n.findIndex(d=>d.output_type==="error"))!==-1&&e.push("error")),e},addStdout(a,e){const t=this.findCell(a);if(t){t.outputs||(t.outputs=[]);const o=t.outputs.findIndex(r=>r.output_type==="stream"&&r.name==="stdout");o!==-1?(t.outputs[o].text||(t.outputs[o].text=[]),t.outputs[o].text.push(e)):t.outputs.push({output_type:"stream",name:"stdout",text:[e]}),this.updated=Date.now()}},getStdout(a){var o;let e="";const t=this.findCell(a);return t&&((o=t.outputs)==null||o.forEach(r=>{var n;r.output_type==="stream"&&(e+=((n=r.text)==null?void 0:n.join(""))||"")})),e},setResult(a,e){const t=this.findCell(a);if(t){t.outputs||(t.outputs=[]);const o=t.outputs.findIndex(r=>r.output_type==="execute_result");if(o!==-1){const r=t.outputs[o].data||{};t.outputs[o].data={...r,...e}}else t.outputs.push({output_type:"execute_result",data:e});this.updated=Date.now()}},getResult(a){var o;let e={};const t=this.findCell(a);return t&&((o=t.outputs)==null||o.forEach(r=>{r.output_type==="execute_result"&&r.data&&(e=r.data)})),e},setError(a,e){const t=this.findCell(a);if(t){t.outputs||(t.outputs=[]);const o=Array.isArray(e)?e:e.split(`
`);t.outputs.push({output_type:"error",traceback:o}),this.updated=Date.now()}},getError(a){var o;let e="";const t=this.findCell(a);return t&&((o=t.outputs)==null||o.forEach(r=>{var n;r.output_type==="error"&&(e+=((n=r.traceback)==null?void 0:n.join(""))||"")})),e},loadNotebook(a){a.cells&&(a.cells.forEach(e=>{(!e.id||typeof e.id!="string"||e.id.trim()==="")&&(e.id=Y())}),this.content=a)},hasTag(a,e){const t=this.findCell(a);return!t||!t.metadata.tags?!1:t.metadata.tags.includes(e)},addTag(a,e){const t=this.findCell(a);t&&(t.metadata.tags||(t.metadata.tags=[]),t.metadata.tags.includes(e)||(t.metadata.tags.push(e),this.updated=Date.now()))},removeTag(a,e){const t=this.findCell(a);if(t&&t.metadata.tags){const o=t.metadata.tags.indexOf(e);o!==-1&&(t.metadata.tags.splice(o,1),this.updated=Date.now())}},toggleTag(a,e){this.hasTag(a,e)?this.removeTag(a,e):this.addTag(a,e)}}),yo=2e3,wo=2e3;function Co(a){const e=$("idle"),t=$(null);let o=null;const r=async d=>{o&&clearTimeout(o),o=setTimeout(async()=>{try{console.log(`Auto-Save: Saving Notebook ${a}`),e.value="saving";const u=JSON.parse(JSON.stringify(d));await ye(a,u),e.value="saved",t.value=new Date,console.log(`Auto-Save: Saved Notebook ${a}`),setTimeout(()=>{e.value==="saved"&&(e.value="idle")},wo)}catch(u){console.error("Auto-Save: Failed:",u),e.value="error"}},yo)},n=H(()=>T.updated,()=>{var d;T.updated!=null&&T.content&&((d=T.content.cells)==null?void 0:d.length)>0&&r(T.content)});return{saveStatus:e,lastSaved:t,stopWatcher:n}}const xo=["innerHTML"],So=A({__name:"MarkdownCell",props:{cell:{},locale:{}},setup(a){const e=t=>t?ct.parse(t.join("")):"";return(t,o)=>(p(),N(B,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:c(()=>[l(z,null,{default:c(()=>[h("div",{innerHTML:e(E(T).getLocalizedSource(t.cell.id,t.locale))},null,8,xo)]),_:1})]),_:1}))}}),S=Re({executionStatus:"idle",workerStatus:"initializing",runningCellId:null,interruptBuffer:null,fatalErrorTrace:"",inputStatus:"idle",inputPrompt:null,userInput:null,setInterruptBuffer(a){this.interruptBuffer=a},clearInterruptBuffer(){this.interruptBuffer&&(this.interruptBuffer[0]=0)},interruptExecution(){this.interruptBuffer&&(this.interruptBuffer[0]=2),this.executionStatus="idle"},setWorkerStatus(a){this.workerStatus=a},executeCell(a){this.executionStatus==="idle"&&this.workerStatus==="ready"&&(this.runningCellId=a,this.executionStatus="queued")},executionCompleted(){this.runningCellId=null,this.executionStatus="idle"},setFatalError(a){this.workerStatus="error",this.fatalErrorTrace=a},requestUserInput(a){this.inputStatus="waiting",this.userInput=null,this.inputPrompt=a},submitUserInput(a){this.inputStatus="submitted",this.userInput=a}}),Eo=A({__name:"CodeControls",props:{id:{}},setup(a){const e=a,t=()=>{T.clearOutputs(e.id),S.executeCell(e.id)},o=()=>{T.clearOutputs(e.id)},r=()=>{S.interruptExecution()},n=U(()=>T.hasTag(e.id,"hide_code")),d=()=>{T.toggleTag(e.id,"hide_code")};return(u,m)=>(p(),x("div",null,[h("div",null,[l(Ce,{rounded:"lg"},{default:c(()=>[l(P,{size:"32",icon:"mdi-play-outline",onClick:t,disabled:E(S).executionStatus!=="idle"||E(S).workerStatus!=="ready",loading:E(S).workerStatus!=="ready","aria-label":"Run code"},null,8,["disabled","loading"]),l(P,{size:"32",icon:"mdi-stop",onClick:r,disabled:E(S).executionStatus==="idle"||E(S).runningCellId!==u.id,"aria-label":"Stop code"},null,8,["disabled"])]),_:1}),l(Ce,{rounded:"lg",class:"pl-4"},{default:c(()=>[l(P,{size:"32",icon:"mdi-broom",onClick:o})]),_:1}),l(Ce,{rounded:"lg",class:"pl-2"},{default:c(()=>[l(P,{size:"32",icon:n.value?"mdi-eye-off":"mdi-eye",onClick:d,"aria-label":n.value?"Show code":"Hide code"},null,8,["icon","aria-label"])]),_:1})])]))}}),qe="#2e3440",pt="#3b4252",Je="#434c5e",ie="#4c566a",Ve="#e5e9f0",Ue="#eceff4",Ee="#8fbcbb",Ke="#88c0d0",No="#81a1c1",q="#5e81ac",Lo="#bf616a",X="#d08770",Ne="#ebcb8b",Ye="#a3be8c",To="#b48ead",Ge="#d30102",He=Ue,Le=He,$o="#ffffff",Te=Ve,Io=He,Xe=pt,Do=ae.theme({"&":{color:qe,backgroundColor:$o},".cm-content":{caretColor:Xe,fontFamily:"JetBrainsMono, monospace"},".cm-cursor, .cm-dropCursor":{borderLeftColor:Xe},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Io},".cm-panels":{backgroundColor:He,color:ie},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:`1px solid ${ie}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:Ve},".cm-activeLine":{backgroundColor:Le},".cm-selectionMatch":{backgroundColor:Ve},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${ie}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:Ue},".cm-gutters":{backgroundColor:Ue,color:qe,border:"none"},".cm-activeLineGutter":{backgroundColor:Le},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Te},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Te,borderBottomColor:Te},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Le,color:ie}}},{dark:!1}),Vo=ut.define([{tag:s.keyword,color:q},{tag:[s.name,s.deleted,s.character,s.propertyName,s.macroName],color:X},{tag:[s.variableName],color:X},{tag:[s.function(s.variableName)],color:q},{tag:[s.labelName],color:No},{tag:[s.color,s.constant(s.name),s.standard(s.name)],color:q},{tag:[s.definition(s.name),s.separator],color:Ye},{tag:[s.brace],color:Ee},{tag:[s.annotation],color:Ge},{tag:[s.number,s.changed,s.annotation,s.modifier,s.self,s.namespace],color:Ke},{tag:[s.typeName,s.className],color:Ne},{tag:[s.operator,s.operatorKeyword],color:Ye},{tag:[s.tagName],color:To},{tag:[s.squareBracket],color:Lo},{tag:[s.angleBracket],color:X},{tag:[s.attributeName],color:Ne},{tag:[s.regexp],color:q},{tag:[s.quote],color:pt},{tag:[s.string],color:X},{tag:s.link,color:Ee,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[s.url,s.escape,s.special(s.string)],color:X},{tag:[s.meta],color:Ke},{tag:[s.comment],color:Je,fontStyle:"italic"},{tag:s.strong,fontWeight:"bold",color:q},{tag:s.emphasis,fontStyle:"italic",color:q},{tag:s.strikethrough,textDecoration:"line-through"},{tag:s.heading,fontWeight:"bold",color:q},{tag:s.special(s.heading1),fontWeight:"bold",color:q},{tag:s.heading1,fontWeight:"bold",color:q},{tag:[s.heading2,s.heading3,s.heading4],fontWeight:"bold",color:q},{tag:[s.heading5,s.heading6],color:q},{tag:[s.atom,s.bool,s.special(s.variableName)],color:X},{tag:[s.processingInstruction,s.inserted],color:Ee},{tag:[s.contentSeparator],color:Ne},{tag:s.invalid,color:Je,borderBottom:`1px dotted ${Ge}`}]),Uo=[Do,dt(Vo)],ft="#2e3235",gt="#505d64",Ae="#606f7a",fe="#707d8b",Ao="#a0a4ae",me="#bdbdbd",Ro="#e0e0e0",Po="#fdf6e3",Z="#ff5f52",Fo="#ff6e40",Mo="#fa5788",K="#facf4e",Ze="#ffad42",te="#56c8d8",Bo="#7186f0",$e="#cf6edf",Oo="#6abf69",Qe="#99d066",et="#4ebaaa",tt=Z,ot="#202325",ce="#414b46",zo=ft,Ie=gt,jo=gt,at=Ao,Ho=ae.theme({"&":{color:me,backgroundColor:zo},".cm-content":{caretColor:at,fontFamily:"JetBrainsMono, monospace"},".cm-cursor, .cm-dropCursor":{borderLeftColor:at},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:jo},".cm-panels":{backgroundColor:ot,color:fe},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{outline:`1px solid ${K}`,backgroundColor:"transparent"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:ce},".cm-activeLine":{backgroundColor:ce},".cm-selectionMatch":{backgroundColor:ot,outline:`1px solid ${et}`},"&.cm-focused .cm-matchingBracket":{color:Ro,outline:`1px solid ${et}`},"&.cm-focused .cm-nonmatchingBracket":{color:Z},".cm-gutters":{backgroundColor:ft,borderRight:"1px solid #4f5b66",color:Ae},".cm-activeLineGutter":{backgroundColor:ce,color:Po},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Ie},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Ie,borderBottomColor:Ie},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:ce,color:fe}}},{dark:!0}),Wo=ut.define([{tag:s.keyword,color:$e},{tag:[s.name,s.deleted,s.character,s.macroName],color:te},{tag:[s.propertyName],color:K},{tag:[s.variableName],color:me},{tag:[s.function(s.variableName)],color:te},{tag:[s.labelName],color:$e},{tag:[s.color,s.constant(s.name),s.standard(s.name)],color:K},{tag:[s.definition(s.name),s.separator],color:Mo},{tag:[s.brace],color:$e},{tag:[s.annotation],color:tt},{tag:[s.number,s.changed,s.annotation,s.modifier,s.self,s.namespace],color:Ze},{tag:[s.typeName,s.className],color:Ze},{tag:[s.operator,s.operatorKeyword],color:Bo},{tag:[s.tagName],color:Fo},{tag:[s.squareBracket],color:Z},{tag:[s.angleBracket],color:Ae},{tag:[s.attributeName],color:me},{tag:[s.regexp],color:tt},{tag:[s.quote],color:Oo},{tag:[s.string],color:Qe},{tag:s.link,color:te,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[s.url,s.escape,s.special(s.string)],color:K},{tag:[s.meta],color:fe},{tag:[s.comment],color:fe,fontStyle:"italic"},{tag:s.monospace,color:me},{tag:s.strong,fontWeight:"bold",color:Z},{tag:s.emphasis,fontStyle:"italic",color:Qe},{tag:s.strikethrough,textDecoration:"line-through"},{tag:s.heading,fontWeight:"bold",color:K},{tag:s.heading1,fontWeight:"bold",color:K},{tag:[s.heading2,s.heading3,s.heading4],fontWeight:"bold",color:K},{tag:[s.heading5,s.heading6],color:K},{tag:[s.atom,s.bool,s.special(s.variableName)],color:te},{tag:[s.processingInstruction,s.inserted],color:Z},{tag:[s.contentSeparator],color:te},{tag:s.invalid,color:Ae,borderBottom:`1px dotted ${Z}`}]),qo=[Ho,dt(Wo)],Jo=["id"],Ko=A({__name:"CodeEditor",props:{source:{},metadata:{},id:{},theme:{}},setup(a){const e=a;let t=null,o=!1;return J(()=>{let r=Uo;switch(e.theme){case"dark":r=qo;break}const n=Bt.create({doc:e.source?e.source.join(""):"",extensions:[zt,Ot(),r,ae.lineWrapping,ae.updateListener.of(d=>{if(d.docChanged&&!o){const u=d.state.doc.toString();T.setSource(e.id,u.includes(`
`)?u.split(`
`):[u])}})]});t=new ae({state:n,parent:document.getElementById("code-editor-"+e.id)})}),H(()=>e.source,r=>{if(t&&r&&!o){const n=t.state.doc.toString(),d=r.join(""),u=n.replace(/\n+$/,""),m=d.replace(/\n+$/,"");u!==m&&(o=!0,t.dispatch({changes:{from:0,to:t.state.doc.length,insert:d}}),o=!1)}},{deep:!0}),(r,n)=>(p(),x("div",{id:`code-editor-${e.id}`},null,8,Jo))}}),Yo=A({__name:"Console",props:{stdout:{}},setup(a){const e=a,t=$(null),o=()=>{if(!t.value)return;const u=`${(e.stdout?e.stdout.split(`
`).length:1)*1.2+1.5}em`;t.value.style.height=u};return H(()=>e.stdout,()=>{o()},{immediate:!0}),J(()=>{o()}),(r,n)=>(p(),x("textarea",{ref_key:"consoleRef",ref:t,class:"output-console",readonly:""},_(r.stdout),513))}}),Go=W(Yo,[["__scopeId","data-v-43c05e2b"]]),Xo={class:"output-console",readonly:""},Zo=A({__name:"Error",props:{stderr:{}},setup(a){return(e,t)=>(p(),x("textarea",Xo,_(e.stderr),1))}}),Qo=W(Zo,[["__scopeId","data-v-62cb5501"]]),ea=A({__name:"TextPlain",props:{value:{}},setup(a){const e=$(null);return(t,o)=>(p(),x("textarea",{ref_key:"consoleRef",ref:e,class:"output-console",readonly:""},_(Array.isArray(t.value)?t.value.join(""):t.value),513))}}),ta=W(ea,[["__scopeId","data-v-6e2abbc4"]]),oa=["src"],aa=A({__name:"ImagePng",props:{value:{}},setup(a){return(e,t)=>(p(),x("img",{src:`data:image/png;base64,${e.value}`},null,8,oa))}}),ra=["src"],la=A({__name:"ImageSvg",props:{value:{}},setup(a){return(e,t)=>(p(),x("img",{src:`data:image/svg+xml;charset=utf-8,${encodeURIComponent(e.value)}`},null,8,ra))}}),na=A({__name:"Result",props:{value:{}},setup(a){return(e,t)=>(p(),x(ee,null,[e.value["image/svg+xml"]?(p(),N(la,{key:0,value:e.value["image/svg+xml"]},null,8,["value"])):V("",!0),e.value["image/png"]?(p(),N(aa,{key:1,value:e.value["image/png"]},null,8,["value"])):V("",!0),e.value["text/plain"]?(p(),N(ta,{key:2,value:e.value["text/plain"]},null,8,["value"])):V("",!0)],64))}});function sa(a){if(!a)return[];const e=[];return a.forEach((t,o)=>{const n=t.replace(/\n$/,"").trim();if(!n||n.startsWith("#"))return;const d=n.match(/^(\w+)\s*=\s*(.+?)\s*#\s*@param(.*)$/);if(!d)return;const[,u,m,i]=d;try{const b=ia(m),f=ca(i.trim()),k=ua(b,f);e.push({name:u,value:b,type:k,config:f,lineNumber:o})}catch(b){console.warn(`Failed to parse parameter on line ${o+1}: ${t}`,b)}}),e}function ia(a){const e=a.trim();if(e==="True")return!0;if(e==="False")return!1;if(e==="None")return null;const t=e.match(/^["'](.*)["']$/);return t?t[1]:e.match(/^-?\d+\.?\d*$/)?e.includes(".")?parseFloat(e):parseInt(e,10):e}function ca(a){if(!a)return{};const e=a.match(/^\[(.+)\]$/);if(e)return{options:e[1].split(",").map(n=>{const d=n.trim(),u=d.match(/^["'](.*)["']$/);return u?u[1]:d})};const t=a.match(/^\{(.+)\}$/);if(t)try{const o=t[1],r={};return o.split(",").forEach(d=>{const[u,m]=d.split(":").map(i=>i.trim());if(u&&m){const i=u.replace(/["']/g,""),b=m.replace(/["']/g,"");i==="type"?r.type=b:(i==="min"||i==="max"||i==="step")&&(r[i]=parseFloat(b))}}),r}catch{return console.warn("Failed to parse config JSON:",a),{}}return{}}function ua(a,e){return e.type==="slider"?"slider":e.type==="boolean"?"boolean":e.options&&e.options.length>0?"dropdown":typeof a=="boolean"?"boolean":"value"}function da(a,e,t){if(!a||e.lineNumber>=a.length)return a;const o=[...a],r=o[e.lineNumber],n=r.endsWith(`
`),u=r.replace(/\n$/,"").match(/^(\w+\s*=\s*)(.+?)(\s*#\s*@param.*)$/);if(u){const[,m,,i]=u,b=ma(t);o[e.lineNumber]=`${m}${b}${i}${n?`
`:""}`}return o}function ma(a){return typeof a=="boolean"?a?"True":"False":a==null?"None":typeof a=="string"?`"${a}"`:String(a)}const pa={key:0,class:"parameter-controls mb-4"},fa={class:"parameter-grid"},ga={key:1,class:"slider-container"},ha={class:"slider-layout"},ba={key:3,class:"boolean-container"},va=A({__name:"ParameterControls",props:{source:{},cellId:{}},emits:["parameter-changed"],setup(a,{emit:e}){const t=a,o=e,r=U(()=>sa(t.source)),n=(u,m)=>{if(!t.source)return;const i=da(t.source,u,m);o("parameter-changed",i)},d=u=>u.name.replace(/_/g," ").toLowerCase().replace(/\b\w/g,m=>m.toUpperCase());return(u,m)=>r.value.length>0?(p(),x("div",pa,[l(B,{variant:"outlined",class:"pa-4"},{default:c(()=>[h("div",fa,[(p(!0),x(ee,null,ge(r.value,i=>{var b,f,k,y;return p(),x("div",{key:i.name,class:"parameter-item"},[i.type==="value"?(p(),N(le,{key:0,label:d(i),"model-value":i.value,"onUpdate:modelValue":w=>n(i,w),variant:"outlined",density:"compact","hide-details":""},null,8,["label","model-value","onUpdate:modelValue"])):i.type==="slider"?(p(),x("div",ga,[l(Ct,{class:"text-caption mb-1"},{default:c(()=>[C(_(d(i)),1)]),_:2},1024),h("div",ha,[l(xt,{"model-value":i.value,"onUpdate:modelValue":w=>n(i,w),min:((b=i.config)==null?void 0:b.min)??0,max:((f=i.config)==null?void 0:f.max)??100,step:((k=i.config)==null?void 0:k.step)??1,"thumb-label":"",class:"slider-control","hide-details":""},null,8,["model-value","onUpdate:modelValue","min","max","step"]),l(le,{"model-value":i.value,readonly:"",variant:"outlined",density:"compact",class:"value-display","hide-details":""},null,8,["model-value"])])])):i.type==="dropdown"?(p(),N(De,{key:2,label:d(i),"model-value":i.value,"onUpdate:modelValue":w=>n(i,w),items:((y=i.config)==null?void 0:y.options)||[],variant:"outlined",density:"compact","hide-details":""},null,8,["label","model-value","onUpdate:modelValue","items"])):i.type==="boolean"?(p(),x("div",ba,[l(St,{"model-value":i.value,"onUpdate:modelValue":w=>n(i,w),label:d(i),color:"primary","hide-details":"",inset:""},null,8,["model-value","onUpdate:modelValue","label"])])):V("",!0)])}),128))])]),_:1})])):V("",!0)}}),_a=W(va,[["__scopeId","data-v-9ab33d5a"]]),ka=A({__name:"CodeCell",props:{cell:{},theme:{},locale:{}},setup(a){const e=a;let t=[];t=T.getOutputTypes(e.cell.id);const o=()=>{if(t.indexOf("result")!==-1)return"result";if(t.indexOf("stdout")!==-1)return"stdout";if(t.indexOf("error")!==-1)return"error"},r=$("result");H(()=>e.cell.outputs,()=>{t=T.getOutputTypes(e.cell.id),r.value="none",r.value=o()||r.value},{deep:!0});const n=u=>{const m=T.findCell(e.cell.id);m&&(m.source=u,T.updated=Date.now())},d=U(()=>T.hasTag(e.cell.id,"hide_code"));return(u,m)=>(p(),x("div",null,[l(_a,{source:E(T).getLocalizedSource(u.cell.id,e.locale),"cell-id":u.cell.id,onParameterChanged:n},null,8,["source","cell-id"]),l(B,{"max-width":"800",variant:"elevated",elevation:"2",color:"surface-light",class:"mb-2 pt-2 pb-2 ma-auto rounded-lg"},{default:c(()=>[d.value?V("",!0):(p(),N(z,{key:0},{default:c(()=>[l(Ko,{source:E(T).getLocalizedSource(u.cell.id,e.locale),id:u.cell.id,metadata:u.cell.metadata,theme:e.theme},null,8,["source","id","metadata","theme"])]),_:1})),l(he,{class:"pl-4 pr-4 d-flex justify-space-between"},{default:c(()=>[l(Eo,{id:u.cell.id},null,8,["id"]),l(Et,{modelValue:r.value,"onUpdate:modelValue":m[0]||(m[0]=i=>r.value=i),class:"ml-auto"},{default:c(()=>[E(t).indexOf("result")!==-1?(p(),N(xe,{key:0,value:"result",icon:"",size:"32",rounded:"lg","min-width":"48"},{default:c(()=>[l(M,{icon:"mdi-monitor"})]),_:1})):V("",!0),E(t).indexOf("stdout")!==-1?(p(),N(xe,{key:1,value:"stdout",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:c(()=>[l(M,{icon:"mdi-console"})]),_:1})):V("",!0),E(t).indexOf("error")!==-1?(p(),N(xe,{key:2,value:"error",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:c(()=>[l(M,{icon:"mdi-alert-circle-outline"})]),_:1})):V("",!0)]),_:1},8,["modelValue"])]),_:1}),vt(l(z,null,{default:c(()=>[l(Nt,{modelValue:r.value,"onUpdate:modelValue":m[1]||(m[1]=i=>r.value=i),direction:"vertical"},{default:c(()=>[l(Se,{value:"result"},{default:c(()=>[l(na,{value:E(T).getResult(u.cell.id)},null,8,["value"])]),_:1}),l(Se,{value:"stdout",direction:"vertical"},{default:c(()=>[l(Go,{stdout:E(T).getStdout(u.cell.id)},null,8,["stdout"])]),_:1}),l(Se,{value:"error",direction:"vertical"},{default:c(()=>[l(Qo,{stderr:E(T).getError(u.cell.id)},null,8,["stderr"])]),_:1})]),_:1},8,["modelValue"])]),_:1},512),[[_t,e.cell.outputs?e.cell.outputs.length>0:!1]])]),_:1})]))}}),ya={key:1,class:"video-container"},wa={key:0,class:"video-iframe-container"},Ca=["src","width","height"],xa={key:1,class:"video-fallback"},Sa={class:"text-body-2 mb-4"},Ea={class:"text-caption mt-2 text-grey"},Na={key:2,class:"video-player-container"},La={key:2,class:"text-center pa-4"},Ta=A({__name:"VideoCell",props:{cell:{},locale:{}},setup(a){const e=a,t=$(null),o=$(null),r=$(null),n=$(!1);$(!1);const d=g=>{const I=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,/youtube\.com\/v\/([^&\n?#]+)/];for(const F of I){const j=g.match(F);if(j)return j[1]}return null},u=g=>{const I=[/vimeo\.com\/(\d+)/,/player\.vimeo\.com\/video\/(\d+)/];for(const F of I){const j=g.match(F);if(j)return j[1]}return null},m=g=>{const I=g.url,F=d(I);if(F)return{url:`https://www.youtube.com/embed/${F}`,provider:"youtube",isEmbed:!0};const j=u(I);return j?{url:`https://player.vimeo.com/video/${j}`,provider:"vimeo",isEmbed:!0}:{url:I,provider:"direct",isEmbed:!1}},i=()=>{try{const g=T.getLocalizedSource(e.cell.id,e.locale);if(!g||g.length===0)throw new Error("No video configuration found");const I=g.join("").trim(),F=JSON.parse(I);if(!F.url)throw new Error("Video URL is required");o.value={controls:!0,autoplay:!1,width:"100%",height:"auto",loop:!1,muted:!1,...F},r.value=m(F),t.value=null}catch(g){t.value=g instanceof Error?g.message:"Invalid video configuration",o.value=null,r.value=null}},b=U(()=>{if(!o.value||!r.value)return{};const g={controls:o.value.controls,autoplay:o.value.autoplay,loop:o.value.loop,muted:o.value.muted,fluid:!0,responsive:!0,playbackRates:[.5,1,1.25,1.5,2],plugins:{}};return o.value.poster&&(g.poster=o.value.poster),r.value.provider==="direct"&&(g.sources=[{src:r.value.url,type:"video/mp4"}]),g}),f=U(()=>{var g;return((g=r.value)==null?void 0:g.isEmbed)||!1}),k=U(()=>{if(!r.value||!o.value)return"";const g=new URL(r.value.url);return o.value.autoplay&&g.searchParams.set("autoplay","1"),o.value.controls||g.searchParams.set("controls","0"),o.value.loop&&g.searchParams.set("loop","1"),o.value.muted&&g.searchParams.set("muted","1"),g.toString()}),y=()=>{n.value=!0},w=()=>{var g;(g=o.value)!=null&&g.url&&window.open(o.value.url,"_blank")};return J(()=>{var g;i(),((g=r.value)==null?void 0:g.provider)==="vimeo"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&setTimeout(()=>{n.value||(n.value=!0)},2e3)}),(g,I)=>(p(),N(B,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:c(()=>[l(z,null,{default:c(()=>[t.value?(p(),N(ne,{key:0,type:"error",variant:"tonal",text:t.value,class:"mb-4"},null,8,["text"])):o.value&&r.value?(p(),x("div",ya,[f.value&&!n.value?(p(),x("div",wa,[h("iframe",{src:k.value,width:o.value.width,height:o.value.height==="auto"?"315":o.value.height,frameborder:"0",allowfullscreen:"",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",class:"video-iframe",onError:y},null,40,Ca)])):f.value&&n.value?(p(),x("div",xa,[l(B,{variant:"outlined",class:"pa-6 text-center"},{default:c(()=>[l(M,{size:"64",color:"grey-darken-1",class:"mb-4"},{default:c(()=>I[0]||(I[0]=[C("mdi-video-off")])),_:1,__:[0]}),I[3]||(I[3]=h("h3",{class:"text-h6 mb-2"},"Video Embedding Restricted",-1)),h("p",Sa,[C(" This "+_(r.value.provider)+" video cannot be embedded in this environment. ",1),I[1]||(I[1]=h("br",null,null,-1)),I[2]||(I[2]=C(" This is common when running on localhost due to CORS restrictions. "))]),l(P,{color:"primary",variant:"elevated",onClick:w,"prepend-icon":"mdi-open-in-new"},{default:c(()=>[C(" Watch on "+_(r.value.provider==="youtube"?"YouTube":"Vimeo"),1)]),_:1}),h("p",Ea," URL: "+_(o.value.url),1)]),_:1,__:[3]})])):(p(),x("div",Na,[l(E(jt),{options:b.value,class:"video-player"},null,8,["options"])]))])):(p(),x("div",La,[l(pe,{indeterminate:"",color:"primary"}),I[4]||(I[4]=h("p",{class:"mt-2 text-body-2"},"Loading video...",-1))]))]),_:1})]),_:1}))}}),$a=W(Ta,[["__scopeId","data-v-e35261dc"]]);function Ia(a){return new URLSearchParams(window.location.search).get(a)}async function Da(a,e,t){var o;try{const r={model:a.model,messages:e,temperature:a.temperature??.7,stream:!1};a.max_tokens&&a.max_tokens!==-1&&(r.max_tokens=a.max_tokens),console.log("Sending request to:",a.url),console.log("Request body:",JSON.stringify(r,null,2));const n={"Content-Type":"application/json",Accept:"application/json"};t&&(n.Authorization=`Bearer ${t}`,console.log("Using API key authentication"));const d=await fetch(a.url,{method:"POST",headers:n,body:JSON.stringify(r)});if(console.log("Response status:",d.status),console.log("Response headers:",d.headers),!d.ok){let i=`HTTP ${d.status}: ${d.statusText}`;try{i=((o=(await d.json()).error)==null?void 0:o.message)||i}catch{}throw new Error(i)}const u=await d.json();if(!u.choices||u.choices.length===0)throw new Error("No response choices returned from API");const m=u.choices[0].message;if(!m||!m.content)throw new Error("Invalid response format from API");return{role:"assistant",content:m.content}}catch(r){throw r instanceof TypeError&&r.message.includes("fetch")?new Error("Unable to connect to the AI service. Please check if LM Studio is running and accessible."):r instanceof Error?r:new Error("An unexpected error occurred while communicating with the AI service.")}}const Va={key:1,class:"chat-container"},Ua={class:"text-body-2"},Aa={class:"message-role"},Ra=["innerHTML"],Pa=["innerHTML"],Fa={key:1,class:"message-content"},Ma={key:0,class:"message-wrapper assistant"},Ba={class:"message-bubble assistant"},Oa={class:"message-content"},za={key:1,class:"empty-chat"},ja={class:"chat-input-area"},Ha={class:"chat-config-info mt-3"},Wa={class:"config-chips"},qa={class:"chat-actions"},Ja={key:2,class:"text-center pa-4"},Ka=A({__name:"ChatCell",props:{cell:{},locale:{}},setup(a){const e=a,t=$(null),o=$(null),r=$(""),n=$(!1),d=$(),u=$(null),m=()=>{try{const L=T.getLocalizedSource(e.cell.id,e.locale);if(!L||L.length===0)throw new Error("No chat configuration found");const v=L.join("").trim(),D=JSON.parse(v);if(!D.url)throw new Error("Chat URL is required");if(!D.model)throw new Error("Model name is required");if(!D.messages||!Array.isArray(D.messages))throw new Error("Messages array is required");o.value={temperature:.7,max_tokens:-1,stream:!1,...D},u.value=Ia("OPENAI_API_KEY"),u.value&&console.log("Found OPENAI_API_KEY in URL parameters"),t.value=null}catch(L){t.value=L instanceof Error?L.message:"Invalid chat configuration",o.value=null}},i=U(()=>o.value?o.value.messages.filter(L=>L.role!=="system"):[]),b=U(()=>o.value?o.value.messages.find(L=>L.role==="system"):null),f=L=>{const v=/<think>([\s\S]*?)<\/think>/gi;let D=null,G=L;const we=L.match(v);return we&&we.length>0&&(D=we.map(ht=>ht.replace(/<\/?think>/gi,"").trim()).join(`

`),G=L.replace(v,"").trim()),{thinkingContent:D,mainContent:G,hasThinking:!!D}},k=L=>{try{const v=ct(L,{breaks:!0,gfm:!0});return typeof v=="string"?v:L}catch(v){return console.error("Failed to render markdown:",v),L}},y=L=>{const v=f(L.content);return{...v,renderedMain:L.role==="assistant"?k(v.mainContent):v.mainContent,renderedThinking:v.thinkingContent?k(v.thinkingContent):null}},w=async()=>{await Pe(),d.value&&(d.value.scrollTop=d.value.scrollHeight)},g=()=>{if(o.value)try{const v=JSON.stringify(o.value,null,2).split(`
`);T.setSource(e.cell.id,v)}catch(L){console.error("Failed to save chat configuration:",L)}},I=async()=>{if(!r.value.trim()||!o.value||n.value)return;const L={role:"user",content:r.value.trim()};o.value.messages.push(L);const v=r.value.trim();r.value="",g(),await w(),n.value=!0,t.value=null;try{const D=await Da(o.value,o.value.messages,u.value);o.value.messages.push(D),g(),await w()}catch(D){const G=D instanceof Error?D.message:"Failed to get response from AI";t.value=G,o.value.messages.pop(),g(),r.value=v}finally{n.value=!1}},F=()=>{o.value&&(o.value.messages=o.value.messages.filter(L=>L.role==="system"),g())},j=L=>{L.key==="Enter"&&!L.shiftKey&&(L.preventDefault(),I())};return J(()=>{m()}),(L,v)=>(p(),N(B,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:c(()=>[l(z,null,{default:c(()=>[t.value?(p(),N(ne,{key:0,type:"error",variant:"tonal",text:t.value,class:"mb-4"},null,8,["text"])):o.value?(p(),x("div",Va,[b.value?(p(),N(ne,{key:0,type:"info",variant:"tonal",density:"compact",class:"mb-4"},{default:c(()=>[v[1]||(v[1]=h("div",{class:"text-caption text-grey-darken-1 mb-1"},"System Message:",-1)),h("div",Ua,_(b.value.content),1)]),_:1,__:[1]})):V("",!0),h("div",{class:"chat-messages",ref_key:"messagesContainer",ref:d},[(p(!0),x(ee,null,ge(i.value,(D,G)=>(p(),x("div",{key:G,class:re(["message-wrapper",D.role])},[h("div",{class:re(["message-bubble",D.role])},[h("div",Aa,_(D.role),1),D.role==="assistant"?(p(),x(ee,{key:0},[y(D).hasThinking?(p(),N(Lt,{key:0,variant:"accordion",class:"thinking-panel mb-2"},{default:c(()=>[l(Tt,null,{default:c(()=>[l($t,{class:"thinking-title"},{default:c(()=>[l(M,{start:"",size:"small"},{default:c(()=>v[2]||(v[2]=[C("mdi-brain")])),_:1,__:[2]}),v[3]||(v[3]=h("span",{class:"text-caption"},"Thinking Process",-1))]),_:1,__:[3]}),l(It,null,{default:c(()=>[h("div",{class:"thinking-content markdown-content",innerHTML:y(D).renderedThinking},null,8,Ra)]),_:2},1024)]),_:2},1024)]),_:2},1024)):V("",!0),h("div",{class:"message-content markdown-content",innerHTML:y(D).renderedMain},null,8,Pa)],64)):(p(),x("div",Fa,_(D.content),1))],2)],2))),128)),n.value?(p(),x("div",Ma,[h("div",Ba,[v[5]||(v[5]=h("div",{class:"message-role"},"assistant",-1)),h("div",Oa,[l(pe,{size:"16",width:"2",indeterminate:"",class:"mr-2"}),v[4]||(v[4]=C(" Thinking... "))])])])):V("",!0),i.value.length===0&&!n.value?(p(),x("div",za,[l(M,{size:"48",color:"grey-lighten-1",class:"mb-2"},{default:c(()=>v[6]||(v[6]=[C("mdi-chat-outline")])),_:1,__:[6]}),v[7]||(v[7]=h("p",{class:"text-body-2 text-grey"},"Start a conversation...",-1))])):V("",!0)],512),h("div",ja,[l(le,{modelValue:r.value,"onUpdate:modelValue":v[0]||(v[0]=D=>r.value=D),placeholder:"Type your message...",variant:"outlined",density:"comfortable","hide-details":"",disabled:n.value,onKeypress:j,class:"chat-input"},{"append-inner":c(()=>[l(P,{icon:"mdi-send",size:"small",color:"primary",variant:"text",disabled:!r.value.trim()||n.value,onClick:I},null,8,["disabled"])]),_:1},8,["modelValue","disabled"])]),h("div",Ha,[h("div",Wa,[l(oe,{size:"small",variant:"outlined",class:"mr-2"},{default:c(()=>[l(M,{start:""},{default:c(()=>v[8]||(v[8]=[C("mdi-server")])),_:1,__:[8]}),C(" "+_(o.value.model),1)]),_:1}),l(oe,{size:"small",variant:"outlined",class:"mr-2"},{default:c(()=>[l(M,{start:""},{default:c(()=>v[9]||(v[9]=[C("mdi-thermometer")])),_:1,__:[9]}),C(" T: "+_(o.value.temperature),1)]),_:1}),l(oe,{size:"small",variant:"outlined",class:"mr-2"},{default:c(()=>[l(M,{start:""},{default:c(()=>v[10]||(v[10]=[C("mdi-counter")])),_:1,__:[10]}),C(" Max: "+_(o.value.max_tokens===-1?"∞":o.value.max_tokens),1)]),_:1}),u.value?(p(),N(oe,{key:0,size:"small",variant:"outlined",color:"success",class:"mr-2"},{default:c(()=>[l(M,{start:""},{default:c(()=>v[11]||(v[11]=[C("mdi-key")])),_:1,__:[11]}),v[12]||(v[12]=C(" Authenticated "))]),_:1,__:[12]})):V("",!0)]),h("div",qa,[i.value.length>0?(p(),N(P,{key:0,size:"small",variant:"outlined",color:"warning","prepend-icon":"mdi-broom",onClick:F,disabled:n.value},{default:c(()=>v[13]||(v[13]=[C(" Clear Chat ")])),_:1,__:[13]},8,["disabled"])):V("",!0)])])])):(p(),x("div",Ja,[l(pe,{indeterminate:"",color:"primary"}),v[14]||(v[14]=h("p",{class:"mt-2 text-body-2"},"Loading chat...",-1))]))]),_:1})]),_:1}))}}),Ya=W(Ka,[["__scopeId","data-v-92f39cb0"]]),Ga=A({__name:"PyodideProvider",props:{notebookId:{},locale:{}},setup(a){const e=a;let t;return J(async()=>{console.log("PyodideProvider: Starting new worker for "+e.notebookId),S.setWorkerStatus("initializing"),t=new Worker(new URL("/k12nb/assets/PyodideWorker-DgXpL33i.js",import.meta.url),{type:"module"}),t.postMessage({type:"initialize"}),t.onmessage=async o=>{const{type:r,text:n,result:d,message:u,error:m,interruptBuffer:i}=o.data;switch(r){case"initialized":console.log("PyodideProvider: Pyodide is initialized"),S.setWorkerStatus("ready"),i&&(S.setInterruptBuffer(new Int32Array(i)),console.log("PyodideProvider: Set Interrupt Buffer"));break;case"stdout":S.runningCellId&&T.addStdout(S.runningCellId,n);break;case"input_request":S.requestUserInput(u);break;case"execute_result":S.runningCellId&&d&&T.setResult(S.runningCellId,d);break;case"execute_completed":S.executionCompleted();break;case"error":S.runningCellId&&T.setError(S.runningCellId,m),S.executionCompleted();break;case"fatal":S.setFatalError(m);break}}}),Fe(async()=>{console.log("PyodideProvider: Terminating worker."),S.setWorkerStatus("terminating"),t.terminate()}),H(()=>S.executionStatus,o=>{if(o==="queued"&&S.runningCellId!=null){const r=T.getLocalizedSource(S.runningCellId,e.locale);t.postMessage({type:"run",cellId:S.runningCellId,code:r==null?void 0:r.join("")})}}),H(()=>S.inputStatus,o=>{o==="submitted"&&t.postMessage({type:"input_response",value:S.userInput})}),(o,r)=>kt(o.$slots,"default")}}),Xa=A({__name:"InputDialog",props:{locale:{}},setup(a){const e=a,t=U(()=>mt[e.locale||"en-US"]),o=$(""),r=$(),n=U({get:()=>S.inputStatus==="waiting",set:i=>{i||(S.inputStatus="idle")}}),d=()=>{S.submitUserInput(o.value),o.value=""},u=()=>{S.submitUserInput(""),o.value=""};H(()=>n.value,async i=>{var b;i&&(await Pe(),(b=r.value)==null||b.focus())});const m=i=>{i.key==="Enter"?(i.preventDefault(),d()):i.key==="Escape"&&(i.preventDefault(),u())};return(i,b)=>(p(),N(Me,{modelValue:n.value,"onUpdate:modelValue":b[1]||(b[1]=f=>n.value=f),"max-width":"400px",persistent:"",onKeydown:m},{default:c(()=>[l(B,null,{default:c(()=>[l(Q,null,{default:c(()=>[C(_(E(S).inputPrompt||t.value.inputDialogTitle),1)]),_:1}),l(z,null,{default:c(()=>[l(le,{ref_key:"inputFieldRef",ref:r,modelValue:o.value,"onUpdate:modelValue":b[0]||(b[0]=f=>o.value=f),label:t.value.inputDialogLabel,variant:"outlined",density:"compact",onKeydown:m},null,8,["modelValue","label"])]),_:1}),l(he,null,{default:c(()=>[l(Be),l(P,{color:"grey",variant:"text",onClick:u},{default:c(()=>[C(_(t.value.inputDialogCancel),1)]),_:1}),l(P,{color:"primary",variant:"text",onClick:d},{default:c(()=>[C(_(t.value.inputDialogSubmit),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Za={class:"renderer-container"},Qa=A({__name:"Renderer",props:{id:{},initialNotebook:{},theme:{},locale:{}},setup(a){const e=a,t=U(()=>mt[e.locale]);return J(()=>{T.loadNotebook(e.initialNotebook)}),H(()=>e.initialNotebook,o=>{T.loadNotebook(o)}),(o,r)=>(p(),N(Ga,{notebookId:o.id,locale:e.locale},{default:c(()=>[h("div",Za,[l(We,null,{default:c(()=>[E(S).workerStatus=="initializing"?(p(),N(ne,{key:0,text:t.value.notebookStarting,type:"info",variant:"tonal",density:"compact"},null,8,["text"])):V("",!0)]),_:1}),l(We,null,{default:c(()=>[E(S).workerStatus=="error"?(p(),N(ne,{key:0,text:`${t.value.notebookStartError} ${E(S).fatalErrorTrace}`,type:"error",variant:"tonal",density:"compact"},null,8,["text"])):V("",!0)]),_:1}),(p(!0),x(ee,null,ge(E(T).content.cells,n=>{var d,u;return p(),x("div",null,[n.cell_type==="markdown"?(p(),N(E(So),{key:0,cell:n,metadata:n.metadata,locale:e.locale},null,8,["cell","metadata","locale"])):V("",!0),n.cell_type==="code"?(p(),N(E(ka),{key:1,cell:n,theme:e.theme,locale:e.locale},null,8,["cell","theme","locale"])):V("",!0),n.cell_type==="raw"&&((d=n.metadata.tags)!=null&&d.includes("video"))?(p(),N(E($a),{key:2,cell:n,locale:e.locale},null,8,["cell","locale"])):V("",!0),n.cell_type==="raw"&&((u=n.metadata.tags)!=null&&u.includes("chat"))?(p(),N(E(Ya),{key:3,cell:n,locale:e.locale},null,8,["cell","locale"])):V("",!0)])}),256))]),l(Xa,{locale:e.locale},null,8,["locale"])]),_:1},8,["notebookId","locale"]))}}),er={class:"notebook"},tr={class:"d-flex align-center mb-6 notebook-header"},or={class:"d-flex align-center flex-grow-1"},ar={class:"text-h4 notebook-title"},rr={key:1,class:"loading"},lr={class:"text-center"},nr={class:"text-h5 mb-2"},sr={class:"text-body-1 text-medium-emphasis mb-4"},ir=A({__name:"Notebook",setup(a){const e=it(),t=je(),o=U(()=>_e[R.locale]),r=U(()=>ve[R.locale].direction==="rtl"),n=U(()=>e.params.id),d=$(null),u=$(!0),m=$(null),{saveStatus:i,stopWatcher:b}=Co(n.value);J(async()=>{try{u.value=!0,m.value=null,d.value=await no(n.value)}catch(k){console.error("Failed to load notebook:",k),m.value=k instanceof Error?k.message:"Failed to load notebook"}finally{u.value=!1}});const f=()=>{t.push("/notebooks")};return Fe(()=>{T.clear(),b()}),(k,y)=>(p(),x("div",er,[l(be,{fluid:"",class:"pa-4"},{default:c(()=>{var w,g;return[h("div",tr,[h("div",or,[l(P,{icon:r.value?"mdi-arrow-right":"mdi-arrow-left",variant:"text",onClick:f,class:re(r.value?"ms-3":"me-3")},null,8,["icon","class"]),h("h1",ar,_(((g=(w=d.value)==null?void 0:w.metadata)==null?void 0:g.title)||o.value.untitledNotebook),1)]),E(i)!=="idle"?(p(),N(oe,{key:0,color:E(i)==="saved"?"success":E(i)==="saving"?"info":"error",size:"small",variant:"tonal"},{default:c(()=>[l(M,{icon:E(i)==="saved"?"mdi-check":E(i)==="saving"?"mdi-loading":"mdi-alert",class:re([{"mdi-spin":E(i)==="saving"},"me-1"]),size:"small"},null,8,["icon","class"]),C(" "+_(E(i)==="saved"?o.value.saved:E(i)==="saving"?o.value.saving:o.value.saveError),1)]),_:1},8,["color"])):V("",!0)]),d.value&&!u.value&&!m.value?(p(),N(Qa,{key:0,"initial-notebook":d.value,id:n.value,theme:E(R).theme,locale:E(R).locale},null,8,["initial-notebook","id","theme","locale"])):u.value?(p(),x("div",rr,[l(pe,{indeterminate:"",color:"primary"}),h("p",null,_(o.value.loadingNotebook),1)])):m.value?(p(),N(B,{key:2,class:"pa-6"},{default:c(()=>[h("div",lr,[l(M,{icon:"mdi-alert-circle",size:"64",color:"error",class:"mb-4"}),h("h2",nr,_(o.value.failedToLoad),1),h("p",sr,_(m.value),1),l(P,{color:"primary",onClick:f},{default:c(()=>[C(_(o.value.backToNotebooks),1)]),_:1})])]),_:1})):V("",!0)]}),_:1})]))}}),cr=W(ir,[["__scopeId","data-v-226b97bd"]]),ur={class:"curriculum-view"},dr=A({__name:"Curriculum",setup(a){return(e,t)=>(p(),x("div",ur,[l(be,null,{default:c(()=>[l(Oe,null,{default:c(()=>[l(ze,{cols:"12"},{default:c(()=>[t[1]||(t[1]=h("h1",{class:"text-h4 mb-4"},"Curriculum",-1)),l(B,null,{default:c(()=>[l(z,null,{default:c(()=>t[0]||(t[0]=[h("p",{class:"text-body-1"}," Curriculum content will be implemented here. This section will contain educational materials, lessons, and structured learning paths. ",-1)])),_:1,__:[0]})]),_:1})]),_:1,__:[1]})]),_:1})]),_:1})]))}}),mr=W(dr,[["__scopeId","data-v-4427f550"]]),pr={class:"settings-view"},fr={class:"text-h4 mb-4 settings-title"},gr={class:"text-body-1"},hr={class:"text-body-2 text-medium-emphasis"},br=A({__name:"Settings",setup(a){const e=st(),t=$(R.theme),o=$(R.locale),r=U(()=>Yt.map(i=>({title:qt[R.locale][i],value:i}))),n=Ht.map(i=>({title:ve[i].name,value:i})),d=U(()=>Kt[R.locale]);J(()=>{e.global.name.value=R.theme}),H(t,i=>{e.global.name.value=i});const u=i=>{R.setTheme(i),t.value=i},m=i=>{R.setLocale(i),o.value=i};return(i,b)=>(p(),x("div",pr,[l(be,null,{default:c(()=>[l(Oe,null,{default:c(()=>[l(ze,{cols:"12"},{default:c(()=>[h("h1",fr,_(d.value.title),1),l(B,{class:"mb-4"},{default:c(()=>[l(Q,null,{default:c(()=>[C(_(d.value.appearance),1)]),_:1}),l(z,null,{default:c(()=>[l(De,{modelValue:t.value,"onUpdate:modelValue":[b[0]||(b[0]=f=>t.value=f),u],items:r.value,label:d.value.theme,"item-title":"title","item-value":"value"},null,8,["modelValue","items","label"])]),_:1})]),_:1}),l(B,{class:"mb-4"},{default:c(()=>[l(Q,null,{default:c(()=>[C(_(d.value.language),1)]),_:1}),l(z,null,{default:c(()=>[l(De,{modelValue:o.value,"onUpdate:modelValue":[b[1]||(b[1]=f=>o.value=f),m],items:E(n),label:d.value.language,"item-title":"title","item-value":"value"},null,8,["modelValue","items","label"])]),_:1})]),_:1}),l(B,null,{default:c(()=>[l(Q,null,{default:c(()=>[C(_(d.value.about),1)]),_:1}),l(z,null,{default:c(()=>[h("p",gr,_(d.value.appName),1),h("p",hr,_(d.value.version)+" 0.1.0 ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}}),vr=W(br,[["__scopeId","data-v-b8e54928"]]),_r=[{path:"/",redirect:"notebooks"},{path:"/notebooks",name:"notebooks",component:_o},{path:"/notebooks/:id",name:"notebook",component:cr},{path:"/curriculum",name:"curriculum",component:mr},{path:"/settings",name:"settings",component:vr}],kr=Ft({history:Mt("/k12nb/"),routes:_r}),yr={class:"content-container"},wr=A({__name:"BaseLayout",setup(a){const e=()=>{const f=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${f}px`)},t=je(),o=it(),r={"/notebooks":0,"/curriculum":1,"/settings":2},n={0:"/notebooks",1:"/curriculum",2:"/settings"},d=U({get:()=>r[o.path]??0,set:f=>{const k=n[f];k&&o.path!==k&&t.push(k)}}),u=st(),m=U(()=>Jt[R.locale]),i=U(()=>ve[R.locale].direction),b=U(()=>R.locale);return H([i,b],([f,k])=>{document.documentElement.dir=f,document.documentElement.lang=k},{immediate:!0}),J(()=>{u.global.name.value=R.theme,document.documentElement.dir=i.value,document.documentElement.lang=b.value,e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e)}),Fe(()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}),(f,k)=>{const y=yt("router-view");return p(),N(Dt,null,{default:c(()=>[l(Vt,null,{default:c(()=>[h("div",yr,[l(y)])]),_:1}),l(Ut,{modelValue:d.value,"onUpdate:modelValue":k[0]||(k[0]=w=>d.value=w),color:"primary",grow:"",class:re({"rtl-navigation":i.value==="rtl"})},{default:c(()=>[l(P,{value:"0"},{default:c(()=>[l(M,null,{default:c(()=>k[1]||(k[1]=[C("mdi-notebook")])),_:1,__:[1]}),h("span",null,_(m.value.notebooks),1)]),_:1}),l(P,{value:"1"},{default:c(()=>[l(M,null,{default:c(()=>k[2]||(k[2]=[C("mdi-school")])),_:1,__:[2]}),h("span",null,_(m.value.curriculum),1)]),_:1}),l(P,{value:"2"},{default:c(()=>[l(M,null,{default:c(()=>k[3]||(k[3]=[C("mdi-cog")])),_:1,__:[3]}),h("span",null,_(m.value.settings),1)]),_:1})]),_:1},8,["modelValue","class"])]),_:1})}}}),Cr=W(wr,[["__scopeId","data-v-77271b7e"]]),xr=A({__name:"App",setup(a){return(e,t)=>(p(),N(Cr))}}),Sr=At({theme:{defaultTheme:"dark",themes:{light:{colors:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}},dark:{colors:{primary:"#2196F3",secondary:"#424242",accent:"#FF4081",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}},icons:{defaultSet:"mdi",aliases:Pt,sets:{mdi:Rt}}});wt(xr).use(Sr).use(kr).mount("#app");
