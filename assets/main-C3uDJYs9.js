import"./modulepreload-polyfill-B5Qt9EMX.js";import{f as Ye,d as B,c as I,Z as x,_ as p,$ as s,A as l,E as f,Y as y,Q as b,B as Ze,a0 as It,r as E,w as W,g as Qe,o as Q,a1 as k,a2 as U,F as ee,a3 as oe,u as L,P as Dt,U as Tt,n as pe,a4 as lt,a5 as Ut,a6 as Mt,a7 as Xe,a8 as At,a9 as Rt,aa as Ot}from"./@vue-cTl6YTVR.js";import{V as G,a as et,b as $e,c as ne,d as se,e as A,f as K,g as J,h as Pe,i as le,j as Z,k as _e,l as Ne,m as Ie,n as ye,o as te,p as Bt,q as Se,r as Ft,s as zt,t as ve,u as Kt,v as jt,w as Re,x as qt,y as Oe,z as ie,A as Ve,B as Jt,C as Ht,D as Gt,E as Wt,F as re,G as be,H as rt,I as ht,J as Yt,K as Zt,L as Qt,M as Xt,N as eo,O as to}from"./vuetify-Drm4CZ3C.js";import{u as tt,a as ot,c as oo,b as ao}from"./vue-router-pwNgS7Oi.js";import{v as ue}from"./uuid-C6aID195.js";import{m as _t}from"./marked-DKjyhwJX.js";import{z as he,H as yt,s as kt,E as lo,A as ro}from"./@codemirror-Boys7jSw.js";import{b as no}from"./codemirror-BNiQPaZe.js";import{c}from"./@lezer-C8D-pblS.js";import{R as so}from"./@videojs-player-CeoXG8FN.js";import"./video.js-Cp1N-q-1.js";import"./crelt-C8TCjufn.js";import"./@marijn-DXwl3gUT.js";import"./style-mod-Bs6eFhZE.js";import"./w3c-keyname-Vcq4gwWv.js";import"./global-Ao-oLW3a.js";import"./@babel-CCFhuYdL.js";import"./keycode-COWoYAhk.js";import"./safe-json-parse-CN2GHVL4.js";import"./@videojs-B_-B0e53.js";import"./is-function-C0BzV8h3.js";import"./url-toolkit-Dcj1b7Pi.js";import"./videojs-vtt.js-DcT8v0yT.js";import"./m3u8-parser-CpICl_Sf.js";import"./mpd-parser-RiEq4NZi.js";import"./@xmldom-BH8vc9mM.js";import"./mux.js-BqethXN8.js";const io=["en-US","ja-JP","hi-IN","fa-IR"],uo="en-US",de={"en-US":{direction:"ltr",name:"English (US)"},"ja-JP":{direction:"ltr",name:"日本語"},"hi-IN":{direction:"ltr",name:"हिन्दी"},"fa-IR":{direction:"rtl",name:"فارسی"}},co={"en-US":{light:"Light",dark:"Dark"},"ja-JP":{light:"ライト",dark:"ダーク"},"hi-IN":{light:"हल्का",dark:"गहरा"},"fa-IR":{light:"روشن",dark:"تیره"}},mo={"en-US":{notebooks:"Notebooks",curriculum:"Curriculum",settings:"Settings"},"ja-JP":{notebooks:"ノートブック",curriculum:"カリキュラム",settings:"設定"},"hi-IN":{notebooks:"नोटबुक",curriculum:"पाठ्यक्रम",settings:"सेटिंग्स"},"fa-IR":{notebooks:"دفترچه‌ها",curriculum:"برنامه درسی",settings:"تنظیمات"}},De={"en-US":{title:"Notebooks",addNotebook:"Add",blank:"Blank",fromTemplate:"From template",fromFile:"From File",fromUrl:"From URL",delete:"Delete",lastEdited:"Last edited",back:"Back",notebookViewer:"Notebook Viewer",saved:"Saved",saving:"Saving...",saveError:"Save Error",loadingNotebook:"Loading notebook...",failedToLoad:"Failed to load notebook",backToNotebooks:"Back to Notebooks",untitledNotebook:"Untitled Notebook",justNow:"Just now",hoursAgo:"hours ago",hourAgo:"hour ago",daysAgo:"days ago",dayAgo:"day ago",urlDialogTitle:"Import from URL",urlDialogLabel:"Enter notebook URL",urlDialogOpen:"Open",urlDialogCancel:"Close",urlDialogError:"Error",urlDialogErrorMessage:"Failed to fetch notebook from URL",urlDialogInvalidUrl:"Please enter a valid URL (must start with http:// or https://)"},"ja-JP":{title:"ノートブック",addNotebook:"追加",blank:"空白",fromTemplate:"テンプレートから",fromFile:"ファイルから",fromUrl:"URLから",delete:"削除",lastEdited:"最終編集",back:"戻る",notebookViewer:"ノートブックビューア",saved:"保存済み",saving:"保存中...",saveError:"保存エラー",loadingNotebook:"ノートブックを読み込み中...",failedToLoad:"ノートブックの読み込みに失敗しました",backToNotebooks:"ノートブックに戻る",untitledNotebook:"無題のノートブック",justNow:"たった今",hoursAgo:"時間前",hourAgo:"時間前",daysAgo:"日前",dayAgo:"日前",urlDialogTitle:"URLからインポート",urlDialogLabel:"ノートブックのURLを入力",urlDialogOpen:"開く",urlDialogCancel:"閉じる",urlDialogError:"エラー",urlDialogErrorMessage:"URLからノートブックを取得できませんでした",urlDialogInvalidUrl:"有効なURLを入力してください（http://またはhttps://で始まる必要があります）"},"hi-IN":{title:"नोटबुक",addNotebook:"जोड़ें",blank:"खाली",fromTemplate:"टेम्प्लेट से",fromFile:"फ़ाइल से",fromUrl:"URL से",delete:"हटाएं",lastEdited:"अंतिम संपादन",back:"वापस",notebookViewer:"नोटबुक व्यूअर",saved:"सहेजा गया",saving:"सहेज रहे हैं...",saveError:"सहेजने में त्रुटि",loadingNotebook:"नोटबुक लोड हो रहा है...",failedToLoad:"नोटबुक लोड करने में विफल",backToNotebooks:"नोटबुक पर वापस जाएं",untitledNotebook:"बिना शीर्षक नोटबुक",justNow:"अभी",hoursAgo:"घंटे पहले",hourAgo:"घंटा पहले",daysAgo:"दिन पहले",dayAgo:"दिन पहले",urlDialogTitle:"URL से आयात करें",urlDialogLabel:"नोटबुक URL दर्ज करें",urlDialogOpen:"खोलें",urlDialogCancel:"बंद करें",urlDialogError:"त्रुटि",urlDialogErrorMessage:"URL से नोटबुक प्राप्त करने में विफल",urlDialogInvalidUrl:"कृपया एक वैध URL दर्ज करें (http:// या https:// से शुरू होना चाहिए)"},"fa-IR":{title:"دفترچه‌ها",addNotebook:"افزودن",blank:"خالی",fromTemplate:"از قالب",fromFile:"از فایل",fromUrl:"از URL",delete:"حذف",lastEdited:"آخرین ویرایش",back:"بازگشت",notebookViewer:"نمایشگر دفترچه",saved:"ذخیره شد",saving:"در حال ذخیره...",saveError:"خطا در ذخیره",loadingNotebook:"در حال بارگذاری دفترچه...",failedToLoad:"بارگذاری دفترچه ناموفق بود",backToNotebooks:"بازگشت به دفترچه‌ها",untitledNotebook:"دفترچه بدون عنوان",justNow:"همین الان",hoursAgo:"ساعت پیش",hourAgo:"ساعت پیش",daysAgo:"روز پیش",dayAgo:"روز پیش",urlDialogTitle:"وارد کردن از URL",urlDialogLabel:"URL دفترچه را وارد کنید",urlDialogOpen:"باز کردن",urlDialogCancel:"بستن",urlDialogError:"خطا",urlDialogErrorMessage:"دریافت دفترچه از URL ناموفق بود",urlDialogInvalidUrl:"لطفاً یک URL معتبر وارد کنید (باید با http:// یا https:// شروع شود)"}},wt={"en-US":{title:"Settings",appearance:"Appearance",language:"Language",about:"About",theme:"Theme",version:"Version",appName:"K12 Notebook - Web Shell",aiProviders:"AI Providers",add:"Add",providerName:"Provider Name",providerUrl:"Provider URL",apiKey:"API Key",models:"Models",refreshModels:"Refresh Models",defaultProvider:"Default Provider",removeProvider:"Remove Provider",editProvider:"Edit Provider",saveProvider:"Save Provider",cancelEdit:"Cancel",noProviders:"No AI providers configured",loadingModels:"Loading models...",errorLoadingModels:"Error loading models",invalidUrl:"Invalid URL format",providerNameRequired:"Provider name is required",apiKeyRequired:"API key is required",urlRequired:"URL is required",setDefault:"Set Default"},"ja-JP":{title:"設定",appearance:"外観",language:"言語",about:"について",theme:"テーマ",version:"バージョン",appName:"K12ノートブック - ウェブシェル",aiProviders:"AIプロバイダー",add:"追加",providerName:"プロバイダー名",providerUrl:"プロバイダーURL",apiKey:"APIキー",models:"モデル",refreshModels:"モデルを更新",defaultProvider:"デフォルトプロバイダー",removeProvider:"プロバイダーを削除",editProvider:"プロバイダーを編集",saveProvider:"プロバイダーを保存",cancelEdit:"キャンセル",noProviders:"AIプロバイダーが設定されていません",loadingModels:"モデルを読み込み中...",errorLoadingModels:"モデルの読み込みエラー",invalidUrl:"無効なURL形式",providerNameRequired:"プロバイダー名は必須です",apiKeyRequired:"APIキーは必須です",urlRequired:"URLは必須です",setDefault:"デフォルトに設定"},"hi-IN":{title:"सेटिंग्स",appearance:"दिखावट",language:"भाषा",about:"के बारे में",theme:"थीम",version:"संस्करण",appName:"K12 नोटबुक - वेब शेल",aiProviders:"AI प्रदाता",add:"जोड़ें",providerName:"प्रदाता का नाम",providerUrl:"प्रदाता URL",apiKey:"API की",models:"मॉडल",refreshModels:"मॉडल रीफ्रेश करें",defaultProvider:"डिफ़ॉल्ट प्रदाता",removeProvider:"प्रदाता हटाएं",editProvider:"प्रदाता संपादित करें",saveProvider:"प्रदाता सहेजें",cancelEdit:"रद्द करें",noProviders:"कोई AI प्रदाता कॉन्फ़िगर नहीं",loadingModels:"मॉडल लोड हो रहे हैं...",errorLoadingModels:"मॉडल लोड करने में त्रुटि",invalidUrl:"अमान्य URL प्रारूप",providerNameRequired:"प्रदाता का नाम आवश्यक है",apiKeyRequired:"API की आवश्यक है",urlRequired:"URL आवश्यक है",setDefault:"डिफ़ॉल्ट सेट करें"},"fa-IR":{title:"تنظیمات",appearance:"ظاهر",language:"زبان",about:"درباره",theme:"تم",version:"نسخه",appName:"دفترچه K12 - پوسته وب",aiProviders:"ارائه‌دهندگان هوش مصنوعی",add:"افزودن",providerName:"نام ارائه‌دهنده",providerUrl:"آدرس ارائه‌دهنده",apiKey:"کلید API",models:"مدل‌ها",refreshModels:"بروزرسانی مدل‌ها",defaultProvider:"ارائه‌دهنده پیش‌فرض",removeProvider:"حذف ارائه‌دهنده",editProvider:"ویرایش ارائه‌دهنده",saveProvider:"ذخیره ارائه‌دهنده",cancelEdit:"لغو",noProviders:"هیچ ارائه‌دهنده هوش مصنوعی پیکربندی نشده",loadingModels:"در حال بارگذاری مدل‌ها...",errorLoadingModels:"خطا در بارگذاری مدل‌ها",invalidUrl:"فرمت آدرس نامعتبر",providerNameRequired:"نام ارائه‌دهنده الزامی است",apiKeyRequired:"کلید API الزامی است",urlRequired:"آدرس الزامی است",setDefault:"تنظیم به عنوان پیش‌فرض"}},Te={"en-US":{notebookStarting:"The notebook is starting up...",notebookStartError:"The notebook could not be started because of an error:",inputDialogTitle:"Enter Input",inputDialogLabel:"Input",inputDialogCancel:"Cancel",inputDialogSubmit:"Submit",globalsDialogTitle:"Global Variables",addVariable:"Add",variableName:"Variable Name",defaultValue:"Default Value",addLocale:"Add Locale",deleteVariable:"Delete Variable",save:"Save",cancel:"Cancel",languageOverride:"Language Override",noLanguageOverride:"None"},"ja-JP":{notebookStarting:"ノートブックを起動中...",notebookStartError:"エラーのためノートブックを起動できませんでした:",inputDialogTitle:"入力してください",inputDialogLabel:"入力",inputDialogCancel:"キャンセル",inputDialogSubmit:"送信",globalsDialogTitle:"グローバル変数",addVariable:"変数を追加",variableName:"変数名",defaultValue:"デフォルト値",addLocale:"ロケールを追加",deleteVariable:"変数を削除",save:"保存",cancel:"キャンセル",languageOverride:"言語オーバーライド",noLanguageOverride:"なし"},"hi-IN":{notebookStarting:"नोटबुक शुरू हो रहा है...",notebookStartError:"त्रुटि के कारण नोटबुक शुरू नहीं हो सका:",inputDialogTitle:"इनपुट दर्ज करें",inputDialogLabel:"इनपुट",inputDialogCancel:"रद्द करें",inputDialogSubmit:"जमा करें",globalsDialogTitle:"ग्लोबल वेरिएबल्स",addVariable:"वेरिएबल जोड़ें",variableName:"वेरिएबल नाम",defaultValue:"डिफ़ॉल्ट मान",addLocale:"लोकेल जोड़ें",deleteVariable:"वेरिएबल हटाएं",save:"सेव करें",cancel:"रद्द करें",languageOverride:"भाषा ओवरराइड",noLanguageOverride:"कोई नहीं"},"fa-IR":{notebookStarting:"دفترچه در حال راه‌اندازی است...",notebookStartError:"دفترچه به دلیل خطا راه‌اندازی نشد:",inputDialogTitle:"ورودی را وارد کنید",inputDialogLabel:"ورودی",inputDialogCancel:"لغو",inputDialogSubmit:"ارسال",globalsDialogTitle:"متغیرهای سراسری",addVariable:"افزودن متغیر",variableName:"نام متغیر",defaultValue:"مقدار پیش‌فرض",addLocale:"افزودن زبان",deleteVariable:"حذف متغیر",save:"ذخیره",cancel:"لغو",languageOverride:"بازنویسی زبان",noLanguageOverride:"هیچ"}},po=["light","dark"],vo="dark";class Je{static async fetchModels(e,t){try{const o=`${e}/models`,n=await fetch(o,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return(await n.json()).data||[]}catch(o){throw console.error("Error fetching models:",o),o}}static validateUrl(e){try{return new URL(e),!0}catch{return!1}}static generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}}const fo=()=>{const a=localStorage.getItem("aiProviders");return a?JSON.parse(a):[]},ke=a=>{localStorage.setItem("aiProviders",JSON.stringify(a))},M=Ye({theme:localStorage.getItem("theme")||vo,locale:localStorage.getItem("locale")||uo,aiProviders:fo(),setTheme(a){this.theme=a,localStorage.setItem("theme",a)},setLocale(a){this.locale=a,localStorage.setItem("locale",a)},addProvider(a){const e={...a,id:Je.generateId(),isDefault:this.aiProviders.length===0};this.aiProviders.push(e),ke(this.aiProviders)},removeProvider(a){const e=this.aiProviders.findIndex(o=>o.id===a);if(e===-1)return;const t=this.aiProviders[e].isDefault;this.aiProviders.splice(e,1),t&&this.aiProviders.length>0&&(this.aiProviders[0].isDefault=!0),ke(this.aiProviders)},updateProvider(a,e){const t=this.aiProviders.find(o=>o.id===a);t&&(Object.assign(t,e),ke(this.aiProviders))},setDefaultProvider(a){this.aiProviders.forEach(t=>t.isDefault=!1);const e=this.aiProviders.find(t=>t.id===a);e&&(e.isDefault=!0,ke(this.aiProviders))},getDefaultProvider(){return this.aiProviders.find(a=>a.isDefault)}}),go={class:"d-flex justify-end mb-2"},bo={class:"d-flex align-center"},ho={class:"flex-grow-1"},_o={class:"text-h6 mb-1"},yo={class:"text-caption text-medium-emphasis mb-0"},ko=B({__name:"NotebookCard",props:{notebook:{}},emits:["delete"],setup(a,{emit:e}){const t=a,o=e,n=tt(),i=I(()=>De[M.locale]),d=u=>{const g=Math.floor((new Date().getTime()-u.getTime())/(1e3*60*60));if(g<1)return i.value.justNow;if(g<24){const S=g===1?i.value.hourAgo:i.value.hoursAgo;return`${g} ${S}`}else{const S=Math.floor(g/24),C=S===1?i.value.dayAgo:i.value.daysAgo;return`${S} ${C}`}},r=()=>{n.push(`/notebooks/${t.notebook.id}`)},m=()=>{o("delete",t.notebook.id)};return(u,h)=>(p(),x(J,{class:"notebook-card",hover:"",onClick:r},{default:s(()=>[l(G,{class:"pb-2"},{default:s(()=>[f("div",go,[l(et,null,{activator:s(({props:g})=>[l(A,Ze({icon:"mdi-dots-vertical",variant:"text",size:"small"},g,{onClick:h[0]||(h[0]=It(()=>{},["stop"]))}),null,16)]),default:s(()=>[l($e,null,{default:s(()=>[l(ne,{onClick:m},{default:s(()=>[l(se,null,{default:s(()=>[y(b(i.value.delete),1)]),_:1})]),_:1})]),_:1})]),_:1})]),f("div",bo,[l(K,{icon:"mdi-notebook-outline",size:"large",color:"primary",class:"me-3"}),f("div",ho,[f("h3",_o,b(u.notebook.title),1),f("p",yo,b(i.value.lastEdited)+": "+b(d(u.notebook.lastModified||u.notebook.created)),1)])])]),_:1})]),_:1}))}}),H=(a,e)=>{const t=a.__vccOpts||a;for(const[o,n]of e)t[o]=n;return t},wo=H(ko,[["__scopeId","data-v-3a1233ae"]]),xo="NotebookDB",Y="notebooks",Co=2,Ue=async()=>new Promise((a,e)=>{const t=indexedDB.open(xo,Co);t.onerror=()=>e(t.error),t.onsuccess=()=>a(t.result),t.onupgradeneeded=o=>{const n=t.result;if(n.objectStoreNames.contains(Y)){if(o.oldVersion<2){const i=t.transaction;if(i){const d=i.objectStore(Y);d.openCursor().onsuccess=r=>{const m=r.target.result;if(m){const u=m.value;u.created||(u.created=u.lastModified||Date.now(),m.update(u)),m.continue()}}}}}else{const i=n.createObjectStore(Y,{keyPath:"id"});i.createIndex("lastModified","lastModified"),i.createIndex("created","created")}}}),Me=async(a,e)=>{const t=await Ue();if(!t.objectStoreNames.contains(Y))throw new Error("Database not properly initialized");return new Promise((o,n)=>{try{const i=t.transaction(Y,"readwrite"),d=i.objectStore(Y),r=d.get(a);r.onsuccess=()=>{const m=r.result,u=Date.now(),h={id:a,notebook:e,lastModified:u,created:(m==null?void 0:m.created)||u},g=d.put(h);g.onsuccess=()=>o(),g.onerror=()=>n(g.error)},r.onerror=()=>n(r.error),i.oncomplete=()=>t.close()}catch(i){n(i)}})},xt=async a=>{const e=await Ue();if(!e.objectStoreNames.contains(Y))throw new Error("Database not properly initialized");return new Promise((t,o)=>{try{const n=e.transaction(Y,"readonly"),d=n.objectStore(Y).get(a);d.onsuccess=()=>{const r=d.result;if(!r){o(new Error("Notebook not found"));return}t(r.notebook)},d.onerror=()=>o(d.error),n.oncomplete=()=>e.close()}catch(n){o(n)}})},we=async()=>{const a=await Ue();if(!a.objectStoreNames.contains(Y))throw new Error("Database not properly initialized");return new Promise((e,t)=>{try{const o=a.transaction(Y,"readonly"),i=o.objectStore(Y).getAll();i.onsuccess=()=>{const r=i.result.map(m=>{var u;return{id:m.id,title:((u=m.notebook.metadata)==null?void 0:u.title)||"Untitled Notebook",lastModified:new Date(m.lastModified),created:new Date(m.created)}});r.sort((m,u)=>u.created.getTime()-m.created.getTime()),e(r)},i.onerror=()=>t(i.error),o.oncomplete=()=>a.close()}catch(o){t(o)}})},So=async a=>{const e=await Ue();if(!e.objectStoreNames.contains(Y))throw new Error("Database not properly initialized");return new Promise((t,o)=>{try{const n=e.transaction(Y,"readwrite");n.objectStore(Y).delete(a),n.oncomplete=()=>t(),n.onerror=()=>o(n.error)}catch(n){o(n)}})},Eo=async()=>{try{const a=await fetch("./templates/blank.ipynb");if(!a.ok)throw new Error(`Failed to load blank notebook template: ${a.statusText}`);const e=await a.json();return e.cells.forEach(t=>{t.id||(t.id=ue())}),e}catch(a){throw new Error(`Failed to load blank notebook template: ${a instanceof Error?a.message:String(a)}`)}},Vo=async a=>new Promise((e,t)=>{const o=new FileReader;o.onload=async n=>{var i;try{const d=(i=n.target)==null?void 0:i.result,r=JSON.parse(d);if(!r.cells||!Array.isArray(r.cells))throw new Error("Invalid notebook format: missing or invalid cells array");r.metadata||(r.metadata={}),r.nbformat||(r.nbformat=4),r.nbformat_minor||(r.nbformat_minor=2),r.cells.forEach(u=>{u.id||(u.id=ue()),u.metadata||(u.metadata={}),u.source||(u.source=[])}),r.metadata.title||(r.metadata.title=a.name.replace(".ipynb","")||"Imported Notebook");const m=ue();await Me(m,r),e(m)}catch(d){t(new Error(`Failed to parse notebook file: ${d instanceof Error?d.message:String(d)}`))}},o.onerror=()=>{t(new Error("Failed to read the selected file"))},o.readAsText(a)}),Lo=a=>{try{const e=new URL(a);return e.protocol==="http:"||e.protocol==="https:"}catch{return!1}},$o=async a=>{if(!Lo(a))throw new Error("Please enter a valid URL (must start with http:// or https://)");try{const e=await fetch(a);if(!e.ok)throw new Error(`Failed to fetch notebook: ${e.status} ${e.statusText}`);const t=await e.text(),o=JSON.parse(t);if(!o.cells||!Array.isArray(o.cells))throw new Error("Invalid notebook format: missing or invalid cells array");if(o.metadata||(o.metadata={}),o.nbformat||(o.nbformat=4),o.nbformat_minor||(o.nbformat_minor=2),o.cells.forEach(i=>{i.id||(i.id=ue()),i.metadata||(i.metadata={}),i.source||(i.source=[])}),!o.metadata.title){const d=new URL(a).pathname.split("/").pop()||"imported-notebook.ipynb";o.metadata.title=d.replace(".ipynb","")||"Imported Notebook"}const n=ue();return await Me(n,o),n}catch(e){throw e instanceof Error?e:new Error(`Failed to import notebook from URL: ${String(e)}`)}},Po=B({__name:"UrlInputDialog",props:{show:{type:Boolean}},emits:["cancel","submit"],setup(a,{emit:e}){const t=a,o=e,n=I(()=>De[M.locale]),i=E(""),d=E(),r=E(""),m=()=>{const g=i.value.trim();if(!g){r.value=n.value.urlDialogInvalidUrl;return}try{const S=new URL(g);if(S.protocol!=="http:"&&S.protocol!=="https:"){r.value=n.value.urlDialogInvalidUrl;return}}catch{r.value=n.value.urlDialogInvalidUrl;return}r.value="",o("submit",g),i.value=""},u=()=>{o("cancel"),i.value="",r.value=""};W(()=>t.show,async g=>{var S;g&&(await Qe(),(S=d.value)==null||S.focus(),r.value="")});const h=g=>{g.key==="Enter"?(g.preventDefault(),m()):g.key==="Escape"&&(g.preventDefault(),u())};return W(i,()=>{r.value&&(r.value="")}),(g,S)=>(p(),x(Pe,{"model-value":g.show,"max-width":"500px",persistent:"",onKeydown:h},{default:s(()=>[l(J,null,{default:s(()=>[l(le,null,{default:s(()=>[y(b(n.value.urlDialogTitle),1)]),_:1}),l(G,null,{default:s(()=>[l(Z,{ref_key:"inputFieldRef",ref:d,modelValue:i.value,"onUpdate:modelValue":S[0]||(S[0]=C=>i.value=C),label:n.value.urlDialogLabel,"error-messages":r.value,variant:"outlined",density:"compact",placeholder:"https://example.com/notebook.ipynb",onKeydown:h},null,8,["modelValue","label","error-messages"])]),_:1}),l(_e,null,{default:s(()=>[l(Ne),l(A,{color:"grey",variant:"text",onClick:u},{default:s(()=>[y(b(n.value.urlDialogCancel),1)]),_:1}),l(A,{color:"primary",variant:"text",onClick:m},{default:s(()=>[y(b(n.value.urlDialogOpen),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),No={class:"notebook-index"},Io={class:"d-flex align-center mb-6 header-container"},Do={class:"text-h4 notebook-title flex-grow-1"},To={key:0,class:"text-center mt-8"},Uo=B({__name:"NotebookIndex",setup(a){const e=I(()=>De[M.locale]),t=I(()=>de[M.locale].direction==="rtl"),o=E([]),n=E(!1),i=E({show:!1,title:"",message:""});Q(async()=>{try{const C=await we();o.value=C}catch(C){console.error("Failed to load notebooks:",C)}});const d=async C=>{try{await So(C);const V=o.value.findIndex(_=>_.id===C);V>-1&&o.value.splice(V,1),console.log("Notebook deleted successfully:",C)}catch(V){console.error("Failed to delete notebook:",V)}},r=async()=>{try{console.log("Create blank notebook");const C=await Eo(),V=ue();await Me(V,C),console.log("Created notebook with id:",V);const _=await we();o.value=_}catch(C){console.error("Failed to create blank notebook:",C)}},m=async()=>{try{const C=document.createElement("input");C.type="file",C.accept=".ipynb",C.style.display="none",C.onchange=async V=>{var R;const _=(R=V.target.files)==null?void 0:R[0];if(!_){console.log("No file selected");return}try{const T=await Vo(_);console.log("Notebook imported successfully:",T);const q=await we();o.value=q}catch(T){console.error("Failed to import notebook:",T),alert(`Failed to import notebook: ${T instanceof Error?T.message:"Unknown error"}`)}},document.body.appendChild(C),C.click(),document.body.removeChild(C)}catch(C){console.error("Failed to import notebook:",C),alert("Failed to import notebook. Please try again.")}},u=()=>{n.value=!0},h=async C=>{n.value=!1;try{console.log("Importing notebook from URL:",C);const V=await $o(C);console.log("Notebook imported successfully:",V);const _=await we();o.value=_}catch(V){console.error("Failed to import notebook from URL:",V),setTimeout(()=>{i.value={show:!0,title:e.value.urlDialogError,message:V instanceof Error?V.message:e.value.urlDialogErrorMessage}},150)}},g=()=>{n.value=!1},S=()=>{i.value.show=!1};return(C,V)=>(p(),k("div",No,[l(Ie,{fluid:"",class:"pa-4"},{default:s(()=>[f("div",Io,[f("h1",Do,b(e.value.title),1),l(et,null,{activator:s(({props:_})=>[l(A,Ze({color:"primary"},_,{"prepend-icon":t.value?void 0:"mdi-plus","append-icon":t.value?"mdi-plus":void 0}),{default:s(()=>[y(b(e.value.addNotebook),1)]),_:2},1040,["prepend-icon","append-icon"])]),default:s(()=>[l($e,null,{default:s(()=>[l(ne,{onClick:r},{default:s(()=>[l(se,null,{default:s(()=>[y(b(e.value.blank),1)]),_:1})]),_:1}),l(ne,{onClick:m},{default:s(()=>[l(se,null,{default:s(()=>[y(b(e.value.fromFile),1)]),_:1})]),_:1}),l(ne,{onClick:u},{default:s(()=>[l(se,null,{default:s(()=>[y(b(e.value.fromUrl),1)]),_:1})]),_:1})]),_:1})]),_:1})]),l(ye,null,{default:s(()=>[(p(!0),k(ee,null,oe(o.value,_=>(p(),x(te,{key:_.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:s(()=>[l(wo,{notebook:_,onDelete:d},null,8,["notebook"])]),_:2},1024))),128))]),_:1}),o.value.length===0?(p(),k("div",To,[l(K,{icon:"mdi-notebook-outline",size:"64",color:"grey"}),V[1]||(V[1]=f("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No notebooks yet",-1)),V[2]||(V[2]=f("p",{class:"text-body-2 text-medium-emphasis"},"Create your first notebook to get started",-1))])):U("",!0)]),_:1}),l(Po,{show:n.value,onSubmit:h,onCancel:g},null,8,["show"]),l(Pe,{modelValue:i.value.show,"onUpdate:modelValue":V[0]||(V[0]=_=>i.value.show=_),"max-width":"400px"},{default:s(()=>[l(J,null,{default:s(()=>[l(le,null,{default:s(()=>[y(b(i.value.title),1)]),_:1}),l(G,null,{default:s(()=>[f("p",null,b(i.value.message),1)]),_:1}),l(_e,null,{default:s(()=>[l(Ne),l(A,{color:"primary",variant:"text",onClick:S},{default:s(()=>[y(b(e.value.urlDialogCancel),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),Mo=H(Uo,[["__scopeId","data-v-32f10594"]]),Ao={cells:[],metadata:{},nbformat:4,nbformat_minor:2},$=Ye({content:{},updated:null,clear(){this.updated=null,this.content=Ao},findCell(a){return this.content.cells?this.content.cells.find(e=>e.id===a):null},getSource(a){const e=this.findCell(a);return e?e.source:null},setSource(a,e){const t=this.findCell(a);t&&(e=e.map(o=>o+`
`),t.source=e,this.updated=Date.now())},getLocalizedSource(a,e){const t=this.findCell(a);if(!t)return;let o=t.source;return e===null||t.metadata.i18n&&t.metadata.i18n[e]&&(o=t.metadata.i18n[e]),o},setLocalizedSource(a,e,t){const o=this.findCell(a);o&&(t===null?this.setSource(a,e):(e=e.map(n=>n+`
`),o.metadata.i18n||(o.metadata.i18n={}),o.metadata.i18n[t]=e,this.updated=Date.now()))},parseGlobals(a,e){var n;if(e===null)return a;const t=(n=this.content.metadata)==null?void 0:n.globals;return t?a.map(i=>i.replace(/\{\{\s*(\w+)\s*\}\}/g,(d,r)=>{const m=t[r];if(!m)return d;const u=m[e]||m.default;return u===void 0?d:`${u}`})):a},clearOutputs(a){const e=this.findCell(a);e&&(e.outputs=[],this.updated=Date.now())},getOutputTypes(a){var o,n,i;let e=[];const t=this.findCell(a);return t&&(((o=t.outputs)==null?void 0:o.findIndex(d=>d.output_type==="execute_result"))!==-1&&e.push("result"),((n=t.outputs)==null?void 0:n.findIndex(d=>d.output_type==="stream"&&d.name==="stdout"))!==-1&&e.push("stdout"),((i=t.outputs)==null?void 0:i.findIndex(d=>d.output_type==="error"))!==-1&&e.push("error")),e},addStdout(a,e){const t=this.findCell(a);if(t){t.outputs||(t.outputs=[]);const o=t.outputs.findIndex(n=>n.output_type==="stream"&&n.name==="stdout");o!==-1?(t.outputs[o].text||(t.outputs[o].text=[]),t.outputs[o].text.push(e)):t.outputs.push({output_type:"stream",name:"stdout",text:[e]}),this.updated=Date.now()}},getStdout(a){var o;let e="";const t=this.findCell(a);return t&&((o=t.outputs)==null||o.forEach(n=>{var i;n.output_type==="stream"&&(e+=((i=n.text)==null?void 0:i.join(""))||"")})),e},setResult(a,e){const t=this.findCell(a);if(t){t.outputs||(t.outputs=[]);const o=t.outputs.findIndex(n=>n.output_type==="execute_result");if(o!==-1){const n=t.outputs[o].data||{};t.outputs[o].data={...n,...e}}else t.outputs.push({output_type:"execute_result",data:e});this.updated=Date.now()}},getResult(a){var o;let e={};const t=this.findCell(a);return t&&((o=t.outputs)==null||o.forEach(n=>{n.output_type==="execute_result"&&n.data&&(e=n.data)})),e},setError(a,e){const t=this.findCell(a);if(t){t.outputs||(t.outputs=[]);const o=Array.isArray(e)?e:e.split(`
`);t.outputs.push({output_type:"error",traceback:o}),this.updated=Date.now()}},getError(a){var o;let e="";const t=this.findCell(a);return t&&((o=t.outputs)==null||o.forEach(n=>{var i;n.output_type==="error"&&(e+=((i=n.traceback)==null?void 0:i.join(""))||"")})),e},loadNotebook(a){a.cells&&(a.cells.forEach(e=>{(!e.id||typeof e.id!="string"||e.id.trim()==="")&&(e.id=ue())}),this.content=a)},hasTag(a,e){const t=this.findCell(a);return!t||!t.metadata.tags?!1:t.metadata.tags.includes(e)},addTag(a,e){const t=this.findCell(a);t&&(t.metadata.tags||(t.metadata.tags=[]),t.metadata.tags.includes(e)||(t.metadata.tags.push(e),this.updated=Date.now()))},removeTag(a,e){const t=this.findCell(a);if(t&&t.metadata.tags){const o=t.metadata.tags.indexOf(e);o!==-1&&(t.metadata.tags.splice(o,1),this.updated=Date.now())}},toggleTag(a,e){this.hasTag(a,e)?this.removeTag(a,e):this.addTag(a,e)},getGlobals(){return this.content.metadata||(this.content.metadata={}),this.content.metadata.globals||(this.content.metadata.globals={}),this.content.metadata.globals},setGlobal(a,e){const t=this.getGlobals();t[a]=e,this.updated=Date.now()},deleteGlobal(a){const e=this.getGlobals();delete e[a],this.updated=Date.now()}}),Ro=2e3,Oo=2e3;function Bo(a){const e=E("idle"),t=E(null);let o=null;const n=async d=>{o&&clearTimeout(o),o=setTimeout(async()=>{try{console.log(`Auto-Save: Saving Notebook ${a}`),e.value="saving";const r=JSON.parse(JSON.stringify(d));await Me(a,r),e.value="saved",t.value=new Date,console.log(`Auto-Save: Saved Notebook ${a}`),setTimeout(()=>{e.value==="saved"&&(e.value="idle")},Oo)}catch(r){console.error("Auto-Save: Failed:",r),e.value="error"}},Ro)},i=W(()=>$.updated,()=>{var d;$.updated!=null&&$.content&&((d=$.content.cells)==null?void 0:d.length)>0&&n($.content)});return{saveStatus:e,lastSaved:t,stopWatcher:i}}const D=Ye({executionStatus:"idle",workerStatus:"initializing",runningCellId:null,interruptBuffer:null,fatalErrorTrace:"",inputStatus:"idle",inputPrompt:null,userInput:null,setInterruptBuffer(a){this.interruptBuffer=a},clearInterruptBuffer(){this.interruptBuffer&&(this.interruptBuffer[0]=0)},interruptExecution(){this.interruptBuffer&&(this.interruptBuffer[0]=2),this.executionStatus="idle"},setWorkerStatus(a){this.workerStatus=a},executeCell(a){this.executionStatus==="idle"&&this.workerStatus==="ready"&&(this.runningCellId=a,this.executionStatus="queued")},executionCompleted(){this.runningCellId=null,this.executionStatus="idle"},setFatalError(a){this.workerStatus="error",this.fatalErrorTrace=a},requestUserInput(a){this.inputStatus="waiting",this.userInput=null,this.inputPrompt=a},submitUserInput(a){this.inputStatus="submitted",this.userInput=a}}),Fo=["innerHTML"],zo=B({__name:"MarkdownCell",props:{cell:{},locale:{},editMode:{type:Boolean}},setup(a){const e=a,t=E("");W([()=>e.editMode,()=>e.locale],([d,r])=>{if(d){const m=$.getLocalizedSource(e.cell.id,r);t.value=m?m.join(""):""}},{immediate:!0});const o=d=>{const r=d.split(`
`);$.setLocalizedSource(e.cell.id,r,e.locale)},n=d=>d?_t.parse(d.join("")):"",i=I(()=>{const d=$.getLocalizedSource(e.cell.id,e.locale)||[];return $.parseGlobals(d,e.locale)});return(d,r)=>(p(),x(J,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:s(()=>[l(G,null,{default:s(()=>[d.editMode?(p(),x(Bt,{key:1,modelValue:t.value,"onUpdate:modelValue":[r[0]||(r[0]=m=>t.value=m),o],variant:"outlined","auto-grow":"",rows:"3","hide-details":"",class:"markdown-editor"},null,8,["modelValue"])):(p(),k("div",{key:0,innerHTML:n(i.value)},null,8,Fo))]),_:1})]),_:1}))}}),Ct=H(zo,[["__scopeId","data-v-7b690760"]]),Ko=B({__name:"CodeControls",props:{id:{}},setup(a){const e=a,t=()=>{$.clearOutputs(e.id),D.executeCell(e.id)},o=()=>{$.clearOutputs(e.id)},n=()=>{D.interruptExecution()},i=I(()=>$.hasTag(e.id,"hide_code")),d=()=>{$.toggleTag(e.id,"hide_code")};return(r,m)=>(p(),k("div",null,[f("div",null,[l(Se,{rounded:"lg"},{default:s(()=>[l(A,{size:"32",icon:"mdi-play-outline",onClick:t,disabled:L(D).executionStatus!=="idle"||L(D).workerStatus!=="ready",loading:L(D).workerStatus!=="ready","aria-label":"Run code"},null,8,["disabled","loading"]),l(A,{size:"32",icon:"mdi-stop",onClick:n,disabled:L(D).executionStatus==="idle"||L(D).runningCellId!==r.id,"aria-label":"Stop code"},null,8,["disabled"])]),_:1}),l(Se,{rounded:"lg",class:"pl-4"},{default:s(()=>[l(A,{size:"32",icon:"mdi-broom",onClick:o})]),_:1}),l(Se,{rounded:"lg",class:"pl-2"},{default:s(()=>[l(A,{size:"32",icon:i.value?"mdi-eye-off":"mdi-eye",onClick:d,"aria-label":i.value?"Show code":"Hide code"},null,8,["icon","aria-label"])]),_:1})])]))}}),nt="#2e3440",St="#3b4252",st="#434c5e",xe="#4c566a",He="#e5e9f0",Ge="#eceff4",Be="#8fbcbb",it="#88c0d0",jo="#81a1c1",X="#5e81ac",qo="#bf616a",ce="#d08770",Fe="#ebcb8b",ut="#a3be8c",Jo="#b48ead",dt="#d30102",at=Ge,ze=at,Ho="#ffffff",Ke=He,Go=at,ct=St,Wo=he.theme({"&":{color:nt,backgroundColor:Ho},".cm-content":{caretColor:ct,fontFamily:"JetBrainsMono, monospace"},".cm-cursor, .cm-dropCursor":{borderLeftColor:ct},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Go},".cm-panels":{backgroundColor:at,color:xe},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:`1px solid ${xe}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:He},".cm-activeLine":{backgroundColor:ze},".cm-selectionMatch":{backgroundColor:He},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${xe}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:Ge},".cm-gutters":{backgroundColor:Ge,color:nt,border:"none"},".cm-activeLineGutter":{backgroundColor:ze},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Ke},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Ke,borderBottomColor:Ke},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:ze,color:xe}}},{dark:!1}),Yo=yt.define([{tag:c.keyword,color:X},{tag:[c.name,c.deleted,c.character,c.propertyName,c.macroName],color:ce},{tag:[c.variableName],color:ce},{tag:[c.function(c.variableName)],color:X},{tag:[c.labelName],color:jo},{tag:[c.color,c.constant(c.name),c.standard(c.name)],color:X},{tag:[c.definition(c.name),c.separator],color:ut},{tag:[c.brace],color:Be},{tag:[c.annotation],color:dt},{tag:[c.number,c.changed,c.annotation,c.modifier,c.self,c.namespace],color:it},{tag:[c.typeName,c.className],color:Fe},{tag:[c.operator,c.operatorKeyword],color:ut},{tag:[c.tagName],color:Jo},{tag:[c.squareBracket],color:qo},{tag:[c.angleBracket],color:ce},{tag:[c.attributeName],color:Fe},{tag:[c.regexp],color:X},{tag:[c.quote],color:St},{tag:[c.string],color:ce},{tag:c.link,color:Be,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[c.url,c.escape,c.special(c.string)],color:ce},{tag:[c.meta],color:it},{tag:[c.comment],color:st,fontStyle:"italic"},{tag:c.strong,fontWeight:"bold",color:X},{tag:c.emphasis,fontStyle:"italic",color:X},{tag:c.strikethrough,textDecoration:"line-through"},{tag:c.heading,fontWeight:"bold",color:X},{tag:c.special(c.heading1),fontWeight:"bold",color:X},{tag:c.heading1,fontWeight:"bold",color:X},{tag:[c.heading2,c.heading3,c.heading4],fontWeight:"bold",color:X},{tag:[c.heading5,c.heading6],color:X},{tag:[c.atom,c.bool,c.special(c.variableName)],color:ce},{tag:[c.processingInstruction,c.inserted],color:Be},{tag:[c.contentSeparator],color:Fe},{tag:c.invalid,color:st,borderBottom:`1px dotted ${dt}`}]),Zo=[Wo,kt(Yo)],Et="#2e3235",Vt="#505d64",We="#606f7a",Le="#707d8b",Qo="#a0a4ae",Ee="#bdbdbd",Xo="#e0e0e0",ea="#fdf6e3",me="#ff5f52",ta="#ff6e40",oa="#fa5788",ae="#facf4e",mt="#ffad42",ge="#56c8d8",aa="#7186f0",je="#cf6edf",la="#6abf69",pt="#99d066",vt="#4ebaaa",ft=me,gt="#202325",Ce="#414b46",ra=Et,qe=Vt,na=Vt,bt=Qo,sa=he.theme({"&":{color:Ee,backgroundColor:ra},".cm-content":{caretColor:bt,fontFamily:"JetBrainsMono, monospace"},".cm-cursor, .cm-dropCursor":{borderLeftColor:bt},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:na},".cm-panels":{backgroundColor:gt,color:Le},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{outline:`1px solid ${ae}`,backgroundColor:"transparent"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:Ce},".cm-activeLine":{backgroundColor:Ce},".cm-selectionMatch":{backgroundColor:gt,outline:`1px solid ${vt}`},"&.cm-focused .cm-matchingBracket":{color:Xo,outline:`1px solid ${vt}`},"&.cm-focused .cm-nonmatchingBracket":{color:me},".cm-gutters":{backgroundColor:Et,borderRight:"1px solid #4f5b66",color:We},".cm-activeLineGutter":{backgroundColor:Ce,color:ea},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:qe},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:qe,borderBottomColor:qe},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Ce,color:Le}}},{dark:!0}),ia=yt.define([{tag:c.keyword,color:je},{tag:[c.name,c.deleted,c.character,c.macroName],color:ge},{tag:[c.propertyName],color:ae},{tag:[c.variableName],color:Ee},{tag:[c.function(c.variableName)],color:ge},{tag:[c.labelName],color:je},{tag:[c.color,c.constant(c.name),c.standard(c.name)],color:ae},{tag:[c.definition(c.name),c.separator],color:oa},{tag:[c.brace],color:je},{tag:[c.annotation],color:ft},{tag:[c.number,c.changed,c.annotation,c.modifier,c.self,c.namespace],color:mt},{tag:[c.typeName,c.className],color:mt},{tag:[c.operator,c.operatorKeyword],color:aa},{tag:[c.tagName],color:ta},{tag:[c.squareBracket],color:me},{tag:[c.angleBracket],color:We},{tag:[c.attributeName],color:Ee},{tag:[c.regexp],color:ft},{tag:[c.quote],color:la},{tag:[c.string],color:pt},{tag:c.link,color:ge,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[c.url,c.escape,c.special(c.string)],color:ae},{tag:[c.meta],color:Le},{tag:[c.comment],color:Le,fontStyle:"italic"},{tag:c.monospace,color:Ee},{tag:c.strong,fontWeight:"bold",color:me},{tag:c.emphasis,fontStyle:"italic",color:pt},{tag:c.strikethrough,textDecoration:"line-through"},{tag:c.heading,fontWeight:"bold",color:ae},{tag:c.heading1,fontWeight:"bold",color:ae},{tag:[c.heading2,c.heading3,c.heading4],fontWeight:"bold",color:ae},{tag:[c.heading5,c.heading6],color:ae},{tag:[c.atom,c.bool,c.special(c.variableName)],color:ge},{tag:[c.processingInstruction,c.inserted],color:me},{tag:[c.contentSeparator],color:ge},{tag:c.invalid,color:We,borderBottom:`1px dotted ${me}`}]),ua=[sa,kt(ia)],da=["id"],ca=B({__name:"CodeEditor",props:{metadata:{},id:{},theme:{},editMode:{type:Boolean},locale:{}},setup(a){const e=a;let t=null,o=!1;const n=I(()=>{const i=$.getSource(e.id)||[];return e.editMode?i:$.parseGlobals(i,e.locale)});return Q(()=>{let i=Zo;switch(e.theme){case"dark":i=ua;break}const d=lo.create({doc:n.value?n.value.join(""):"",extensions:[no,ro(),i,he.lineWrapping,he.updateListener.of(r=>{if(r.docChanged&&!o){const m=r.state.doc.toString();$.setSource(e.id,m.includes(`
`)?m.split(`
`):[m])}})]});t=new he({state:d,parent:document.getElementById("code-editor-"+e.id)})}),W(()=>n.value,i=>{if(t&&i&&!o){const d=t.state.doc.toString(),r=i.join(""),m=d.replace(/\n+$/,""),u=r.replace(/\n+$/,"");m!==u&&(o=!0,t.dispatch({changes:{from:0,to:t.state.doc.length,insert:r}}),o=!1)}},{deep:!0}),(i,d)=>(p(),k("div",{id:`code-editor-${e.id}`},null,8,da))}}),ma=B({__name:"Console",props:{stdout:{}},setup(a){const e=a,t=E(null),o=()=>{if(!t.value)return;const r=`${(e.stdout?e.stdout.split(`
`).length:1)*1.2+1.5}em`;t.value.style.height=r};return W(()=>e.stdout,()=>{o()},{immediate:!0}),Q(()=>{o()}),(n,i)=>(p(),k("textarea",{ref_key:"consoleRef",ref:t,class:"output-console",readonly:""},b(n.stdout),513))}}),pa=H(ma,[["__scopeId","data-v-43c05e2b"]]),va={class:"output-console",readonly:""},fa=B({__name:"Error",props:{stderr:{}},setup(a){return(e,t)=>(p(),k("textarea",va,b(e.stderr),1))}}),ga=H(fa,[["__scopeId","data-v-62cb5501"]]),ba=B({__name:"TextPlain",props:{value:{}},setup(a){const e=E(null);return(t,o)=>(p(),k("textarea",{ref_key:"consoleRef",ref:e,class:"output-console",readonly:""},b(Array.isArray(t.value)?t.value.join(""):t.value),513))}}),ha=H(ba,[["__scopeId","data-v-6e2abbc4"]]),_a=["src"],ya=B({__name:"ImagePng",props:{value:{}},setup(a){return(e,t)=>(p(),k("img",{src:`data:image/png;base64,${e.value}`},null,8,_a))}}),ka=["src"],wa=B({__name:"ImageSvg",props:{value:{}},setup(a){return(e,t)=>(p(),k("img",{src:`data:image/svg+xml;charset=utf-8,${encodeURIComponent(e.value)}`},null,8,ka))}}),xa=B({__name:"Result",props:{value:{}},setup(a){return(e,t)=>(p(),k(ee,null,[e.value["image/svg+xml"]?(p(),x(wa,{key:0,value:e.value["image/svg+xml"]},null,8,["value"])):U("",!0),e.value["image/png"]?(p(),x(ya,{key:1,value:e.value["image/png"]},null,8,["value"])):U("",!0),e.value["text/plain"]?(p(),x(ha,{key:2,value:e.value["text/plain"]},null,8,["value"])):U("",!0)],64))}});function Ca(a){if(!a)return[];const e=[];return a.forEach((t,o)=>{const i=t.replace(/\n$/,"").trim();if(!i||i.startsWith("#"))return;const d=i.match(/^(\w+)\s*=\s*(.+?)\s*#\s*@param(.*)$/);if(!d)return;const[,r,m,u]=d;try{const h=Sa(m),g=Ea(u.trim()),S=Va(h,g);e.push({name:r,value:h,type:S,config:g,lineNumber:o})}catch(h){console.warn(`Failed to parse parameter on line ${o+1}: ${t}`,h)}}),e}function Sa(a){const e=a.trim();if(e==="True")return!0;if(e==="False")return!1;if(e==="None")return null;const t=e.match(/^["'](.*)["']$/);return t?t[1]:e.match(/^-?\d+\.?\d*$/)?e.includes(".")?parseFloat(e):parseInt(e,10):e}function Ea(a){if(!a)return{};const e=a.match(/^\[(.+)\]$/);if(e)return{options:e[1].split(",").map(i=>{const d=i.trim(),r=d.match(/^["'](.*)["']$/);return r?r[1]:d})};const t=a.match(/^\{(.+)\}$/);if(t)try{const o=t[1],n={};return o.split(",").forEach(d=>{const[r,m]=d.split(":").map(u=>u.trim());if(r&&m){const u=r.replace(/["']/g,""),h=m.replace(/["']/g,"");u==="type"?n.type=h:(u==="min"||u==="max"||u==="step")&&(n[u]=parseFloat(h))}}),n}catch{return console.warn("Failed to parse config JSON:",a),{}}return{}}function Va(a,e){return e.type==="slider"?"slider":e.type==="boolean"?"boolean":e.options&&e.options.length>0?"dropdown":typeof a=="boolean"?"boolean":"value"}function La(a,e,t){if(!a||e.lineNumber>=a.length)return a;const o=[...a],n=o[e.lineNumber],i=n.endsWith(`
`),r=n.replace(/\n$/,"").match(/^(\w+\s*=\s*)(.+?)(\s*#\s*@param.*)$/);if(r){const[,m,,u]=r,h=$a(t);o[e.lineNumber]=`${m}${h}${u}${i?`
`:""}`}return o}function $a(a){return typeof a=="boolean"?a?"True":"False":a==null?"None":typeof a=="string"?`"${a}"`:String(a)}const Pa={key:0,class:"parameter-controls mb-4"},Na={class:"parameter-grid"},Ia={key:1,class:"slider-container"},Da={class:"slider-layout"},Ta={key:3,class:"boolean-container"},Ua=B({__name:"ParameterControls",props:{source:{},cellId:{}},emits:["parameter-changed"],setup(a,{emit:e}){const t=a,o=e,n=I(()=>Ca(t.source)),i=(r,m)=>{if(!t.source)return;const u=La(t.source,r,m);o("parameter-changed",u)},d=r=>r.name.replace(/_/g," ").toLowerCase().replace(/\b\w/g,m=>m.toUpperCase());return(r,m)=>n.value.length>0?(p(),k("div",Pa,[l(J,{variant:"outlined",class:"pa-4"},{default:s(()=>[f("div",Na,[(p(!0),k(ee,null,oe(n.value,u=>{var h,g,S,C;return p(),k("div",{key:u.name,class:"parameter-item"},[u.type==="value"?(p(),x(Z,{key:0,label:d(u),"model-value":u.value,"onUpdate:modelValue":V=>i(u,V),variant:"outlined",density:"compact","hide-details":""},null,8,["label","model-value","onUpdate:modelValue"])):u.type==="slider"?(p(),k("div",Ia,[l(Ft,{class:"text-caption mb-1"},{default:s(()=>[y(b(d(u)),1)]),_:2},1024),f("div",Da,[l(zt,{"model-value":u.value,"onUpdate:modelValue":V=>i(u,V),min:((h=u.config)==null?void 0:h.min)??0,max:((g=u.config)==null?void 0:g.max)??100,step:((S=u.config)==null?void 0:S.step)??1,"thumb-label":"",class:"slider-control","hide-details":""},null,8,["model-value","onUpdate:modelValue","min","max","step"]),l(Z,{"model-value":u.value,readonly:"",variant:"outlined",density:"compact",class:"value-display","hide-details":""},null,8,["model-value"])])])):u.type==="dropdown"?(p(),x(ve,{key:2,label:d(u),"model-value":u.value,"onUpdate:modelValue":V=>i(u,V),items:((C=u.config)==null?void 0:C.options)||[],variant:"outlined",density:"compact","hide-details":""},null,8,["label","model-value","onUpdate:modelValue","items"])):u.type==="boolean"?(p(),k("div",Ta,[l(Kt,{"model-value":u.value,"onUpdate:modelValue":V=>i(u,V),label:d(u),color:"primary","hide-details":"",inset:""},null,8,["model-value","onUpdate:modelValue","label"])])):U("",!0)])}),128))])]),_:1})])):U("",!0)}}),Ma=H(Ua,[["__scopeId","data-v-9ab33d5a"]]),Lt=B({__name:"CodeCell",props:{cell:{},theme:{},locale:{},editMode:{type:Boolean}},setup(a){const e=a;let t=[];t=$.getOutputTypes(e.cell.id);const o=()=>{if(t.indexOf("result")!==-1)return"result";if(t.indexOf("stdout")!==-1)return"stdout";if(t.indexOf("error")!==-1)return"error"},n=E("result");W(()=>e.cell.outputs,()=>{t=$.getOutputTypes(e.cell.id),n.value="none",n.value=o()||n.value},{deep:!0});const i=m=>{const u=$.findCell(e.cell.id);u&&(u.source=m,$.updated=Date.now())},d=I(()=>$.hasTag(e.cell.id,"hide_code")),r=I(()=>{const m=e.locale,u=$.getLocalizedSource(e.cell.id,m)||[];return $.parseGlobals(u,m)});return(m,u)=>(p(),k("div",null,[l(Ma,{source:r.value,"cell-id":m.cell.id,onParameterChanged:i},null,8,["source","cell-id"]),l(J,{"max-width":"800",variant:"elevated",elevation:"2",color:"surface-light",class:"mb-2 pt-2 pb-2 ma-auto rounded-lg"},{default:s(()=>[d.value?U("",!0):(p(),x(G,{key:0},{default:s(()=>[l(ca,{id:m.cell.id,metadata:m.cell.metadata,theme:e.theme,locale:e.locale,editMode:e.editMode},null,8,["id","metadata","theme","locale","editMode"])]),_:1})),l(_e,{class:"pl-4 pr-4 d-flex justify-space-between"},{default:s(()=>[l(Ko,{id:m.cell.id},null,8,["id"]),l(jt,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=h=>n.value=h),class:"ml-auto"},{default:s(()=>[L(t).indexOf("result")!==-1?(p(),x(Re,{key:0,value:"result",icon:"",size:"32",rounded:"lg","min-width":"48"},{default:s(()=>[l(K,{icon:"mdi-monitor"})]),_:1})):U("",!0),L(t).indexOf("stdout")!==-1?(p(),x(Re,{key:1,value:"stdout",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:s(()=>[l(K,{icon:"mdi-console"})]),_:1})):U("",!0),L(t).indexOf("error")!==-1?(p(),x(Re,{key:2,value:"error",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:s(()=>[l(K,{icon:"mdi-alert-circle-outline"})]),_:1})):U("",!0)]),_:1},8,["modelValue"])]),_:1}),Dt(l(G,null,{default:s(()=>[l(qt,{modelValue:n.value,"onUpdate:modelValue":u[1]||(u[1]=h=>n.value=h),direction:"vertical"},{default:s(()=>[l(Oe,{value:"result"},{default:s(()=>[l(xa,{value:L($).getResult(m.cell.id)},null,8,["value"])]),_:1}),l(Oe,{value:"stdout",direction:"vertical"},{default:s(()=>[l(pa,{stdout:L($).getStdout(m.cell.id)},null,8,["stdout"])]),_:1}),l(Oe,{value:"error",direction:"vertical"},{default:s(()=>[l(ga,{stderr:L($).getError(m.cell.id)},null,8,["stderr"])]),_:1})]),_:1},8,["modelValue"])]),_:1},512),[[Tt,e.cell.outputs?e.cell.outputs.length>0:!1]])]),_:1})]))}}),Aa={key:1,class:"video-container"},Ra={key:0,class:"video-iframe-container"},Oa=["src","width","height"],Ba={key:1,class:"video-fallback"},Fa={class:"text-body-2 mb-4"},za={class:"text-caption mt-2 text-grey"},Ka={key:2,class:"video-player-container"},ja={key:2,class:"text-center pa-4"},qa=B({__name:"VideoCell",props:{cell:{},locale:{}},setup(a){const e=a,t=E(null),o=E(null),n=E(null),i=E(!1);E(!1);const d=_=>{const R=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,/youtube\.com\/v\/([^&\n?#]+)/];for(const T of R){const q=_.match(T);if(q)return q[1]}return null},r=_=>{const R=[/vimeo\.com\/(\d+)/,/player\.vimeo\.com\/video\/(\d+)/];for(const T of R){const q=_.match(T);if(q)return q[1]}return null},m=_=>{const R=_.url,T=d(R);if(T)return{url:`https://www.youtube.com/embed/${T}`,provider:"youtube",isEmbed:!0};const q=r(R);return q?{url:`https://player.vimeo.com/video/${q}`,provider:"vimeo",isEmbed:!0}:{url:R,provider:"direct",isEmbed:!1}},u=()=>{try{const _=$.getLocalizedSource(e.cell.id,e.locale);if(!_||_.length===0)throw new Error("No video configuration found");const R=_.join("").trim(),T=JSON.parse(R);if(!T.url)throw new Error("Video URL is required");o.value={controls:!0,autoplay:!1,width:"100%",height:"auto",loop:!1,muted:!1,...T},n.value=m(T),t.value=null}catch(_){t.value=_ instanceof Error?_.message:"Invalid video configuration",o.value=null,n.value=null}},h=I(()=>{if(!o.value||!n.value)return{};const _={controls:o.value.controls,autoplay:o.value.autoplay,loop:o.value.loop,muted:o.value.muted,fluid:!0,responsive:!0,playbackRates:[.5,1,1.25,1.5,2],plugins:{}};return o.value.poster&&(_.poster=o.value.poster),n.value.provider==="direct"&&(_.sources=[{src:n.value.url,type:"video/mp4"}]),_}),g=I(()=>{var _;return((_=n.value)==null?void 0:_.isEmbed)||!1}),S=I(()=>{if(!n.value||!o.value)return"";const _=new URL(n.value.url);return o.value.autoplay&&_.searchParams.set("autoplay","1"),o.value.controls||_.searchParams.set("controls","0"),o.value.loop&&_.searchParams.set("loop","1"),o.value.muted&&_.searchParams.set("muted","1"),_.toString()}),C=()=>{i.value=!0},V=()=>{var _;(_=o.value)!=null&&_.url&&window.open(o.value.url,"_blank")};return Q(()=>{var _;u(),((_=n.value)==null?void 0:_.provider)==="vimeo"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&setTimeout(()=>{i.value||(i.value=!0)},2e3)}),W(()=>e.locale,()=>{u()}),(_,R)=>(p(),x(J,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:s(()=>[l(G,null,{default:s(()=>[t.value?(p(),x(ie,{key:0,type:"error",variant:"tonal",text:t.value,class:"mb-4"},null,8,["text"])):o.value&&n.value?(p(),k("div",Aa,[g.value&&!i.value?(p(),k("div",Ra,[f("iframe",{src:S.value,width:o.value.width,height:o.value.height==="auto"?"315":o.value.height,frameborder:"0",allowfullscreen:"",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",class:"video-iframe",onError:C},null,40,Oa)])):g.value&&i.value?(p(),k("div",Ba,[l(J,{variant:"outlined",class:"pa-6 text-center"},{default:s(()=>[l(K,{size:"64",color:"grey-darken-1",class:"mb-4"},{default:s(()=>R[0]||(R[0]=[y("mdi-video-off",-1)])),_:1,__:[0]}),R[3]||(R[3]=f("h3",{class:"text-h6 mb-2"},"Video Embedding Restricted",-1)),f("p",Fa,[y(" This "+b(n.value.provider)+" video cannot be embedded in this environment. ",1),R[1]||(R[1]=f("br",null,null,-1)),R[2]||(R[2]=y(" This is common when running on localhost due to CORS restrictions. ",-1))]),l(A,{color:"primary",variant:"elevated",onClick:V,"prepend-icon":"mdi-open-in-new"},{default:s(()=>[y(" Watch on "+b(n.value.provider==="youtube"?"YouTube":"Vimeo"),1)]),_:1}),f("p",za," URL: "+b(o.value.url),1)]),_:1,__:[3]})])):(p(),k("div",Ka,[l(L(so),{options:h.value,class:"video-player"},null,8,["options"])]))])):(p(),k("div",ja,[l(Ve,{indeterminate:"",color:"primary"}),R[4]||(R[4]=f("p",{class:"mt-2 text-body-2"},"Loading video...",-1))]))]),_:1})]),_:1}))}}),$t=H(qa,[["__scopeId","data-v-5fea9b43"]]);function Ja(a){return new URLSearchParams(window.location.search).get(a)}async function Ha(a,e,t){var o;try{const n={model:a.model,messages:e,temperature:a.temperature??.7,stream:!1};a.max_tokens&&a.max_tokens!==-1&&(n.max_tokens=a.max_tokens),console.log("Sending request to:",a.url),console.log("Request body:",JSON.stringify(n,null,2));const i={"Content-Type":"application/json",Accept:"application/json"};t&&(i.Authorization=`Bearer ${t}`,console.log("Using API key authentication"));const d=await fetch(a.url,{method:"POST",headers:i,body:JSON.stringify(n)});if(console.log("Response status:",d.status),console.log("Response headers:",d.headers),!d.ok){let u=`HTTP ${d.status}: ${d.statusText}`;try{u=((o=(await d.json()).error)==null?void 0:o.message)||u}catch{}throw new Error(u)}const r=await d.json();if(!r.choices||r.choices.length===0)throw new Error("No response choices returned from API");const m=r.choices[0].message;if(!m||!m.content)throw new Error("Invalid response format from API");return{role:"assistant",content:m.content}}catch(n){throw n instanceof TypeError&&n.message.includes("fetch")?new Error("Unable to connect to the AI service. Please check if LM Studio is running and accessible."):n instanceof Error?n:new Error("An unexpected error occurred while communicating with the AI service.")}}const Ga={key:1,class:"chat-container"},Wa={class:"text-body-2"},Ya={class:"message-role"},Za=["innerHTML"],Qa=["innerHTML"],Xa={key:1,class:"message-content"},el={key:0,class:"message-wrapper assistant"},tl={class:"message-bubble assistant"},ol={class:"message-content"},al={key:1,class:"empty-chat"},ll={class:"chat-input-area"},rl={class:"chat-config-info mt-3"},nl={class:"config-chips"},sl={class:"chat-actions"},il={key:2,class:"text-center pa-4"},ul=B({__name:"ChatCell",props:{cell:{},locale:{}},setup(a){const e=a,t=E(null),o=E(null),n=E(""),i=E(!1),d=E(),r=E(null),m=()=>{try{const P=$.getLocalizedSource(e.cell.id,e.locale);if(!P||P.length===0)throw new Error("No chat configuration found");const v=P.join("").trim(),w=JSON.parse(v);if(!w.url)throw new Error("Chat URL is required");if(!w.model)throw new Error("Model name is required");if(!w.messages||!Array.isArray(w.messages))throw new Error("Messages array is required");o.value={temperature:.7,max_tokens:-1,stream:!1,...w},r.value=Ja("OPENAI_API_KEY"),r.value&&console.log("Found OPENAI_API_KEY in URL parameters"),t.value=null}catch(P){t.value=P instanceof Error?P.message:"Invalid chat configuration",o.value=null}},u=I(()=>o.value?o.value.messages.filter(P=>P.role!=="system"):[]),h=I(()=>o.value?o.value.messages.find(P=>P.role==="system"):null),g=P=>{const v=/<think>([\s\S]*?)<\/think>/gi;let w=null,N=P;const j=P.match(v);return j&&j.length>0&&(w=j.map(Ae=>Ae.replace(/<\/?think>/gi,"").trim()).join(`

`),N=P.replace(v,"").trim()),{thinkingContent:w,mainContent:N,hasThinking:!!w}},S=P=>{try{const v=_t(P,{breaks:!0,gfm:!0});return typeof v=="string"?v:P}catch(v){return console.error("Failed to render markdown:",v),P}},C=P=>{const v=g(P.content);return{...v,renderedMain:P.role==="assistant"?S(v.mainContent):v.mainContent,renderedThinking:v.thinkingContent?S(v.thinkingContent):null}},V=async()=>{await Qe(),d.value&&(d.value.scrollTop=d.value.scrollHeight)},_=()=>{if(o.value)try{const v=JSON.stringify(o.value,null,2).split(`
`);$.setSource(e.cell.id,v)}catch(P){console.error("Failed to save chat configuration:",P)}},R=async()=>{if(!n.value.trim()||!o.value||i.value)return;const P={role:"user",content:n.value.trim()};o.value.messages.push(P);const v=n.value.trim();n.value="",_(),await V(),i.value=!0,t.value=null;try{const w=await Ha(o.value,o.value.messages,r.value);o.value.messages.push(w),_(),await V()}catch(w){const N=w instanceof Error?w.message:"Failed to get response from AI";t.value=N,o.value.messages.pop(),_(),n.value=v}finally{i.value=!1}},T=()=>{o.value&&(o.value.messages=o.value.messages.filter(P=>P.role==="system"),_())},q=P=>{P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),R())};return Q(()=>{m()}),W(()=>e.locale,()=>{m()}),(P,v)=>(p(),x(J,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:s(()=>[l(G,null,{default:s(()=>[t.value?(p(),x(ie,{key:0,type:"error",variant:"tonal",text:t.value,class:"mb-4"},null,8,["text"])):o.value?(p(),k("div",Ga,[h.value?(p(),x(ie,{key:0,type:"info",variant:"tonal",density:"compact",class:"mb-4"},{default:s(()=>[v[1]||(v[1]=f("div",{class:"text-caption text-grey-darken-1 mb-1"},"System Message:",-1)),f("div",Wa,b(h.value.content),1)]),_:1,__:[1]})):U("",!0),f("div",{class:"chat-messages",ref_key:"messagesContainer",ref:d},[(p(!0),k(ee,null,oe(u.value,(w,N)=>(p(),k("div",{key:N,class:pe(["message-wrapper",w.role])},[f("div",{class:pe(["message-bubble",w.role])},[f("div",Ya,b(w.role),1),w.role==="assistant"?(p(),k(ee,{key:0},[C(w).hasThinking?(p(),x(Jt,{key:0,variant:"accordion",class:"thinking-panel mb-2"},{default:s(()=>[l(Ht,null,{default:s(()=>[l(Gt,{class:"thinking-title"},{default:s(()=>[l(K,{start:"",size:"small"},{default:s(()=>v[2]||(v[2]=[y("mdi-brain",-1)])),_:1,__:[2]}),v[3]||(v[3]=f("span",{class:"text-caption"},"Thinking Process",-1))]),_:1,__:[3]}),l(Wt,null,{default:s(()=>[f("div",{class:"thinking-content markdown-content",innerHTML:C(w).renderedThinking},null,8,Za)]),_:2},1024)]),_:2},1024)]),_:2},1024)):U("",!0),f("div",{class:"message-content markdown-content",innerHTML:C(w).renderedMain},null,8,Qa)],64)):(p(),k("div",Xa,b(w.content),1))],2)],2))),128)),i.value?(p(),k("div",el,[f("div",tl,[v[5]||(v[5]=f("div",{class:"message-role"},"assistant",-1)),f("div",ol,[l(Ve,{size:"16",width:"2",indeterminate:"",class:"mr-2"}),v[4]||(v[4]=y(" Thinking... ",-1))])])])):U("",!0),u.value.length===0&&!i.value?(p(),k("div",al,[l(K,{size:"48",color:"grey-lighten-1",class:"mb-2"},{default:s(()=>v[6]||(v[6]=[y("mdi-chat-outline",-1)])),_:1,__:[6]}),v[7]||(v[7]=f("p",{class:"text-body-2 text-grey"},"Start a conversation...",-1))])):U("",!0)],512),f("div",ll,[l(Z,{modelValue:n.value,"onUpdate:modelValue":v[0]||(v[0]=w=>n.value=w),placeholder:"Type your message...",variant:"outlined",density:"comfortable","hide-details":"",disabled:i.value,onKeypress:q,class:"chat-input"},{"append-inner":s(()=>[l(A,{icon:"mdi-send",size:"small",color:"primary",variant:"text",disabled:!n.value.trim()||i.value,onClick:R},null,8,["disabled"])]),_:1},8,["modelValue","disabled"])]),f("div",rl,[f("div",nl,[l(re,{size:"small",variant:"outlined",class:"mr-2"},{default:s(()=>[l(K,{start:""},{default:s(()=>v[8]||(v[8]=[y("mdi-server",-1)])),_:1,__:[8]}),y(" "+b(o.value.model),1)]),_:1}),l(re,{size:"small",variant:"outlined",class:"mr-2"},{default:s(()=>[l(K,{start:""},{default:s(()=>v[9]||(v[9]=[y("mdi-thermometer",-1)])),_:1,__:[9]}),y(" T: "+b(o.value.temperature),1)]),_:1}),l(re,{size:"small",variant:"outlined",class:"mr-2"},{default:s(()=>[l(K,{start:""},{default:s(()=>v[10]||(v[10]=[y("mdi-counter",-1)])),_:1,__:[10]}),y(" Max: "+b(o.value.max_tokens===-1?"∞":o.value.max_tokens),1)]),_:1}),r.value?(p(),x(re,{key:0,size:"small",variant:"outlined",color:"success",class:"mr-2"},{default:s(()=>[l(K,{start:""},{default:s(()=>v[11]||(v[11]=[y("mdi-key",-1)])),_:1,__:[11]}),v[12]||(v[12]=y(" Authenticated ",-1))]),_:1,__:[12]})):U("",!0)]),f("div",sl,[u.value.length>0?(p(),x(A,{key:0,size:"small",variant:"outlined",color:"warning","prepend-icon":"mdi-broom",onClick:T,disabled:i.value},{default:s(()=>v[13]||(v[13]=[y(" Clear Chat ",-1)])),_:1,__:[13]},8,["disabled"])):U("",!0)])])])):(p(),k("div",il,[l(Ve,{indeterminate:"",color:"primary"}),v[14]||(v[14]=f("p",{class:"mt-2 text-body-2"},"Loading chat...",-1))]))]),_:1})]),_:1}))}}),Pt=H(ul,[["__scopeId","data-v-1ffdee27"]]),Nt=B({__name:"InputDialog",props:{locale:{}},setup(a){const e=a,t=I(()=>Te[e.locale||"en-US"]),o=E(""),n=E(),i=I({get:()=>D.inputStatus==="waiting",set:u=>{u||(D.inputStatus="idle")}}),d=()=>{D.submitUserInput(o.value),o.value=""},r=()=>{D.submitUserInput(""),o.value=""};W(()=>i.value,async u=>{var h;u&&(await Qe(),(h=n.value)==null||h.focus())});const m=u=>{u.key==="Enter"?(u.preventDefault(),d()):u.key==="Escape"&&(u.preventDefault(),r())};return(u,h)=>(p(),x(Pe,{modelValue:i.value,"onUpdate:modelValue":h[1]||(h[1]=g=>i.value=g),"max-width":"400px",persistent:"",onKeydown:m},{default:s(()=>[l(J,null,{default:s(()=>[l(le,null,{default:s(()=>[y(b(L(D).inputPrompt||t.value.inputDialogTitle),1)]),_:1}),l(G,null,{default:s(()=>[l(Z,{ref_key:"inputFieldRef",ref:n,modelValue:o.value,"onUpdate:modelValue":h[0]||(h[0]=g=>o.value=g),label:t.value.inputDialogLabel,variant:"outlined",density:"compact",onKeydown:m},null,8,["modelValue","label"])]),_:1}),l(_e,null,{default:s(()=>[l(Ne),l(A,{color:"grey",variant:"text",onClick:r},{default:s(()=>[y(b(t.value.inputDialogCancel),1)]),_:1}),l(A,{color:"primary",variant:"text",onClick:d},{default:s(()=>[y(b(t.value.inputDialogSubmit),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),dl={class:"pa-3"},cl={class:"pa-3"},ml={key:0,class:"pa-4 h-100"},pl={class:"d-flex align-center"},vl={class:"mb-4"},fl={key:1,class:"pa-4 text-center"},gl=B({__name:"GlobalsDialog",props:{locale:{},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(a,{emit:e}){const t=a,o=e,n=I(()=>Te[t.locale]),i=I({get:()=>t.modelValue,set:O=>o("update:modelValue",O)}),d=E({}),r=E(null),m=E(""),u=E(!1),h=I(()=>Object.keys(d.value).sort()),g=I(()=>r.value?d.value[r.value]||{}:null),S=I(()=>g.value?Object.keys(g.value).filter(O=>O!=="default"):[]),C=I(()=>{const O=Object.keys(de),F=S.value;return O.filter(z=>!F.includes(z))}),V=()=>{d.value=JSON.parse(JSON.stringify($.getGlobals())),h.value.length>0&&!r.value&&(r.value=h.value[0])},_=O=>{r.value=O,u.value=!1},R=()=>{u.value=!0,m.value="",r.value=null},T=()=>{m.value.trim()&&/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(m.value)&&(d.value[m.value]||(d.value[m.value]={default:""},r.value=m.value,u.value=!1,m.value=""))},q=()=>{if(!r.value)return;delete d.value[r.value];const O=h.value;O.length>0?r.value=O[0]:r.value=null},P=O=>{!r.value||!O||(d.value[r.value]||(d.value[r.value]={}),d.value[r.value][O]="")},v=O=>{!r.value||O==="default"||delete d.value[r.value][O]},w=O=>{!r.value||!O.trim()||/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(O)&&O!==r.value&&(d.value[O]||(d.value[O]=d.value[r.value],delete d.value[r.value],r.value=O))},N=()=>{Object.entries(d.value).forEach(([F,z])=>{$.setGlobal(F,z)});const O=$.getGlobals();Object.keys(O).forEach(F=>{d.value[F]||$.deleteGlobal(F)}),j()},j=()=>{i.value=!1,r.value=null,u.value=!1},Ae=O=>{var F;return O==="default"?"Default":((F=de[O])==null?void 0:F.name)||O};return W(()=>t.modelValue,O=>{O&&V()}),(O,F)=>(p(),x(Pe,{modelValue:i.value,"onUpdate:modelValue":F[4]||(F[4]=z=>i.value=z),"max-width":"900px",persistent:""},{default:s(()=>[l(J,{height:"700px"},{default:s(()=>[l(le,{class:"d-flex align-center"},{default:s(()=>[l(K,{class:"me-2"},{default:s(()=>F[5]||(F[5]=[y("mdi-variable",-1)])),_:1,__:[5]}),y(" "+b(n.value.globalsDialogTitle),1)]),_:1}),l(G,{class:"pa-0"},{default:s(()=>[l(ye,{"no-gutters":"",style:{height:"580px"}},{default:s(()=>[l(te,{cols:"4",class:"border-e"},{default:s(()=>[f("div",dl,[u.value?(p(),x(Z,{key:0,modelValue:m.value,"onUpdate:modelValue":F[1]||(F[1]=z=>m.value=z),label:n.value.variableName,variant:"outlined",density:"compact",onKeydown:[lt(T,["enter"]),F[2]||(F[2]=lt(z=>u.value=!1,["escape"]))],autofocus:""},{"append-inner":s(()=>[l(A,{icon:"mdi-check",size:"small",variant:"text",onClick:T}),l(A,{icon:"mdi-close",size:"small",variant:"text",onClick:F[0]||(F[0]=z=>u.value=!1)})]),_:1},8,["modelValue","label"])):U("",!0)]),l($e,{density:"compact",class:"px-2"},{default:s(()=>[(p(!0),k(ee,null,oe(h.value,z=>(p(),x(ne,{key:z,active:r.value===z,onClick:fe=>_(z),rounded:""},{default:s(()=>[l(se,null,{default:s(()=>[y(b(z),1)]),_:2},1024)]),_:2},1032,["active","onClick"]))),128))]),_:1}),f("div",cl,[l(A,{onClick:R,block:"",variant:"outlined","prepend-icon":"mdi-plus",disabled:u.value},{default:s(()=>[y(b(n.value.addVariable),1)]),_:1},8,["disabled"])])]),_:1}),l(te,{cols:"8"},{default:s(()=>[r.value?(p(),k("div",ml,[f("div",pl,[l(Z,{"model-value":r.value,label:n.value.variableName,variant:"outlined",density:"compact",class:"me-2","onUpdate:modelValue":w},null,8,["model-value","label"]),l(A,{icon:"mdi-delete",color:"error",variant:"outlined",size:"small",style:{"margin-top":"-20px"},onClick:q})]),l(Z,{modelValue:d.value[r.value].default,"onUpdate:modelValue":F[3]||(F[3]=z=>d.value[r.value].default=z),label:n.value.defaultValue,variant:"outlined",density:"compact",class:"mb-4"},null,8,["modelValue","label"]),f("div",vl,[F[6]||(F[6]=f("h4",{class:"text-subtitle-1 mb-2"},"Locale Values",-1)),(p(!0),k(ee,null,oe(S.value,z=>(p(),k("div",{key:z,class:"d-flex align-center mb-2"},[l(re,{size:"small",class:"me-2",style:{"min-width":"100px"}},{default:s(()=>[y(b(z),1)]),_:2},1024),l(Z,{modelValue:d.value[r.value][z],"onUpdate:modelValue":fe=>d.value[r.value][z]=fe,variant:"outlined",density:"compact",class:"me-2","hide-details":""},null,8,["modelValue","onUpdate:modelValue"]),l(A,{icon:"mdi-close",size:"small",variant:"text",onClick:fe=>v(z)},null,8,["onClick"])]))),128))]),C.value.length>0?(p(),x(ve,{key:0,items:C.value,label:n.value.addLocale,variant:"outlined",density:"compact","onUpdate:modelValue":P},{item:s(({props:z,item:fe})=>[l(ne,Ut(Mt(z)),{default:s(()=>[l(se,null,{default:s(()=>[y(b(Ae(fe.value)),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["items","label"])):U("",!0)])):u.value?U("",!0):(p(),k("div",fl,[l(K,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:s(()=>F[7]||(F[7]=[y("mdi-variable",-1)])),_:1,__:[7]}),F[8]||(F[8]=f("p",{class:"text-grey"},"Select a variable to edit, or add a new one.",-1))]))]),_:1})]),_:1})]),_:1}),l(_e,null,{default:s(()=>[l(Ne),l(A,{onClick:j},{default:s(()=>[y(b(n.value.cancel),1)]),_:1}),l(A,{onClick:N,color:"primary"},{default:s(()=>[y(b(n.value.save),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),bl=H(gl,[["__scopeId","data-v-46213e9d"]]),hl={class:"editor-container"},_l={class:"d-flex align-center flex-column"},yl={class:"d-flex align-center gap-2 mb-2"},kl=B({__name:"Editor",props:{id:{},theme:{},locale:{}},setup(a){const e=a,t=E("default"),o=I(()=>t.value&&t.value!=="default"?t.value:t.value&&t.value==="default"?null:e.locale),n=I(()=>Te[e.locale]),i=E(!1),d=I(()=>{const r=[{value:"default",title:n.value.noLanguageOverride}];return Object.entries(de).forEach(([m,u])=>{r.push({value:m,title:u.name})}),r});return(r,m)=>(p(),k("div",hl,[l(be,null,{default:s(()=>[L(D).workerStatus=="initializing"?(p(),x(ie,{key:0,text:n.value.notebookStarting,type:"info",variant:"tonal",density:"compact"},null,8,["text"])):U("",!0)]),_:1}),l(be,null,{default:s(()=>[L(D).workerStatus=="error"?(p(),x(ie,{key:0,text:`${n.value.notebookStartError} ${L(D).fatalErrorTrace}`,type:"error",variant:"tonal",density:"compact"},null,8,["text"])):U("",!0)]),_:1}),l(be,null,{default:s(()=>[f("div",_l,[f("div",yl,[l(ve,{modelValue:t.value,"onUpdate:modelValue":m[0]||(m[0]=u=>t.value=u),items:d.value,label:n.value.languageOverride,density:"compact",variant:"outlined",style:{"min-width":"150px"},"hide-details":""},null,8,["modelValue","items","label"]),l(Se,{divided:""},{default:s(()=>[l(A,{icon:"mdi-variable",onClick:m[1]||(m[1]=u=>i.value=!0)})]),_:1})])])]),_:1}),(p(!0),k(ee,null,oe(L($).content.cells,u=>{var h,g;return p(),k("div",null,[u.cell_type==="markdown"?(p(),x(L(Ct),{key:0,cell:u,metadata:u.metadata,locale:o.value,editMode:!0},null,8,["cell","metadata","locale"])):U("",!0),u.cell_type==="code"?(p(),x(L(Lt),{key:1,cell:u,theme:e.theme,locale:o.value,editMode:!0},null,8,["cell","theme","locale"])):U("",!0),u.cell_type==="raw"&&((h=u.metadata.tags)!=null&&h.includes("video"))?(p(),x(L($t),{key:2,cell:u,locale:o.value},null,8,["cell","locale"])):U("",!0),u.cell_type==="raw"&&((g=u.metadata.tags)!=null&&g.includes("chat"))?(p(),x(L(Pt),{key:3,cell:u,locale:o.value},null,8,["cell","locale"])):U("",!0)])}),256)),l(Nt,{locale:e.locale},null,8,["locale"]),l(bl,{modelValue:i.value,"onUpdate:modelValue":m[2]||(m[2]=u=>i.value=u),locale:e.locale},null,8,["modelValue","locale"])]))}}),wl=H(kl,[["__scopeId","data-v-bca9abeb"]]),xl={class:"viewer-container"},Cl=B({__name:"Viewer",props:{id:{},theme:{},locale:{}},setup(a){const e=a,t=I(()=>Te[e.locale]);return(o,n)=>(p(),k("div",xl,[l(be,null,{default:s(()=>[L(D).workerStatus=="initializing"?(p(),x(ie,{key:0,text:t.value.notebookStarting,type:"info",variant:"tonal",density:"compact"},null,8,["text"])):U("",!0)]),_:1}),l(be,null,{default:s(()=>[L(D).workerStatus=="error"?(p(),x(ie,{key:0,text:`${t.value.notebookStartError} ${L(D).fatalErrorTrace}`,type:"error",variant:"tonal",density:"compact"},null,8,["text"])):U("",!0)]),_:1}),(p(!0),k(ee,null,oe(L($).content.cells,i=>{var d,r;return p(),k("div",null,[i.cell_type==="markdown"?(p(),x(L(Ct),{key:0,cell:i,metadata:i.metadata,locale:e.locale,editMode:!1},null,8,["cell","metadata","locale"])):U("",!0),i.cell_type==="code"?(p(),x(L(Lt),{key:1,cell:i,theme:e.theme,locale:e.locale,editMode:!1},null,8,["cell","theme","locale"])):U("",!0),i.cell_type==="raw"&&((d=i.metadata.tags)!=null&&d.includes("video"))?(p(),x(L($t),{key:2,cell:i,locale:e.locale},null,8,["cell","locale"])):U("",!0),i.cell_type==="raw"&&((r=i.metadata.tags)!=null&&r.includes("chat"))?(p(),x(L(Pt),{key:3,cell:i,locale:e.locale},null,8,["cell","locale"])):U("",!0)])}),256)),l(Nt,{locale:e.locale},null,8,["locale"])]))}}),Sl=H(Cl,[["__scopeId","data-v-17948943"]]),El=B({__name:"PyodideProvider",props:{notebookId:{},locale:{}},setup(a){const e=a;let t;return Q(async()=>{console.log("PyodideProvider: Starting new worker for "+e.notebookId),D.setWorkerStatus("initializing"),t=new Worker(new URL("/sendai/assets/PyodideWorker-DCpjE9aV.js",import.meta.url),{type:"module"}),t.postMessage({type:"initialize"}),t.onmessage=async o=>{const{type:n,text:i,result:d,message:r,error:m,interruptBuffer:u}=o.data;switch(n){case"initialized":console.log("PyodideProvider: Pyodide is initialized"),D.setWorkerStatus("ready"),u&&(D.setInterruptBuffer(new Int32Array(u)),console.log("PyodideProvider: Set Interrupt Buffer"));break;case"stdout":D.runningCellId&&$.addStdout(D.runningCellId,i);break;case"input_request":D.requestUserInput(r);break;case"execute_result":D.runningCellId&&d&&$.setResult(D.runningCellId,d);break;case"execute_completed":D.executionCompleted();break;case"error":D.runningCellId&&$.setError(D.runningCellId,m),D.executionCompleted();break;case"fatal":D.setFatalError(m);break}}}),Xe(async()=>{console.log("PyodideProvider: Terminating worker."),D.setWorkerStatus("terminating"),t.terminate()}),W(()=>D.executionStatus,o=>{if(o==="queued"&&D.runningCellId!=null){const n=$.parseGlobals($.getLocalizedSource(D.runningCellId,e.locale)||[],e.locale);t.postMessage({type:"run",cellId:D.runningCellId,code:n==null?void 0:n.join("")})}}),W(()=>D.inputStatus,o=>{o==="submitted"&&t.postMessage({type:"input_response",value:D.userInput})}),(o,n)=>At(o.$slots,"default")}}),Vl=B({__name:"Renderer",props:{id:{},initialNotebook:{},theme:{},locale:{},editMode:{type:Boolean}},setup(a){const e=a;return Q(()=>{$.loadNotebook(e.initialNotebook)}),W(()=>e.initialNotebook,t=>{$.loadNotebook(t)}),(t,o)=>(p(),x(El,{notebookId:t.id,locale:t.locale},{default:s(()=>[t.editMode?(p(),x(wl,{key:0,id:t.id,theme:t.theme,locale:t.locale},null,8,["id","theme","locale"])):(p(),x(Sl,{key:1,id:t.id,theme:t.theme,locale:t.locale},null,8,["id","theme","locale"]))]),_:1},8,["notebookId","locale"]))}}),Ll={class:"notebook"},$l={class:"d-flex align-center mb-6 notebook-header"},Pl={class:"d-flex align-center flex-grow-1"},Nl={class:"text-h4 notebook-title"},Il={key:1,class:"loading"},Dl={class:"text-center"},Tl={class:"text-h5 mb-2"},Ul={class:"text-body-1 text-medium-emphasis mb-4"},Ml=B({__name:"Notebook",setup(a){const e=ot(),t=tt(),o=I(()=>De[M.locale]),n=I(()=>de[M.locale].direction==="rtl"),i=I(()=>e.params.id),d=E(null),r=E(!0),m=E(null),u=E(!1),h=E(!1),{saveStatus:g,stopWatcher:S}=Bo(i.value);Q(async()=>{try{r.value=!0,m.value=null,d.value=await xt(i.value)}catch(R){console.error("Failed to load notebook:",R),m.value=R instanceof Error?R.message:"Failed to load notebook"}finally{r.value=!1}});const C=()=>{t.push("/notebooks")},V=()=>{u.value=!u.value},_=()=>{h.value=!h.value};return Xe(()=>{$.clear(),S()}),(R,T)=>(p(),k("div",Ll,[l(Ie,{fluid:"",class:"pa-4"},{default:s(()=>{var q,P;return[f("div",$l,[f("div",Pl,[l(A,{icon:n.value?"mdi-arrow-right":"mdi-arrow-left",variant:"text",onClick:C,class:pe(n.value?"ms-3":"me-3")},null,8,["icon","class"]),f("h1",Nl,b(((P=(q=d.value)==null?void 0:q.metadata)==null?void 0:P.title)||o.value.untitledNotebook),1)]),L(g)!=="idle"?(p(),x(re,{key:0,color:L(g)==="saved"?"success":L(g)==="saving"?"info":"error",size:"small",variant:"tonal"},{default:s(()=>[l(K,{icon:L(g)==="saved"?"mdi-check":L(g)==="saving"?"mdi-loading":"mdi-alert",class:pe([{"mdi-spin":L(g)==="saving"},"me-1"]),size:"small"},null,8,["icon","class"]),y(" "+b(L(g)==="saved"?o.value.saved:L(g)==="saving"?o.value.saving:o.value.saveError),1)]),_:1},8,["color"])):U("",!0),f("div",{class:pe(["d-flex align-center",n.value?"ms-3":"me-3"])},[l(A,{icon:"mdi-pencil",variant:"text",size:"small",color:u.value?"primary":"default",onClick:V,class:"me-2"},{default:s(()=>[l(K,null,{default:s(()=>T[0]||(T[0]=[y("mdi-pencil",-1)])),_:1,__:[0]}),l(rt,{activator:"parent",location:"bottom"},{default:s(()=>T[1]||(T[1]=[y(" Edit Notebook ",-1)])),_:1,__:[1]})]),_:1},8,["color"]),l(A,{icon:"mdi-paperclip",variant:"text",size:"small",color:h.value?"primary":"default",onClick:_},{default:s(()=>[l(K,null,{default:s(()=>T[2]||(T[2]=[y("mdi-paperclip",-1)])),_:1,__:[2]}),l(rt,{activator:"parent",location:"bottom"},{default:s(()=>T[3]||(T[3]=[y(" Resources ",-1)])),_:1,__:[3]})]),_:1},8,["color"])],2)]),d.value&&!r.value&&!m.value?(p(),x(Vl,{key:0,"initial-notebook":d.value,id:i.value,theme:L(M).theme,locale:L(M).locale,editMode:u.value},null,8,["initial-notebook","id","theme","locale","editMode"])):r.value?(p(),k("div",Il,[l(Ve,{indeterminate:"",color:"primary"}),f("p",null,b(o.value.loadingNotebook),1)])):m.value?(p(),x(J,{key:2,class:"pa-6"},{default:s(()=>[f("div",Dl,[l(K,{icon:"mdi-alert-circle",size:"64",color:"error",class:"mb-4"}),f("h2",Tl,b(o.value.failedToLoad),1),f("p",Ul,b(m.value),1),l(A,{color:"primary",onClick:C},{default:s(()=>[y(b(o.value.backToNotebooks),1)]),_:1})])]),_:1})):U("",!0)]}),_:1})]))}}),Al=H(Ml,[["__scopeId","data-v-6fc1f7ac"]]),Rl={class:"notebook-json"},Ol=B({__name:"NotebookJSON",setup(a){const e=ot(),t=I(()=>e.params.id),o=E(null),n=E(!0),i=E(null);Q(async()=>{try{n.value=!0,i.value=null,o.value=await xt(t.value)}catch(r){console.error("Failed to load notebook:",r),i.value=r instanceof Error?r.message:"Failed to load notebook"}finally{n.value=!1}});const d=I(()=>i.value?JSON.stringify({error:i.value,message:"Notebook not found or could not be loaded"},null,2):o.value?JSON.stringify(o.value,null,2):JSON.stringify({message:"Loading..."},null,2));return(r,m)=>(p(),k("div",Rl,[f("pre",null,b(d.value),1)]))}}),Bl=H(Ol,[["__scopeId","data-v-738b6e09"]]),Fl={class:"curriculum-view"},zl=B({__name:"Curriculum",setup(a){return(e,t)=>(p(),k("div",Fl,[l(Ie,null,{default:s(()=>[l(ye,null,{default:s(()=>[l(te,{cols:"12"},{default:s(()=>[t[1]||(t[1]=f("h1",{class:"text-h4 mb-4"},"Curriculum",-1)),l(J,null,{default:s(()=>[l(G,null,{default:s(()=>t[0]||(t[0]=[f("p",{class:"text-body-1"}," Curriculum content will be implemented here. This section will contain educational materials, lessons, and structured learning paths. ",-1)])),_:1,__:[0]})]),_:1})]),_:1,__:[1]})]),_:1})]),_:1})]))}}),Kl=H(zl,[["__scopeId","data-v-4427f550"]]),jl=[{name:"LM Studio",url:"http://localhost:1234"},{name:"OpenRouter",url:"https://openrouter.ai/api"},{name:"OpenAI",url:"https://api.openai.com"}],ql={key:0,class:"text-center py-8"},Jl={class:"text-body-1 text-medium-emphasis"},Hl={key:1,class:"provider-list"},Gl={class:"d-flex align-center gap-2 mb-2"},Wl={key:0},Yl={class:"d-flex justify-space-between align-start mb-3"},Zl={class:"flex-grow-1"},Ql={class:"text-h6"},Xl={class:"text-body-2 text-medium-emphasis"},er={key:0,class:"text-body-2"},tr={class:"d-flex gap-2 flex-shrink-0"},or={key:1},ar={class:"d-flex gap-2"},lr={key:0,class:"text-error text-caption mt-1"},rr={class:"d-flex justify-end gap-2 mt-3"},nr=B({__name:"AIProviderManager",setup(a){const e=jl,t=E(null),o=E({}),n=E({}),i=E({}),d=I(()=>wt[M.locale]),r=E({name:"",url:"",apiKey:"",selectedModel:"",type:""}),m=v=>{t.value=v.id,r.value={name:v.name,url:v.url,apiKey:v.apiKey,selectedModel:v.selectedModel,type:v.type},i.value={}},u=()=>{t.value=null,r.value={name:"",url:"",apiKey:"",selectedModel:"",type:""},i.value={}},h=()=>(i.value={},r.value.name.trim()||(i.value.name=d.value.providerNameRequired),r.value.url.trim()?Je.validateUrl(r.value.url)||(i.value.url=d.value.invalidUrl):i.value.url=d.value.urlRequired,r.value.apiKey.trim()||(i.value.apiKey=d.value.apiKeyRequired),Object.keys(i.value).length===0),g=async()=>{if(!h()||!t.value)return;const v={name:r.value.name.trim(),url:r.value.url.trim(),apiKey:r.value.apiKey.trim(),selectedModel:r.value.selectedModel,type:r.value.type};M.updateProvider(t.value,v),u()},S=v=>{const w={name:v.name,url:v.url,apiKey:"",selectedModel:"",type:v.name,models:[]};M.addProvider(w);const N=M.aiProviders[M.aiProviders.length-1];N&&m(N)},C=v=>{M.removeProvider(v)},V=v=>{M.setDefaultProvider(v)},_=async v=>{if(!(!v.apiKey||!v.url)){o.value[v.id]=!0,n.value[v.id]="";try{const w=await Je.fetchModels(v.url,v.apiKey);M.updateProvider(v.id,{models:w}),!v.selectedModel&&w.length>0&&M.updateProvider(v.id,{selectedModel:w[0].id})}catch(w){n.value[v.id]=d.value.errorLoadingModels,console.error("Error fetching models:",w)}finally{o.value[v.id]=!1}}},R=(v,w)=>{M.updateProvider(v,{selectedModel:w})};let T=null;const q=async()=>{T&&clearTimeout(T),T=setTimeout(async()=>{if(r.value.apiKey.trim()&&r.value.url.trim()&&t.value){const v=M.aiProviders.find(w=>w.id===t.value);v&&(M.updateProvider(t.value,{apiKey:r.value.apiKey.trim(),url:r.value.url.trim()}),await _({...v,apiKey:r.value.apiKey.trim(),url:r.value.url.trim()}))}},1e3)},P=async()=>{T&&clearTimeout(T),T=setTimeout(async()=>{if(r.value.apiKey.trim()&&r.value.url.trim()&&t.value){const v=M.aiProviders.find(w=>w.id===t.value);v&&(M.updateProvider(t.value,{apiKey:r.value.apiKey.trim(),url:r.value.url.trim()}),await _({...v,apiKey:r.value.apiKey.trim(),url:r.value.url.trim()}))}},1e3)};return Q(()=>{M.aiProviders.forEach(v=>{v.apiKey&&v.url&&(!v.models||v.models.length===0)&&_(v)})}),(v,w)=>(p(),x(J,{class:"mb-4"},{default:s(()=>[l(le,{class:"d-flex justify-space-between align-center"},{default:s(()=>[y(b(d.value.aiProviders)+" ",1),l(et,null,{activator:s(({props:N})=>[l(A,Ze({color:"primary",variant:"outlined"},N,{"prepend-icon":"mdi-plus"}),{default:s(()=>[y(b(d.value.add),1)]),_:2},1040)]),default:s(()=>[l($e,null,{default:s(()=>[(p(!0),k(ee,null,oe(L(e),N=>(p(),x(ne,{key:N.name,onClick:j=>S(N)},{default:s(()=>[l(se,null,{default:s(()=>[y(b(N.name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1}),l(G,null,{default:s(()=>[L(M).aiProviders.length===0?(p(),k("div",ql,[l(K,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:s(()=>w[4]||(w[4]=[y("mdi-robot-outline",-1)])),_:1,__:[4]}),f("p",Jl,b(d.value.noProviders),1)])):(p(),k("div",Hl,[(p(!0),k(ee,null,oe(L(M).aiProviders,N=>(p(),x(J,{key:N.id,class:"mb-3",variant:N.isDefault?"tonal":"outlined"},{default:s(()=>[l(G,null,{default:s(()=>[f("div",Gl,[N.isDefault?(p(),x(re,{key:0,color:"primary",size:"small"},{default:s(()=>[y(b(d.value.defaultProvider),1)]),_:1})):U("",!0),N.isDefault?U("",!0):(p(),x(A,{key:1,size:"small",variant:"outlined",onClick:j=>V(N.id)},{default:s(()=>[y(b(d.value.setDefault),1)]),_:2},1032,["onClick"]))]),t.value!==N.id?(p(),k("div",Wl,[f("div",Yl,[f("div",Zl,[f("h3",Ql,b(N.name),1),f("p",Xl,b(N.url),1),N.selectedModel?(p(),k("p",er," Model: "+b(N.selectedModel),1)):U("",!0)]),f("div",tr,[l(A,{size:"small",variant:"outlined",icon:"mdi-pencil",onClick:j=>m(N)},null,8,["onClick"]),l(A,{size:"small",variant:"outlined",color:"error",icon:"mdi-delete",onClick:j=>C(N.id)},null,8,["onClick"])])])])):(p(),k("div",or,[l(ye,null,{default:s(()=>[l(te,{cols:"12",md:"6"},{default:s(()=>[l(Z,{modelValue:r.value.name,"onUpdate:modelValue":w[0]||(w[0]=j=>r.value.name=j),label:d.value.providerName,"error-messages":i.value.name,variant:"outlined",density:"compact"},null,8,["modelValue","label","error-messages"])]),_:1}),l(te,{cols:"12",md:"6"},{default:s(()=>[l(Z,{modelValue:r.value.url,"onUpdate:modelValue":[w[1]||(w[1]=j=>r.value.url=j),P],label:d.value.providerUrl,"error-messages":i.value.url,variant:"outlined",density:"compact"},null,8,["modelValue","label","error-messages"])]),_:1}),l(te,{cols:"12",md:"8"},{default:s(()=>[l(Z,{modelValue:r.value.apiKey,"onUpdate:modelValue":[w[2]||(w[2]=j=>r.value.apiKey=j),q],label:d.value.apiKey,"error-messages":i.value.apiKey,type:"password",variant:"outlined",density:"compact"},null,8,["modelValue","label","error-messages"])]),_:1}),l(te,{cols:"12",md:"4"},{default:s(()=>[f("div",ar,[l(ve,{modelValue:r.value.selectedModel,"onUpdate:modelValue":[w[3]||(w[3]=j=>r.value.selectedModel=j),j=>R(N.id,j)],items:N.models||[],"item-title":"id","item-value":"id",label:d.value.models,variant:"outlined",density:"compact",loading:o.value[N.id],disabled:!N.models||N.models.length===0},null,8,["modelValue","items","label","loading","disabled","onUpdate:modelValue"]),l(A,{icon:"mdi-refresh",size:"small",variant:"outlined",loading:o.value[N.id],disabled:!r.value.apiKey||!r.value.url,onClick:j=>_(N)},null,8,["loading","disabled","onClick"])]),n.value[N.id]?(p(),k("div",lr,b(n.value[N.id]),1)):U("",!0)]),_:2},1024)]),_:2},1024),f("div",rr,[l(A,{variant:"outlined",onClick:u},{default:s(()=>[y(b(d.value.cancelEdit),1)]),_:1}),l(A,{color:"primary",onClick:g},{default:s(()=>[y(b(d.value.saveProvider),1)]),_:1})])]))]),_:2},1024)]),_:2},1032,["variant"]))),128))]))]),_:1})]),_:1}))}}),sr=H(nr,[["__scopeId","data-v-57b64f3c"]]),ir={class:"settings-view"},ur={class:"text-h4 mb-4 settings-title"},dr={class:"text-body-1"},cr={class:"text-body-2 text-medium-emphasis"},mr=B({__name:"Settings",setup(a){const e=ht(),t=E(M.theme),o=E(M.locale),n=I(()=>po.map(u=>({title:co[M.locale][u],value:u}))),i=io.map(u=>({title:de[u].name,value:u})),d=I(()=>wt[M.locale]);Q(()=>{e.global.name.value=M.theme}),W(t,u=>{e.global.name.value=u});const r=u=>{M.setTheme(u),t.value=u},m=u=>{M.setLocale(u),o.value=u};return(u,h)=>(p(),k("div",ir,[l(Ie,null,{default:s(()=>[l(ye,null,{default:s(()=>[l(te,{cols:"12"},{default:s(()=>[f("h1",ur,b(d.value.title),1),l(J,{class:"mb-4"},{default:s(()=>[l(le,null,{default:s(()=>[y(b(d.value.appearance),1)]),_:1}),l(G,null,{default:s(()=>[l(ve,{modelValue:t.value,"onUpdate:modelValue":[h[0]||(h[0]=g=>t.value=g),r],items:n.value,label:d.value.theme,"item-title":"title","item-value":"value"},null,8,["modelValue","items","label"])]),_:1})]),_:1}),l(J,{class:"mb-4"},{default:s(()=>[l(le,null,{default:s(()=>[y(b(d.value.language),1)]),_:1}),l(G,null,{default:s(()=>[l(ve,{modelValue:o.value,"onUpdate:modelValue":[h[1]||(h[1]=g=>o.value=g),m],items:L(i),label:d.value.language,"item-title":"title","item-value":"value"},null,8,["modelValue","items","label"])]),_:1})]),_:1}),l(sr),l(J,null,{default:s(()=>[l(le,null,{default:s(()=>[y(b(d.value.about),1)]),_:1}),l(G,null,{default:s(()=>[f("p",dr,b(d.value.appName),1),f("p",cr,b(d.value.version)+" 0.1.0 ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}}),pr=H(mr,[["__scopeId","data-v-f778c09e"]]),vr=[{path:"/",redirect:"notebooks"},{path:"/notebooks",name:"notebooks",component:Mo},{path:"/notebooks/:id/json",name:"notebook-json",component:Bl},{path:"/notebooks/:id",name:"notebook",component:Al},{path:"/curriculum",name:"curriculum",component:Kl},{path:"/settings",name:"settings",component:pr}],fr=oo({history:ao("/sendai/"),routes:vr}),gr={class:"content-container"},br=B({__name:"BaseLayout",setup(a){const e=()=>{const g=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${g}px`)},t=tt(),o=ot(),n={"/notebooks":0,"/curriculum":1,"/settings":2},i={0:"/notebooks",1:"/curriculum",2:"/settings"},d=I({get:()=>n[o.path]??0,set:g=>{const S=i[g];S&&o.path!==S&&t.push(S)}}),r=ht(),m=I(()=>mo[M.locale]),u=I(()=>de[M.locale].direction),h=I(()=>M.locale);return W([u,h],([g,S])=>{document.documentElement.dir=g,document.documentElement.lang=S},{immediate:!0}),Q(()=>{r.global.name.value=M.theme,document.documentElement.dir=u.value,document.documentElement.lang=h.value,e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e)}),Xe(()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}),(g,S)=>{const C=Rt("router-view");return p(),x(Yt,null,{default:s(()=>[l(Zt,null,{default:s(()=>[f("div",gr,[l(C)])]),_:1}),l(Qt,{modelValue:d.value,"onUpdate:modelValue":S[0]||(S[0]=V=>d.value=V),color:"primary",grow:"",class:pe({"rtl-navigation":u.value==="rtl"})},{default:s(()=>[l(A,{value:"0"},{default:s(()=>[l(K,null,{default:s(()=>S[1]||(S[1]=[y("mdi-notebook",-1)])),_:1,__:[1]}),f("span",null,b(m.value.notebooks),1)]),_:1}),l(A,{value:"1"},{default:s(()=>[l(K,null,{default:s(()=>S[2]||(S[2]=[y("mdi-school",-1)])),_:1,__:[2]}),f("span",null,b(m.value.curriculum),1)]),_:1}),l(A,{value:"2"},{default:s(()=>[l(K,null,{default:s(()=>S[3]||(S[3]=[y("mdi-cog",-1)])),_:1,__:[3]}),f("span",null,b(m.value.settings),1)]),_:1})]),_:1},8,["modelValue","class"])]),_:1})}}}),hr=H(br,[["__scopeId","data-v-77271b7e"]]),_r=B({__name:"App",setup(a){return(e,t)=>(p(),x(hr))}}),yr=Xt({theme:{defaultTheme:"dark",themes:{light:{colors:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}},dark:{colors:{primary:"#2196F3",secondary:"#424242",accent:"#FF4081",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}},icons:{defaultSet:"mdi",aliases:to,sets:{mdi:eo}}});Ot(_r).use(yr).use(fr).mount("#app");
