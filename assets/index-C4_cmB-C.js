import{b as xe,d as E,c as D,V as S,W as f,X as d,v as i,Y as w,U as N,M as h,x as Ge,Z as it,r as I,w as B,n as Ye,B as z,_ as x,$,F as le,a0 as Ne,u as y,L as ct,Q as ut,a1 as Ee,a2 as dt,a3 as ke,a4 as mt,a5 as pt}from"./@vue--moNiIM6.js";import{V as F,a as Qe,b as Xe,c as Z,d as ee,e as V,f as P,g as A,h as Le,i as q,j as oe,k as re,l as De,m as ne,n as Te,o as Ie,p as de,q as ft,r as gt,s as ye,t as bt,u as ht,v as me,w as vt,x as pe,y as Ae,z as Be,A as _t,B as kt,C as Ze,D as yt,E as wt,F as Ct,G as St,H as xt,I as Nt}from"./vuetify-BAyqaNEh.js";import{u as $e,a as et,c as Et,b as Lt}from"./vue-router-ClIoaLts.js";import{v as j}from"./uuid-C6aID195.js";import{m as Dt}from"./marked-DKjyhwJX.js";import{z as G,H as tt,s as ot,E as Tt,A as It}from"./@codemirror-DLu3zILg.js";import{b as $t}from"./codemirror-BG8Os8gr.js";import{c as r}from"./@lezer-C8D-pblS.js";import"./crelt-C8TCjufn.js";import"./@marijn-DXwl3gUT.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function t(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerPolicy&&(n.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?n.credentials="include":l.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(l){if(l.ep)return;l.ep=!0;const n=t(l);fetch(l.href,n)}})();const Vt=["en-US","ja-JP","hi-IN","fa-IR"],Ut="en-US",se={"en-US":{direction:"ltr",name:"English (US)"},"ja-JP":{direction:"ltr",name:"日本語"},"hi-IN":{direction:"ltr",name:"हिन्दी"},"fa-IR":{direction:"rtl",name:"فارسی"}},At={"en-US":{light:"Light",dark:"Dark"},"ja-JP":{light:"ライト",dark:"ダーク"},"hi-IN":{light:"हल्का",dark:"गहरा"},"fa-IR":{light:"روشن",dark:"تیره"}},Bt={"en-US":{notebooks:"Notebooks",curriculum:"Curriculum",settings:"Settings"},"ja-JP":{notebooks:"ノートブック",curriculum:"カリキュラム",settings:"設定"},"hi-IN":{notebooks:"नोटबुक",curriculum:"पाठ्यक्रम",settings:"सेटिंग्स"},"fa-IR":{notebooks:"دفترچه‌ها",curriculum:"برنامه درسی",settings:"تنظیمات"}},ie={"en-US":{title:"Notebooks",addNotebook:"Add",blank:"Blank",fromTemplate:"From template",importNotebook:"Import notebook",fromUrl:"From URL",delete:"Delete",lastEdited:"Last edited",back:"Back",notebookViewer:"Notebook Viewer",saved:"Saved",saving:"Saving...",saveError:"Save Error",loadingNotebook:"Loading notebook...",failedToLoad:"Failed to load notebook",backToNotebooks:"Back to Notebooks",untitledNotebook:"Untitled Notebook",justNow:"Just now",hoursAgo:"hours ago",hourAgo:"hour ago",daysAgo:"days ago",dayAgo:"day ago",urlDialogTitle:"Import from URL",urlDialogLabel:"Enter notebook URL",urlDialogOpen:"Open",urlDialogCancel:"Close",urlDialogError:"Error",urlDialogErrorMessage:"Failed to fetch notebook from URL",urlDialogInvalidUrl:"Please enter a valid URL (must start with http:// or https://)"},"ja-JP":{title:"ノートブック",addNotebook:"Add",blank:"空白",fromTemplate:"テンプレートから",importNotebook:"ノートブックをインポート",fromUrl:"URLから",delete:"削除",lastEdited:"最終編集",back:"戻る",notebookViewer:"ノートブックビューア",saved:"保存済み",saving:"保存中...",saveError:"保存エラー",loadingNotebook:"ノートブックを読み込み中...",failedToLoad:"ノートブックの読み込みに失敗しました",backToNotebooks:"ノートブックに戻る",untitledNotebook:"無題のノートブック",justNow:"たった今",hoursAgo:"時間前",hourAgo:"時間前",daysAgo:"日前",dayAgo:"日前",urlDialogTitle:"URLからインポート",urlDialogLabel:"ノートブックのURLを入力",urlDialogOpen:"開く",urlDialogCancel:"閉じる",urlDialogError:"エラー",urlDialogErrorMessage:"URLからノートブックを取得できませんでした",urlDialogInvalidUrl:"有効なURLを入力してください（http://またはhttps://で始まる必要があります）"},"hi-IN":{title:"नोटबुक",addNotebook:"Add",blank:"खाली",fromTemplate:"टेम्प्लेट से",importNotebook:"नोटबुक आयात करें",fromUrl:"URL से",delete:"हटाएं",lastEdited:"अंतिम संपादन",back:"वापस",notebookViewer:"नोटबुक व्यूअर",saved:"सहेजा गया",saving:"सहेज रहे हैं...",saveError:"सहेजने में त्रुटि",loadingNotebook:"नोटबुक लोड हो रहा है...",failedToLoad:"नोटबुक लोड करने में विफल",backToNotebooks:"नोटबुक पर वापस जाएं",untitledNotebook:"बिना शीर्षक नोटबुक",justNow:"अभी",hoursAgo:"घंटे पहले",hourAgo:"घंटा पहले",daysAgo:"दिन पहले",dayAgo:"दिन पहले",urlDialogTitle:"URL से आयात करें",urlDialogLabel:"नोटबुक URL दर्ज करें",urlDialogOpen:"खोलें",urlDialogCancel:"बंद करें",urlDialogError:"त्रुटि",urlDialogErrorMessage:"URL से नोटबुक प्राप्त करने में विफल",urlDialogInvalidUrl:"कृपया एक वैध URL दर्ज करें (http:// या https:// से शुरू होना चाहिए)"},"fa-IR":{title:"دفترچه‌ها",addNotebook:"Add",blank:"خالی",fromTemplate:"از قالب",importNotebook:"وارد کردن دفترچه",fromUrl:"از URL",delete:"حذف",lastEdited:"آخرین ویرایش",back:"بازگشت",notebookViewer:"نمایشگر دفترچه",saved:"ذخیره شد",saving:"در حال ذخیره...",saveError:"خطا در ذخیره",loadingNotebook:"در حال بارگذاری دفترچه...",failedToLoad:"بارگذاری دفترچه ناموفق بود",backToNotebooks:"بازگشت به دفترچه‌ها",untitledNotebook:"دفترچه بدون عنوان",justNow:"همین الان",hoursAgo:"ساعت پیش",hourAgo:"ساعت پیش",daysAgo:"روز پیش",dayAgo:"روز پیش",urlDialogTitle:"وارد کردن از URL",urlDialogLabel:"URL دفترچه را وارد کنید",urlDialogOpen:"باز کردن",urlDialogCancel:"بستن",urlDialogError:"خطا",urlDialogErrorMessage:"دریافت دفترچه از URL ناموفق بود",urlDialogInvalidUrl:"لطفاً یک URL معتبر وارد کنید (باید با http:// یا https:// شروع شود)"}},Rt={"en-US":{title:"Settings",appearance:"Appearance",language:"Language",about:"About",theme:"Theme",version:"Version",appName:"K12 Notebook - Web Shell"},"ja-JP":{title:"設定",appearance:"外観",language:"言語",about:"について",theme:"テーマ",version:"バージョン",appName:"K12ノートブック - ウェブシェル"},"hi-IN":{title:"सेटिंग्स",appearance:"दिखावट",language:"भाषा",about:"के बारे में",theme:"थीम",version:"संस्करण",appName:"K12 नोटबुक - वेब शेल"},"fa-IR":{title:"تنظیمات",appearance:"ظاهر",language:"زبان",about:"درباره",theme:"تم",version:"نسخه",appName:"دفترچه K12 - پوسته وب"}},at={"en-US":{notebookStarting:"The notebook is starting up...",notebookStartError:"The notebook could not be started because of an error:",inputDialogTitle:"Enter Input",inputDialogLabel:"Input",inputDialogCancel:"Cancel",inputDialogSubmit:"Submit"},"ja-JP":{notebookStarting:"ノートブックを起動中...",notebookStartError:"エラーのためノートブックを起動できませんでした:",inputDialogTitle:"入力してください",inputDialogLabel:"入力",inputDialogCancel:"キャンセル",inputDialogSubmit:"送信"},"hi-IN":{notebookStarting:"नोटबुक शुरू हो रहा है...",notebookStartError:"त्रुटि के कारण नोटबुक शुरू नहीं हो सका:",inputDialogTitle:"इनपुट दर्ज करें",inputDialogLabel:"इनपुट",inputDialogCancel:"रद्द करें",inputDialogSubmit:"जमा करें"},"fa-IR":{notebookStarting:"دفترچه در حال راه‌اندازی است...",notebookStartError:"دفترچه به دلیل خطا راه‌اندازی نشد:",inputDialogTitle:"ورودی را وارد کنید",inputDialogLabel:"ورودی",inputDialogCancel:"لغو",inputDialogSubmit:"ارسال"}},Ft=["light","dark"],Pt="dark",L=xe({theme:localStorage.getItem("theme")||Pt,locale:localStorage.getItem("locale")||Ut,setTheme(o){this.theme=o,localStorage.setItem("theme",o)},setLocale(o){this.locale=o,localStorage.setItem("locale",o)}}),Mt={class:"d-flex justify-end mb-2"},Ot={class:"d-flex align-center"},zt={class:"flex-grow-1"},jt={class:"text-h6 mb-1"},Wt={class:"text-caption text-medium-emphasis mb-0"},Ht=E({__name:"NotebookCard",props:{notebook:{}},emits:["delete"],setup(o,{emit:e}){const t=o,a=e,l=$e(),n=D(()=>ie[L.locale]),u=s=>{const p=Math.floor((new Date().getTime()-s.getTime())/(1e3*60*60));if(p<1)return n.value.justNow;if(p<24){const b=p===1?n.value.hourAgo:n.value.hoursAgo;return`${p} ${b}`}else{const b=Math.floor(p/24),v=b===1?n.value.dayAgo:n.value.daysAgo;return`${b} ${v}`}},c=()=>{l.push(`/notebooks/${t.notebook.id}`)},m=()=>{a("delete",t.notebook.id)};return(s,g)=>(f(),S(A,{class:"notebook-card",hover:"",onClick:c},{default:d(()=>[i(F,{class:"pb-2"},{default:d(()=>[w("div",Mt,[i(Qe,null,{activator:d(({props:p})=>[i(V,Ge({icon:"mdi-dots-vertical",variant:"text",size:"small"},p,{onClick:g[0]||(g[0]=it(()=>{},["stop"]))}),null,16)]),default:d(()=>[i(Xe,null,{default:d(()=>[i(Z,{onClick:m},{default:d(()=>[i(ee,null,{default:d(()=>[N(h(n.value.delete),1)]),_:1})]),_:1})]),_:1})]),_:1})]),w("div",Ot,[i(P,{icon:"mdi-notebook-outline",size:"large",color:"primary",class:"me-3"}),w("div",zt,[w("h3",jt,h(s.notebook.title),1),w("p",Wt,h(n.value.lastEdited)+": "+h(u(s.notebook.lastModified||s.notebook.created)),1)])])]),_:1})]),_:1}))}}),M=(o,e)=>{const t=o.__vccOpts||o;for(const[a,l]of e)t[a]=l;return t},qt=M(Ht,[["__scopeId","data-v-3a1233ae"]]),Kt="NotebookDB",U="notebooks",Jt=2,ce=async()=>new Promise((o,e)=>{const t=indexedDB.open(Kt,Jt);t.onerror=()=>e(t.error),t.onsuccess=()=>o(t.result),t.onupgradeneeded=a=>{const l=t.result;if(l.objectStoreNames.contains(U)){if(a.oldVersion<2){const n=t.transaction;if(n){const u=n.objectStore(U);u.openCursor().onsuccess=c=>{const m=c.target.result;if(m){const s=m.value;s.created||(s.created=s.lastModified||Date.now(),m.update(s)),m.continue()}}}}}else{const n=l.createObjectStore(U,{keyPath:"id"});n.createIndex("lastModified","lastModified"),n.createIndex("created","created")}}}),ue=async(o,e)=>{const t=await ce();if(!t.objectStoreNames.contains(U))throw new Error("Database not properly initialized");return new Promise((a,l)=>{try{const n=t.transaction(U,"readwrite"),u=n.objectStore(U),c=u.get(o);c.onsuccess=()=>{const m=c.result,s=Date.now(),g={id:o,notebook:e,lastModified:s,created:(m==null?void 0:m.created)||s},p=u.put(g);p.onsuccess=()=>a(),p.onerror=()=>l(p.error)},c.onerror=()=>l(c.error),n.oncomplete=()=>t.close()}catch(n){l(n)}})},Gt=async o=>{const e=await ce();if(!e.objectStoreNames.contains(U))throw new Error("Database not properly initialized");return new Promise((t,a)=>{try{const l=e.transaction(U,"readonly"),u=l.objectStore(U).get(o);u.onsuccess=()=>{const c=u.result;if(!c){a(new Error("Notebook not found"));return}t(c.notebook)},u.onerror=()=>a(u.error),l.oncomplete=()=>e.close()}catch(l){a(l)}})},Y=async()=>{const o=await ce();if(!o.objectStoreNames.contains(U))throw new Error("Database not properly initialized");return new Promise((e,t)=>{try{const a=o.transaction(U,"readonly"),n=a.objectStore(U).getAll();n.onsuccess=()=>{const c=n.result.map(m=>{var s;return{id:m.id,title:((s=m.notebook.metadata)==null?void 0:s.title)||"Untitled Notebook",lastModified:new Date(m.lastModified),created:new Date(m.created)}});c.sort((m,s)=>s.created.getTime()-m.created.getTime()),e(c)},n.onerror=()=>t(n.error),a.oncomplete=()=>o.close()}catch(a){t(a)}})},Yt=async o=>{const e=await ce();if(!e.objectStoreNames.contains(U))throw new Error("Database not properly initialized");return new Promise((t,a)=>{try{const l=e.transaction(U,"readwrite");l.objectStore(U).delete(o),l.oncomplete=()=>t(),l.onerror=()=>a(l.error)}catch(l){a(l)}})},Qt=async()=>{try{const o=await fetch("./templates/blank.ipynb");if(!o.ok)throw new Error(`Failed to load blank notebook template: ${o.statusText}`);const e=await o.json();return e.cells.forEach(t=>{t.id||(t.id=j())}),e}catch(o){throw new Error(`Failed to load blank notebook template: ${o instanceof Error?o.message:String(o)}`)}},Xt=async o=>new Promise((e,t)=>{const a=new FileReader;a.onload=async l=>{var n;try{const u=(n=l.target)==null?void 0:n.result,c=JSON.parse(u);if(!c.cells||!Array.isArray(c.cells))throw new Error("Invalid notebook format: missing or invalid cells array");c.metadata||(c.metadata={}),c.nbformat||(c.nbformat=4),c.nbformat_minor||(c.nbformat_minor=2),c.cells.forEach(s=>{s.id||(s.id=j()),s.metadata||(s.metadata={}),s.source||(s.source=[])}),c.metadata.title||(c.metadata.title=o.name.replace(".ipynb","")||"Imported Notebook");const m=j();await ue(m,c),e(m)}catch(u){t(new Error(`Failed to parse notebook file: ${u instanceof Error?u.message:String(u)}`))}},a.onerror=()=>{t(new Error("Failed to read the selected file"))},a.readAsText(o)}),Zt=o=>{try{const e=new URL(o);return e.protocol==="http:"||e.protocol==="https:"}catch{return!1}},eo=async o=>{if(!Zt(o))throw new Error("Please enter a valid URL (must start with http:// or https://)");try{const e=await fetch(o);if(!e.ok)throw new Error(`Failed to fetch notebook: ${e.status} ${e.statusText}`);const t=await e.text(),a=JSON.parse(t);if(!a.cells||!Array.isArray(a.cells))throw new Error("Invalid notebook format: missing or invalid cells array");if(a.metadata||(a.metadata={}),a.nbformat||(a.nbformat=4),a.nbformat_minor||(a.nbformat_minor=2),a.cells.forEach(n=>{n.id||(n.id=j()),n.metadata||(n.metadata={}),n.source||(n.source=[])}),!a.metadata.title){const u=new URL(o).pathname.split("/").pop()||"imported-notebook.ipynb";a.metadata.title=u.replace(".ipynb","")||"Imported Notebook"}const l=j();return await ue(l,a),l}catch(e){throw e instanceof Error?e:new Error(`Failed to import notebook from URL: ${String(e)}`)}},to=E({__name:"UrlInputDialog",props:{show:{type:Boolean}},emits:["cancel","submit"],setup(o,{emit:e}){const t=o,a=e,l=D(()=>ie[L.locale]),n=I(""),u=I(),c=I(""),m=()=>{const p=n.value.trim();if(!p){c.value=l.value.urlDialogInvalidUrl;return}try{const b=new URL(p);if(b.protocol!=="http:"&&b.protocol!=="https:"){c.value=l.value.urlDialogInvalidUrl;return}}catch{c.value=l.value.urlDialogInvalidUrl;return}c.value="",a("submit",p),n.value=""},s=()=>{a("cancel"),n.value="",c.value=""};B(()=>t.show,async p=>{var b;p&&(await Ye(),(b=u.value)==null||b.focus(),c.value="")});const g=p=>{p.key==="Enter"?(p.preventDefault(),m()):p.key==="Escape"&&(p.preventDefault(),s())};return B(n,()=>{c.value&&(c.value="")}),(p,b)=>(f(),S(Le,{"model-value":p.show,"max-width":"500px",persistent:"",onKeydown:g},{default:d(()=>[i(A,null,{default:d(()=>[i(q,null,{default:d(()=>[N(h(l.value.urlDialogTitle),1)]),_:1}),i(F,null,{default:d(()=>[i(oe,{ref_key:"inputFieldRef",ref:u,modelValue:n.value,"onUpdate:modelValue":b[0]||(b[0]=v=>n.value=v),label:l.value.urlDialogLabel,"error-messages":c.value,variant:"outlined",density:"compact",placeholder:"https://example.com/notebook.ipynb",onKeydown:g},null,8,["modelValue","label","error-messages"])]),_:1}),i(re,null,{default:d(()=>[i(De),i(V,{color:"grey",variant:"text",onClick:s},{default:d(()=>[N(h(l.value.urlDialogCancel),1)]),_:1}),i(V,{color:"primary",variant:"text",onClick:m},{default:d(()=>[N(h(l.value.urlDialogOpen),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),oo={class:"notebook-index"},ao={class:"d-flex align-center mb-6 header-container"},lo={class:"text-h4 notebook-title flex-grow-1"},ro={key:0,class:"text-center mt-8"},no=E({__name:"NotebookIndex",setup(o){const e=D(()=>ie[L.locale]),t=D(()=>se[L.locale].direction==="rtl"),a=I([]),l=I(!1),n=I({show:!1,title:"",message:""});z(async()=>{try{const v=await Y();a.value=v}catch(v){console.error("Failed to load notebooks:",v)}});const u=async v=>{try{await Yt(v);const _=a.value.findIndex(T=>T.id===v);_>-1&&a.value.splice(_,1),console.log("Notebook deleted successfully:",v)}catch(_){console.error("Failed to delete notebook:",_)}},c=async()=>{try{console.log("Create blank notebook");const v=await Qt(),_=j();await ue(_,v),console.log("Created notebook with id:",_);const T=await Y();a.value=T}catch(v){console.error("Failed to create blank notebook:",v)}},m=async()=>{try{const v=document.createElement("input");v.type="file",v.accept=".ipynb",v.style.display="none",v.onchange=async _=>{var Ue;const T=(Ue=_.target.files)==null?void 0:Ue[0];if(!T){console.log("No file selected");return}try{const K=await Xt(T);console.log("Notebook imported successfully:",K);const st=await Y();a.value=st}catch(K){console.error("Failed to import notebook:",K),alert(`Failed to import notebook: ${K instanceof Error?K.message:"Unknown error"}`)}},document.body.appendChild(v),v.click(),document.body.removeChild(v)}catch(v){console.error("Failed to import notebook:",v),alert("Failed to import notebook. Please try again.")}},s=()=>{l.value=!0},g=async v=>{l.value=!1;try{console.log("Importing notebook from URL:",v);const _=await eo(v);console.log("Notebook imported successfully:",_);const T=await Y();a.value=T}catch(_){console.error("Failed to import notebook from URL:",_),setTimeout(()=>{n.value={show:!0,title:e.value.urlDialogError,message:_ instanceof Error?_.message:e.value.urlDialogErrorMessage}},150)}},p=()=>{l.value=!1},b=()=>{n.value.show=!1};return(v,_)=>(f(),x("div",oo,[i(ne,{fluid:"",class:"pa-4"},{default:d(()=>[w("div",ao,[w("h1",lo,h(e.value.title),1),i(Qe,null,{activator:d(({props:T})=>[i(V,Ge({color:"primary"},T,{"prepend-icon":t.value?void 0:"mdi-plus","append-icon":t.value?"mdi-plus":void 0}),{default:d(()=>[N(h(e.value.addNotebook),1)]),_:2},1040,["prepend-icon","append-icon"])]),default:d(()=>[i(Xe,null,{default:d(()=>[i(Z,{onClick:c},{default:d(()=>[i(ee,null,{default:d(()=>[N(h(e.value.blank),1)]),_:1})]),_:1}),i(Z,{onClick:m},{default:d(()=>[i(ee,null,{default:d(()=>[N(h(e.value.importNotebook),1)]),_:1})]),_:1}),i(Z,{onClick:s},{default:d(()=>[i(ee,null,{default:d(()=>[N(h(e.value.fromUrl),1)]),_:1})]),_:1})]),_:1})]),_:1})]),i(Te,null,{default:d(()=>[(f(!0),x(le,null,Ne(a.value,T=>(f(),S(Ie,{key:T.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:d(()=>[i(qt,{notebook:T,onDelete:u},null,8,["notebook"])]),_:2},1024))),128))]),_:1}),a.value.length===0?(f(),x("div",ro,[i(P,{icon:"mdi-notebook-outline",size:"64",color:"grey"}),_[1]||(_[1]=w("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No notebooks yet",-1)),_[2]||(_[2]=w("p",{class:"text-body-2 text-medium-emphasis"},"Create your first notebook to get started",-1))])):$("",!0)]),_:1}),i(to,{show:l.value,onSubmit:g,onCancel:p},null,8,["show"]),i(Le,{modelValue:n.value.show,"onUpdate:modelValue":_[0]||(_[0]=T=>n.value.show=T),"max-width":"400px"},{default:d(()=>[i(A,null,{default:d(()=>[i(q,null,{default:d(()=>[N(h(n.value.title),1)]),_:1}),i(F,null,{default:d(()=>[w("p",null,h(n.value.message),1)]),_:1}),i(re,null,{default:d(()=>[i(De),i(V,{color:"primary",variant:"text",onClick:b},{default:d(()=>[N(h(e.value.urlDialogCancel),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),so=M(no,[["__scopeId","data-v-17ba2762"]]),io={cells:[],metadata:{},nbformat:4,nbformat_minor:2},C=xe({content:{},updated:null,clear(){this.updated=null,this.content=io},findCell(o){return this.content.cells?this.content.cells.find(e=>e.id===o):null},getSource(o){const e=this.findCell(o);return e?e.source:null},getLocalizedSource(o,e){var u;const t=this.findCell(o);if(!t)return;let a=t.source;if(t.metadata.i18n&&t.metadata.i18n[e]&&(a=t.metadata.i18n[e]),!a)return;const l=(u=this.content.metadata)==null?void 0:u.globals;return l?a.map(c=>c.replace(/\{\{\s*(\w+)\s*\}\}/g,(m,s)=>{const g=l[s];if(!g)return m;const p=g[e]||g.default;return p===void 0?m:`${p}`})):a},setSource(o,e){const t=this.findCell(o);t&&(e=e.map(a=>a+`
`),t.source=e,this.updated=Date.now())},clearOutputs(o){const e=this.findCell(o);e&&(e.outputs=[],this.updated=Date.now())},getOutputTypes(o){var a,l,n;let e=[];const t=this.findCell(o);return t&&(((a=t.outputs)==null?void 0:a.findIndex(u=>u.output_type==="execute_result"))!==-1&&e.push("result"),((l=t.outputs)==null?void 0:l.findIndex(u=>u.output_type==="stream"&&u.name==="stdout"))!==-1&&e.push("stdout"),((n=t.outputs)==null?void 0:n.findIndex(u=>u.output_type==="error"))!==-1&&e.push("error")),e},addStdout(o,e){const t=this.findCell(o);if(t){t.outputs||(t.outputs=[]);const a=t.outputs.findIndex(l=>l.output_type==="stream"&&l.name==="stdout");a!==-1?(t.outputs[a].text||(t.outputs[a].text=[]),t.outputs[a].text.push(e)):t.outputs.push({output_type:"stream",name:"stdout",text:[e]}),this.updated=Date.now()}},getStdout(o){var a;let e="";const t=this.findCell(o);return t&&((a=t.outputs)==null||a.forEach(l=>{var n;l.output_type==="stream"&&(e+=((n=l.text)==null?void 0:n.join(""))||"")})),e},setResult(o,e){const t=this.findCell(o);if(t){t.outputs||(t.outputs=[]);const a=t.outputs.findIndex(l=>l.output_type==="execute_result");if(a!==-1){const l=t.outputs[a].data||{};t.outputs[a].data={...l,...e}}else t.outputs.push({output_type:"execute_result",data:e});this.updated=Date.now()}},getResult(o){var a;let e={};const t=this.findCell(o);return t&&((a=t.outputs)==null||a.forEach(l=>{l.output_type==="execute_result"&&l.data&&(e=l.data)})),e},setError(o,e){const t=this.findCell(o);if(t){t.outputs||(t.outputs=[]);const a=Array.isArray(e)?e:e.split(`
`);t.outputs.push({output_type:"error",traceback:a}),this.updated=Date.now()}},getError(o){var a;let e="";const t=this.findCell(o);return t&&((a=t.outputs)==null||a.forEach(l=>{var n;l.output_type==="error"&&(e+=((n=l.traceback)==null?void 0:n.join(""))||"")})),e},loadNotebook(o){o.cells&&(o.cells.forEach(e=>{(!e.id||typeof e.id!="string"||e.id.trim()==="")&&(e.id=j())}),this.content=o)},hasTag(o,e){const t=this.findCell(o);return!t||!t.metadata.tags?!1:t.metadata.tags.includes(e)},addTag(o,e){const t=this.findCell(o);t&&(t.metadata.tags||(t.metadata.tags=[]),t.metadata.tags.includes(e)||(t.metadata.tags.push(e),this.updated=Date.now()))},removeTag(o,e){const t=this.findCell(o);if(t&&t.metadata.tags){const a=t.metadata.tags.indexOf(e);a!==-1&&(t.metadata.tags.splice(a,1),this.updated=Date.now())}},toggleTag(o,e){this.hasTag(o,e)?this.removeTag(o,e):this.addTag(o,e)}}),co=2e3,uo=2e3;function mo(o){const e=I("idle"),t=I(null);let a=null;const l=async u=>{a&&clearTimeout(a),a=setTimeout(async()=>{try{console.log(`Auto-Save: Saving Notebook ${o}`),e.value="saving";const c=JSON.parse(JSON.stringify(u));await ue(o,c),e.value="saved",t.value=new Date,console.log(`Auto-Save: Saved Notebook ${o}`),setTimeout(()=>{e.value==="saved"&&(e.value="idle")},uo)}catch(c){console.error("Auto-Save: Failed:",c),e.value="error"}},co)},n=B(()=>C.updated,()=>{var u;C.updated!=null&&C.content&&((u=C.content.cells)==null?void 0:u.length)>0&&l(C.content)});return{saveStatus:e,lastSaved:t,stopWatcher:n}}const po=["innerHTML"],fo=E({__name:"MarkdownCell",props:{cell:{},locale:{}},setup(o){const e=t=>t?Dt.parse(t.join("")):"";return(t,a)=>(f(),S(A,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:d(()=>[i(F,null,{default:d(()=>[w("div",{innerHTML:e(y(C).getLocalizedSource(t.cell.id,t.locale))},null,8,po)]),_:1})]),_:1}))}}),k=xe({executionStatus:"idle",workerStatus:"initializing",runningCellId:null,interruptBuffer:null,fatalErrorTrace:"",inputStatus:"idle",inputPrompt:null,userInput:null,setInterruptBuffer(o){this.interruptBuffer=o},clearInterruptBuffer(){this.interruptBuffer&&(this.interruptBuffer[0]=0)},interruptExecution(){this.interruptBuffer&&(this.interruptBuffer[0]=2),this.executionStatus="idle"},setWorkerStatus(o){this.workerStatus=o},executeCell(o){this.executionStatus==="idle"&&this.workerStatus==="ready"&&(this.runningCellId=o,this.executionStatus="queued")},executionCompleted(){this.runningCellId=null,this.executionStatus="idle"},setFatalError(o){this.workerStatus="error",this.fatalErrorTrace=o},requestUserInput(o){this.inputStatus="waiting",this.userInput=null,this.inputPrompt=o},submitUserInput(o){this.inputStatus="submitted",this.userInput=o}}),go=E({__name:"CodeControls",props:{id:{}},setup(o){const e=o,t=()=>{C.clearOutputs(e.id),k.executeCell(e.id)},a=()=>{C.clearOutputs(e.id)},l=()=>{k.interruptExecution()},n=D(()=>C.hasTag(e.id,"hide_code")),u=()=>{C.toggleTag(e.id,"hide_code")};return(c,m)=>(f(),x("div",null,[w("div",null,[i(de,{rounded:"lg"},{default:d(()=>[i(V,{size:"32",icon:"mdi-play-outline",onClick:t,disabled:y(k).executionStatus!=="idle"||y(k).workerStatus!=="ready",loading:y(k).workerStatus!=="ready","aria-label":"Run code"},null,8,["disabled","loading"]),i(V,{size:"32",icon:"mdi-stop",onClick:l,disabled:y(k).executionStatus==="idle"||y(k).runningCellId!==c.id,"aria-label":"Stop code"},null,8,["disabled"])]),_:1}),i(de,{rounded:"lg",class:"pl-4"},{default:d(()=>[i(V,{size:"32",icon:"mdi-broom",onClick:a})]),_:1}),i(de,{rounded:"lg",class:"pl-2"},{default:d(()=>[i(V,{size:"32",icon:n.value?"mdi-eye-off":"mdi-eye",onClick:u,"aria-label":n.value?"Show code":"Hide code"},null,8,["icon","aria-label"])]),_:1})])]))}}),Re="#2e3440",lt="#3b4252",Fe="#434c5e",Q="#4c566a",we="#e5e9f0",Ce="#eceff4",fe="#8fbcbb",Pe="#88c0d0",bo="#81a1c1",R="#5e81ac",ho="#bf616a",W="#d08770",ge="#ebcb8b",Me="#a3be8c",vo="#b48ead",Oe="#d30102",Ve=Ce,be=Ve,_o="#ffffff",he=we,ko=Ve,ze=lt,yo=G.theme({"&":{color:Re,backgroundColor:_o},".cm-content":{caretColor:ze,fontFamily:"JetBrainsMono, monospace"},".cm-cursor, .cm-dropCursor":{borderLeftColor:ze},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:ko},".cm-panels":{backgroundColor:Ve,color:Q},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:`1px solid ${Q}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:we},".cm-activeLine":{backgroundColor:be},".cm-selectionMatch":{backgroundColor:we},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${Q}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:Ce},".cm-gutters":{backgroundColor:Ce,color:Re,border:"none"},".cm-activeLineGutter":{backgroundColor:be},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:he},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:he,borderBottomColor:he},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:be,color:Q}}},{dark:!1}),wo=tt.define([{tag:r.keyword,color:R},{tag:[r.name,r.deleted,r.character,r.propertyName,r.macroName],color:W},{tag:[r.variableName],color:W},{tag:[r.function(r.variableName)],color:R},{tag:[r.labelName],color:bo},{tag:[r.color,r.constant(r.name),r.standard(r.name)],color:R},{tag:[r.definition(r.name),r.separator],color:Me},{tag:[r.brace],color:fe},{tag:[r.annotation],color:Oe},{tag:[r.number,r.changed,r.annotation,r.modifier,r.self,r.namespace],color:Pe},{tag:[r.typeName,r.className],color:ge},{tag:[r.operator,r.operatorKeyword],color:Me},{tag:[r.tagName],color:vo},{tag:[r.squareBracket],color:ho},{tag:[r.angleBracket],color:W},{tag:[r.attributeName],color:ge},{tag:[r.regexp],color:R},{tag:[r.quote],color:lt},{tag:[r.string],color:W},{tag:r.link,color:fe,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[r.url,r.escape,r.special(r.string)],color:W},{tag:[r.meta],color:Pe},{tag:[r.comment],color:Fe,fontStyle:"italic"},{tag:r.strong,fontWeight:"bold",color:R},{tag:r.emphasis,fontStyle:"italic",color:R},{tag:r.strikethrough,textDecoration:"line-through"},{tag:r.heading,fontWeight:"bold",color:R},{tag:r.special(r.heading1),fontWeight:"bold",color:R},{tag:r.heading1,fontWeight:"bold",color:R},{tag:[r.heading2,r.heading3,r.heading4],fontWeight:"bold",color:R},{tag:[r.heading5,r.heading6],color:R},{tag:[r.atom,r.bool,r.special(r.variableName)],color:W},{tag:[r.processingInstruction,r.inserted],color:fe},{tag:[r.contentSeparator],color:ge},{tag:r.invalid,color:Fe,borderBottom:`1px dotted ${Oe}`}]),Co=[yo,ot(wo)],rt="#2e3235",nt="#505d64",Se="#606f7a",ae="#707d8b",So="#a0a4ae",te="#bdbdbd",xo="#e0e0e0",No="#fdf6e3",H="#ff5f52",Eo="#ff6e40",Lo="#fa5788",O="#facf4e",je="#ffad42",J="#56c8d8",Do="#7186f0",ve="#cf6edf",To="#6abf69",We="#99d066",He="#4ebaaa",qe=H,Ke="#202325",X="#414b46",Io=rt,_e=nt,$o=nt,Je=So,Vo=G.theme({"&":{color:te,backgroundColor:Io},".cm-content":{caretColor:Je,fontFamily:"JetBrainsMono, monospace"},".cm-cursor, .cm-dropCursor":{borderLeftColor:Je},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:$o},".cm-panels":{backgroundColor:Ke,color:ae},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{outline:`1px solid ${O}`,backgroundColor:"transparent"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:X},".cm-activeLine":{backgroundColor:X},".cm-selectionMatch":{backgroundColor:Ke,outline:`1px solid ${He}`},"&.cm-focused .cm-matchingBracket":{color:xo,outline:`1px solid ${He}`},"&.cm-focused .cm-nonmatchingBracket":{color:H},".cm-gutters":{backgroundColor:rt,borderRight:"1px solid #4f5b66",color:Se},".cm-activeLineGutter":{backgroundColor:X,color:No},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:_e},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:_e,borderBottomColor:_e},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:X,color:ae}}},{dark:!0}),Uo=tt.define([{tag:r.keyword,color:ve},{tag:[r.name,r.deleted,r.character,r.macroName],color:J},{tag:[r.propertyName],color:O},{tag:[r.variableName],color:te},{tag:[r.function(r.variableName)],color:J},{tag:[r.labelName],color:ve},{tag:[r.color,r.constant(r.name),r.standard(r.name)],color:O},{tag:[r.definition(r.name),r.separator],color:Lo},{tag:[r.brace],color:ve},{tag:[r.annotation],color:qe},{tag:[r.number,r.changed,r.annotation,r.modifier,r.self,r.namespace],color:je},{tag:[r.typeName,r.className],color:je},{tag:[r.operator,r.operatorKeyword],color:Do},{tag:[r.tagName],color:Eo},{tag:[r.squareBracket],color:H},{tag:[r.angleBracket],color:Se},{tag:[r.attributeName],color:te},{tag:[r.regexp],color:qe},{tag:[r.quote],color:To},{tag:[r.string],color:We},{tag:r.link,color:J,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[r.url,r.escape,r.special(r.string)],color:O},{tag:[r.meta],color:ae},{tag:[r.comment],color:ae,fontStyle:"italic"},{tag:r.monospace,color:te},{tag:r.strong,fontWeight:"bold",color:H},{tag:r.emphasis,fontStyle:"italic",color:We},{tag:r.strikethrough,textDecoration:"line-through"},{tag:r.heading,fontWeight:"bold",color:O},{tag:r.heading1,fontWeight:"bold",color:O},{tag:[r.heading2,r.heading3,r.heading4],fontWeight:"bold",color:O},{tag:[r.heading5,r.heading6],color:O},{tag:[r.atom,r.bool,r.special(r.variableName)],color:J},{tag:[r.processingInstruction,r.inserted],color:H},{tag:[r.contentSeparator],color:J},{tag:r.invalid,color:Se,borderBottom:`1px dotted ${H}`}]),Ao=[Vo,ot(Uo)],Bo=["id"],Ro=E({__name:"CodeEditor",props:{source:{},metadata:{},id:{},theme:{}},setup(o){const e=o;let t=null,a=!1;return z(()=>{let l=Co;switch(e.theme){case"dark":l=Ao;break}const n=Tt.create({doc:e.source?e.source.join(""):"",extensions:[$t,It(),l,G.lineWrapping,G.updateListener.of(u=>{if(u.docChanged&&!a){const c=u.state.doc.toString();C.setSource(e.id,c.includes(`
`)?c.split(`
`):[c])}})]});t=new G({state:n,parent:document.getElementById("code-editor-"+e.id)})}),B(()=>e.source,l=>{if(t&&l&&!a){const n=t.state.doc.toString(),u=l.join(""),c=n.replace(/\n+$/,""),m=u.replace(/\n+$/,"");c!==m&&(a=!0,t.dispatch({changes:{from:0,to:t.state.doc.length,insert:u}}),a=!1)}},{deep:!0}),(l,n)=>(f(),x("div",{id:`code-editor-${e.id}`},null,8,Bo))}}),Fo=E({__name:"Console",props:{stdout:{}},setup(o){const e=o,t=I(null),a=()=>{if(!t.value)return;const c=`${(e.stdout?e.stdout.split(`
`).length:1)*1.2+1.5}em`;t.value.style.height=c};return B(()=>e.stdout,()=>{a()},{immediate:!0}),z(()=>{a()}),(l,n)=>(f(),x("textarea",{ref_key:"consoleRef",ref:t,class:"output-console",readonly:""},h(l.stdout),513))}}),Po=M(Fo,[["__scopeId","data-v-43c05e2b"]]),Mo={class:"output-console",readonly:""},Oo=E({__name:"Error",props:{stderr:{}},setup(o){return(e,t)=>(f(),x("textarea",Mo,h(e.stderr),1))}}),zo=M(Oo,[["__scopeId","data-v-62cb5501"]]),jo=E({__name:"TextPlain",props:{value:{}},setup(o){const e=I(null);return(t,a)=>(f(),x("textarea",{ref_key:"consoleRef",ref:e,class:"output-console",readonly:""},h(Array.isArray(t.value)?t.value.join(""):t.value),513))}}),Wo=M(jo,[["__scopeId","data-v-6e2abbc4"]]),Ho=["src"],qo=E({__name:"ImagePng",props:{value:{}},setup(o){return(e,t)=>(f(),x("img",{src:`data:image/png;base64,${e.value}`},null,8,Ho))}}),Ko=["src"],Jo=E({__name:"ImageSvg",props:{value:{}},setup(o){return(e,t)=>(f(),x("img",{src:`data:image/svg+xml;charset=utf-8,${encodeURIComponent(e.value)}`},null,8,Ko))}}),Go=E({__name:"Result",props:{value:{}},setup(o){return(e,t)=>(f(),x(le,null,[e.value["image/svg+xml"]?(f(),S(Jo,{key:0,value:e.value["image/svg+xml"]},null,8,["value"])):$("",!0),e.value["image/png"]?(f(),S(qo,{key:1,value:e.value["image/png"]},null,8,["value"])):$("",!0),e.value["text/plain"]?(f(),S(Wo,{key:2,value:e.value["text/plain"]},null,8,["value"])):$("",!0)],64))}});function Yo(o){if(!o)return[];const e=[];return o.forEach((t,a)=>{const n=t.replace(/\n$/,"").trim();if(!n||n.startsWith("#"))return;const u=n.match(/^(\w+)\s*=\s*(.+?)\s*#\s*@param(.*)$/);if(!u)return;const[,c,m,s]=u;try{const g=Qo(m),p=Xo(s.trim()),b=Zo(g,p);e.push({name:c,value:g,type:b,config:p,lineNumber:a})}catch(g){console.warn(`Failed to parse parameter on line ${a+1}: ${t}`,g)}}),e}function Qo(o){const e=o.trim();if(e==="True")return!0;if(e==="False")return!1;if(e==="None")return null;const t=e.match(/^["'](.*)["']$/);return t?t[1]:e.match(/^-?\d+\.?\d*$/)?e.includes(".")?parseFloat(e):parseInt(e,10):e}function Xo(o){if(!o)return{};const e=o.match(/^\[(.+)\]$/);if(e)return{options:e[1].split(",").map(n=>{const u=n.trim(),c=u.match(/^["'](.*)["']$/);return c?c[1]:u})};const t=o.match(/^\{(.+)\}$/);if(t)try{const a=t[1],l={};return a.split(",").forEach(u=>{const[c,m]=u.split(":").map(s=>s.trim());if(c&&m){const s=c.replace(/["']/g,""),g=m.replace(/["']/g,"");s==="type"?l.type=g:(s==="min"||s==="max"||s==="step")&&(l[s]=parseFloat(g))}}),l}catch{return console.warn("Failed to parse config JSON:",o),{}}return{}}function Zo(o,e){return e.type==="slider"?"slider":e.type==="boolean"?"boolean":e.options&&e.options.length>0?"dropdown":typeof o=="boolean"?"boolean":"value"}function ea(o,e,t){if(!o||e.lineNumber>=o.length)return o;const a=[...o],l=a[e.lineNumber],n=l.endsWith(`
`),c=l.replace(/\n$/,"").match(/^(\w+\s*=\s*)(.+?)(\s*#\s*@param.*)$/);if(c){const[,m,,s]=c,g=ta(t);a[e.lineNumber]=`${m}${g}${s}${n?`
`:""}`}return a}function ta(o){return typeof o=="boolean"?o?"True":"False":o==null?"None":typeof o=="string"?`"${o}"`:String(o)}const oa={key:0,class:"parameter-controls mb-4"},aa={class:"parameter-grid"},la={key:1,class:"slider-container"},ra={class:"slider-layout"},na={key:3,class:"boolean-container"},sa=E({__name:"ParameterControls",props:{source:{},cellId:{}},emits:["parameter-changed"],setup(o,{emit:e}){const t=o,a=e,l=D(()=>Yo(t.source)),n=(c,m)=>{if(!t.source)return;const s=ea(t.source,c,m);a("parameter-changed",s)},u=c=>c.name.replace(/_/g," ").toLowerCase().replace(/\b\w/g,m=>m.toUpperCase());return(c,m)=>l.value.length>0?(f(),x("div",oa,[i(A,{variant:"outlined",class:"pa-4"},{default:d(()=>[w("div",aa,[(f(!0),x(le,null,Ne(l.value,s=>{var g,p,b,v;return f(),x("div",{key:s.name,class:"parameter-item"},[s.type==="value"?(f(),S(oe,{key:0,label:u(s),"model-value":s.value,"onUpdate:modelValue":_=>n(s,_),variant:"outlined",density:"compact","hide-details":""},null,8,["label","model-value","onUpdate:modelValue"])):s.type==="slider"?(f(),x("div",la,[i(ft,{class:"text-caption mb-1"},{default:d(()=>[N(h(u(s)),1)]),_:2},1024),w("div",ra,[i(gt,{"model-value":s.value,"onUpdate:modelValue":_=>n(s,_),min:((g=s.config)==null?void 0:g.min)??0,max:((p=s.config)==null?void 0:p.max)??100,step:((b=s.config)==null?void 0:b.step)??1,"thumb-label":"",class:"slider-control","hide-details":""},null,8,["model-value","onUpdate:modelValue","min","max","step"]),i(oe,{"model-value":s.value,readonly:"",variant:"outlined",density:"compact",class:"value-display","hide-details":""},null,8,["model-value"])])])):s.type==="dropdown"?(f(),S(ye,{key:2,label:u(s),"model-value":s.value,"onUpdate:modelValue":_=>n(s,_),items:((v=s.config)==null?void 0:v.options)||[],variant:"outlined",density:"compact","hide-details":""},null,8,["label","model-value","onUpdate:modelValue","items"])):s.type==="boolean"?(f(),x("div",na,[i(bt,{"model-value":s.value,"onUpdate:modelValue":_=>n(s,_),label:u(s),color:"primary","hide-details":"",inset:""},null,8,["model-value","onUpdate:modelValue","label"])])):$("",!0)])}),128))])]),_:1})])):$("",!0)}}),ia=M(sa,[["__scopeId","data-v-9ab33d5a"]]),ca=E({__name:"CodeCell",props:{cell:{},theme:{},locale:{}},setup(o){const e=o;let t=[];t=C.getOutputTypes(e.cell.id);const a=()=>{if(t.indexOf("result")!==-1)return"result";if(t.indexOf("stdout")!==-1)return"stdout";if(t.indexOf("error")!==-1)return"error"},l=I("result");B(()=>e.cell.outputs,()=>{t=C.getOutputTypes(e.cell.id),l.value="none",l.value=a()||l.value},{deep:!0});const n=c=>{const m=C.findCell(e.cell.id);m&&(m.source=c,C.updated=Date.now())},u=D(()=>C.hasTag(e.cell.id,"hide_code"));return(c,m)=>(f(),x("div",null,[i(ia,{source:y(C).getLocalizedSource(c.cell.id,e.locale),"cell-id":c.cell.id,onParameterChanged:n},null,8,["source","cell-id"]),i(A,{"max-width":"800",variant:"elevated",elevation:"2",color:"surface-light",class:"mb-2 pt-2 pb-2 ma-auto rounded-lg"},{default:d(()=>[u.value?$("",!0):(f(),S(F,{key:0},{default:d(()=>[i(Ro,{source:y(C).getLocalizedSource(c.cell.id,e.locale),id:c.cell.id,metadata:c.cell.metadata,theme:e.theme},null,8,["source","id","metadata","theme"])]),_:1})),i(re,{class:"pl-4 pr-4 d-flex justify-space-between"},{default:d(()=>[i(go,{id:c.cell.id},null,8,["id"]),i(ht,{modelValue:l.value,"onUpdate:modelValue":m[0]||(m[0]=s=>l.value=s),class:"ml-auto"},{default:d(()=>[y(t).indexOf("result")!==-1?(f(),S(me,{key:0,value:"result",icon:"",size:"32",rounded:"lg","min-width":"48"},{default:d(()=>[i(P,{icon:"mdi-monitor"})]),_:1})):$("",!0),y(t).indexOf("stdout")!==-1?(f(),S(me,{key:1,value:"stdout",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:d(()=>[i(P,{icon:"mdi-console"})]),_:1})):$("",!0),y(t).indexOf("error")!==-1?(f(),S(me,{key:2,value:"error",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:d(()=>[i(P,{icon:"mdi-alert-circle-outline"})]),_:1})):$("",!0)]),_:1},8,["modelValue"])]),_:1}),ct(i(F,null,{default:d(()=>[i(vt,{modelValue:l.value,"onUpdate:modelValue":m[1]||(m[1]=s=>l.value=s),direction:"vertical"},{default:d(()=>[i(pe,{value:"result"},{default:d(()=>[i(Go,{value:y(C).getResult(c.cell.id)},null,8,["value"])]),_:1}),i(pe,{value:"stdout",direction:"vertical"},{default:d(()=>[i(Po,{stdout:y(C).getStdout(c.cell.id)},null,8,["stdout"])]),_:1}),i(pe,{value:"error",direction:"vertical"},{default:d(()=>[i(zo,{stderr:y(C).getError(c.cell.id)},null,8,["stderr"])]),_:1})]),_:1},8,["modelValue"])]),_:1},512),[[ut,e.cell.outputs?e.cell.outputs.length>0:!1]])]),_:1})]))}}),ua=E({__name:"PyodideProvider",props:{notebookId:{},locale:{}},setup(o){const e=o;let t;return z(async()=>{console.log("PyodideProvider: Starting new worker for "+e.notebookId),k.setWorkerStatus("initializing"),t=new Worker(new URL("/k12nb/assets/PyodideWorker-CkAqyADK.js",import.meta.url),{type:"module"}),t.postMessage({type:"initialize"}),t.onmessage=async a=>{const{type:l,text:n,result:u,message:c,error:m,interruptBuffer:s}=a.data;switch(l){case"initialized":console.log("PyodideProvider: Pyodide is initialized"),k.setWorkerStatus("ready"),s&&(k.setInterruptBuffer(new Int32Array(s)),console.log("PyodideProvider: Set Interrupt Buffer"));break;case"stdout":k.runningCellId&&C.addStdout(k.runningCellId,n);break;case"input_request":k.requestUserInput(c);break;case"execute_result":k.runningCellId&&u&&C.setResult(k.runningCellId,u);break;case"execute_completed":k.executionCompleted();break;case"error":k.runningCellId&&C.setError(k.runningCellId,m),k.executionCompleted();break;case"fatal":k.setFatalError(m);break}}}),Ee(async()=>{console.log("PyodideProvider: Terminating worker."),k.setWorkerStatus("terminating"),t.terminate()}),B(()=>k.executionStatus,a=>{if(a==="queued"&&k.runningCellId!=null){const l=C.getLocalizedSource(k.runningCellId,e.locale);t.postMessage({type:"run",cellId:k.runningCellId,code:l==null?void 0:l.join("")})}}),B(()=>k.inputStatus,a=>{a==="submitted"&&t.postMessage({type:"input_response",value:k.userInput})}),(a,l)=>dt(a.$slots,"default")}}),da=E({__name:"InputDialog",props:{locale:{}},setup(o){const e=o,t=D(()=>at[e.locale||"en-US"]),a=I(""),l=I(),n=D({get:()=>k.inputStatus==="waiting",set:s=>{s||(k.inputStatus="idle")}}),u=()=>{k.submitUserInput(a.value),a.value=""},c=()=>{k.submitUserInput(""),a.value=""};B(()=>n.value,async s=>{var g;s&&(await Ye(),(g=l.value)==null||g.focus())});const m=s=>{s.key==="Enter"?(s.preventDefault(),u()):s.key==="Escape"&&(s.preventDefault(),c())};return(s,g)=>(f(),S(Le,{modelValue:n.value,"onUpdate:modelValue":g[1]||(g[1]=p=>n.value=p),"max-width":"400px",persistent:"",onKeydown:m},{default:d(()=>[i(A,null,{default:d(()=>[i(q,null,{default:d(()=>[N(h(y(k).inputPrompt||t.value.inputDialogTitle),1)]),_:1}),i(F,null,{default:d(()=>[i(oe,{ref_key:"inputFieldRef",ref:l,modelValue:a.value,"onUpdate:modelValue":g[0]||(g[0]=p=>a.value=p),label:t.value.inputDialogLabel,variant:"outlined",density:"compact",onKeydown:m},null,8,["modelValue","label"])]),_:1}),i(re,null,{default:d(()=>[i(De),i(V,{color:"grey",variant:"text",onClick:c},{default:d(()=>[N(h(t.value.inputDialogCancel),1)]),_:1}),i(V,{color:"primary",variant:"text",onClick:u},{default:d(()=>[N(h(t.value.inputDialogSubmit),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),ma={class:"renderer-container"},pa=E({__name:"Renderer",props:{id:{},initialNotebook:{},theme:{},locale:{}},setup(o){const e=o,t=D(()=>at[e.locale]);return z(()=>{C.loadNotebook(e.initialNotebook)}),B(()=>e.initialNotebook,a=>{C.loadNotebook(a)}),(a,l)=>(f(),S(ua,{notebookId:a.id,locale:e.locale},{default:d(()=>[w("div",ma,[i(Ae,null,{default:d(()=>[y(k).workerStatus=="initializing"?(f(),S(Be,{key:0,text:t.value.notebookStarting,type:"info",variant:"tonal",density:"compact"},null,8,["text"])):$("",!0)]),_:1}),i(Ae,null,{default:d(()=>[y(k).workerStatus=="error"?(f(),S(Be,{key:0,text:`${t.value.notebookStartError} ${y(k).fatalErrorTrace}`,type:"error",variant:"tonal",density:"compact"},null,8,["text"])):$("",!0)]),_:1}),(f(!0),x(le,null,Ne(y(C).content.cells,n=>(f(),x("div",null,[n.cell_type==="markdown"?(f(),S(y(fo),{key:0,cell:n,metadata:n.metadata,locale:e.locale},null,8,["cell","metadata","locale"])):$("",!0),n.cell_type==="code"?(f(),S(y(ca),{key:1,cell:n,theme:e.theme,locale:e.locale},null,8,["cell","theme","locale"])):$("",!0)]))),256))]),i(da,{locale:e.locale},null,8,["locale"])]),_:1},8,["notebookId","locale"]))}}),fa={class:"notebook"},ga={class:"d-flex align-center mb-6 notebook-header"},ba={class:"d-flex align-center flex-grow-1"},ha={class:"text-h4 notebook-title"},va={key:1,class:"loading"},_a={class:"text-center"},ka={class:"text-h5 mb-2"},ya={class:"text-body-1 text-medium-emphasis mb-4"},wa=E({__name:"Notebook",setup(o){const e=et(),t=$e(),a=D(()=>ie[L.locale]),l=D(()=>se[L.locale].direction==="rtl"),n=D(()=>e.params.id),u=I(null),c=I(!0),m=I(null),{saveStatus:s,stopWatcher:g}=mo(n.value);z(async()=>{try{c.value=!0,m.value=null,u.value=await Gt(n.value)}catch(b){console.error("Failed to load notebook:",b),m.value=b instanceof Error?b.message:"Failed to load notebook"}finally{c.value=!1}});const p=()=>{t.push("/notebooks")};return Ee(()=>{C.clear(),g()}),(b,v)=>(f(),x("div",fa,[i(ne,{fluid:"",class:"pa-4"},{default:d(()=>{var _,T;return[w("div",ga,[w("div",ba,[i(V,{icon:l.value?"mdi-arrow-right":"mdi-arrow-left",variant:"text",onClick:p,class:ke(l.value?"ms-3":"me-3")},null,8,["icon","class"]),w("h1",ha,h(((T=(_=u.value)==null?void 0:_.metadata)==null?void 0:T.title)||a.value.untitledNotebook),1)]),y(s)!=="idle"?(f(),S(_t,{key:0,color:y(s)==="saved"?"success":y(s)==="saving"?"info":"error",size:"small",variant:"tonal"},{default:d(()=>[i(P,{icon:y(s)==="saved"?"mdi-check":y(s)==="saving"?"mdi-loading":"mdi-alert",class:ke([{"mdi-spin":y(s)==="saving"},"me-1"]),size:"small"},null,8,["icon","class"]),N(" "+h(y(s)==="saved"?a.value.saved:y(s)==="saving"?a.value.saving:a.value.saveError),1)]),_:1},8,["color"])):$("",!0)]),u.value&&!c.value&&!m.value?(f(),S(pa,{key:0,"initial-notebook":u.value,id:n.value,theme:y(L).theme,locale:y(L).locale},null,8,["initial-notebook","id","theme","locale"])):c.value?(f(),x("div",va,[i(kt,{indeterminate:"",color:"primary"}),w("p",null,h(a.value.loadingNotebook),1)])):m.value?(f(),S(A,{key:2,class:"pa-6"},{default:d(()=>[w("div",_a,[i(P,{icon:"mdi-alert-circle",size:"64",color:"error",class:"mb-4"}),w("h2",ka,h(a.value.failedToLoad),1),w("p",ya,h(m.value),1),i(V,{color:"primary",onClick:p},{default:d(()=>[N(h(a.value.backToNotebooks),1)]),_:1})])]),_:1})):$("",!0)]}),_:1})]))}}),Ca=M(wa,[["__scopeId","data-v-226b97bd"]]),Sa={class:"curriculum-view"},xa=E({__name:"Curriculum",setup(o){return(e,t)=>(f(),x("div",Sa,[i(ne,null,{default:d(()=>[i(Te,null,{default:d(()=>[i(Ie,{cols:"12"},{default:d(()=>[t[1]||(t[1]=w("h1",{class:"text-h4 mb-4"},"Curriculum",-1)),i(A,null,{default:d(()=>[i(F,null,{default:d(()=>t[0]||(t[0]=[w("p",{class:"text-body-1"}," Curriculum content will be implemented here. This section will contain educational materials, lessons, and structured learning paths. ",-1)])),_:1,__:[0]})]),_:1})]),_:1,__:[1]})]),_:1})]),_:1})]))}}),Na=M(xa,[["__scopeId","data-v-4427f550"]]),Ea={class:"settings-view"},La={class:"text-h4 mb-4 settings-title"},Da={class:"text-body-1"},Ta={class:"text-body-2 text-medium-emphasis"},Ia=E({__name:"Settings",setup(o){const e=Ze(),t=I(L.theme),a=I(L.locale),l=D(()=>Ft.map(s=>({title:At[L.locale][s],value:s}))),n=Vt.map(s=>({title:se[s].name,value:s})),u=D(()=>Rt[L.locale]);z(()=>{e.global.name.value=L.theme}),B(t,s=>{e.global.name.value=s});const c=s=>{L.setTheme(s),t.value=s},m=s=>{L.setLocale(s),a.value=s};return(s,g)=>(f(),x("div",Ea,[i(ne,null,{default:d(()=>[i(Te,null,{default:d(()=>[i(Ie,{cols:"12"},{default:d(()=>[w("h1",La,h(u.value.title),1),i(A,{class:"mb-4"},{default:d(()=>[i(q,null,{default:d(()=>[N(h(u.value.appearance),1)]),_:1}),i(F,null,{default:d(()=>[i(ye,{modelValue:t.value,"onUpdate:modelValue":[g[0]||(g[0]=p=>t.value=p),c],items:l.value,label:u.value.theme,"item-title":"title","item-value":"value"},null,8,["modelValue","items","label"])]),_:1})]),_:1}),i(A,{class:"mb-4"},{default:d(()=>[i(q,null,{default:d(()=>[N(h(u.value.language),1)]),_:1}),i(F,null,{default:d(()=>[i(ye,{modelValue:a.value,"onUpdate:modelValue":[g[1]||(g[1]=p=>a.value=p),m],items:y(n),label:u.value.language,"item-title":"title","item-value":"value"},null,8,["modelValue","items","label"])]),_:1})]),_:1}),i(A,null,{default:d(()=>[i(q,null,{default:d(()=>[N(h(u.value.about),1)]),_:1}),i(F,null,{default:d(()=>[w("p",Da,h(u.value.appName),1),w("p",Ta,h(u.value.version)+" 0.1.0 ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}}),$a=M(Ia,[["__scopeId","data-v-b8e54928"]]),Va=[{path:"/",redirect:"notebooks"},{path:"/notebooks",name:"notebooks",component:so},{path:"/notebooks/:id",name:"notebook",component:Ca},{path:"/curriculum",name:"curriculum",component:Na},{path:"/settings",name:"settings",component:$a}],Ua=Et({history:Lt("/k12nb/"),routes:Va}),Aa={class:"content-container"},Ba=E({__name:"BaseLayout",setup(o){const e=()=>{const p=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${p}px`)},t=$e(),a=et(),l={"/notebooks":0,"/curriculum":1,"/settings":2},n={0:"/notebooks",1:"/curriculum",2:"/settings"},u=D({get:()=>l[a.path]??0,set:p=>{const b=n[p];b&&a.path!==b&&t.push(b)}}),c=Ze(),m=D(()=>Bt[L.locale]),s=D(()=>se[L.locale].direction),g=D(()=>L.locale);return B([s,g],([p,b])=>{document.documentElement.dir=p,document.documentElement.lang=b},{immediate:!0}),z(()=>{c.global.name.value=L.theme,document.documentElement.dir=s.value,document.documentElement.lang=g.value,e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e)}),Ee(()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}),(p,b)=>{const v=mt("router-view");return f(),S(yt,null,{default:d(()=>[i(wt,null,{default:d(()=>[w("div",Aa,[i(v)])]),_:1}),i(Ct,{modelValue:u.value,"onUpdate:modelValue":b[0]||(b[0]=_=>u.value=_),color:"primary",grow:"",class:ke({"rtl-navigation":s.value==="rtl"})},{default:d(()=>[i(V,{value:"0"},{default:d(()=>[i(P,null,{default:d(()=>b[1]||(b[1]=[N("mdi-notebook")])),_:1,__:[1]}),w("span",null,h(m.value.notebooks),1)]),_:1}),i(V,{value:"1"},{default:d(()=>[i(P,null,{default:d(()=>b[2]||(b[2]=[N("mdi-school")])),_:1,__:[2]}),w("span",null,h(m.value.curriculum),1)]),_:1}),i(V,{value:"2"},{default:d(()=>[i(P,null,{default:d(()=>b[3]||(b[3]=[N("mdi-cog")])),_:1,__:[3]}),w("span",null,h(m.value.settings),1)]),_:1})]),_:1},8,["modelValue","class"])]),_:1})}}}),Ra=M(Ba,[["__scopeId","data-v-77271b7e"]]),Fa=E({__name:"App",setup(o){return(e,t)=>(f(),S(Ra))}}),Pa=St({theme:{defaultTheme:"dark",themes:{light:{colors:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}},dark:{colors:{primary:"#2196F3",secondary:"#424242",accent:"#FF4081",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}},icons:{defaultSet:"mdi",aliases:Nt,sets:{mdi:xt}}});pt(Fa).use(Pa).use(Ua).mount("#app");
