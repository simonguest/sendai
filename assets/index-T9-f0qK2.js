import{b as ve,d as S,c as x,V as y,W as f,X as m,v as c,Y as _,U as $,M as k,x as je,Z as ot,r as L,B as O,_ as w,$ as T,F as X,a0 as ye,w as F,u as h,L as at,Q as nt,a1 as We,a2 as rt,n as lt,a3 as me,a4 as st,a5 as it}from"./@vue--moNiIM6.js";import{V as M,a as He,b as qe,c as pe,d as fe,e as I,f as B,g as A,h as Z,i as we,j as Se,k as oe,l as ge,m as ct,n as ut,o as be,p as dt,q as Ke,r as mt,s as ae,t as pt,u as ne,v as ft,w as G,x as gt,y as Ee,z as Ie,A as bt,B as ht,C as Je,D as _t,E as kt,F as vt,G as yt,H as wt,I as St}from"./vuetify-Ds40i8XH.js";import{u as Ce,a as Ge,c as Ct,b as Nt}from"./vue-router-ClIoaLts.js";import{v as q}from"./uuid-C6aID195.js";import{m as xt}from"./marked-DKjyhwJX.js";import{z as H,H as Ye,s as Qe,E as Tt,A as $t}from"./@codemirror-DLu3zILg.js";import{b as Et}from"./codemirror-BG8Os8gr.js";import{c as n}from"./@lezer-C8D-pblS.js";import"./crelt-C8TCjufn.js";import"./@marijn-DXwl3gUT.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function t(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(l){if(l.ep)return;l.ep=!0;const i=t(l);fetch(l.href,i)}})();const It=["en-US","ja-JP","hi-IN","fa-IR"],Lt="en-US",ee={"en-US":{direction:"ltr",name:"English (US)"},"ja-JP":{direction:"ltr",name:"日本語"},"hi-IN":{direction:"ltr",name:"हिन्दी"},"fa-IR":{direction:"rtl",name:"فارسی"}},Vt={"en-US":{light:"Light",dark:"Dark"},"ja-JP":{light:"ライト",dark:"ダーク"},"hi-IN":{light:"हल्का",dark:"गहरा"},"fa-IR":{light:"روشن",dark:"تیره"}},Dt={"en-US":{notebooks:"Notebooks",curriculum:"Curriculum",settings:"Settings"},"ja-JP":{notebooks:"ノートブック",curriculum:"カリキュラム",settings:"設定"},"hi-IN":{notebooks:"नोटबुक",curriculum:"पाठ्यक्रम",settings:"सेटिंग्स"},"fa-IR":{notebooks:"دفترچه‌ها",curriculum:"برنامه درسی",settings:"تنظیمات"}},Ne={"en-US":{title:"Notebooks",addNotebook:"Add notebook",blank:"Blank",fromTemplate:"From template",importNotebook:"Import notebook",delete:"Delete",lastEdited:"Last edited",back:"Back",notebookViewer:"Notebook Viewer",saved:"Saved",saving:"Saving...",saveError:"Save Error",loadingNotebook:"Loading notebook...",failedToLoad:"Failed to load notebook",backToNotebooks:"Back to Notebooks",untitledNotebook:"Untitled Notebook",justNow:"Just now",hoursAgo:"hours ago",hourAgo:"hour ago",daysAgo:"days ago",dayAgo:"day ago"},"ja-JP":{title:"ノートブック",addNotebook:"ノートブックを追加",blank:"空白",fromTemplate:"テンプレートから",importNotebook:"ノートブックをインポート",delete:"削除",lastEdited:"最終編集",back:"戻る",notebookViewer:"ノートブックビューア",saved:"保存済み",saving:"保存中...",saveError:"保存エラー",loadingNotebook:"ノートブックを読み込み中...",failedToLoad:"ノートブックの読み込みに失敗しました",backToNotebooks:"ノートブックに戻る",untitledNotebook:"無題のノートブック",justNow:"たった今",hoursAgo:"時間前",hourAgo:"時間前",daysAgo:"日前",dayAgo:"日前"},"hi-IN":{title:"नोटबुक",addNotebook:"नोटबुक जोड़ें",blank:"खाली",fromTemplate:"टेम्प्लेट से",importNotebook:"नोटबुक आयात करें",delete:"हटाएं",lastEdited:"अंतिम संपादन",back:"वापस",notebookViewer:"नोटबुक व्यूअर",saved:"सहेजा गया",saving:"सहेज रहे हैं...",saveError:"सहेजने में त्रुटि",loadingNotebook:"नोटबुक लोड हो रहा है...",failedToLoad:"नोटबुक लोड करने में विफल",backToNotebooks:"नोटबुक पर वापस जाएं",untitledNotebook:"बिना शीर्षक नोटबुक",justNow:"अभी",hoursAgo:"घंटे पहले",hourAgo:"घंटा पहले",daysAgo:"दिन पहले",dayAgo:"दिन पहले"},"fa-IR":{title:"دفترچه‌ها",addNotebook:"افزودن دفترچه",blank:"خالی",fromTemplate:"از قالب",importNotebook:"وارد کردن دفترچه",delete:"حذف",lastEdited:"آخرین ویرایش",back:"بازگشت",notebookViewer:"نمایشگر دفترچه",saved:"ذخیره شد",saving:"در حال ذخیره...",saveError:"خطا در ذخیره",loadingNotebook:"در حال بارگذاری دفترچه...",failedToLoad:"بارگذاری دفترچه ناموفق بود",backToNotebooks:"بازگشت به دفترچه‌ها",untitledNotebook:"دفترچه بدون عنوان",justNow:"همین الان",hoursAgo:"ساعت پیش",hourAgo:"ساعت پیش",daysAgo:"روز پیش",dayAgo:"روز پیش"}},Bt={"en-US":{title:"Settings",appearance:"Appearance",language:"Language",about:"About",theme:"Theme",version:"Version",appName:"K12 Notebook - Web Shell"},"ja-JP":{title:"設定",appearance:"外観",language:"言語",about:"について",theme:"テーマ",version:"バージョン",appName:"K12ノートブック - ウェブシェル"},"hi-IN":{title:"सेटिंग्स",appearance:"दिखावट",language:"भाषा",about:"के बारे में",theme:"थीम",version:"संस्करण",appName:"K12 नोटबुक - वेब शेल"},"fa-IR":{title:"تنظیمات",appearance:"ظاهر",language:"زبان",about:"درباره",theme:"تم",version:"نسخه",appName:"دفترچه K12 - پوسته وب"}},Xe={"en-US":{notebookStarting:"The notebook is starting up...",notebookStartError:"The notebook could not be started because of an error:",inputDialogTitle:"Enter Input",inputDialogLabel:"Input",inputDialogCancel:"Cancel",inputDialogSubmit:"Submit"},"ja-JP":{notebookStarting:"ノートブックを起動中...",notebookStartError:"エラーのためノートブックを起動できませんでした:",inputDialogTitle:"入力してください",inputDialogLabel:"入力",inputDialogCancel:"キャンセル",inputDialogSubmit:"送信"},"hi-IN":{notebookStarting:"नोटबुक शुरू हो रहा है...",notebookStartError:"त्रुटि के कारण नोटबुक शुरू नहीं हो सका:",inputDialogTitle:"इनपुट दर्ज करें",inputDialogLabel:"इनपुट",inputDialogCancel:"रद्द करें",inputDialogSubmit:"जमा करें"},"fa-IR":{notebookStarting:"دفترچه در حال راه‌اندازی است...",notebookStartError:"دفترچه به دلیل خطا راه‌اندازی نشد:",inputDialogTitle:"ورودی را وارد کنید",inputDialogLabel:"ورودی",inputDialogCancel:"لغو",inputDialogSubmit:"ارسال"}},At=["light","dark"],Ft="dark",N=ve({theme:localStorage.getItem("theme")||Ft,locale:localStorage.getItem("locale")||Lt,setTheme(o){this.theme=o,localStorage.setItem("theme",o)},setLocale(o){this.locale=o,localStorage.setItem("locale",o)}}),Pt={class:"d-flex justify-end mb-2"},Mt={class:"d-flex align-center"},Ut={class:"flex-grow-1"},Ot={class:"text-h6 mb-1"},Rt={class:"text-caption text-medium-emphasis mb-0"},zt=S({__name:"NotebookCard",props:{notebook:{}},emits:["delete"],setup(o,{emit:e}){const t=o,a=e,l=Ce(),i=x(()=>Ne[N.locale]),u=r=>{const p=Math.floor((new Date().getTime()-r.getTime())/(1e3*60*60));if(p<1)return i.value.justNow;if(p<24){const C=p===1?i.value.hourAgo:i.value.hoursAgo;return`${p} ${C}`}else{const C=Math.floor(p/24),R=C===1?i.value.dayAgo:i.value.daysAgo;return`${C} ${R}`}},s=()=>{l.push(`/notebooks/${t.notebook.id}`)},d=()=>{a("delete",t.notebook.id)};return(r,g)=>(f(),y(A,{class:"notebook-card",hover:"",onClick:s},{default:m(()=>[c(M,{class:"pb-2"},{default:m(()=>[_("div",Pt,[c(He,null,{activator:m(({props:p})=>[c(I,je({icon:"mdi-dots-vertical",variant:"text",size:"small"},p,{onClick:g[0]||(g[0]=ot(()=>{},["stop"]))}),null,16)]),default:m(()=>[c(qe,null,{default:m(()=>[c(pe,{onClick:d},{default:m(()=>[c(fe,null,{default:m(()=>[$(k(i.value.delete),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_("div",Mt,[c(B,{icon:"mdi-notebook-outline",size:"large",color:"primary",class:"me-3"}),_("div",Ut,[_("h3",Ot,k(r.notebook.title),1),_("p",Rt,k(i.value.lastEdited)+": "+k(u(r.notebook.lastModified||r.notebook.created)),1)])])]),_:1})]),_:1}))}}),P=(o,e)=>{const t=o.__vccOpts||o;for(const[a,l]of e)t[a]=l;return t},jt=P(zt,[["__scopeId","data-v-3a1233ae"]]),Wt="NotebookDB",E="notebooks",Ht=2,te=async()=>new Promise((o,e)=>{const t=indexedDB.open(Wt,Ht);t.onerror=()=>e(t.error),t.onsuccess=()=>o(t.result),t.onupgradeneeded=a=>{const l=t.result;if(l.objectStoreNames.contains(E)){if(a.oldVersion<2){const i=t.transaction;if(i){const u=i.objectStore(E);u.openCursor().onsuccess=s=>{const d=s.target.result;if(d){const r=d.value;r.created||(r.created=r.lastModified||Date.now(),d.update(r)),d.continue()}}}}}else{const i=l.createObjectStore(E,{keyPath:"id"});i.createIndex("lastModified","lastModified"),i.createIndex("created","created")}}}),xe=async(o,e)=>{const t=await te();if(!t.objectStoreNames.contains(E))throw new Error("Database not properly initialized");return new Promise((a,l)=>{try{const i=t.transaction(E,"readwrite"),u=i.objectStore(E),s=u.get(o);s.onsuccess=()=>{const d=s.result,r=Date.now(),g={id:o,notebook:e,lastModified:r,created:(d==null?void 0:d.created)||r},p=u.put(g);p.onsuccess=()=>a(),p.onerror=()=>l(p.error)},s.onerror=()=>l(s.error),i.oncomplete=()=>t.close()}catch(i){l(i)}})},qt=async o=>{const e=await te();if(!e.objectStoreNames.contains(E))throw new Error("Database not properly initialized");return new Promise((t,a)=>{try{const l=e.transaction(E,"readonly"),u=l.objectStore(E).get(o);u.onsuccess=()=>{const s=u.result;if(!s){a(new Error("Notebook not found"));return}t(s.notebook)},u.onerror=()=>a(u.error),l.oncomplete=()=>e.close()}catch(l){a(l)}})},re=async()=>{const o=await te();if(!o.objectStoreNames.contains(E))throw new Error("Database not properly initialized");return new Promise((e,t)=>{try{const a=o.transaction(E,"readonly"),i=a.objectStore(E).getAll();i.onsuccess=()=>{const s=i.result.map(d=>{var r;return{id:d.id,title:((r=d.notebook.metadata)==null?void 0:r.title)||"Untitled Notebook",lastModified:new Date(d.lastModified),created:new Date(d.created)}});s.sort((d,r)=>r.created.getTime()-d.created.getTime()),e(s)},i.onerror=()=>t(i.error),a.oncomplete=()=>o.close()}catch(a){t(a)}})},Kt=async o=>{const e=await te();if(!e.objectStoreNames.contains(E))throw new Error("Database not properly initialized");return new Promise((t,a)=>{try{const l=e.transaction(E,"readwrite");l.objectStore(E).delete(o),l.oncomplete=()=>t(),l.onerror=()=>a(l.error)}catch(l){a(l)}})},Jt=async()=>{try{const o=await fetch("./templates/blank.ipynb");if(!o.ok)throw new Error(`Failed to load blank notebook template: ${o.statusText}`);const e=await o.json();return e.cells.forEach(t=>{t.id||(t.id=q())}),e}catch(o){throw new Error(`Failed to load blank notebook template: ${o instanceof Error?o.message:String(o)}`)}},Gt=async o=>new Promise((e,t)=>{const a=new FileReader;a.onload=async l=>{var i;try{const u=(i=l.target)==null?void 0:i.result,s=JSON.parse(u);if(!s.cells||!Array.isArray(s.cells))throw new Error("Invalid notebook format: missing or invalid cells array");s.metadata||(s.metadata={}),s.nbformat||(s.nbformat=4),s.nbformat_minor||(s.nbformat_minor=2),s.cells.forEach(r=>{r.id||(r.id=q()),r.metadata||(r.metadata={}),r.source||(r.source=[])}),s.metadata.title||(s.metadata.title=o.name.replace(".ipynb","")||"Imported Notebook");const d=q();await xe(d,s),e(d)}catch(u){t(new Error(`Failed to parse notebook file: ${u instanceof Error?u.message:String(u)}`))}},a.onerror=()=>{t(new Error("Failed to read the selected file"))},a.readAsText(o)}),Yt={class:"notebook-index"},Qt={class:"d-flex align-center mb-6 header-container"},Xt={class:"text-h4 notebook-title flex-grow-1"},Zt={key:0,class:"text-center mt-8"},eo=S({__name:"NotebookIndex",setup(o){const e=x(()=>Ne[N.locale]),t=x(()=>ee[N.locale].direction==="rtl"),a=L([]);O(async()=>{try{const s=await re();a.value=s}catch(s){console.error("Failed to load notebooks:",s)}});const l=async s=>{try{await Kt(s);const d=a.value.findIndex(r=>r.id===s);d>-1&&a.value.splice(d,1),console.log("Notebook deleted successfully:",s)}catch(d){console.error("Failed to delete notebook:",d)}},i=async()=>{try{console.log("Create blank notebook");const s=await Jt(),d=q();await xe(d,s),console.log("Created notebook with id:",d);const r=await re();a.value=r}catch(s){console.error("Failed to create blank notebook:",s)}},u=async()=>{try{const s=document.createElement("input");s.type="file",s.accept=".ipynb",s.style.display="none",s.onchange=async d=>{var g;const r=(g=d.target.files)==null?void 0:g[0];if(!r){console.log("No file selected");return}try{const p=await Gt(r);console.log("Notebook imported successfully:",p);const C=await re();a.value=C}catch(p){console.error("Failed to import notebook:",p),alert(`Failed to import notebook: ${p instanceof Error?p.message:"Unknown error"}`)}},document.body.appendChild(s),s.click(),document.body.removeChild(s)}catch(s){console.error("Failed to import notebook:",s),alert("Failed to import notebook. Please try again.")}};return(s,d)=>(f(),w("div",Yt,[c(Z,{fluid:"",class:"pa-4"},{default:m(()=>[_("div",Qt,[_("h1",Xt,k(e.value.title),1),c(He,null,{activator:m(({props:r})=>[c(I,je({color:"primary"},r,{"prepend-icon":t.value?void 0:"mdi-plus","append-icon":t.value?"mdi-plus":void 0}),{default:m(()=>[$(k(e.value.addNotebook),1)]),_:2},1040,["prepend-icon","append-icon"])]),default:m(()=>[c(qe,null,{default:m(()=>[c(pe,{onClick:i},{default:m(()=>[c(fe,null,{default:m(()=>[$(k(e.value.blank),1)]),_:1})]),_:1}),c(pe,{onClick:u},{default:m(()=>[c(fe,null,{default:m(()=>[$(k(e.value.importNotebook),1)]),_:1})]),_:1})]),_:1})]),_:1})]),c(we,null,{default:m(()=>[(f(!0),w(X,null,ye(a.value,r=>(f(),y(Se,{key:r.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:m(()=>[c(jt,{notebook:r,onDelete:l},null,8,["notebook"])]),_:2},1024))),128))]),_:1}),a.value.length===0?(f(),w("div",Zt,[c(B,{icon:"mdi-notebook-outline",size:"64",color:"grey"}),d[0]||(d[0]=_("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No notebooks yet",-1)),d[1]||(d[1]=_("p",{class:"text-body-2 text-medium-emphasis"},"Create your first notebook to get started",-1))])):T("",!0)]),_:1})]))}}),to=P(eo,[["__scopeId","data-v-d8ce6114"]]),oo={cells:[],metadata:{},nbformat:4,nbformat_minor:2},v=ve({content:{},updated:null,clear(){this.updated=null,this.content=oo},findCell(o){return this.content.cells?this.content.cells.find(e=>e.id===o):null},getSource(o){const e=this.findCell(o);return e?e.source:null},getLocalizedSource(o,e){var u;const t=this.findCell(o);if(!t)return;let a=t.source;if(t.metadata.i18n&&t.metadata.i18n[e]&&(a=t.metadata.i18n[e]),!a)return;const l=(u=this.content.metadata)==null?void 0:u.globals;return l?a.map(s=>s.replace(/\{\{\s*(\w+)\s*\}\}/g,(d,r)=>{const g=l[r];if(!g)return d;const p=g[e]||g.default;return p===void 0?d:`${p}`})):a},setSource(o,e){const t=this.findCell(o);t&&(e=e.map(a=>a+`
`),t.source=e,this.updated=Date.now())},clearOutputs(o){const e=this.findCell(o);e&&(e.outputs=[],this.updated=Date.now())},getOutputTypes(o){var a,l,i;let e=[];const t=this.findCell(o);return t&&(((a=t.outputs)==null?void 0:a.findIndex(u=>u.output_type==="execute_result"))!==-1&&e.push("result"),((l=t.outputs)==null?void 0:l.findIndex(u=>u.output_type==="stream"&&u.name==="stdout"))!==-1&&e.push("stdout"),((i=t.outputs)==null?void 0:i.findIndex(u=>u.output_type==="error"))!==-1&&e.push("error")),e},addStdout(o,e){const t=this.findCell(o);if(t){t.outputs||(t.outputs=[]);const a=t.outputs.findIndex(l=>l.output_type==="stream"&&l.name==="stdout");a!==-1?(t.outputs[a].text||(t.outputs[a].text=[]),t.outputs[a].text.push(e)):t.outputs.push({output_type:"stream",name:"stdout",text:[e]}),this.updated=Date.now()}},getStdout(o){var a;let e="";const t=this.findCell(o);return t&&((a=t.outputs)==null||a.forEach(l=>{var i;l.output_type==="stream"&&(e+=((i=l.text)==null?void 0:i.join(""))||"")})),e},setResult(o,e){const t=this.findCell(o);if(t){t.outputs||(t.outputs=[]);const a=t.outputs.findIndex(l=>l.output_type==="execute_result");if(a!==-1){const l=t.outputs[a].data||{};t.outputs[a].data={...l,...e}}else t.outputs.push({output_type:"execute_result",data:e});this.updated=Date.now()}},getResult(o){var a;let e={};const t=this.findCell(o);return t&&((a=t.outputs)==null||a.forEach(l=>{l.output_type==="execute_result"&&l.data&&(e=l.data)})),e},setError(o,e){const t=this.findCell(o);if(t){t.outputs||(t.outputs=[]);const a=Array.isArray(e)?e:e.split(`
`);t.outputs.push({output_type:"error",traceback:a}),this.updated=Date.now()}},getError(o){var a;let e="";const t=this.findCell(o);return t&&((a=t.outputs)==null||a.forEach(l=>{var i;l.output_type==="error"&&(e+=((i=l.traceback)==null?void 0:i.join(""))||"")})),e},loadNotebook(o){o.cells&&(o.cells.forEach(e=>{(!e.id||typeof e.id!="string"||e.id.trim()==="")&&(e.id=q())}),this.content=o)},hasTag(o,e){const t=this.findCell(o);return!t||!t.metadata.tags?!1:t.metadata.tags.includes(e)},addTag(o,e){const t=this.findCell(o);t&&(t.metadata.tags||(t.metadata.tags=[]),t.metadata.tags.includes(e)||(t.metadata.tags.push(e),this.updated=Date.now()))},removeTag(o,e){const t=this.findCell(o);if(t&&t.metadata.tags){const a=t.metadata.tags.indexOf(e);a!==-1&&(t.metadata.tags.splice(a,1),this.updated=Date.now())}},toggleTag(o,e){this.hasTag(o,e)?this.removeTag(o,e):this.addTag(o,e)}}),ao=2e3,no=2e3;function ro(o){const e=L("idle"),t=L(null);let a=null;const l=async u=>{a&&clearTimeout(a),a=setTimeout(async()=>{try{console.log(`Auto-Save: Saving Notebook ${o}`),e.value="saving";const s=JSON.parse(JSON.stringify(u));await xe(o,s),e.value="saved",t.value=new Date,console.log(`Auto-Save: Saved Notebook ${o}`),setTimeout(()=>{e.value==="saved"&&(e.value="idle")},no)}catch(s){console.error("Auto-Save: Failed:",s),e.value="error"}},ao)},i=F(()=>v.updated,()=>{var u;v.updated!=null&&v.content&&((u=v.content.cells)==null?void 0:u.length)>0&&l(v.content)});return{saveStatus:e,lastSaved:t,stopWatcher:i}}const lo=["innerHTML"],so=S({__name:"MarkdownCell",props:{cell:{},locale:{}},setup(o){const e=t=>t?xt.parse(t.join("")):"";return(t,a)=>(f(),y(A,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:m(()=>[c(M,null,{default:m(()=>[_("div",{innerHTML:e(h(v).getLocalizedSource(t.cell.id,t.locale))},null,8,lo)]),_:1})]),_:1}))}}),b=ve({executionStatus:"idle",workerStatus:"initializing",runningCellId:null,interruptBuffer:null,fatalErrorTrace:"",inputStatus:"idle",inputPrompt:null,userInput:null,setInterruptBuffer(o){this.interruptBuffer=o},clearInterruptBuffer(){this.interruptBuffer&&(this.interruptBuffer[0]=0)},interruptExecution(){this.interruptBuffer&&(this.interruptBuffer[0]=2),this.executionStatus="idle"},setWorkerStatus(o){this.workerStatus=o},executeCell(o){this.executionStatus==="idle"&&this.workerStatus==="ready"&&(this.runningCellId=o,this.executionStatus="queued")},executionCompleted(){this.runningCellId=null,this.executionStatus="idle"},setFatalError(o){this.workerStatus="error",this.fatalErrorTrace=o},requestUserInput(o){this.inputStatus="waiting",this.userInput=null,this.inputPrompt=o},submitUserInput(o){this.inputStatus="submitted",this.userInput=o}}),io=S({__name:"CodeControls",props:{id:{}},setup(o){const e=o,t=()=>{v.clearOutputs(e.id),b.executeCell(e.id)},a=()=>{v.clearOutputs(e.id)},l=()=>{b.interruptExecution()},i=x(()=>v.hasTag(e.id,"hide_code")),u=()=>{v.toggleTag(e.id,"hide_code")};return(s,d)=>(f(),w("div",null,[_("div",null,[c(oe,{rounded:"lg"},{default:m(()=>[c(I,{size:"32",icon:"mdi-play-outline",onClick:t,disabled:h(b).executionStatus!=="idle"||h(b).workerStatus!=="ready",loading:h(b).workerStatus!=="ready","aria-label":"Run code"},null,8,["disabled","loading"]),c(I,{size:"32",icon:"mdi-stop",onClick:l,disabled:h(b).executionStatus==="idle"||h(b).runningCellId!==s.id,"aria-label":"Stop code"},null,8,["disabled"])]),_:1}),c(oe,{rounded:"lg",class:"pl-4"},{default:m(()=>[c(I,{size:"32",icon:"mdi-broom",onClick:a})]),_:1}),c(oe,{rounded:"lg",class:"pl-2"},{default:m(()=>[c(I,{size:"32",icon:i.value?"mdi-eye-off":"mdi-eye",onClick:u,"aria-label":i.value?"Show code":"Hide code"},null,8,["icon","aria-label"])]),_:1})])]))}}),Le="#2e3440",Ze="#3b4252",Ve="#434c5e",K="#4c566a",he="#e5e9f0",_e="#eceff4",le="#8fbcbb",De="#88c0d0",co="#81a1c1",V="#5e81ac",uo="#bf616a",z="#d08770",se="#ebcb8b",Be="#a3be8c",mo="#b48ead",Ae="#d30102",Te=_e,ie=Te,po="#ffffff",ce=he,fo=Te,Fe=Ze,go=H.theme({"&":{color:Le,backgroundColor:po},".cm-content":{caretColor:Fe,fontFamily:"JetBrainsMono, monospace"},".cm-cursor, .cm-dropCursor":{borderLeftColor:Fe},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:fo},".cm-panels":{backgroundColor:Te,color:K},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:`1px solid ${K}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:he},".cm-activeLine":{backgroundColor:ie},".cm-selectionMatch":{backgroundColor:he},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${K}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:_e},".cm-gutters":{backgroundColor:_e,color:Le,border:"none"},".cm-activeLineGutter":{backgroundColor:ie},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:ce},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:ce,borderBottomColor:ce},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:ie,color:K}}},{dark:!1}),bo=Ye.define([{tag:n.keyword,color:V},{tag:[n.name,n.deleted,n.character,n.propertyName,n.macroName],color:z},{tag:[n.variableName],color:z},{tag:[n.function(n.variableName)],color:V},{tag:[n.labelName],color:co},{tag:[n.color,n.constant(n.name),n.standard(n.name)],color:V},{tag:[n.definition(n.name),n.separator],color:Be},{tag:[n.brace],color:le},{tag:[n.annotation],color:Ae},{tag:[n.number,n.changed,n.annotation,n.modifier,n.self,n.namespace],color:De},{tag:[n.typeName,n.className],color:se},{tag:[n.operator,n.operatorKeyword],color:Be},{tag:[n.tagName],color:mo},{tag:[n.squareBracket],color:uo},{tag:[n.angleBracket],color:z},{tag:[n.attributeName],color:se},{tag:[n.regexp],color:V},{tag:[n.quote],color:Ze},{tag:[n.string],color:z},{tag:n.link,color:le,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[n.url,n.escape,n.special(n.string)],color:z},{tag:[n.meta],color:De},{tag:[n.comment],color:Ve,fontStyle:"italic"},{tag:n.strong,fontWeight:"bold",color:V},{tag:n.emphasis,fontStyle:"italic",color:V},{tag:n.strikethrough,textDecoration:"line-through"},{tag:n.heading,fontWeight:"bold",color:V},{tag:n.special(n.heading1),fontWeight:"bold",color:V},{tag:n.heading1,fontWeight:"bold",color:V},{tag:[n.heading2,n.heading3,n.heading4],fontWeight:"bold",color:V},{tag:[n.heading5,n.heading6],color:V},{tag:[n.atom,n.bool,n.special(n.variableName)],color:z},{tag:[n.processingInstruction,n.inserted],color:le},{tag:[n.contentSeparator],color:se},{tag:n.invalid,color:Ve,borderBottom:`1px dotted ${Ae}`}]),ho=[go,Qe(bo)],et="#2e3235",tt="#505d64",ke="#606f7a",Q="#707d8b",_o="#a0a4ae",Y="#bdbdbd",ko="#e0e0e0",vo="#fdf6e3",j="#ff5f52",yo="#ff6e40",wo="#fa5788",U="#facf4e",Pe="#ffad42",W="#56c8d8",So="#7186f0",ue="#cf6edf",Co="#6abf69",Me="#99d066",Ue="#4ebaaa",Oe=j,Re="#202325",J="#414b46",No=et,de=tt,xo=tt,ze=_o,To=H.theme({"&":{color:Y,backgroundColor:No},".cm-content":{caretColor:ze,fontFamily:"JetBrainsMono, monospace"},".cm-cursor, .cm-dropCursor":{borderLeftColor:ze},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:xo},".cm-panels":{backgroundColor:Re,color:Q},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{outline:`1px solid ${U}`,backgroundColor:"transparent"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:J},".cm-activeLine":{backgroundColor:J},".cm-selectionMatch":{backgroundColor:Re,outline:`1px solid ${Ue}`},"&.cm-focused .cm-matchingBracket":{color:ko,outline:`1px solid ${Ue}`},"&.cm-focused .cm-nonmatchingBracket":{color:j},".cm-gutters":{backgroundColor:et,borderRight:"1px solid #4f5b66",color:ke},".cm-activeLineGutter":{backgroundColor:J,color:vo},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:de},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:de,borderBottomColor:de},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:J,color:Q}}},{dark:!0}),$o=Ye.define([{tag:n.keyword,color:ue},{tag:[n.name,n.deleted,n.character,n.macroName],color:W},{tag:[n.propertyName],color:U},{tag:[n.variableName],color:Y},{tag:[n.function(n.variableName)],color:W},{tag:[n.labelName],color:ue},{tag:[n.color,n.constant(n.name),n.standard(n.name)],color:U},{tag:[n.definition(n.name),n.separator],color:wo},{tag:[n.brace],color:ue},{tag:[n.annotation],color:Oe},{tag:[n.number,n.changed,n.annotation,n.modifier,n.self,n.namespace],color:Pe},{tag:[n.typeName,n.className],color:Pe},{tag:[n.operator,n.operatorKeyword],color:So},{tag:[n.tagName],color:yo},{tag:[n.squareBracket],color:j},{tag:[n.angleBracket],color:ke},{tag:[n.attributeName],color:Y},{tag:[n.regexp],color:Oe},{tag:[n.quote],color:Co},{tag:[n.string],color:Me},{tag:n.link,color:W,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[n.url,n.escape,n.special(n.string)],color:U},{tag:[n.meta],color:Q},{tag:[n.comment],color:Q,fontStyle:"italic"},{tag:n.monospace,color:Y},{tag:n.strong,fontWeight:"bold",color:j},{tag:n.emphasis,fontStyle:"italic",color:Me},{tag:n.strikethrough,textDecoration:"line-through"},{tag:n.heading,fontWeight:"bold",color:U},{tag:n.heading1,fontWeight:"bold",color:U},{tag:[n.heading2,n.heading3,n.heading4],fontWeight:"bold",color:U},{tag:[n.heading5,n.heading6],color:U},{tag:[n.atom,n.bool,n.special(n.variableName)],color:W},{tag:[n.processingInstruction,n.inserted],color:j},{tag:[n.contentSeparator],color:W},{tag:n.invalid,color:ke,borderBottom:`1px dotted ${j}`}]),Eo=[To,Qe($o)],Io=["id"],Lo=S({__name:"CodeEditor",props:{source:{},metadata:{},id:{},theme:{}},setup(o){const e=o;let t=null,a=!1;return O(()=>{let l=ho;switch(e.theme){case"dark":l=Eo;break}const i=Tt.create({doc:e.source?e.source.join(""):"",extensions:[Et,$t(),l,H.lineWrapping,H.updateListener.of(u=>{if(u.docChanged&&!a){const s=u.state.doc.toString();v.setSource(e.id,s.includes(`
`)?s.split(`
`):[s])}})]});t=new H({state:i,parent:document.getElementById("code-editor-"+e.id)})}),F(()=>e.source,l=>{if(t&&l&&!a){const i=t.state.doc.toString(),u=l.join(""),s=i.replace(/\n+$/,""),d=u.replace(/\n+$/,"");s!==d&&(a=!0,t.dispatch({changes:{from:0,to:t.state.doc.length,insert:u}}),a=!1)}},{deep:!0}),(l,i)=>(f(),w("div",{id:`code-editor-${e.id}`},null,8,Io))}}),Vo=S({__name:"Console",props:{stdout:{}},setup(o){const e=o,t=L(null),a=()=>{if(!t.value)return;const s=`${(e.stdout?e.stdout.split(`
`).length:1)*1.2+1.5}em`;t.value.style.height=s};return F(()=>e.stdout,()=>{a()},{immediate:!0}),O(()=>{a()}),(l,i)=>(f(),w("textarea",{ref_key:"consoleRef",ref:t,class:"output-console",readonly:""},k(l.stdout),513))}}),Do=P(Vo,[["__scopeId","data-v-43c05e2b"]]),Bo={class:"output-console",readonly:""},Ao=S({__name:"Error",props:{stderr:{}},setup(o){return(e,t)=>(f(),w("textarea",Bo,k(e.stderr),1))}}),Fo=P(Ao,[["__scopeId","data-v-62cb5501"]]),Po=S({__name:"TextPlain",props:{value:{}},setup(o){const e=L(null);return(t,a)=>(f(),w("textarea",{ref_key:"consoleRef",ref:e,class:"output-console",readonly:""},k(Array.isArray(t.value)?t.value.join(""):t.value),513))}}),Mo=P(Po,[["__scopeId","data-v-6e2abbc4"]]),Uo=["src"],Oo=S({__name:"ImagePng",props:{value:{}},setup(o){return(e,t)=>(f(),w("img",{src:`data:image/png;base64,${e.value}`},null,8,Uo))}}),Ro=["src"],zo=S({__name:"ImageSvg",props:{value:{}},setup(o){return(e,t)=>(f(),w("img",{src:`data:image/svg+xml;charset=utf-8,${encodeURIComponent(e.value)}`},null,8,Ro))}}),jo=S({__name:"Result",props:{value:{}},setup(o){return(e,t)=>(f(),w(X,null,[e.value["image/svg+xml"]?(f(),y(zo,{key:0,value:e.value["image/svg+xml"]},null,8,["value"])):T("",!0),e.value["image/png"]?(f(),y(Oo,{key:1,value:e.value["image/png"]},null,8,["value"])):T("",!0),e.value["text/plain"]?(f(),y(Mo,{key:2,value:e.value["text/plain"]},null,8,["value"])):T("",!0)],64))}});function Wo(o){if(!o)return[];const e=[];return o.forEach((t,a)=>{const i=t.replace(/\n$/,"").trim();if(!i||i.startsWith("#"))return;const u=i.match(/^(\w+)\s*=\s*(.+?)\s*#\s*@param(.*)$/);if(!u)return;const[,s,d,r]=u;try{const g=Ho(d),p=qo(r.trim()),C=Ko(g,p);e.push({name:s,value:g,type:C,config:p,lineNumber:a})}catch(g){console.warn(`Failed to parse parameter on line ${a+1}: ${t}`,g)}}),e}function Ho(o){const e=o.trim();if(e==="True")return!0;if(e==="False")return!1;if(e==="None")return null;const t=e.match(/^["'](.*)["']$/);return t?t[1]:e.match(/^-?\d+\.?\d*$/)?e.includes(".")?parseFloat(e):parseInt(e,10):e}function qo(o){if(!o)return{};const e=o.match(/^\[(.+)\]$/);if(e)return{options:e[1].split(",").map(i=>{const u=i.trim(),s=u.match(/^["'](.*)["']$/);return s?s[1]:u})};const t=o.match(/^\{(.+)\}$/);if(t)try{const a=t[1],l={};return a.split(",").forEach(u=>{const[s,d]=u.split(":").map(r=>r.trim());if(s&&d){const r=s.replace(/["']/g,""),g=d.replace(/["']/g,"");r==="type"?l.type=g:(r==="min"||r==="max"||r==="step")&&(l[r]=parseFloat(g))}}),l}catch{return console.warn("Failed to parse config JSON:",o),{}}return{}}function Ko(o,e){return e.type==="slider"?"slider":e.type==="boolean"?"boolean":e.options&&e.options.length>0?"dropdown":typeof o=="boolean"?"boolean":"value"}function Jo(o,e,t){if(!o||e.lineNumber>=o.length)return o;const a=[...o],l=a[e.lineNumber],i=l.endsWith(`
`),s=l.replace(/\n$/,"").match(/^(\w+\s*=\s*)(.+?)(\s*#\s*@param.*)$/);if(s){const[,d,,r]=s,g=Go(t);a[e.lineNumber]=`${d}${g}${r}${i?`
`:""}`}return a}function Go(o){return typeof o=="boolean"?o?"True":"False":o==null?"None":typeof o=="string"?`"${o}"`:String(o)}const Yo={key:0,class:"parameter-controls mb-4"},Qo={class:"parameter-grid"},Xo={key:1,class:"slider-container"},Zo={class:"slider-layout"},ea={key:3,class:"boolean-container"},ta=S({__name:"ParameterControls",props:{source:{},cellId:{}},emits:["parameter-changed"],setup(o,{emit:e}){const t=o,a=e,l=x(()=>Wo(t.source)),i=(s,d)=>{if(!t.source)return;const r=Jo(t.source,s,d);a("parameter-changed",r)},u=s=>s.name.replace(/_/g," ").toLowerCase().replace(/\b\w/g,d=>d.toUpperCase());return(s,d)=>l.value.length>0?(f(),w("div",Yo,[c(A,{variant:"outlined",class:"pa-4"},{default:m(()=>[_("div",Qo,[(f(!0),w(X,null,ye(l.value,r=>{var g,p,C,R;return f(),w("div",{key:r.name,class:"parameter-item"},[r.type==="value"?(f(),y(ge,{key:0,label:u(r),"model-value":r.value,"onUpdate:modelValue":D=>i(r,D),variant:"outlined",density:"compact","hide-details":""},null,8,["label","model-value","onUpdate:modelValue"])):r.type==="slider"?(f(),w("div",Xo,[c(ct,{class:"text-caption mb-1"},{default:m(()=>[$(k(u(r)),1)]),_:2},1024),_("div",Zo,[c(ut,{"model-value":r.value,"onUpdate:modelValue":D=>i(r,D),min:((g=r.config)==null?void 0:g.min)??0,max:((p=r.config)==null?void 0:p.max)??100,step:((C=r.config)==null?void 0:C.step)??1,"thumb-label":"",class:"slider-control","hide-details":""},null,8,["model-value","onUpdate:modelValue","min","max","step"]),c(ge,{"model-value":r.value,readonly:"",variant:"outlined",density:"compact",class:"value-display","hide-details":""},null,8,["model-value"])])])):r.type==="dropdown"?(f(),y(be,{key:2,label:u(r),"model-value":r.value,"onUpdate:modelValue":D=>i(r,D),items:((R=r.config)==null?void 0:R.options)||[],variant:"outlined",density:"compact","hide-details":""},null,8,["label","model-value","onUpdate:modelValue","items"])):r.type==="boolean"?(f(),w("div",ea,[c(dt,{"model-value":r.value,"onUpdate:modelValue":D=>i(r,D),label:u(r),color:"primary","hide-details":"",inset:""},null,8,["model-value","onUpdate:modelValue","label"])])):T("",!0)])}),128))])]),_:1})])):T("",!0)}}),oa=P(ta,[["__scopeId","data-v-9ab33d5a"]]),aa=S({__name:"CodeCell",props:{cell:{},theme:{},locale:{}},setup(o){const e=o;let t=[];t=v.getOutputTypes(e.cell.id);const a=()=>{if(t.indexOf("result")!==-1)return"result";if(t.indexOf("stdout")!==-1)return"stdout";if(t.indexOf("error")!==-1)return"error"},l=L("result");F(()=>e.cell.outputs,()=>{t=v.getOutputTypes(e.cell.id),l.value="none",l.value=a()||l.value},{deep:!0});const i=s=>{const d=v.findCell(e.cell.id);d&&(d.source=s,v.updated=Date.now())},u=x(()=>v.hasTag(e.cell.id,"hide_code"));return(s,d)=>(f(),w("div",null,[c(oa,{source:h(v).getLocalizedSource(s.cell.id,e.locale),"cell-id":s.cell.id,onParameterChanged:i},null,8,["source","cell-id"]),c(A,{"max-width":"800",variant:"elevated",elevation:"2",color:"surface-light",class:"mb-2 pt-2 pb-2 ma-auto rounded-lg"},{default:m(()=>[u.value?T("",!0):(f(),y(M,{key:0},{default:m(()=>[c(Lo,{source:h(v).getLocalizedSource(s.cell.id,e.locale),id:s.cell.id,metadata:s.cell.metadata,theme:e.theme},null,8,["source","id","metadata","theme"])]),_:1})),c(Ke,{class:"pl-4 pr-4 d-flex justify-space-between"},{default:m(()=>[c(io,{id:s.cell.id},null,8,["id"]),c(mt,{modelValue:l.value,"onUpdate:modelValue":d[0]||(d[0]=r=>l.value=r),class:"ml-auto"},{default:m(()=>[h(t).indexOf("result")!==-1?(f(),y(ae,{key:0,value:"result",icon:"",size:"32",rounded:"lg","min-width":"48"},{default:m(()=>[c(B,{icon:"mdi-monitor"})]),_:1})):T("",!0),h(t).indexOf("stdout")!==-1?(f(),y(ae,{key:1,value:"stdout",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:m(()=>[c(B,{icon:"mdi-console"})]),_:1})):T("",!0),h(t).indexOf("error")!==-1?(f(),y(ae,{key:2,value:"error",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:m(()=>[c(B,{icon:"mdi-alert-circle-outline"})]),_:1})):T("",!0)]),_:1},8,["modelValue"])]),_:1}),at(c(M,null,{default:m(()=>[c(pt,{modelValue:l.value,"onUpdate:modelValue":d[1]||(d[1]=r=>l.value=r),direction:"vertical"},{default:m(()=>[c(ne,{value:"result"},{default:m(()=>[c(jo,{value:h(v).getResult(s.cell.id)},null,8,["value"])]),_:1}),c(ne,{value:"stdout",direction:"vertical"},{default:m(()=>[c(Do,{stdout:h(v).getStdout(s.cell.id)},null,8,["stdout"])]),_:1}),c(ne,{value:"error",direction:"vertical"},{default:m(()=>[c(Fo,{stderr:h(v).getError(s.cell.id)},null,8,["stderr"])]),_:1})]),_:1},8,["modelValue"])]),_:1},512),[[nt,e.cell.outputs?e.cell.outputs.length>0:!1]])]),_:1})]))}}),na=S({__name:"PyodideProvider",props:{notebookId:{},locale:{}},setup(o){const e=o;let t;return O(async()=>{console.log("PyodideProvider: Starting new worker for "+e.notebookId),b.setWorkerStatus("initializing"),t=new Worker(new URL("/k12nb/assets/PyodideWorker-CkAqyADK.js",import.meta.url),{type:"module"}),t.postMessage({type:"initialize"}),t.onmessage=async a=>{const{type:l,text:i,result:u,message:s,error:d,interruptBuffer:r}=a.data;switch(l){case"initialized":console.log("PyodideProvider: Pyodide is initialized"),b.setWorkerStatus("ready"),r&&(b.setInterruptBuffer(new Int32Array(r)),console.log("PyodideProvider: Set Interrupt Buffer"));break;case"stdout":b.runningCellId&&v.addStdout(b.runningCellId,i);break;case"input_request":b.requestUserInput(s);break;case"execute_result":b.runningCellId&&u&&v.setResult(b.runningCellId,u);break;case"execute_completed":b.executionCompleted();break;case"error":b.runningCellId&&v.setError(b.runningCellId,d),b.executionCompleted();break;case"fatal":b.setFatalError(d);break}}}),We(async()=>{console.log("PyodideProvider: Terminating worker."),b.setWorkerStatus("terminating"),t.terminate()}),F(()=>b.executionStatus,a=>{if(a==="queued"&&b.runningCellId!=null){const l=v.getLocalizedSource(b.runningCellId,e.locale);t.postMessage({type:"run",cellId:b.runningCellId,code:l==null?void 0:l.join("")})}}),F(()=>b.inputStatus,a=>{a==="submitted"&&t.postMessage({type:"input_response",value:b.userInput})}),(a,l)=>rt(a.$slots,"default")}}),ra=S({__name:"InputDialog",props:{locale:{}},setup(o){const e=o,t=x(()=>Xe[e.locale||"en-US"]),a=L(""),l=L(),i=x({get:()=>b.inputStatus==="waiting",set:r=>{r||(b.inputStatus="idle")}}),u=()=>{b.submitUserInput(a.value),a.value=""},s=()=>{b.submitUserInput(""),a.value=""};F(()=>i.value,async r=>{var g;r&&(await lt(),(g=l.value)==null||g.focus())});const d=r=>{r.key==="Enter"?(r.preventDefault(),u()):r.key==="Escape"&&(r.preventDefault(),s())};return(r,g)=>(f(),y(ft,{modelValue:i.value,"onUpdate:modelValue":g[1]||(g[1]=p=>i.value=p),"max-width":"400px",persistent:"",onKeydown:d},{default:m(()=>[c(A,null,{default:m(()=>[c(G,null,{default:m(()=>[$(k(h(b).inputPrompt||t.value.inputDialogTitle),1)]),_:1}),c(M,null,{default:m(()=>[c(ge,{ref_key:"inputFieldRef",ref:l,modelValue:a.value,"onUpdate:modelValue":g[0]||(g[0]=p=>a.value=p),label:t.value.inputDialogLabel,variant:"outlined",density:"compact",onKeydown:d},null,8,["modelValue","label"])]),_:1}),c(Ke,null,{default:m(()=>[c(gt),c(I,{color:"grey",variant:"text",onClick:s},{default:m(()=>[$(k(t.value.inputDialogCancel),1)]),_:1}),c(I,{color:"primary",variant:"text",onClick:u},{default:m(()=>[$(k(t.value.inputDialogSubmit),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),la={class:"renderer-container"},sa=S({__name:"Renderer",props:{id:{},initialNotebook:{},theme:{},locale:{}},setup(o){const e=o,t=x(()=>Xe[e.locale]);return O(()=>{v.loadNotebook(e.initialNotebook)}),F(()=>e.initialNotebook,a=>{v.loadNotebook(a)}),(a,l)=>(f(),y(na,{notebookId:a.id,locale:e.locale},{default:m(()=>[_("div",la,[c(Ee,null,{default:m(()=>[h(b).workerStatus=="initializing"?(f(),y(Ie,{key:0,text:t.value.notebookStarting,type:"info",variant:"tonal",density:"compact"},null,8,["text"])):T("",!0)]),_:1}),c(Ee,null,{default:m(()=>[h(b).workerStatus=="error"?(f(),y(Ie,{key:0,text:`${t.value.notebookStartError} ${h(b).fatalErrorTrace}`,type:"error",variant:"tonal",density:"compact"},null,8,["text"])):T("",!0)]),_:1}),(f(!0),w(X,null,ye(h(v).content.cells,i=>(f(),w("div",null,[i.cell_type==="markdown"?(f(),y(h(so),{key:0,cell:i,metadata:i.metadata,locale:e.locale},null,8,["cell","metadata","locale"])):T("",!0),i.cell_type==="code"?(f(),y(h(aa),{key:1,cell:i,theme:e.theme,locale:e.locale},null,8,["cell","theme","locale"])):T("",!0)]))),256))]),c(ra,{locale:e.locale},null,8,["locale"])]),_:1},8,["notebookId","locale"]))}}),ia={class:"notebook"},ca={class:"d-flex align-center mb-6 notebook-header"},ua={class:"d-flex align-center flex-grow-1"},da={class:"text-h4 notebook-title"},ma={key:1,class:"loading"},pa={class:"text-center"},fa={class:"text-h5 mb-2"},ga={class:"text-body-1 text-medium-emphasis mb-4"},ba=S({__name:"Notebook",setup(o){const e=Ge(),t=Ce(),a=x(()=>Ne[N.locale]),l=x(()=>ee[N.locale].direction==="rtl"),i=x(()=>e.params.id),u=L(null),s=L(!0),d=L(null),{saveStatus:r,stopWatcher:g}=ro(i.value);O(async()=>{try{s.value=!0,d.value=null,u.value=await qt(i.value)}catch(C){console.error("Failed to load notebook:",C),d.value=C instanceof Error?C.message:"Failed to load notebook"}finally{s.value=!1}});const p=()=>{t.push("/notebooks")};return We(()=>{v.clear(),g()}),(C,R)=>(f(),w("div",ia,[c(Z,{fluid:"",class:"pa-4"},{default:m(()=>{var D,$e;return[_("div",ca,[_("div",ua,[c(I,{icon:l.value?"mdi-arrow-right":"mdi-arrow-left",variant:"text",onClick:p,class:me(l.value?"ms-3":"me-3")},null,8,["icon","class"]),_("h1",da,k((($e=(D=u.value)==null?void 0:D.metadata)==null?void 0:$e.title)||a.value.untitledNotebook),1)]),h(r)!=="idle"?(f(),y(bt,{key:0,color:h(r)==="saved"?"success":h(r)==="saving"?"info":"error",size:"small",variant:"tonal"},{default:m(()=>[c(B,{icon:h(r)==="saved"?"mdi-check":h(r)==="saving"?"mdi-loading":"mdi-alert",class:me([{"mdi-spin":h(r)==="saving"},"me-1"]),size:"small"},null,8,["icon","class"]),$(" "+k(h(r)==="saved"?a.value.saved:h(r)==="saving"?a.value.saving:a.value.saveError),1)]),_:1},8,["color"])):T("",!0)]),u.value&&!s.value&&!d.value?(f(),y(sa,{key:0,"initial-notebook":u.value,id:i.value,theme:h(N).theme,locale:h(N).locale},null,8,["initial-notebook","id","theme","locale"])):s.value?(f(),w("div",ma,[c(ht,{indeterminate:"",color:"primary"}),_("p",null,k(a.value.loadingNotebook),1)])):d.value?(f(),y(A,{key:2,class:"pa-6"},{default:m(()=>[_("div",pa,[c(B,{icon:"mdi-alert-circle",size:"64",color:"error",class:"mb-4"}),_("h2",fa,k(a.value.failedToLoad),1),_("p",ga,k(d.value),1),c(I,{color:"primary",onClick:p},{default:m(()=>[$(k(a.value.backToNotebooks),1)]),_:1})])]),_:1})):T("",!0)]}),_:1})]))}}),ha=P(ba,[["__scopeId","data-v-226b97bd"]]),_a={class:"curriculum-view"},ka=S({__name:"Curriculum",setup(o){return(e,t)=>(f(),w("div",_a,[c(Z,null,{default:m(()=>[c(we,null,{default:m(()=>[c(Se,{cols:"12"},{default:m(()=>[t[1]||(t[1]=_("h1",{class:"text-h4 mb-4"},"Curriculum",-1)),c(A,null,{default:m(()=>[c(M,null,{default:m(()=>t[0]||(t[0]=[_("p",{class:"text-body-1"}," Curriculum content will be implemented here. This section will contain educational materials, lessons, and structured learning paths. ",-1)])),_:1,__:[0]})]),_:1})]),_:1,__:[1]})]),_:1})]),_:1})]))}}),va=P(ka,[["__scopeId","data-v-4427f550"]]),ya={class:"settings-view"},wa={class:"text-h4 mb-4 settings-title"},Sa={class:"text-body-1"},Ca={class:"text-body-2 text-medium-emphasis"},Na=S({__name:"Settings",setup(o){const e=Je(),t=L(N.theme),a=L(N.locale),l=x(()=>At.map(r=>({title:Vt[N.locale][r],value:r}))),i=It.map(r=>({title:ee[r].name,value:r})),u=x(()=>Bt[N.locale]);O(()=>{e.global.name.value=N.theme}),F(t,r=>{e.global.name.value=r});const s=r=>{N.setTheme(r),t.value=r},d=r=>{N.setLocale(r),a.value=r};return(r,g)=>(f(),w("div",ya,[c(Z,null,{default:m(()=>[c(we,null,{default:m(()=>[c(Se,{cols:"12"},{default:m(()=>[_("h1",wa,k(u.value.title),1),c(A,{class:"mb-4"},{default:m(()=>[c(G,null,{default:m(()=>[$(k(u.value.appearance),1)]),_:1}),c(M,null,{default:m(()=>[c(be,{modelValue:t.value,"onUpdate:modelValue":[g[0]||(g[0]=p=>t.value=p),s],items:l.value,label:u.value.theme,"item-title":"title","item-value":"value"},null,8,["modelValue","items","label"])]),_:1})]),_:1}),c(A,{class:"mb-4"},{default:m(()=>[c(G,null,{default:m(()=>[$(k(u.value.language),1)]),_:1}),c(M,null,{default:m(()=>[c(be,{modelValue:a.value,"onUpdate:modelValue":[g[1]||(g[1]=p=>a.value=p),d],items:h(i),label:u.value.language,"item-title":"title","item-value":"value"},null,8,["modelValue","items","label"])]),_:1})]),_:1}),c(A,null,{default:m(()=>[c(G,null,{default:m(()=>[$(k(u.value.about),1)]),_:1}),c(M,null,{default:m(()=>[_("p",Sa,k(u.value.appName),1),_("p",Ca,k(u.value.version)+" 0.1.0 ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}}),xa=P(Na,[["__scopeId","data-v-b8e54928"]]),Ta=[{path:"/",redirect:"notebooks"},{path:"/notebooks",name:"notebooks",component:to},{path:"/notebooks/:id",name:"notebook",component:ha},{path:"/curriculum",name:"curriculum",component:va},{path:"/settings",name:"settings",component:xa}],$a=Ct({history:Nt("/k12nb/"),routes:Ta}),Ea={class:"content-container"},Ia=S({__name:"BaseLayout",setup(o){const e=Ce(),t=Ge(),a={"/notebooks":0,"/curriculum":1,"/settings":2},l={0:"/notebooks",1:"/curriculum",2:"/settings"},i=x({get:()=>a[t.path]??0,set:g=>{const p=l[g];p&&t.path!==p&&e.push(p)}}),u=Je(),s=x(()=>Dt[N.locale]),d=x(()=>ee[N.locale].direction),r=x(()=>N.locale);return F([d,r],([g,p])=>{document.documentElement.dir=g,document.documentElement.lang=p},{immediate:!0}),O(()=>{u.global.name.value=N.theme,document.documentElement.dir=d.value,document.documentElement.lang=r.value}),(g,p)=>{const C=st("router-view");return f(),y(_t,null,{default:m(()=>[c(kt,null,{default:m(()=>[_("div",Ea,[c(C)])]),_:1}),c(vt,{modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=R=>i.value=R),color:"primary",grow:"",class:me({"rtl-navigation":d.value==="rtl"})},{default:m(()=>[c(I,{value:"0"},{default:m(()=>[c(B,null,{default:m(()=>p[1]||(p[1]=[$("mdi-notebook")])),_:1,__:[1]}),_("span",null,k(s.value.notebooks),1)]),_:1}),c(I,{value:"1"},{default:m(()=>[c(B,null,{default:m(()=>p[2]||(p[2]=[$("mdi-school")])),_:1,__:[2]}),_("span",null,k(s.value.curriculum),1)]),_:1}),c(I,{value:"2"},{default:m(()=>[c(B,null,{default:m(()=>p[3]||(p[3]=[$("mdi-cog")])),_:1,__:[3]}),_("span",null,k(s.value.settings),1)]),_:1})]),_:1},8,["modelValue","class"])]),_:1})}}}),La=P(Ia,[["__scopeId","data-v-b13b776c"]]),Va=S({__name:"App",setup(o){return(e,t)=>(f(),y(La))}}),Da=yt({theme:{defaultTheme:"dark",themes:{light:{colors:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}},dark:{colors:{primary:"#2196F3",secondary:"#424242",accent:"#FF4081",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}},icons:{defaultSet:"mdi",aliases:St,sets:{mdi:wt}}});it(Va).use(Da).use($a).mount("#app");
