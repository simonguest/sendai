import"./modulepreload-polyfill-B5Qt9EMX.js";import{f as We,d as O,c as T,Z as w,_ as p,$ as u,A as l,E as v,Y as k,Q as h,B as ft,a0 as Nt,r as E,w as G,g as qe,o as Y,a1 as y,a2 as I,F as Q,a3 as oe,u as L,P as $t,U as Tt,n as ce,a4 as et,a5 as Dt,a6 as It,a7 as Ke,a8 as Ut,a9 as Mt,aa as At}from"./@vue-CsRwG8Mk.js";import{V as q,a as vt,b as Ye,c as de,d as me,e as A,f as F,g as J,h as Ee,i as te,j as Z,k as _e,l as Le,m as Ne,n as $e,o as be,p as Rt,q as xe,r as Ot,s as Pt,t as he,u as Bt,v as Ft,w as Ae,x as zt,y as Re,z as ae,A as Se,B as jt,C as Ht,D as Jt,E as Gt,F as ie,G as ve,H as tt,I as gt,J as Wt,K as qt,L as Kt,M as Yt,N as Zt,O as Qt}from"./vuetify-zPmyuqBh.js";import{u as Ze,a as Qe,c as Xt,b as eo}from"./vue-router-B8eaOa2B.js";import{v as le}from"./uuid-C6aID195.js";import{m as bt}from"./marked-DKjyhwJX.js";import{z as ge,H as ht,s as _t,E as to,A as oo}from"./@codemirror-DKAeXodV.js";import{b as ao}from"./codemirror-JfYcm8qp.js";import{c as d}from"./@lezer-C8D-pblS.js";import{R as lo}from"./@videojs-player-DlbwFESY.js";import"./video.js-BzFRggUd.js";import"./crelt-C8TCjufn.js";import"./@marijn-DXwl3gUT.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";import"./global-Ao-oLW3a.js";import"./@babel-CCFhuYdL.js";import"./keycode-COWoYAhk.js";import"./safe-json-parse-CN2GHVL4.js";import"./@videojs-B_-B0e53.js";import"./is-function-C0BzV8h3.js";import"./url-toolkit-Dcj1b7Pi.js";import"./videojs-vtt.js-DcT8v0yT.js";import"./m3u8-parser-CpICl_Sf.js";import"./mpd-parser-CVldHi6R.js";import"./@xmldom-BH8vc9mM.js";import"./mux.js-BqethXN8.js";const no=["en-US","ja-JP","hi-IN","fa-IR"],ro="en-US",ne={"en-US":{direction:"ltr",name:"English (US)"},"ja-JP":{direction:"ltr",name:"日本語"},"hi-IN":{direction:"ltr",name:"हिन्दी"},"fa-IR":{direction:"rtl",name:"فارسی"}},so={"en-US":{light:"Light",dark:"Dark"},"ja-JP":{light:"ライト",dark:"ダーク"},"hi-IN":{light:"हल्का",dark:"गहरा"},"fa-IR":{light:"روشن",dark:"تیره"}},io={"en-US":{notebooks:"Notebooks",curriculum:"Curriculum",settings:"Settings"},"ja-JP":{notebooks:"ノートブック",curriculum:"カリキュラム",settings:"設定"},"hi-IN":{notebooks:"नोटबुक",curriculum:"पाठ्यक्रम",settings:"सेटिंग्स"},"fa-IR":{notebooks:"دفترچه‌ها",curriculum:"برنامه درسی",settings:"تنظیمات"}},Te={"en-US":{title:"Notebooks",addNotebook:"Add",blank:"Blank",fromTemplate:"From template",fromFile:"From File",fromUrl:"From URL",delete:"Delete",lastEdited:"Last edited",back:"Back",notebookViewer:"Notebook Viewer",saved:"Saved",saving:"Saving...",saveError:"Save Error",loadingNotebook:"Loading notebook...",failedToLoad:"Failed to load notebook",backToNotebooks:"Back to Notebooks",untitledNotebook:"Untitled Notebook",justNow:"Just now",hoursAgo:"hours ago",hourAgo:"hour ago",daysAgo:"days ago",dayAgo:"day ago",urlDialogTitle:"Import from URL",urlDialogLabel:"Enter notebook URL",urlDialogOpen:"Open",urlDialogCancel:"Close",urlDialogError:"Error",urlDialogErrorMessage:"Failed to fetch notebook from URL",urlDialogInvalidUrl:"Please enter a valid URL (must start with http:// or https://)"},"ja-JP":{title:"ノートブック",addNotebook:"追加",blank:"空白",fromTemplate:"テンプレートから",fromFile:"ファイルから",fromUrl:"URLから",delete:"削除",lastEdited:"最終編集",back:"戻る",notebookViewer:"ノートブックビューア",saved:"保存済み",saving:"保存中...",saveError:"保存エラー",loadingNotebook:"ノートブックを読み込み中...",failedToLoad:"ノートブックの読み込みに失敗しました",backToNotebooks:"ノートブックに戻る",untitledNotebook:"無題のノートブック",justNow:"たった今",hoursAgo:"時間前",hourAgo:"時間前",daysAgo:"日前",dayAgo:"日前",urlDialogTitle:"URLからインポート",urlDialogLabel:"ノートブックのURLを入力",urlDialogOpen:"開く",urlDialogCancel:"閉じる",urlDialogError:"エラー",urlDialogErrorMessage:"URLからノートブックを取得できませんでした",urlDialogInvalidUrl:"有効なURLを入力してください（http://またはhttps://で始まる必要があります）"},"hi-IN":{title:"नोटबुक",addNotebook:"जोड़ें",blank:"खाली",fromTemplate:"टेम्प्लेट से",fromFile:"फ़ाइल से",fromUrl:"URL से",delete:"हटाएं",lastEdited:"अंतिम संपादन",back:"वापस",notebookViewer:"नोटबुक व्यूअर",saved:"सहेजा गया",saving:"सहेज रहे हैं...",saveError:"सहेजने में त्रुटि",loadingNotebook:"नोटबुक लोड हो रहा है...",failedToLoad:"नोटबुक लोड करने में विफल",backToNotebooks:"नोटबुक पर वापस जाएं",untitledNotebook:"बिना शीर्षक नोटबुक",justNow:"अभी",hoursAgo:"घंटे पहले",hourAgo:"घंटा पहले",daysAgo:"दिन पहले",dayAgo:"दिन पहले",urlDialogTitle:"URL से आयात करें",urlDialogLabel:"नोटबुक URL दर्ज करें",urlDialogOpen:"खोलें",urlDialogCancel:"बंद करें",urlDialogError:"त्रुटि",urlDialogErrorMessage:"URL से नोटबुक प्राप्त करने में विफल",urlDialogInvalidUrl:"कृपया एक वैध URL दर्ज करें (http:// या https:// से शुरू होना चाहिए)"},"fa-IR":{title:"دفترچه‌ها",addNotebook:"افزودن",blank:"خالی",fromTemplate:"از قالب",fromFile:"از فایل",fromUrl:"از URL",delete:"حذف",lastEdited:"آخرین ویرایش",back:"بازگشت",notebookViewer:"نمایشگر دفترچه",saved:"ذخیره شد",saving:"در حال ذخیره...",saveError:"خطا در ذخیره",loadingNotebook:"در حال بارگذاری دفترچه...",failedToLoad:"بارگذاری دفترچه ناموفق بود",backToNotebooks:"بازگشت به دفترچه‌ها",untitledNotebook:"دفترچه بدون عنوان",justNow:"همین الان",hoursAgo:"ساعت پیش",hourAgo:"ساعت پیش",daysAgo:"روز پیش",dayAgo:"روز پیش",urlDialogTitle:"وارد کردن از URL",urlDialogLabel:"URL دفترچه را وارد کنید",urlDialogOpen:"باز کردن",urlDialogCancel:"بستن",urlDialogError:"خطا",urlDialogErrorMessage:"دریافت دفترچه از URL ناموفق بود",urlDialogInvalidUrl:"لطفاً یک URL معتبر وارد کنید (باید با http:// یا https:// شروع شود)"}},uo={"en-US":{title:"Settings",appearance:"Appearance",language:"Language",about:"About",theme:"Theme",version:"Version",appName:"K12 Notebook - Web Shell"},"ja-JP":{title:"設定",appearance:"外観",language:"言語",about:"について",theme:"テーマ",version:"バージョン",appName:"K12ノートブック - ウェブシェル"},"hi-IN":{title:"सेटिंग्स",appearance:"दिखावट",language:"भाषा",about:"के बारे में",theme:"थीम",version:"संस्करण",appName:"K12 नोटबुक - वेब शेल"},"fa-IR":{title:"تنظیمات",appearance:"ظاهر",language:"زبان",about:"درباره",theme:"تم",version:"نسخه",appName:"دفترچه K12 - پوسته وب"}},De={"en-US":{notebookStarting:"The notebook is starting up...",notebookStartError:"The notebook could not be started because of an error:",inputDialogTitle:"Enter Input",inputDialogLabel:"Input",inputDialogCancel:"Cancel",inputDialogSubmit:"Submit",globalsDialogTitle:"Global Variables",addVariable:"Add",variableName:"Variable Name",defaultValue:"Default Value",addLocale:"Add Locale",deleteVariable:"Delete Variable",save:"Save",cancel:"Cancel",languageOverride:"Language Override",noLanguageOverride:"None"},"ja-JP":{notebookStarting:"ノートブックを起動中...",notebookStartError:"エラーのためノートブックを起動できませんでした:",inputDialogTitle:"入力してください",inputDialogLabel:"入力",inputDialogCancel:"キャンセル",inputDialogSubmit:"送信",globalsDialogTitle:"グローバル変数",addVariable:"変数を追加",variableName:"変数名",defaultValue:"デフォルト値",addLocale:"ロケールを追加",deleteVariable:"変数を削除",save:"保存",cancel:"キャンセル",languageOverride:"言語オーバーライド",noLanguageOverride:"なし"},"hi-IN":{notebookStarting:"नोटबुक शुरू हो रहा है...",notebookStartError:"त्रुटि के कारण नोटबुक शुरू नहीं हो सका:",inputDialogTitle:"इनपुट दर्ज करें",inputDialogLabel:"इनपुट",inputDialogCancel:"रद्द करें",inputDialogSubmit:"जमा करें",globalsDialogTitle:"ग्लोबल वेरिएबल्स",addVariable:"वेरिएबल जोड़ें",variableName:"वेरिएबल नाम",defaultValue:"डिफ़ॉल्ट मान",addLocale:"लोकेल जोड़ें",deleteVariable:"वेरिएबल हटाएं",save:"सेव करें",cancel:"रद्द करें",languageOverride:"भाषा ओवरराइड",noLanguageOverride:"कोई नहीं"},"fa-IR":{notebookStarting:"دفترچه در حال راه‌اندازی است...",notebookStartError:"دفترچه به دلیل خطا راه‌اندازی نشد:",inputDialogTitle:"ورودی را وارد کنید",inputDialogLabel:"ورودی",inputDialogCancel:"لغو",inputDialogSubmit:"ارسال",globalsDialogTitle:"متغیرهای سراسری",addVariable:"افزودن متغیر",variableName:"نام متغیر",defaultValue:"مقدار پیش‌فرض",addLocale:"افزودن زبان",deleteVariable:"حذف متغیر",save:"ذخیره",cancel:"لغو",languageOverride:"بازنویسی زبان",noLanguageOverride:"هیچ"}},co=["light","dark"],mo="dark",z=We({theme:localStorage.getItem("theme")||mo,locale:localStorage.getItem("locale")||ro,setTheme(a){this.theme=a,localStorage.setItem("theme",a)},setLocale(a){this.locale=a,localStorage.setItem("locale",a)}}),po={class:"d-flex justify-end mb-2"},fo={class:"d-flex align-center"},vo={class:"flex-grow-1"},go={class:"text-h6 mb-1"},bo={class:"text-caption text-medium-emphasis mb-0"},ho=O({__name:"NotebookCard",props:{notebook:{}},emits:["delete"],setup(a,{emit:e}){const t=a,o=e,n=Ze(),s=T(()=>Te[z.locale]),c=r=>{const f=Math.floor((new Date().getTime()-r.getTime())/(1e3*60*60));if(f<1)return s.value.justNow;if(f<24){const C=f===1?s.value.hourAgo:s.value.hoursAgo;return`${f} ${C}`}else{const C=Math.floor(f/24),x=C===1?s.value.dayAgo:s.value.daysAgo;return`${C} ${x}`}},i=()=>{n.push(`/notebooks/${t.notebook.id}`)},m=()=>{o("delete",t.notebook.id)};return(r,g)=>(p(),w(J,{class:"notebook-card",hover:"",onClick:i},{default:u(()=>[l(q,{class:"pb-2"},{default:u(()=>[v("div",po,[l(vt,null,{activator:u(({props:f})=>[l(A,ft({icon:"mdi-dots-vertical",variant:"text",size:"small"},f,{onClick:g[0]||(g[0]=Nt(()=>{},["stop"]))}),null,16)]),default:u(()=>[l(Ye,null,{default:u(()=>[l(de,{onClick:m},{default:u(()=>[l(me,null,{default:u(()=>[k(h(s.value.delete),1)]),_:1})]),_:1})]),_:1})]),_:1})]),v("div",fo,[l(F,{icon:"mdi-notebook-outline",size:"large",color:"primary",class:"me-3"}),v("div",vo,[v("h3",go,h(r.notebook.title),1),v("p",bo,h(s.value.lastEdited)+": "+h(c(r.notebook.lastModified||r.notebook.created)),1)])])]),_:1})]),_:1}))}}),H=(a,e)=>{const t=a.__vccOpts||a;for(const[o,n]of e)t[o]=n;return t},_o=H(ho,[["__scopeId","data-v-3a1233ae"]]),ko="NotebookDB",W="notebooks",yo=2,Ie=async()=>new Promise((a,e)=>{const t=indexedDB.open(ko,yo);t.onerror=()=>e(t.error),t.onsuccess=()=>a(t.result),t.onupgradeneeded=o=>{const n=t.result;if(n.objectStoreNames.contains(W)){if(o.oldVersion<2){const s=t.transaction;if(s){const c=s.objectStore(W);c.openCursor().onsuccess=i=>{const m=i.target.result;if(m){const r=m.value;r.created||(r.created=r.lastModified||Date.now(),m.update(r)),m.continue()}}}}}else{const s=n.createObjectStore(W,{keyPath:"id"});s.createIndex("lastModified","lastModified"),s.createIndex("created","created")}}}),Ue=async(a,e)=>{const t=await Ie();if(!t.objectStoreNames.contains(W))throw new Error("Database not properly initialized");return new Promise((o,n)=>{try{const s=t.transaction(W,"readwrite"),c=s.objectStore(W),i=c.get(a);i.onsuccess=()=>{const m=i.result,r=Date.now(),g={id:a,notebook:e,lastModified:r,created:(m==null?void 0:m.created)||r},f=c.put(g);f.onsuccess=()=>o(),f.onerror=()=>n(f.error)},i.onerror=()=>n(i.error),s.oncomplete=()=>t.close()}catch(s){n(s)}})},kt=async a=>{const e=await Ie();if(!e.objectStoreNames.contains(W))throw new Error("Database not properly initialized");return new Promise((t,o)=>{try{const n=e.transaction(W,"readonly"),c=n.objectStore(W).get(a);c.onsuccess=()=>{const i=c.result;if(!i){o(new Error("Notebook not found"));return}t(i.notebook)},c.onerror=()=>o(c.error),n.oncomplete=()=>e.close()}catch(n){o(n)}})},ke=async()=>{const a=await Ie();if(!a.objectStoreNames.contains(W))throw new Error("Database not properly initialized");return new Promise((e,t)=>{try{const o=a.transaction(W,"readonly"),s=o.objectStore(W).getAll();s.onsuccess=()=>{const i=s.result.map(m=>{var r;return{id:m.id,title:((r=m.notebook.metadata)==null?void 0:r.title)||"Untitled Notebook",lastModified:new Date(m.lastModified),created:new Date(m.created)}});i.sort((m,r)=>r.created.getTime()-m.created.getTime()),e(i)},s.onerror=()=>t(s.error),o.oncomplete=()=>a.close()}catch(o){t(o)}})},wo=async a=>{const e=await Ie();if(!e.objectStoreNames.contains(W))throw new Error("Database not properly initialized");return new Promise((t,o)=>{try{const n=e.transaction(W,"readwrite");n.objectStore(W).delete(a),n.oncomplete=()=>t(),n.onerror=()=>o(n.error)}catch(n){o(n)}})},xo=async()=>{try{const a=await fetch("./templates/blank.ipynb");if(!a.ok)throw new Error(`Failed to load blank notebook template: ${a.statusText}`);const e=await a.json();return e.cells.forEach(t=>{t.id||(t.id=le())}),e}catch(a){throw new Error(`Failed to load blank notebook template: ${a instanceof Error?a.message:String(a)}`)}},Co=async a=>new Promise((e,t)=>{const o=new FileReader;o.onload=async n=>{var s;try{const c=(s=n.target)==null?void 0:s.result,i=JSON.parse(c);if(!i.cells||!Array.isArray(i.cells))throw new Error("Invalid notebook format: missing or invalid cells array");i.metadata||(i.metadata={}),i.nbformat||(i.nbformat=4),i.nbformat_minor||(i.nbformat_minor=2),i.cells.forEach(r=>{r.id||(r.id=le()),r.metadata||(r.metadata={}),r.source||(r.source=[])}),i.metadata.title||(i.metadata.title=a.name.replace(".ipynb","")||"Imported Notebook");const m=le();await Ue(m,i),e(m)}catch(c){t(new Error(`Failed to parse notebook file: ${c instanceof Error?c.message:String(c)}`))}},o.onerror=()=>{t(new Error("Failed to read the selected file"))},o.readAsText(a)}),So=a=>{try{const e=new URL(a);return e.protocol==="http:"||e.protocol==="https:"}catch{return!1}},Vo=async a=>{if(!So(a))throw new Error("Please enter a valid URL (must start with http:// or https://)");try{const e=await fetch(a);if(!e.ok)throw new Error(`Failed to fetch notebook: ${e.status} ${e.statusText}`);const t=await e.text(),o=JSON.parse(t);if(!o.cells||!Array.isArray(o.cells))throw new Error("Invalid notebook format: missing or invalid cells array");if(o.metadata||(o.metadata={}),o.nbformat||(o.nbformat=4),o.nbformat_minor||(o.nbformat_minor=2),o.cells.forEach(s=>{s.id||(s.id=le()),s.metadata||(s.metadata={}),s.source||(s.source=[])}),!o.metadata.title){const c=new URL(a).pathname.split("/").pop()||"imported-notebook.ipynb";o.metadata.title=c.replace(".ipynb","")||"Imported Notebook"}const n=le();return await Ue(n,o),n}catch(e){throw e instanceof Error?e:new Error(`Failed to import notebook from URL: ${String(e)}`)}},Eo=O({__name:"UrlInputDialog",props:{show:{type:Boolean}},emits:["cancel","submit"],setup(a,{emit:e}){const t=a,o=e,n=T(()=>Te[z.locale]),s=E(""),c=E(),i=E(""),m=()=>{const f=s.value.trim();if(!f){i.value=n.value.urlDialogInvalidUrl;return}try{const C=new URL(f);if(C.protocol!=="http:"&&C.protocol!=="https:"){i.value=n.value.urlDialogInvalidUrl;return}}catch{i.value=n.value.urlDialogInvalidUrl;return}i.value="",o("submit",f),s.value=""},r=()=>{o("cancel"),s.value="",i.value=""};G(()=>t.show,async f=>{var C;f&&(await qe(),(C=c.value)==null||C.focus(),i.value="")});const g=f=>{f.key==="Enter"?(f.preventDefault(),m()):f.key==="Escape"&&(f.preventDefault(),r())};return G(s,()=>{i.value&&(i.value="")}),(f,C)=>(p(),w(Ee,{"model-value":f.show,"max-width":"500px",persistent:"",onKeydown:g},{default:u(()=>[l(J,null,{default:u(()=>[l(te,null,{default:u(()=>[k(h(n.value.urlDialogTitle),1)]),_:1}),l(q,null,{default:u(()=>[l(Z,{ref_key:"inputFieldRef",ref:c,modelValue:s.value,"onUpdate:modelValue":C[0]||(C[0]=x=>s.value=x),label:n.value.urlDialogLabel,"error-messages":i.value,variant:"outlined",density:"compact",placeholder:"https://example.com/notebook.ipynb",onKeydown:g},null,8,["modelValue","label","error-messages"])]),_:1}),l(_e,null,{default:u(()=>[l(Le),l(A,{color:"grey",variant:"text",onClick:r},{default:u(()=>[k(h(n.value.urlDialogCancel),1)]),_:1}),l(A,{color:"primary",variant:"text",onClick:m},{default:u(()=>[k(h(n.value.urlDialogOpen),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),Lo={class:"notebook-index"},No={class:"d-flex align-center mb-6 header-container"},$o={class:"text-h4 notebook-title flex-grow-1"},To={key:0,class:"text-center mt-8"},Do=O({__name:"NotebookIndex",setup(a){const e=T(()=>Te[z.locale]),t=T(()=>ne[z.locale].direction==="rtl"),o=E([]),n=E(!1),s=E({show:!1,title:"",message:""});Y(async()=>{try{const x=await ke();o.value=x}catch(x){console.error("Failed to load notebooks:",x)}});const c=async x=>{try{await wo(x);const V=o.value.findIndex(b=>b.id===x);V>-1&&o.value.splice(V,1),console.log("Notebook deleted successfully:",x)}catch(V){console.error("Failed to delete notebook:",V)}},i=async()=>{try{console.log("Create blank notebook");const x=await xo(),V=le();await Ue(V,x),console.log("Created notebook with id:",V);const b=await ke();o.value=b}catch(x){console.error("Failed to create blank notebook:",x)}},m=async()=>{try{const x=document.createElement("input");x.type="file",x.accept=".ipynb",x.style.display="none",x.onchange=async V=>{var D;const b=(D=V.target.files)==null?void 0:D[0];if(!b){console.log("No file selected");return}try{const M=await Co(b);console.log("Notebook imported successfully:",M);const j=await ke();o.value=j}catch(M){console.error("Failed to import notebook:",M),alert(`Failed to import notebook: ${M instanceof Error?M.message:"Unknown error"}`)}},document.body.appendChild(x),x.click(),document.body.removeChild(x)}catch(x){console.error("Failed to import notebook:",x),alert("Failed to import notebook. Please try again.")}},r=()=>{n.value=!0},g=async x=>{n.value=!1;try{console.log("Importing notebook from URL:",x);const V=await Vo(x);console.log("Notebook imported successfully:",V);const b=await ke();o.value=b}catch(V){console.error("Failed to import notebook from URL:",V),setTimeout(()=>{s.value={show:!0,title:e.value.urlDialogError,message:V instanceof Error?V.message:e.value.urlDialogErrorMessage}},150)}},f=()=>{n.value=!1},C=()=>{s.value.show=!1};return(x,V)=>(p(),y("div",Lo,[l(Ne,{fluid:"",class:"pa-4"},{default:u(()=>[v("div",No,[v("h1",$o,h(e.value.title),1),l(vt,null,{activator:u(({props:b})=>[l(A,ft({color:"primary"},b,{"prepend-icon":t.value?void 0:"mdi-plus","append-icon":t.value?"mdi-plus":void 0}),{default:u(()=>[k(h(e.value.addNotebook),1)]),_:2},1040,["prepend-icon","append-icon"])]),default:u(()=>[l(Ye,null,{default:u(()=>[l(de,{onClick:i},{default:u(()=>[l(me,null,{default:u(()=>[k(h(e.value.blank),1)]),_:1})]),_:1}),l(de,{onClick:m},{default:u(()=>[l(me,null,{default:u(()=>[k(h(e.value.fromFile),1)]),_:1})]),_:1}),l(de,{onClick:r},{default:u(()=>[l(me,null,{default:u(()=>[k(h(e.value.fromUrl),1)]),_:1})]),_:1})]),_:1})]),_:1})]),l($e,null,{default:u(()=>[(p(!0),y(Q,null,oe(o.value,b=>(p(),w(be,{key:b.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:u(()=>[l(_o,{notebook:b,onDelete:c},null,8,["notebook"])]),_:2},1024))),128))]),_:1}),o.value.length===0?(p(),y("div",To,[l(F,{icon:"mdi-notebook-outline",size:"64",color:"grey"}),V[1]||(V[1]=v("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No notebooks yet",-1)),V[2]||(V[2]=v("p",{class:"text-body-2 text-medium-emphasis"},"Create your first notebook to get started",-1))])):I("",!0)]),_:1}),l(Eo,{show:n.value,onSubmit:g,onCancel:f},null,8,["show"]),l(Ee,{modelValue:s.value.show,"onUpdate:modelValue":V[0]||(V[0]=b=>s.value.show=b),"max-width":"400px"},{default:u(()=>[l(J,null,{default:u(()=>[l(te,null,{default:u(()=>[k(h(s.value.title),1)]),_:1}),l(q,null,{default:u(()=>[v("p",null,h(s.value.message),1)]),_:1}),l(_e,null,{default:u(()=>[l(Le),l(A,{color:"primary",variant:"text",onClick:C},{default:u(()=>[k(h(e.value.urlDialogCancel),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),Io=H(Do,[["__scopeId","data-v-32f10594"]]),Uo={cells:[],metadata:{},nbformat:4,nbformat_minor:2},S=We({content:{},updated:null,clear(){this.updated=null,this.content=Uo},findCell(a){return this.content.cells?this.content.cells.find(e=>e.id===a):null},getSource(a){const e=this.findCell(a);return e?e.source:null},setSource(a,e){const t=this.findCell(a);t&&(e=e.map(o=>o+`
`),t.source=e,this.updated=Date.now())},getLocalizedSource(a,e){const t=this.findCell(a);if(!t)return;let o=t.source;return e===null||t.metadata.i18n&&t.metadata.i18n[e]&&(o=t.metadata.i18n[e]),o},setLocalizedSource(a,e,t){const o=this.findCell(a);o&&(t===null?this.setSource(a,e):(e=e.map(n=>n+`
`),o.metadata.i18n||(o.metadata.i18n={}),o.metadata.i18n[t]=e,this.updated=Date.now()))},parseGlobals(a,e){var n;if(e===null)return a;const t=(n=this.content.metadata)==null?void 0:n.globals;return t?a.map(s=>s.replace(/\{\{\s*(\w+)\s*\}\}/g,(c,i)=>{const m=t[i];if(!m)return c;const r=m[e]||m.default;return r===void 0?c:`${r}`})):a},clearOutputs(a){const e=this.findCell(a);e&&(e.outputs=[],this.updated=Date.now())},getOutputTypes(a){var o,n,s;let e=[];const t=this.findCell(a);return t&&(((o=t.outputs)==null?void 0:o.findIndex(c=>c.output_type==="execute_result"))!==-1&&e.push("result"),((n=t.outputs)==null?void 0:n.findIndex(c=>c.output_type==="stream"&&c.name==="stdout"))!==-1&&e.push("stdout"),((s=t.outputs)==null?void 0:s.findIndex(c=>c.output_type==="error"))!==-1&&e.push("error")),e},addStdout(a,e){const t=this.findCell(a);if(t){t.outputs||(t.outputs=[]);const o=t.outputs.findIndex(n=>n.output_type==="stream"&&n.name==="stdout");o!==-1?(t.outputs[o].text||(t.outputs[o].text=[]),t.outputs[o].text.push(e)):t.outputs.push({output_type:"stream",name:"stdout",text:[e]}),this.updated=Date.now()}},getStdout(a){var o;let e="";const t=this.findCell(a);return t&&((o=t.outputs)==null||o.forEach(n=>{var s;n.output_type==="stream"&&(e+=((s=n.text)==null?void 0:s.join(""))||"")})),e},setResult(a,e){const t=this.findCell(a);if(t){t.outputs||(t.outputs=[]);const o=t.outputs.findIndex(n=>n.output_type==="execute_result");if(o!==-1){const n=t.outputs[o].data||{};t.outputs[o].data={...n,...e}}else t.outputs.push({output_type:"execute_result",data:e});this.updated=Date.now()}},getResult(a){var o;let e={};const t=this.findCell(a);return t&&((o=t.outputs)==null||o.forEach(n=>{n.output_type==="execute_result"&&n.data&&(e=n.data)})),e},setError(a,e){const t=this.findCell(a);if(t){t.outputs||(t.outputs=[]);const o=Array.isArray(e)?e:e.split(`
`);t.outputs.push({output_type:"error",traceback:o}),this.updated=Date.now()}},getError(a){var o;let e="";const t=this.findCell(a);return t&&((o=t.outputs)==null||o.forEach(n=>{var s;n.output_type==="error"&&(e+=((s=n.traceback)==null?void 0:s.join(""))||"")})),e},loadNotebook(a){a.cells&&(a.cells.forEach(e=>{(!e.id||typeof e.id!="string"||e.id.trim()==="")&&(e.id=le())}),this.content=a)},hasTag(a,e){const t=this.findCell(a);return!t||!t.metadata.tags?!1:t.metadata.tags.includes(e)},addTag(a,e){const t=this.findCell(a);t&&(t.metadata.tags||(t.metadata.tags=[]),t.metadata.tags.includes(e)||(t.metadata.tags.push(e),this.updated=Date.now()))},removeTag(a,e){const t=this.findCell(a);if(t&&t.metadata.tags){const o=t.metadata.tags.indexOf(e);o!==-1&&(t.metadata.tags.splice(o,1),this.updated=Date.now())}},toggleTag(a,e){this.hasTag(a,e)?this.removeTag(a,e):this.addTag(a,e)},getGlobals(){return this.content.metadata||(this.content.metadata={}),this.content.metadata.globals||(this.content.metadata.globals={}),this.content.metadata.globals},setGlobal(a,e){const t=this.getGlobals();t[a]=e,this.updated=Date.now()},deleteGlobal(a){const e=this.getGlobals();delete e[a],this.updated=Date.now()}}),Mo=2e3,Ao=2e3;function Ro(a){const e=E("idle"),t=E(null);let o=null;const n=async c=>{o&&clearTimeout(o),o=setTimeout(async()=>{try{console.log(`Auto-Save: Saving Notebook ${a}`),e.value="saving";const i=JSON.parse(JSON.stringify(c));await Ue(a,i),e.value="saved",t.value=new Date,console.log(`Auto-Save: Saved Notebook ${a}`),setTimeout(()=>{e.value==="saved"&&(e.value="idle")},Ao)}catch(i){console.error("Auto-Save: Failed:",i),e.value="error"}},Mo)},s=G(()=>S.updated,()=>{var c;S.updated!=null&&S.content&&((c=S.content.cells)==null?void 0:c.length)>0&&n(S.content)});return{saveStatus:e,lastSaved:t,stopWatcher:s}}const $=We({executionStatus:"idle",workerStatus:"initializing",runningCellId:null,interruptBuffer:null,fatalErrorTrace:"",inputStatus:"idle",inputPrompt:null,userInput:null,setInterruptBuffer(a){this.interruptBuffer=a},clearInterruptBuffer(){this.interruptBuffer&&(this.interruptBuffer[0]=0)},interruptExecution(){this.interruptBuffer&&(this.interruptBuffer[0]=2),this.executionStatus="idle"},setWorkerStatus(a){this.workerStatus=a},executeCell(a){this.executionStatus==="idle"&&this.workerStatus==="ready"&&(this.runningCellId=a,this.executionStatus="queued")},executionCompleted(){this.runningCellId=null,this.executionStatus="idle"},setFatalError(a){this.workerStatus="error",this.fatalErrorTrace=a},requestUserInput(a){this.inputStatus="waiting",this.userInput=null,this.inputPrompt=a},submitUserInput(a){this.inputStatus="submitted",this.userInput=a}}),Oo=["innerHTML"],Po=O({__name:"MarkdownCell",props:{cell:{},locale:{},editMode:{type:Boolean}},setup(a){const e=a,t=E("");G([()=>e.editMode,()=>e.locale],([c,i])=>{if(c){const m=S.getLocalizedSource(e.cell.id,i);t.value=m?m.join(""):""}},{immediate:!0});const o=c=>{const i=c.split(`
`);S.setLocalizedSource(e.cell.id,i,e.locale)},n=c=>c?bt.parse(c.join("")):"",s=T(()=>{const c=S.getLocalizedSource(e.cell.id,e.locale)||[];return S.parseGlobals(c,e.locale)});return(c,i)=>(p(),w(J,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:u(()=>[l(q,null,{default:u(()=>[c.editMode?(p(),w(Rt,{key:1,modelValue:t.value,"onUpdate:modelValue":[i[0]||(i[0]=m=>t.value=m),o],variant:"outlined","auto-grow":"",rows:"3","hide-details":"",class:"markdown-editor"},null,8,["modelValue"])):(p(),y("div",{key:0,innerHTML:n(s.value)},null,8,Oo))]),_:1})]),_:1}))}}),yt=H(Po,[["__scopeId","data-v-7b690760"]]),Bo=O({__name:"CodeControls",props:{id:{}},setup(a){const e=a,t=()=>{S.clearOutputs(e.id),$.executeCell(e.id)},o=()=>{S.clearOutputs(e.id)},n=()=>{$.interruptExecution()},s=T(()=>S.hasTag(e.id,"hide_code")),c=()=>{S.toggleTag(e.id,"hide_code")};return(i,m)=>(p(),y("div",null,[v("div",null,[l(xe,{rounded:"lg"},{default:u(()=>[l(A,{size:"32",icon:"mdi-play-outline",onClick:t,disabled:L($).executionStatus!=="idle"||L($).workerStatus!=="ready",loading:L($).workerStatus!=="ready","aria-label":"Run code"},null,8,["disabled","loading"]),l(A,{size:"32",icon:"mdi-stop",onClick:n,disabled:L($).executionStatus==="idle"||L($).runningCellId!==i.id,"aria-label":"Stop code"},null,8,["disabled"])]),_:1}),l(xe,{rounded:"lg",class:"pl-4"},{default:u(()=>[l(A,{size:"32",icon:"mdi-broom",onClick:o})]),_:1}),l(xe,{rounded:"lg",class:"pl-2"},{default:u(()=>[l(A,{size:"32",icon:s.value?"mdi-eye-off":"mdi-eye",onClick:c,"aria-label":s.value?"Show code":"Hide code"},null,8,["icon","aria-label"])]),_:1})])]))}}),ot="#2e3440",wt="#3b4252",at="#434c5e",ye="#4c566a",He="#e5e9f0",Je="#eceff4",Oe="#8fbcbb",lt="#88c0d0",Fo="#81a1c1",K="#5e81ac",zo="#bf616a",se="#d08770",Pe="#ebcb8b",nt="#a3be8c",jo="#b48ead",rt="#d30102",Xe=Je,Be=Xe,Ho="#ffffff",Fe=He,Jo=Xe,st=wt,Go=ge.theme({"&":{color:ot,backgroundColor:Ho},".cm-content":{caretColor:st,fontFamily:"JetBrainsMono, monospace"},".cm-cursor, .cm-dropCursor":{borderLeftColor:st},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Jo},".cm-panels":{backgroundColor:Xe,color:ye},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:`1px solid ${ye}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:He},".cm-activeLine":{backgroundColor:Be},".cm-selectionMatch":{backgroundColor:He},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${ye}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:Je},".cm-gutters":{backgroundColor:Je,color:ot,border:"none"},".cm-activeLineGutter":{backgroundColor:Be},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Fe},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Fe,borderBottomColor:Fe},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Be,color:ye}}},{dark:!1}),Wo=ht.define([{tag:d.keyword,color:K},{tag:[d.name,d.deleted,d.character,d.propertyName,d.macroName],color:se},{tag:[d.variableName],color:se},{tag:[d.function(d.variableName)],color:K},{tag:[d.labelName],color:Fo},{tag:[d.color,d.constant(d.name),d.standard(d.name)],color:K},{tag:[d.definition(d.name),d.separator],color:nt},{tag:[d.brace],color:Oe},{tag:[d.annotation],color:rt},{tag:[d.number,d.changed,d.annotation,d.modifier,d.self,d.namespace],color:lt},{tag:[d.typeName,d.className],color:Pe},{tag:[d.operator,d.operatorKeyword],color:nt},{tag:[d.tagName],color:jo},{tag:[d.squareBracket],color:zo},{tag:[d.angleBracket],color:se},{tag:[d.attributeName],color:Pe},{tag:[d.regexp],color:K},{tag:[d.quote],color:wt},{tag:[d.string],color:se},{tag:d.link,color:Oe,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[d.url,d.escape,d.special(d.string)],color:se},{tag:[d.meta],color:lt},{tag:[d.comment],color:at,fontStyle:"italic"},{tag:d.strong,fontWeight:"bold",color:K},{tag:d.emphasis,fontStyle:"italic",color:K},{tag:d.strikethrough,textDecoration:"line-through"},{tag:d.heading,fontWeight:"bold",color:K},{tag:d.special(d.heading1),fontWeight:"bold",color:K},{tag:d.heading1,fontWeight:"bold",color:K},{tag:[d.heading2,d.heading3,d.heading4],fontWeight:"bold",color:K},{tag:[d.heading5,d.heading6],color:K},{tag:[d.atom,d.bool,d.special(d.variableName)],color:se},{tag:[d.processingInstruction,d.inserted],color:Oe},{tag:[d.contentSeparator],color:Pe},{tag:d.invalid,color:at,borderBottom:`1px dotted ${rt}`}]),qo=[Go,_t(Wo)],xt="#2e3235",Ct="#505d64",Ge="#606f7a",Ve="#707d8b",Ko="#a0a4ae",Ce="#bdbdbd",Yo="#e0e0e0",Zo="#fdf6e3",ue="#ff5f52",Qo="#ff6e40",Xo="#fa5788",ee="#facf4e",it="#ffad42",fe="#56c8d8",ea="#7186f0",ze="#cf6edf",ta="#6abf69",ut="#99d066",ct="#4ebaaa",dt=ue,mt="#202325",we="#414b46",oa=xt,je=Ct,aa=Ct,pt=Ko,la=ge.theme({"&":{color:Ce,backgroundColor:oa},".cm-content":{caretColor:pt,fontFamily:"JetBrainsMono, monospace"},".cm-cursor, .cm-dropCursor":{borderLeftColor:pt},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:aa},".cm-panels":{backgroundColor:mt,color:Ve},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{outline:`1px solid ${ee}`,backgroundColor:"transparent"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:we},".cm-activeLine":{backgroundColor:we},".cm-selectionMatch":{backgroundColor:mt,outline:`1px solid ${ct}`},"&.cm-focused .cm-matchingBracket":{color:Yo,outline:`1px solid ${ct}`},"&.cm-focused .cm-nonmatchingBracket":{color:ue},".cm-gutters":{backgroundColor:xt,borderRight:"1px solid #4f5b66",color:Ge},".cm-activeLineGutter":{backgroundColor:we,color:Zo},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:je},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:je,borderBottomColor:je},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:we,color:Ve}}},{dark:!0}),na=ht.define([{tag:d.keyword,color:ze},{tag:[d.name,d.deleted,d.character,d.macroName],color:fe},{tag:[d.propertyName],color:ee},{tag:[d.variableName],color:Ce},{tag:[d.function(d.variableName)],color:fe},{tag:[d.labelName],color:ze},{tag:[d.color,d.constant(d.name),d.standard(d.name)],color:ee},{tag:[d.definition(d.name),d.separator],color:Xo},{tag:[d.brace],color:ze},{tag:[d.annotation],color:dt},{tag:[d.number,d.changed,d.annotation,d.modifier,d.self,d.namespace],color:it},{tag:[d.typeName,d.className],color:it},{tag:[d.operator,d.operatorKeyword],color:ea},{tag:[d.tagName],color:Qo},{tag:[d.squareBracket],color:ue},{tag:[d.angleBracket],color:Ge},{tag:[d.attributeName],color:Ce},{tag:[d.regexp],color:dt},{tag:[d.quote],color:ta},{tag:[d.string],color:ut},{tag:d.link,color:fe,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[d.url,d.escape,d.special(d.string)],color:ee},{tag:[d.meta],color:Ve},{tag:[d.comment],color:Ve,fontStyle:"italic"},{tag:d.monospace,color:Ce},{tag:d.strong,fontWeight:"bold",color:ue},{tag:d.emphasis,fontStyle:"italic",color:ut},{tag:d.strikethrough,textDecoration:"line-through"},{tag:d.heading,fontWeight:"bold",color:ee},{tag:d.heading1,fontWeight:"bold",color:ee},{tag:[d.heading2,d.heading3,d.heading4],fontWeight:"bold",color:ee},{tag:[d.heading5,d.heading6],color:ee},{tag:[d.atom,d.bool,d.special(d.variableName)],color:fe},{tag:[d.processingInstruction,d.inserted],color:ue},{tag:[d.contentSeparator],color:fe},{tag:d.invalid,color:Ge,borderBottom:`1px dotted ${ue}`}]),ra=[la,_t(na)],sa=["id"],ia=O({__name:"CodeEditor",props:{metadata:{},id:{},theme:{},editMode:{type:Boolean},locale:{}},setup(a){const e=a;let t=null,o=!1;const n=T(()=>{const s=S.getSource(e.id)||[];return e.editMode?s:S.parseGlobals(s,e.locale)});return Y(()=>{let s=qo;switch(e.theme){case"dark":s=ra;break}const c=to.create({doc:n.value?n.value.join(""):"",extensions:[ao,oo(),s,ge.lineWrapping,ge.updateListener.of(i=>{if(i.docChanged&&!o){const m=i.state.doc.toString();S.setSource(e.id,m.includes(`
`)?m.split(`
`):[m])}})]});t=new ge({state:c,parent:document.getElementById("code-editor-"+e.id)})}),G(()=>n.value,s=>{if(t&&s&&!o){const c=t.state.doc.toString(),i=s.join(""),m=c.replace(/\n+$/,""),r=i.replace(/\n+$/,"");m!==r&&(o=!0,t.dispatch({changes:{from:0,to:t.state.doc.length,insert:i}}),o=!1)}},{deep:!0}),(s,c)=>(p(),y("div",{id:`code-editor-${e.id}`},null,8,sa))}}),ua=O({__name:"Console",props:{stdout:{}},setup(a){const e=a,t=E(null),o=()=>{if(!t.value)return;const i=`${(e.stdout?e.stdout.split(`
`).length:1)*1.2+1.5}em`;t.value.style.height=i};return G(()=>e.stdout,()=>{o()},{immediate:!0}),Y(()=>{o()}),(n,s)=>(p(),y("textarea",{ref_key:"consoleRef",ref:t,class:"output-console",readonly:""},h(n.stdout),513))}}),ca=H(ua,[["__scopeId","data-v-43c05e2b"]]),da={class:"output-console",readonly:""},ma=O({__name:"Error",props:{stderr:{}},setup(a){return(e,t)=>(p(),y("textarea",da,h(e.stderr),1))}}),pa=H(ma,[["__scopeId","data-v-62cb5501"]]),fa=O({__name:"TextPlain",props:{value:{}},setup(a){const e=E(null);return(t,o)=>(p(),y("textarea",{ref_key:"consoleRef",ref:e,class:"output-console",readonly:""},h(Array.isArray(t.value)?t.value.join(""):t.value),513))}}),va=H(fa,[["__scopeId","data-v-6e2abbc4"]]),ga=["src"],ba=O({__name:"ImagePng",props:{value:{}},setup(a){return(e,t)=>(p(),y("img",{src:`data:image/png;base64,${e.value}`},null,8,ga))}}),ha=["src"],_a=O({__name:"ImageSvg",props:{value:{}},setup(a){return(e,t)=>(p(),y("img",{src:`data:image/svg+xml;charset=utf-8,${encodeURIComponent(e.value)}`},null,8,ha))}}),ka=O({__name:"Result",props:{value:{}},setup(a){return(e,t)=>(p(),y(Q,null,[e.value["image/svg+xml"]?(p(),w(_a,{key:0,value:e.value["image/svg+xml"]},null,8,["value"])):I("",!0),e.value["image/png"]?(p(),w(ba,{key:1,value:e.value["image/png"]},null,8,["value"])):I("",!0),e.value["text/plain"]?(p(),w(va,{key:2,value:e.value["text/plain"]},null,8,["value"])):I("",!0)],64))}});function ya(a){if(!a)return[];const e=[];return a.forEach((t,o)=>{const s=t.replace(/\n$/,"").trim();if(!s||s.startsWith("#"))return;const c=s.match(/^(\w+)\s*=\s*(.+?)\s*#\s*@param(.*)$/);if(!c)return;const[,i,m,r]=c;try{const g=wa(m),f=xa(r.trim()),C=Ca(g,f);e.push({name:i,value:g,type:C,config:f,lineNumber:o})}catch(g){console.warn(`Failed to parse parameter on line ${o+1}: ${t}`,g)}}),e}function wa(a){const e=a.trim();if(e==="True")return!0;if(e==="False")return!1;if(e==="None")return null;const t=e.match(/^["'](.*)["']$/);return t?t[1]:e.match(/^-?\d+\.?\d*$/)?e.includes(".")?parseFloat(e):parseInt(e,10):e}function xa(a){if(!a)return{};const e=a.match(/^\[(.+)\]$/);if(e)return{options:e[1].split(",").map(s=>{const c=s.trim(),i=c.match(/^["'](.*)["']$/);return i?i[1]:c})};const t=a.match(/^\{(.+)\}$/);if(t)try{const o=t[1],n={};return o.split(",").forEach(c=>{const[i,m]=c.split(":").map(r=>r.trim());if(i&&m){const r=i.replace(/["']/g,""),g=m.replace(/["']/g,"");r==="type"?n.type=g:(r==="min"||r==="max"||r==="step")&&(n[r]=parseFloat(g))}}),n}catch{return console.warn("Failed to parse config JSON:",a),{}}return{}}function Ca(a,e){return e.type==="slider"?"slider":e.type==="boolean"?"boolean":e.options&&e.options.length>0?"dropdown":typeof a=="boolean"?"boolean":"value"}function Sa(a,e,t){if(!a||e.lineNumber>=a.length)return a;const o=[...a],n=o[e.lineNumber],s=n.endsWith(`
`),i=n.replace(/\n$/,"").match(/^(\w+\s*=\s*)(.+?)(\s*#\s*@param.*)$/);if(i){const[,m,,r]=i,g=Va(t);o[e.lineNumber]=`${m}${g}${r}${s?`
`:""}`}return o}function Va(a){return typeof a=="boolean"?a?"True":"False":a==null?"None":typeof a=="string"?`"${a}"`:String(a)}const Ea={key:0,class:"parameter-controls mb-4"},La={class:"parameter-grid"},Na={key:1,class:"slider-container"},$a={class:"slider-layout"},Ta={key:3,class:"boolean-container"},Da=O({__name:"ParameterControls",props:{source:{},cellId:{}},emits:["parameter-changed"],setup(a,{emit:e}){const t=a,o=e,n=T(()=>ya(t.source)),s=(i,m)=>{if(!t.source)return;const r=Sa(t.source,i,m);o("parameter-changed",r)},c=i=>i.name.replace(/_/g," ").toLowerCase().replace(/\b\w/g,m=>m.toUpperCase());return(i,m)=>n.value.length>0?(p(),y("div",Ea,[l(J,{variant:"outlined",class:"pa-4"},{default:u(()=>[v("div",La,[(p(!0),y(Q,null,oe(n.value,r=>{var g,f,C,x;return p(),y("div",{key:r.name,class:"parameter-item"},[r.type==="value"?(p(),w(Z,{key:0,label:c(r),"model-value":r.value,"onUpdate:modelValue":V=>s(r,V),variant:"outlined",density:"compact","hide-details":""},null,8,["label","model-value","onUpdate:modelValue"])):r.type==="slider"?(p(),y("div",Na,[l(Ot,{class:"text-caption mb-1"},{default:u(()=>[k(h(c(r)),1)]),_:2},1024),v("div",$a,[l(Pt,{"model-value":r.value,"onUpdate:modelValue":V=>s(r,V),min:((g=r.config)==null?void 0:g.min)??0,max:((f=r.config)==null?void 0:f.max)??100,step:((C=r.config)==null?void 0:C.step)??1,"thumb-label":"",class:"slider-control","hide-details":""},null,8,["model-value","onUpdate:modelValue","min","max","step"]),l(Z,{"model-value":r.value,readonly:"",variant:"outlined",density:"compact",class:"value-display","hide-details":""},null,8,["model-value"])])])):r.type==="dropdown"?(p(),w(he,{key:2,label:c(r),"model-value":r.value,"onUpdate:modelValue":V=>s(r,V),items:((x=r.config)==null?void 0:x.options)||[],variant:"outlined",density:"compact","hide-details":""},null,8,["label","model-value","onUpdate:modelValue","items"])):r.type==="boolean"?(p(),y("div",Ta,[l(Bt,{"model-value":r.value,"onUpdate:modelValue":V=>s(r,V),label:c(r),color:"primary","hide-details":"",inset:""},null,8,["model-value","onUpdate:modelValue","label"])])):I("",!0)])}),128))])]),_:1})])):I("",!0)}}),Ia=H(Da,[["__scopeId","data-v-9ab33d5a"]]),St=O({__name:"CodeCell",props:{cell:{},theme:{},locale:{},editMode:{type:Boolean}},setup(a){const e=a;let t=[];t=S.getOutputTypes(e.cell.id);const o=()=>{if(t.indexOf("result")!==-1)return"result";if(t.indexOf("stdout")!==-1)return"stdout";if(t.indexOf("error")!==-1)return"error"},n=E("result");G(()=>e.cell.outputs,()=>{t=S.getOutputTypes(e.cell.id),n.value="none",n.value=o()||n.value},{deep:!0});const s=m=>{const r=S.findCell(e.cell.id);r&&(r.source=m,S.updated=Date.now())},c=T(()=>S.hasTag(e.cell.id,"hide_code")),i=T(()=>{const m=e.locale,r=S.getLocalizedSource(e.cell.id,m)||[];return S.parseGlobals(r,m)});return(m,r)=>(p(),y("div",null,[l(Ia,{source:i.value,"cell-id":m.cell.id,onParameterChanged:s},null,8,["source","cell-id"]),l(J,{"max-width":"800",variant:"elevated",elevation:"2",color:"surface-light",class:"mb-2 pt-2 pb-2 ma-auto rounded-lg"},{default:u(()=>[c.value?I("",!0):(p(),w(q,{key:0},{default:u(()=>[l(ia,{id:m.cell.id,metadata:m.cell.metadata,theme:e.theme,locale:e.locale,editMode:e.editMode},null,8,["id","metadata","theme","locale","editMode"])]),_:1})),l(_e,{class:"pl-4 pr-4 d-flex justify-space-between"},{default:u(()=>[l(Bo,{id:m.cell.id},null,8,["id"]),l(Ft,{modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=g=>n.value=g),class:"ml-auto"},{default:u(()=>[L(t).indexOf("result")!==-1?(p(),w(Ae,{key:0,value:"result",icon:"",size:"32",rounded:"lg","min-width":"48"},{default:u(()=>[l(F,{icon:"mdi-monitor"})]),_:1})):I("",!0),L(t).indexOf("stdout")!==-1?(p(),w(Ae,{key:1,value:"stdout",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:u(()=>[l(F,{icon:"mdi-console"})]),_:1})):I("",!0),L(t).indexOf("error")!==-1?(p(),w(Ae,{key:2,value:"error",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:u(()=>[l(F,{icon:"mdi-alert-circle-outline"})]),_:1})):I("",!0)]),_:1},8,["modelValue"])]),_:1}),$t(l(q,null,{default:u(()=>[l(zt,{modelValue:n.value,"onUpdate:modelValue":r[1]||(r[1]=g=>n.value=g),direction:"vertical"},{default:u(()=>[l(Re,{value:"result"},{default:u(()=>[l(ka,{value:L(S).getResult(m.cell.id)},null,8,["value"])]),_:1}),l(Re,{value:"stdout",direction:"vertical"},{default:u(()=>[l(ca,{stdout:L(S).getStdout(m.cell.id)},null,8,["stdout"])]),_:1}),l(Re,{value:"error",direction:"vertical"},{default:u(()=>[l(pa,{stderr:L(S).getError(m.cell.id)},null,8,["stderr"])]),_:1})]),_:1},8,["modelValue"])]),_:1},512),[[Tt,e.cell.outputs?e.cell.outputs.length>0:!1]])]),_:1})]))}}),Ua={key:1,class:"video-container"},Ma={key:0,class:"video-iframe-container"},Aa=["src","width","height"],Ra={key:1,class:"video-fallback"},Oa={class:"text-body-2 mb-4"},Pa={class:"text-caption mt-2 text-grey"},Ba={key:2,class:"video-player-container"},Fa={key:2,class:"text-center pa-4"},za=O({__name:"VideoCell",props:{cell:{},locale:{}},setup(a){const e=a,t=E(null),o=E(null),n=E(null),s=E(!1);E(!1);const c=b=>{const D=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,/youtube\.com\/v\/([^&\n?#]+)/];for(const M of D){const j=b.match(M);if(j)return j[1]}return null},i=b=>{const D=[/vimeo\.com\/(\d+)/,/player\.vimeo\.com\/video\/(\d+)/];for(const M of D){const j=b.match(M);if(j)return j[1]}return null},m=b=>{const D=b.url,M=c(D);if(M)return{url:`https://www.youtube.com/embed/${M}`,provider:"youtube",isEmbed:!0};const j=i(D);return j?{url:`https://player.vimeo.com/video/${j}`,provider:"vimeo",isEmbed:!0}:{url:D,provider:"direct",isEmbed:!1}},r=()=>{try{const b=S.getLocalizedSource(e.cell.id,e.locale);if(!b||b.length===0)throw new Error("No video configuration found");const D=b.join("").trim(),M=JSON.parse(D);if(!M.url)throw new Error("Video URL is required");o.value={controls:!0,autoplay:!1,width:"100%",height:"auto",loop:!1,muted:!1,...M},n.value=m(M),t.value=null}catch(b){t.value=b instanceof Error?b.message:"Invalid video configuration",o.value=null,n.value=null}},g=T(()=>{if(!o.value||!n.value)return{};const b={controls:o.value.controls,autoplay:o.value.autoplay,loop:o.value.loop,muted:o.value.muted,fluid:!0,responsive:!0,playbackRates:[.5,1,1.25,1.5,2],plugins:{}};return o.value.poster&&(b.poster=o.value.poster),n.value.provider==="direct"&&(b.sources=[{src:n.value.url,type:"video/mp4"}]),b}),f=T(()=>{var b;return((b=n.value)==null?void 0:b.isEmbed)||!1}),C=T(()=>{if(!n.value||!o.value)return"";const b=new URL(n.value.url);return o.value.autoplay&&b.searchParams.set("autoplay","1"),o.value.controls||b.searchParams.set("controls","0"),o.value.loop&&b.searchParams.set("loop","1"),o.value.muted&&b.searchParams.set("muted","1"),b.toString()}),x=()=>{s.value=!0},V=()=>{var b;(b=o.value)!=null&&b.url&&window.open(o.value.url,"_blank")};return Y(()=>{var b;r(),((b=n.value)==null?void 0:b.provider)==="vimeo"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&setTimeout(()=>{s.value||(s.value=!0)},2e3)}),G(()=>e.locale,()=>{r()}),(b,D)=>(p(),w(J,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:u(()=>[l(q,null,{default:u(()=>[t.value?(p(),w(ae,{key:0,type:"error",variant:"tonal",text:t.value,class:"mb-4"},null,8,["text"])):o.value&&n.value?(p(),y("div",Ua,[f.value&&!s.value?(p(),y("div",Ma,[v("iframe",{src:C.value,width:o.value.width,height:o.value.height==="auto"?"315":o.value.height,frameborder:"0",allowfullscreen:"",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",class:"video-iframe",onError:x},null,40,Aa)])):f.value&&s.value?(p(),y("div",Ra,[l(J,{variant:"outlined",class:"pa-6 text-center"},{default:u(()=>[l(F,{size:"64",color:"grey-darken-1",class:"mb-4"},{default:u(()=>D[0]||(D[0]=[k("mdi-video-off")])),_:1,__:[0]}),D[3]||(D[3]=v("h3",{class:"text-h6 mb-2"},"Video Embedding Restricted",-1)),v("p",Oa,[k(" This "+h(n.value.provider)+" video cannot be embedded in this environment. ",1),D[1]||(D[1]=v("br",null,null,-1)),D[2]||(D[2]=k(" This is common when running on localhost due to CORS restrictions. "))]),l(A,{color:"primary",variant:"elevated",onClick:V,"prepend-icon":"mdi-open-in-new"},{default:u(()=>[k(" Watch on "+h(n.value.provider==="youtube"?"YouTube":"Vimeo"),1)]),_:1}),v("p",Pa," URL: "+h(o.value.url),1)]),_:1,__:[3]})])):(p(),y("div",Ba,[l(L(lo),{options:g.value,class:"video-player"},null,8,["options"])]))])):(p(),y("div",Fa,[l(Se,{indeterminate:"",color:"primary"}),D[4]||(D[4]=v("p",{class:"mt-2 text-body-2"},"Loading video...",-1))]))]),_:1})]),_:1}))}}),Vt=H(za,[["__scopeId","data-v-5fea9b43"]]);function ja(a){return new URLSearchParams(window.location.search).get(a)}async function Ha(a,e,t){var o;try{const n={model:a.model,messages:e,temperature:a.temperature??.7,stream:!1};a.max_tokens&&a.max_tokens!==-1&&(n.max_tokens=a.max_tokens),console.log("Sending request to:",a.url),console.log("Request body:",JSON.stringify(n,null,2));const s={"Content-Type":"application/json",Accept:"application/json"};t&&(s.Authorization=`Bearer ${t}`,console.log("Using API key authentication"));const c=await fetch(a.url,{method:"POST",headers:s,body:JSON.stringify(n)});if(console.log("Response status:",c.status),console.log("Response headers:",c.headers),!c.ok){let r=`HTTP ${c.status}: ${c.statusText}`;try{r=((o=(await c.json()).error)==null?void 0:o.message)||r}catch{}throw new Error(r)}const i=await c.json();if(!i.choices||i.choices.length===0)throw new Error("No response choices returned from API");const m=i.choices[0].message;if(!m||!m.content)throw new Error("Invalid response format from API");return{role:"assistant",content:m.content}}catch(n){throw n instanceof TypeError&&n.message.includes("fetch")?new Error("Unable to connect to the AI service. Please check if LM Studio is running and accessible."):n instanceof Error?n:new Error("An unexpected error occurred while communicating with the AI service.")}}const Ja={key:1,class:"chat-container"},Ga={class:"text-body-2"},Wa={class:"message-role"},qa=["innerHTML"],Ka=["innerHTML"],Ya={key:1,class:"message-content"},Za={key:0,class:"message-wrapper assistant"},Qa={class:"message-bubble assistant"},Xa={class:"message-content"},el={key:1,class:"empty-chat"},tl={class:"chat-input-area"},ol={class:"chat-config-info mt-3"},al={class:"config-chips"},ll={class:"chat-actions"},nl={key:2,class:"text-center pa-4"},rl=O({__name:"ChatCell",props:{cell:{},locale:{}},setup(a){const e=a,t=E(null),o=E(null),n=E(""),s=E(!1),c=E(),i=E(null),m=()=>{try{const N=S.getLocalizedSource(e.cell.id,e.locale);if(!N||N.length===0)throw new Error("No chat configuration found");const _=N.join("").trim(),P=JSON.parse(_);if(!P.url)throw new Error("Chat URL is required");if(!P.model)throw new Error("Model name is required");if(!P.messages||!Array.isArray(P.messages))throw new Error("Messages array is required");o.value={temperature:.7,max_tokens:-1,stream:!1,...P},i.value=ja("OPENAI_API_KEY"),i.value&&console.log("Found OPENAI_API_KEY in URL parameters"),t.value=null}catch(N){t.value=N instanceof Error?N.message:"Invalid chat configuration",o.value=null}},r=T(()=>o.value?o.value.messages.filter(N=>N.role!=="system"):[]),g=T(()=>o.value?o.value.messages.find(N=>N.role==="system"):null),f=N=>{const _=/<think>([\s\S]*?)<\/think>/gi;let P=null,X=N;const re=N.match(_);return re&&re.length>0&&(P=re.map(Me=>Me.replace(/<\/?think>/gi,"").trim()).join(`

`),X=N.replace(_,"").trim()),{thinkingContent:P,mainContent:X,hasThinking:!!P}},C=N=>{try{const _=bt(N,{breaks:!0,gfm:!0});return typeof _=="string"?_:N}catch(_){return console.error("Failed to render markdown:",_),N}},x=N=>{const _=f(N.content);return{..._,renderedMain:N.role==="assistant"?C(_.mainContent):_.mainContent,renderedThinking:_.thinkingContent?C(_.thinkingContent):null}},V=async()=>{await qe(),c.value&&(c.value.scrollTop=c.value.scrollHeight)},b=()=>{if(o.value)try{const _=JSON.stringify(o.value,null,2).split(`
`);S.setSource(e.cell.id,_)}catch(N){console.error("Failed to save chat configuration:",N)}},D=async()=>{if(!n.value.trim()||!o.value||s.value)return;const N={role:"user",content:n.value.trim()};o.value.messages.push(N);const _=n.value.trim();n.value="",b(),await V(),s.value=!0,t.value=null;try{const P=await Ha(o.value,o.value.messages,i.value);o.value.messages.push(P),b(),await V()}catch(P){const X=P instanceof Error?P.message:"Failed to get response from AI";t.value=X,o.value.messages.pop(),b(),n.value=_}finally{s.value=!1}},M=()=>{o.value&&(o.value.messages=o.value.messages.filter(N=>N.role==="system"),b())},j=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),D())};return Y(()=>{m()}),G(()=>e.locale,()=>{m()}),(N,_)=>(p(),w(J,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:u(()=>[l(q,null,{default:u(()=>[t.value?(p(),w(ae,{key:0,type:"error",variant:"tonal",text:t.value,class:"mb-4"},null,8,["text"])):o.value?(p(),y("div",Ja,[g.value?(p(),w(ae,{key:0,type:"info",variant:"tonal",density:"compact",class:"mb-4"},{default:u(()=>[_[1]||(_[1]=v("div",{class:"text-caption text-grey-darken-1 mb-1"},"System Message:",-1)),v("div",Ga,h(g.value.content),1)]),_:1,__:[1]})):I("",!0),v("div",{class:"chat-messages",ref_key:"messagesContainer",ref:c},[(p(!0),y(Q,null,oe(r.value,(P,X)=>(p(),y("div",{key:X,class:ce(["message-wrapper",P.role])},[v("div",{class:ce(["message-bubble",P.role])},[v("div",Wa,h(P.role),1),P.role==="assistant"?(p(),y(Q,{key:0},[x(P).hasThinking?(p(),w(jt,{key:0,variant:"accordion",class:"thinking-panel mb-2"},{default:u(()=>[l(Ht,null,{default:u(()=>[l(Jt,{class:"thinking-title"},{default:u(()=>[l(F,{start:"",size:"small"},{default:u(()=>_[2]||(_[2]=[k("mdi-brain")])),_:1,__:[2]}),_[3]||(_[3]=v("span",{class:"text-caption"},"Thinking Process",-1))]),_:1,__:[3]}),l(Gt,null,{default:u(()=>[v("div",{class:"thinking-content markdown-content",innerHTML:x(P).renderedThinking},null,8,qa)]),_:2},1024)]),_:2},1024)]),_:2},1024)):I("",!0),v("div",{class:"message-content markdown-content",innerHTML:x(P).renderedMain},null,8,Ka)],64)):(p(),y("div",Ya,h(P.content),1))],2)],2))),128)),s.value?(p(),y("div",Za,[v("div",Qa,[_[5]||(_[5]=v("div",{class:"message-role"},"assistant",-1)),v("div",Xa,[l(Se,{size:"16",width:"2",indeterminate:"",class:"mr-2"}),_[4]||(_[4]=k(" Thinking... "))])])])):I("",!0),r.value.length===0&&!s.value?(p(),y("div",el,[l(F,{size:"48",color:"grey-lighten-1",class:"mb-2"},{default:u(()=>_[6]||(_[6]=[k("mdi-chat-outline")])),_:1,__:[6]}),_[7]||(_[7]=v("p",{class:"text-body-2 text-grey"},"Start a conversation...",-1))])):I("",!0)],512),v("div",tl,[l(Z,{modelValue:n.value,"onUpdate:modelValue":_[0]||(_[0]=P=>n.value=P),placeholder:"Type your message...",variant:"outlined",density:"comfortable","hide-details":"",disabled:s.value,onKeypress:j,class:"chat-input"},{"append-inner":u(()=>[l(A,{icon:"mdi-send",size:"small",color:"primary",variant:"text",disabled:!n.value.trim()||s.value,onClick:D},null,8,["disabled"])]),_:1},8,["modelValue","disabled"])]),v("div",ol,[v("div",al,[l(ie,{size:"small",variant:"outlined",class:"mr-2"},{default:u(()=>[l(F,{start:""},{default:u(()=>_[8]||(_[8]=[k("mdi-server")])),_:1,__:[8]}),k(" "+h(o.value.model),1)]),_:1}),l(ie,{size:"small",variant:"outlined",class:"mr-2"},{default:u(()=>[l(F,{start:""},{default:u(()=>_[9]||(_[9]=[k("mdi-thermometer")])),_:1,__:[9]}),k(" T: "+h(o.value.temperature),1)]),_:1}),l(ie,{size:"small",variant:"outlined",class:"mr-2"},{default:u(()=>[l(F,{start:""},{default:u(()=>_[10]||(_[10]=[k("mdi-counter")])),_:1,__:[10]}),k(" Max: "+h(o.value.max_tokens===-1?"∞":o.value.max_tokens),1)]),_:1}),i.value?(p(),w(ie,{key:0,size:"small",variant:"outlined",color:"success",class:"mr-2"},{default:u(()=>[l(F,{start:""},{default:u(()=>_[11]||(_[11]=[k("mdi-key")])),_:1,__:[11]}),_[12]||(_[12]=k(" Authenticated "))]),_:1,__:[12]})):I("",!0)]),v("div",ll,[r.value.length>0?(p(),w(A,{key:0,size:"small",variant:"outlined",color:"warning","prepend-icon":"mdi-broom",onClick:M,disabled:s.value},{default:u(()=>_[13]||(_[13]=[k(" Clear Chat ")])),_:1,__:[13]},8,["disabled"])):I("",!0)])])])):(p(),y("div",nl,[l(Se,{indeterminate:"",color:"primary"}),_[14]||(_[14]=v("p",{class:"mt-2 text-body-2"},"Loading chat...",-1))]))]),_:1})]),_:1}))}}),Et=H(rl,[["__scopeId","data-v-1ffdee27"]]),Lt=O({__name:"InputDialog",props:{locale:{}},setup(a){const e=a,t=T(()=>De[e.locale||"en-US"]),o=E(""),n=E(),s=T({get:()=>$.inputStatus==="waiting",set:r=>{r||($.inputStatus="idle")}}),c=()=>{$.submitUserInput(o.value),o.value=""},i=()=>{$.submitUserInput(""),o.value=""};G(()=>s.value,async r=>{var g;r&&(await qe(),(g=n.value)==null||g.focus())});const m=r=>{r.key==="Enter"?(r.preventDefault(),c()):r.key==="Escape"&&(r.preventDefault(),i())};return(r,g)=>(p(),w(Ee,{modelValue:s.value,"onUpdate:modelValue":g[1]||(g[1]=f=>s.value=f),"max-width":"400px",persistent:"",onKeydown:m},{default:u(()=>[l(J,null,{default:u(()=>[l(te,null,{default:u(()=>[k(h(L($).inputPrompt||t.value.inputDialogTitle),1)]),_:1}),l(q,null,{default:u(()=>[l(Z,{ref_key:"inputFieldRef",ref:n,modelValue:o.value,"onUpdate:modelValue":g[0]||(g[0]=f=>o.value=f),label:t.value.inputDialogLabel,variant:"outlined",density:"compact",onKeydown:m},null,8,["modelValue","label"])]),_:1}),l(_e,null,{default:u(()=>[l(Le),l(A,{color:"grey",variant:"text",onClick:i},{default:u(()=>[k(h(t.value.inputDialogCancel),1)]),_:1}),l(A,{color:"primary",variant:"text",onClick:c},{default:u(()=>[k(h(t.value.inputDialogSubmit),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),sl={class:"pa-3"},il={class:"pa-3"},ul={key:0,class:"pa-4 h-100"},cl={class:"d-flex align-center"},dl={class:"mb-4"},ml={key:1,class:"pa-4 text-center"},pl=O({__name:"GlobalsDialog",props:{locale:{},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(a,{emit:e}){const t=a,o=e,n=T(()=>De[t.locale]),s=T({get:()=>t.modelValue,set:U=>o("update:modelValue",U)}),c=E({}),i=E(null),m=E(""),r=E(!1),g=T(()=>Object.keys(c.value).sort()),f=T(()=>i.value?c.value[i.value]||{}:null),C=T(()=>f.value?Object.keys(f.value).filter(U=>U!=="default"):[]),x=T(()=>{const U=Object.keys(ne),R=C.value;return U.filter(B=>!R.includes(B))}),V=()=>{c.value=JSON.parse(JSON.stringify(S.getGlobals())),g.value.length>0&&!i.value&&(i.value=g.value[0])},b=U=>{i.value=U,r.value=!1},D=()=>{r.value=!0,m.value="",i.value=null},M=()=>{m.value.trim()&&/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(m.value)&&(c.value[m.value]||(c.value[m.value]={default:""},i.value=m.value,r.value=!1,m.value=""))},j=()=>{if(!i.value)return;delete c.value[i.value];const U=g.value;U.length>0?i.value=U[0]:i.value=null},N=U=>{!i.value||!U||(c.value[i.value]||(c.value[i.value]={}),c.value[i.value][U]="")},_=U=>{!i.value||U==="default"||delete c.value[i.value][U]},P=U=>{!i.value||!U.trim()||/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(U)&&U!==i.value&&(c.value[U]||(c.value[U]=c.value[i.value],delete c.value[i.value],i.value=U))},X=()=>{Object.entries(c.value).forEach(([R,B])=>{S.setGlobal(R,B)});const U=S.getGlobals();Object.keys(U).forEach(R=>{c.value[R]||S.deleteGlobal(R)}),re()},re=()=>{s.value=!1,i.value=null,r.value=!1},Me=U=>{var R;return U==="default"?"Default":((R=ne[U])==null?void 0:R.name)||U};return G(()=>t.modelValue,U=>{U&&V()}),(U,R)=>(p(),w(Ee,{modelValue:s.value,"onUpdate:modelValue":R[4]||(R[4]=B=>s.value=B),"max-width":"900px",persistent:""},{default:u(()=>[l(J,{height:"700px"},{default:u(()=>[l(te,{class:"d-flex align-center"},{default:u(()=>[l(F,{class:"me-2"},{default:u(()=>R[5]||(R[5]=[k("mdi-variable")])),_:1,__:[5]}),k(" "+h(n.value.globalsDialogTitle),1)]),_:1}),l(q,{class:"pa-0"},{default:u(()=>[l($e,{"no-gutters":"",style:{height:"580px"}},{default:u(()=>[l(be,{cols:"4",class:"border-e"},{default:u(()=>[v("div",sl,[r.value?(p(),w(Z,{key:0,modelValue:m.value,"onUpdate:modelValue":R[1]||(R[1]=B=>m.value=B),label:n.value.variableName,variant:"outlined",density:"compact",onKeydown:[et(M,["enter"]),R[2]||(R[2]=et(B=>r.value=!1,["escape"]))],autofocus:""},{"append-inner":u(()=>[l(A,{icon:"mdi-check",size:"small",variant:"text",onClick:M}),l(A,{icon:"mdi-close",size:"small",variant:"text",onClick:R[0]||(R[0]=B=>r.value=!1)})]),_:1},8,["modelValue","label"])):I("",!0)]),l(Ye,{density:"compact",class:"px-2"},{default:u(()=>[(p(!0),y(Q,null,oe(g.value,B=>(p(),w(de,{key:B,active:i.value===B,onClick:pe=>b(B),rounded:""},{default:u(()=>[l(me,null,{default:u(()=>[k(h(B),1)]),_:2},1024)]),_:2},1032,["active","onClick"]))),128))]),_:1}),v("div",il,[l(A,{onClick:D,block:"",variant:"outlined","prepend-icon":"mdi-plus",disabled:r.value},{default:u(()=>[k(h(n.value.addVariable),1)]),_:1},8,["disabled"])])]),_:1}),l(be,{cols:"8"},{default:u(()=>[i.value?(p(),y("div",ul,[v("div",cl,[l(Z,{"model-value":i.value,label:n.value.variableName,variant:"outlined",density:"compact",class:"me-2","onUpdate:modelValue":P},null,8,["model-value","label"]),l(A,{icon:"mdi-delete",color:"error",variant:"outlined",size:"small",style:{"margin-top":"-20px"},onClick:j})]),l(Z,{modelValue:c.value[i.value].default,"onUpdate:modelValue":R[3]||(R[3]=B=>c.value[i.value].default=B),label:n.value.defaultValue,variant:"outlined",density:"compact",class:"mb-4"},null,8,["modelValue","label"]),v("div",dl,[R[6]||(R[6]=v("h4",{class:"text-subtitle-1 mb-2"},"Locale Values",-1)),(p(!0),y(Q,null,oe(C.value,B=>(p(),y("div",{key:B,class:"d-flex align-center mb-2"},[l(ie,{size:"small",class:"me-2",style:{"min-width":"100px"}},{default:u(()=>[k(h(B),1)]),_:2},1024),l(Z,{modelValue:c.value[i.value][B],"onUpdate:modelValue":pe=>c.value[i.value][B]=pe,variant:"outlined",density:"compact",class:"me-2","hide-details":""},null,8,["modelValue","onUpdate:modelValue"]),l(A,{icon:"mdi-close",size:"small",variant:"text",onClick:pe=>_(B)},null,8,["onClick"])]))),128))]),x.value.length>0?(p(),w(he,{key:0,items:x.value,label:n.value.addLocale,variant:"outlined",density:"compact","onUpdate:modelValue":N},{item:u(({props:B,item:pe})=>[l(de,Dt(It(B)),{default:u(()=>[l(me,null,{default:u(()=>[k(h(Me(pe.value)),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["items","label"])):I("",!0)])):r.value?I("",!0):(p(),y("div",ml,[l(F,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:u(()=>R[7]||(R[7]=[k("mdi-variable")])),_:1,__:[7]}),R[8]||(R[8]=v("p",{class:"text-grey"},"Select a variable to edit, or add a new one.",-1))]))]),_:1})]),_:1})]),_:1}),l(_e,null,{default:u(()=>[l(Le),l(A,{onClick:re},{default:u(()=>[k(h(n.value.cancel),1)]),_:1}),l(A,{onClick:X,color:"primary"},{default:u(()=>[k(h(n.value.save),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),fl=H(pl,[["__scopeId","data-v-46213e9d"]]),vl={class:"editor-container"},gl={class:"d-flex align-center flex-column"},bl={class:"d-flex align-center gap-2 mb-2"},hl=O({__name:"Editor",props:{id:{},theme:{},locale:{}},setup(a){const e=a,t=E("default"),o=T(()=>t.value&&t.value!=="default"?t.value:t.value&&t.value==="default"?null:e.locale),n=T(()=>De[e.locale]),s=E(!1),c=T(()=>{const i=[{value:"default",title:n.value.noLanguageOverride}];return Object.entries(ne).forEach(([m,r])=>{i.push({value:m,title:r.name})}),i});return(i,m)=>(p(),y("div",vl,[l(ve,null,{default:u(()=>[L($).workerStatus=="initializing"?(p(),w(ae,{key:0,text:n.value.notebookStarting,type:"info",variant:"tonal",density:"compact"},null,8,["text"])):I("",!0)]),_:1}),l(ve,null,{default:u(()=>[L($).workerStatus=="error"?(p(),w(ae,{key:0,text:`${n.value.notebookStartError} ${L($).fatalErrorTrace}`,type:"error",variant:"tonal",density:"compact"},null,8,["text"])):I("",!0)]),_:1}),l(ve,null,{default:u(()=>[v("div",gl,[v("div",bl,[l(he,{modelValue:t.value,"onUpdate:modelValue":m[0]||(m[0]=r=>t.value=r),items:c.value,label:n.value.languageOverride,density:"compact",variant:"outlined",style:{"min-width":"150px"},"hide-details":""},null,8,["modelValue","items","label"]),l(xe,{divided:""},{default:u(()=>[l(A,{icon:"mdi-variable",onClick:m[1]||(m[1]=r=>s.value=!0)})]),_:1})])])]),_:1}),(p(!0),y(Q,null,oe(L(S).content.cells,r=>{var g,f;return p(),y("div",null,[r.cell_type==="markdown"?(p(),w(L(yt),{key:0,cell:r,metadata:r.metadata,locale:o.value,editMode:!0},null,8,["cell","metadata","locale"])):I("",!0),r.cell_type==="code"?(p(),w(L(St),{key:1,cell:r,theme:e.theme,locale:o.value,editMode:!0},null,8,["cell","theme","locale"])):I("",!0),r.cell_type==="raw"&&((g=r.metadata.tags)!=null&&g.includes("video"))?(p(),w(L(Vt),{key:2,cell:r,locale:o.value},null,8,["cell","locale"])):I("",!0),r.cell_type==="raw"&&((f=r.metadata.tags)!=null&&f.includes("chat"))?(p(),w(L(Et),{key:3,cell:r,locale:o.value},null,8,["cell","locale"])):I("",!0)])}),256)),l(Lt,{locale:e.locale},null,8,["locale"]),l(fl,{modelValue:s.value,"onUpdate:modelValue":m[2]||(m[2]=r=>s.value=r),locale:e.locale},null,8,["modelValue","locale"])]))}}),_l=H(hl,[["__scopeId","data-v-bca9abeb"]]),kl={class:"viewer-container"},yl=O({__name:"Viewer",props:{id:{},theme:{},locale:{}},setup(a){const e=a,t=T(()=>De[e.locale]);return(o,n)=>(p(),y("div",kl,[l(ve,null,{default:u(()=>[L($).workerStatus=="initializing"?(p(),w(ae,{key:0,text:t.value.notebookStarting,type:"info",variant:"tonal",density:"compact"},null,8,["text"])):I("",!0)]),_:1}),l(ve,null,{default:u(()=>[L($).workerStatus=="error"?(p(),w(ae,{key:0,text:`${t.value.notebookStartError} ${L($).fatalErrorTrace}`,type:"error",variant:"tonal",density:"compact"},null,8,["text"])):I("",!0)]),_:1}),(p(!0),y(Q,null,oe(L(S).content.cells,s=>{var c,i;return p(),y("div",null,[s.cell_type==="markdown"?(p(),w(L(yt),{key:0,cell:s,metadata:s.metadata,locale:e.locale,editMode:!1},null,8,["cell","metadata","locale"])):I("",!0),s.cell_type==="code"?(p(),w(L(St),{key:1,cell:s,theme:e.theme,locale:e.locale,editMode:!1},null,8,["cell","theme","locale"])):I("",!0),s.cell_type==="raw"&&((c=s.metadata.tags)!=null&&c.includes("video"))?(p(),w(L(Vt),{key:2,cell:s,locale:e.locale},null,8,["cell","locale"])):I("",!0),s.cell_type==="raw"&&((i=s.metadata.tags)!=null&&i.includes("chat"))?(p(),w(L(Et),{key:3,cell:s,locale:e.locale},null,8,["cell","locale"])):I("",!0)])}),256)),l(Lt,{locale:e.locale},null,8,["locale"])]))}}),wl=H(yl,[["__scopeId","data-v-17948943"]]),xl=O({__name:"PyodideProvider",props:{notebookId:{},locale:{}},setup(a){const e=a;let t;return Y(async()=>{console.log("PyodideProvider: Starting new worker for "+e.notebookId),$.setWorkerStatus("initializing"),t=new Worker(new URL("/sendai/assets/PyodideWorker-DCpjE9aV.js",import.meta.url),{type:"module"}),t.postMessage({type:"initialize"}),t.onmessage=async o=>{const{type:n,text:s,result:c,message:i,error:m,interruptBuffer:r}=o.data;switch(n){case"initialized":console.log("PyodideProvider: Pyodide is initialized"),$.setWorkerStatus("ready"),r&&($.setInterruptBuffer(new Int32Array(r)),console.log("PyodideProvider: Set Interrupt Buffer"));break;case"stdout":$.runningCellId&&S.addStdout($.runningCellId,s);break;case"input_request":$.requestUserInput(i);break;case"execute_result":$.runningCellId&&c&&S.setResult($.runningCellId,c);break;case"execute_completed":$.executionCompleted();break;case"error":$.runningCellId&&S.setError($.runningCellId,m),$.executionCompleted();break;case"fatal":$.setFatalError(m);break}}}),Ke(async()=>{console.log("PyodideProvider: Terminating worker."),$.setWorkerStatus("terminating"),t.terminate()}),G(()=>$.executionStatus,o=>{if(o==="queued"&&$.runningCellId!=null){const n=S.parseGlobals(S.getLocalizedSource($.runningCellId,e.locale)||[],e.locale);t.postMessage({type:"run",cellId:$.runningCellId,code:n==null?void 0:n.join("")})}}),G(()=>$.inputStatus,o=>{o==="submitted"&&t.postMessage({type:"input_response",value:$.userInput})}),(o,n)=>Ut(o.$slots,"default")}}),Cl=O({__name:"Renderer",props:{id:{},initialNotebook:{},theme:{},locale:{},editMode:{type:Boolean}},setup(a){const e=a;return Y(()=>{S.loadNotebook(e.initialNotebook)}),G(()=>e.initialNotebook,t=>{S.loadNotebook(t)}),(t,o)=>(p(),w(xl,{notebookId:t.id,locale:t.locale},{default:u(()=>[t.editMode?(p(),w(_l,{key:0,id:t.id,theme:t.theme,locale:t.locale},null,8,["id","theme","locale"])):(p(),w(wl,{key:1,id:t.id,theme:t.theme,locale:t.locale},null,8,["id","theme","locale"]))]),_:1},8,["notebookId","locale"]))}}),Sl={class:"notebook"},Vl={class:"d-flex align-center mb-6 notebook-header"},El={class:"d-flex align-center flex-grow-1"},Ll={class:"text-h4 notebook-title"},Nl={key:1,class:"loading"},$l={class:"text-center"},Tl={class:"text-h5 mb-2"},Dl={class:"text-body-1 text-medium-emphasis mb-4"},Il=O({__name:"Notebook",setup(a){const e=Qe(),t=Ze(),o=T(()=>Te[z.locale]),n=T(()=>ne[z.locale].direction==="rtl"),s=T(()=>e.params.id),c=E(null),i=E(!0),m=E(null),r=E(!1),g=E(!1),{saveStatus:f,stopWatcher:C}=Ro(s.value);Y(async()=>{try{i.value=!0,m.value=null,c.value=await kt(s.value)}catch(D){console.error("Failed to load notebook:",D),m.value=D instanceof Error?D.message:"Failed to load notebook"}finally{i.value=!1}});const x=()=>{t.push("/notebooks")},V=()=>{r.value=!r.value},b=()=>{g.value=!g.value};return Ke(()=>{S.clear(),C()}),(D,M)=>(p(),y("div",Sl,[l(Ne,{fluid:"",class:"pa-4"},{default:u(()=>{var j,N;return[v("div",Vl,[v("div",El,[l(A,{icon:n.value?"mdi-arrow-right":"mdi-arrow-left",variant:"text",onClick:x,class:ce(n.value?"ms-3":"me-3")},null,8,["icon","class"]),v("h1",Ll,h(((N=(j=c.value)==null?void 0:j.metadata)==null?void 0:N.title)||o.value.untitledNotebook),1)]),L(f)!=="idle"?(p(),w(ie,{key:0,color:L(f)==="saved"?"success":L(f)==="saving"?"info":"error",size:"small",variant:"tonal"},{default:u(()=>[l(F,{icon:L(f)==="saved"?"mdi-check":L(f)==="saving"?"mdi-loading":"mdi-alert",class:ce([{"mdi-spin":L(f)==="saving"},"me-1"]),size:"small"},null,8,["icon","class"]),k(" "+h(L(f)==="saved"?o.value.saved:L(f)==="saving"?o.value.saving:o.value.saveError),1)]),_:1},8,["color"])):I("",!0),v("div",{class:ce(["d-flex align-center",n.value?"ms-3":"me-3"])},[l(A,{icon:"mdi-pencil",variant:"text",size:"small",color:r.value?"primary":"default",onClick:V,class:"me-2"},{default:u(()=>[l(F,null,{default:u(()=>M[0]||(M[0]=[k("mdi-pencil")])),_:1,__:[0]}),l(tt,{activator:"parent",location:"bottom"},{default:u(()=>M[1]||(M[1]=[k(" Edit Notebook ")])),_:1,__:[1]})]),_:1},8,["color"]),l(A,{icon:"mdi-paperclip",variant:"text",size:"small",color:g.value?"primary":"default",onClick:b},{default:u(()=>[l(F,null,{default:u(()=>M[2]||(M[2]=[k("mdi-paperclip")])),_:1,__:[2]}),l(tt,{activator:"parent",location:"bottom"},{default:u(()=>M[3]||(M[3]=[k(" Resources ")])),_:1,__:[3]})]),_:1},8,["color"])],2)]),c.value&&!i.value&&!m.value?(p(),w(Cl,{key:0,"initial-notebook":c.value,id:s.value,theme:L(z).theme,locale:L(z).locale,editMode:r.value},null,8,["initial-notebook","id","theme","locale","editMode"])):i.value?(p(),y("div",Nl,[l(Se,{indeterminate:"",color:"primary"}),v("p",null,h(o.value.loadingNotebook),1)])):m.value?(p(),w(J,{key:2,class:"pa-6"},{default:u(()=>[v("div",$l,[l(F,{icon:"mdi-alert-circle",size:"64",color:"error",class:"mb-4"}),v("h2",Tl,h(o.value.failedToLoad),1),v("p",Dl,h(m.value),1),l(A,{color:"primary",onClick:x},{default:u(()=>[k(h(o.value.backToNotebooks),1)]),_:1})])]),_:1})):I("",!0)]}),_:1})]))}}),Ul=H(Il,[["__scopeId","data-v-6fc1f7ac"]]),Ml={class:"notebook-json"},Al=O({__name:"NotebookJSON",setup(a){const e=Qe(),t=T(()=>e.params.id),o=E(null),n=E(!0),s=E(null);Y(async()=>{try{n.value=!0,s.value=null,o.value=await kt(t.value)}catch(i){console.error("Failed to load notebook:",i),s.value=i instanceof Error?i.message:"Failed to load notebook"}finally{n.value=!1}});const c=T(()=>s.value?JSON.stringify({error:s.value,message:"Notebook not found or could not be loaded"},null,2):o.value?JSON.stringify(o.value,null,2):JSON.stringify({message:"Loading..."},null,2));return(i,m)=>(p(),y("div",Ml,[v("pre",null,h(c.value),1)]))}}),Rl=H(Al,[["__scopeId","data-v-738b6e09"]]),Ol={class:"curriculum-view"},Pl=O({__name:"Curriculum",setup(a){return(e,t)=>(p(),y("div",Ol,[l(Ne,null,{default:u(()=>[l($e,null,{default:u(()=>[l(be,{cols:"12"},{default:u(()=>[t[1]||(t[1]=v("h1",{class:"text-h4 mb-4"},"Curriculum",-1)),l(J,null,{default:u(()=>[l(q,null,{default:u(()=>t[0]||(t[0]=[v("p",{class:"text-body-1"}," Curriculum content will be implemented here. This section will contain educational materials, lessons, and structured learning paths. ",-1)])),_:1,__:[0]})]),_:1})]),_:1,__:[1]})]),_:1})]),_:1})]))}}),Bl=H(Pl,[["__scopeId","data-v-4427f550"]]),Fl={class:"settings-view"},zl={class:"text-h4 mb-4 settings-title"},jl={class:"text-body-1"},Hl={class:"text-body-2 text-medium-emphasis"},Jl=O({__name:"Settings",setup(a){const e=gt(),t=E(z.theme),o=E(z.locale),n=T(()=>co.map(r=>({title:so[z.locale][r],value:r}))),s=no.map(r=>({title:ne[r].name,value:r})),c=T(()=>uo[z.locale]);Y(()=>{e.global.name.value=z.theme}),G(t,r=>{e.global.name.value=r});const i=r=>{z.setTheme(r),t.value=r},m=r=>{z.setLocale(r),o.value=r};return(r,g)=>(p(),y("div",Fl,[l(Ne,null,{default:u(()=>[l($e,null,{default:u(()=>[l(be,{cols:"12"},{default:u(()=>[v("h1",zl,h(c.value.title),1),l(J,{class:"mb-4"},{default:u(()=>[l(te,null,{default:u(()=>[k(h(c.value.appearance),1)]),_:1}),l(q,null,{default:u(()=>[l(he,{modelValue:t.value,"onUpdate:modelValue":[g[0]||(g[0]=f=>t.value=f),i],items:n.value,label:c.value.theme,"item-title":"title","item-value":"value"},null,8,["modelValue","items","label"])]),_:1})]),_:1}),l(J,{class:"mb-4"},{default:u(()=>[l(te,null,{default:u(()=>[k(h(c.value.language),1)]),_:1}),l(q,null,{default:u(()=>[l(he,{modelValue:o.value,"onUpdate:modelValue":[g[1]||(g[1]=f=>o.value=f),m],items:L(s),label:c.value.language,"item-title":"title","item-value":"value"},null,8,["modelValue","items","label"])]),_:1})]),_:1}),l(J,null,{default:u(()=>[l(te,null,{default:u(()=>[k(h(c.value.about),1)]),_:1}),l(q,null,{default:u(()=>[v("p",jl,h(c.value.appName),1),v("p",Hl,h(c.value.version)+" 0.1.0 ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}}),Gl=H(Jl,[["__scopeId","data-v-b8e54928"]]),Wl=[{path:"/",redirect:"notebooks"},{path:"/notebooks",name:"notebooks",component:Io},{path:"/notebooks/:id/json",name:"notebook-json",component:Rl},{path:"/notebooks/:id",name:"notebook",component:Ul},{path:"/curriculum",name:"curriculum",component:Bl},{path:"/settings",name:"settings",component:Gl}],ql=Xt({history:eo("/sendai/"),routes:Wl}),Kl={class:"content-container"},Yl=O({__name:"BaseLayout",setup(a){const e=()=>{const f=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${f}px`)},t=Ze(),o=Qe(),n={"/notebooks":0,"/curriculum":1,"/settings":2},s={0:"/notebooks",1:"/curriculum",2:"/settings"},c=T({get:()=>n[o.path]??0,set:f=>{const C=s[f];C&&o.path!==C&&t.push(C)}}),i=gt(),m=T(()=>io[z.locale]),r=T(()=>ne[z.locale].direction),g=T(()=>z.locale);return G([r,g],([f,C])=>{document.documentElement.dir=f,document.documentElement.lang=C},{immediate:!0}),Y(()=>{i.global.name.value=z.theme,document.documentElement.dir=r.value,document.documentElement.lang=g.value,e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e)}),Ke(()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}),(f,C)=>{const x=Mt("router-view");return p(),w(Wt,null,{default:u(()=>[l(qt,null,{default:u(()=>[v("div",Kl,[l(x)])]),_:1}),l(Kt,{modelValue:c.value,"onUpdate:modelValue":C[0]||(C[0]=V=>c.value=V),color:"primary",grow:"",class:ce({"rtl-navigation":r.value==="rtl"})},{default:u(()=>[l(A,{value:"0"},{default:u(()=>[l(F,null,{default:u(()=>C[1]||(C[1]=[k("mdi-notebook")])),_:1,__:[1]}),v("span",null,h(m.value.notebooks),1)]),_:1}),l(A,{value:"1"},{default:u(()=>[l(F,null,{default:u(()=>C[2]||(C[2]=[k("mdi-school")])),_:1,__:[2]}),v("span",null,h(m.value.curriculum),1)]),_:1}),l(A,{value:"2"},{default:u(()=>[l(F,null,{default:u(()=>C[3]||(C[3]=[k("mdi-cog")])),_:1,__:[3]}),v("span",null,h(m.value.settings),1)]),_:1})]),_:1},8,["modelValue","class"])]),_:1})}}}),Zl=H(Yl,[["__scopeId","data-v-77271b7e"]]),Ql=O({__name:"App",setup(a){return(e,t)=>(p(),w(Zl))}}),Xl=Yt({theme:{defaultTheme:"dark",themes:{light:{colors:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}},dark:{colors:{primary:"#2196F3",secondary:"#424242",accent:"#FF4081",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}},icons:{defaultSet:"mdi",aliases:Qt,sets:{mdi:Zt}}});At(Ql).use(Xl).use(ql).mount("#app");
