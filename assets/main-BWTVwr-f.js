import"./modulepreload-polyfill-B5Qt9EMX.js";import{f as Ae,d as A,c as M,X as T,Y as p,Z as i,A as r,_ as v,W as w,N as _,B as nt,$ as ht,r as $,w as H,g as Re,o as J,a0 as E,a1 as U,F as te,a2 as ge,u as x,M as _t,R as kt,n as Q,a3 as Pe,a4 as yt,a5 as wt,a6 as Ct}from"./@vue-CCTKEIbl.js";import{V as j,a as rt,b as st,c as ue,d as de,e as R,f as B,g as O,h as Be,i as ee,j as ne,k as ve,l as Fe,m as be,n as Oe,o as ze,p as xt,q as Ce,r as St,s as Et,t as De,u as Nt,v as Lt,w as xe,x as Tt,y as Se,z as re,A as pe,B as ae,C as $t,D as It,E as Dt,F as Vt,G as We,H as qe,I as it,J as Ut,K as Mt,L as At,M as Rt,N as Pt,O as Bt}from"./vuetify-UoR5HGtb.js";import{u as je,a as ct,c as Ft,b as Ot}from"./vue-router-DmJEc3Q3.js";import{v as G}from"./uuid-C6aID195.js";import{m as ut}from"./marked-DKjyhwJX.js";import{z as le,H as dt,s as mt,E as zt,A as jt}from"./@codemirror-DLu3zILg.js";import{b as Ht}from"./codemirror-BG8Os8gr.js";import{c as s}from"./@lezer-C8D-pblS.js";import{R as Wt}from"./@videojs-player-CbqB3JZ9.js";import"./video.js-BzFRggUd.js";import"./crelt-C8TCjufn.js";import"./@marijn-DXwl3gUT.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";import"./global-Ao-oLW3a.js";import"./@babel-CCFhuYdL.js";import"./keycode-COWoYAhk.js";import"./safe-json-parse-CN2GHVL4.js";import"./@videojs-B_-B0e53.js";import"./is-function-C0BzV8h3.js";import"./url-toolkit-Dcj1b7Pi.js";import"./videojs-vtt.js-DcT8v0yT.js";import"./m3u8-parser-CpICl_Sf.js";import"./mpd-parser-CVldHi6R.js";import"./@xmldom-BH8vc9mM.js";import"./mux.js-BqethXN8.js";const qt=["en-US","ja-JP","hi-IN","fa-IR"],Jt="en-US",he={"en-US":{direction:"ltr",name:"English (US)"},"ja-JP":{direction:"ltr",name:"日本語"},"hi-IN":{direction:"ltr",name:"हिन्दी"},"fa-IR":{direction:"rtl",name:"فارسی"}},Kt={"en-US":{light:"Light",dark:"Dark"},"ja-JP":{light:"ライト",dark:"ダーク"},"hi-IN":{light:"हल्का",dark:"गहरा"},"fa-IR":{light:"روشن",dark:"تیره"}},Gt={"en-US":{notebooks:"Notebooks",curriculum:"Curriculum",settings:"Settings"},"ja-JP":{notebooks:"ノートブック",curriculum:"カリキュラム",settings:"設定"},"hi-IN":{notebooks:"नोटबुक",curriculum:"पाठ्यक्रम",settings:"सेटिंग्स"},"fa-IR":{notebooks:"دفترچه‌ها",curriculum:"برنامه درسی",settings:"تنظیمات"}},_e={"en-US":{title:"Notebooks",addNotebook:"Add",blank:"Blank",fromTemplate:"From template",fromFile:"From File",fromUrl:"From URL",delete:"Delete",lastEdited:"Last edited",back:"Back",notebookViewer:"Notebook Viewer",saved:"Saved",saving:"Saving...",saveError:"Save Error",loadingNotebook:"Loading notebook...",failedToLoad:"Failed to load notebook",backToNotebooks:"Back to Notebooks",untitledNotebook:"Untitled Notebook",justNow:"Just now",hoursAgo:"hours ago",hourAgo:"hour ago",daysAgo:"days ago",dayAgo:"day ago",urlDialogTitle:"Import from URL",urlDialogLabel:"Enter notebook URL",urlDialogOpen:"Open",urlDialogCancel:"Close",urlDialogError:"Error",urlDialogErrorMessage:"Failed to fetch notebook from URL",urlDialogInvalidUrl:"Please enter a valid URL (must start with http:// or https://)"},"ja-JP":{title:"ノートブック",addNotebook:"追加",blank:"空白",fromTemplate:"テンプレートから",fromFile:"ファイルから",fromUrl:"URLから",delete:"削除",lastEdited:"最終編集",back:"戻る",notebookViewer:"ノートブックビューア",saved:"保存済み",saving:"保存中...",saveError:"保存エラー",loadingNotebook:"ノートブックを読み込み中...",failedToLoad:"ノートブックの読み込みに失敗しました",backToNotebooks:"ノートブックに戻る",untitledNotebook:"無題のノートブック",justNow:"たった今",hoursAgo:"時間前",hourAgo:"時間前",daysAgo:"日前",dayAgo:"日前",urlDialogTitle:"URLからインポート",urlDialogLabel:"ノートブックのURLを入力",urlDialogOpen:"開く",urlDialogCancel:"閉じる",urlDialogError:"エラー",urlDialogErrorMessage:"URLからノートブックを取得できませんでした",urlDialogInvalidUrl:"有効なURLを入力してください（http://またはhttps://で始まる必要があります）"},"hi-IN":{title:"नोटबुक",addNotebook:"जोड़ें",blank:"खाली",fromTemplate:"टेम्प्लेट से",fromFile:"फ़ाइल से",fromUrl:"URL से",delete:"हटाएं",lastEdited:"अंतिम संपादन",back:"वापस",notebookViewer:"नोटबुक व्यूअर",saved:"सहेजा गया",saving:"सहेज रहे हैं...",saveError:"सहेजने में त्रुटि",loadingNotebook:"नोटबुक लोड हो रहा है...",failedToLoad:"नोटबुक लोड करने में विफल",backToNotebooks:"नोटबुक पर वापस जाएं",untitledNotebook:"बिना शीर्षक नोटबुक",justNow:"अभी",hoursAgo:"घंटे पहले",hourAgo:"घंटा पहले",daysAgo:"दिन पहले",dayAgo:"दिन पहले",urlDialogTitle:"URL से आयात करें",urlDialogLabel:"नोटबुक URL दर्ज करें",urlDialogOpen:"खोलें",urlDialogCancel:"बंद करें",urlDialogError:"त्रुटि",urlDialogErrorMessage:"URL से नोटबुक प्राप्त करने में विफल",urlDialogInvalidUrl:"कृपया एक वैध URL दर्ज करें (http:// या https:// से शुरू होना चाहिए)"},"fa-IR":{title:"دفترچه‌ها",addNotebook:"افزودن",blank:"خالی",fromTemplate:"از قالب",fromFile:"از فایل",fromUrl:"از URL",delete:"حذف",lastEdited:"آخرین ویرایش",back:"بازگشت",notebookViewer:"نمایشگر دفترچه",saved:"ذخیره شد",saving:"در حال ذخیره...",saveError:"خطا در ذخیره",loadingNotebook:"در حال بارگذاری دفترچه...",failedToLoad:"بارگذاری دفترچه ناموفق بود",backToNotebooks:"بازگشت به دفترچه‌ها",untitledNotebook:"دفترچه بدون عنوان",justNow:"همین الان",hoursAgo:"ساعت پیش",hourAgo:"ساعت پیش",daysAgo:"روز پیش",dayAgo:"روز پیش",urlDialogTitle:"وارد کردن از URL",urlDialogLabel:"URL دفترچه را وارد کنید",urlDialogOpen:"باز کردن",urlDialogCancel:"بستن",urlDialogError:"خطا",urlDialogErrorMessage:"دریافت دفترچه از URL ناموفق بود",urlDialogInvalidUrl:"لطفاً یک URL معتبر وارد کنید (باید با http:// یا https:// شروع شود)"}},Yt={"en-US":{title:"Settings",appearance:"Appearance",language:"Language",about:"About",theme:"Theme",version:"Version",appName:"K12 Notebook - Web Shell"},"ja-JP":{title:"設定",appearance:"外観",language:"言語",about:"について",theme:"テーマ",version:"バージョン",appName:"K12ノートブック - ウェブシェル"},"hi-IN":{title:"सेटिंग्स",appearance:"दिखावट",language:"भाषा",about:"के बारे में",theme:"थीम",version:"संस्करण",appName:"K12 नोटबुक - वेब शेल"},"fa-IR":{title:"تنظیمات",appearance:"ظاهر",language:"زبان",about:"درباره",theme:"تم",version:"نسخه",appName:"دفترچه K12 - پوسته وب"}},pt={"en-US":{notebookStarting:"The notebook is starting up...",notebookStartError:"The notebook could not be started because of an error:",inputDialogTitle:"Enter Input",inputDialogLabel:"Input",inputDialogCancel:"Cancel",inputDialogSubmit:"Submit"},"ja-JP":{notebookStarting:"ノートブックを起動中...",notebookStartError:"エラーのためノートブックを起動できませんでした:",inputDialogTitle:"入力してください",inputDialogLabel:"入力",inputDialogCancel:"キャンセル",inputDialogSubmit:"送信"},"hi-IN":{notebookStarting:"नोटबुक शुरू हो रहा है...",notebookStartError:"त्रुटि के कारण नोटबुक शुरू नहीं हो सका:",inputDialogTitle:"इनपुट दर्ज करें",inputDialogLabel:"इनपुट",inputDialogCancel:"रद्द करें",inputDialogSubmit:"जमा करें"},"fa-IR":{notebookStarting:"دفترچه در حال راه‌اندازی است...",notebookStartError:"دفترچه به دلیل خطا راه‌اندازی نشد:",inputDialogTitle:"ورودی را وارد کنید",inputDialogLabel:"ورودی",inputDialogCancel:"لغو",inputDialogSubmit:"ارسال"}},Xt=["light","dark"],Zt="dark",P=Ae({theme:localStorage.getItem("theme")||Zt,locale:localStorage.getItem("locale")||Jt,setTheme(a){this.theme=a,localStorage.setItem("theme",a)},setLocale(a){this.locale=a,localStorage.setItem("locale",a)}}),Qt={class:"d-flex justify-end mb-2"},eo={class:"d-flex align-center"},to={class:"flex-grow-1"},oo={class:"text-h6 mb-1"},ao={class:"text-caption text-medium-emphasis mb-0"},lo=A({__name:"NotebookCard",props:{notebook:{}},emits:["delete"],setup(a,{emit:e}){const o=a,t=e,l=je(),n=M(()=>_e[P.locale]),u=c=>{const f=Math.floor((new Date().getTime()-c.getTime())/(1e3*60*60));if(f<1)return n.value.justNow;if(f<24){const y=f===1?n.value.hourAgo:n.value.hoursAgo;return`${f} ${y}`}else{const y=Math.floor(f/24),k=y===1?n.value.dayAgo:n.value.daysAgo;return`${y} ${k}`}},d=()=>{l.push(`/notebooks/${o.notebook.id}`)},m=()=>{t("delete",o.notebook.id)};return(c,h)=>(p(),T(O,{class:"notebook-card",hover:"",onClick:d},{default:i(()=>[r(j,{class:"pb-2"},{default:i(()=>[v("div",Qt,[r(rt,null,{activator:i(({props:f})=>[r(R,nt({icon:"mdi-dots-vertical",variant:"text",size:"small"},f,{onClick:h[0]||(h[0]=ht(()=>{},["stop"]))}),null,16)]),default:i(()=>[r(st,null,{default:i(()=>[r(ue,{onClick:m},{default:i(()=>[r(de,null,{default:i(()=>[w(_(n.value.delete),1)]),_:1})]),_:1})]),_:1})]),_:1})]),v("div",eo,[r(B,{icon:"mdi-notebook-outline",size:"large",color:"primary",class:"me-3"}),v("div",to,[v("h3",oo,_(c.notebook.title),1),v("p",ao,_(n.value.lastEdited)+": "+_(u(c.notebook.lastModified||c.notebook.created)),1)])])]),_:1})]),_:1}))}}),W=(a,e)=>{const o=a.__vccOpts||a;for(const[t,l]of e)o[t]=l;return o},no=W(lo,[["__scopeId","data-v-3a1233ae"]]),ro="NotebookDB",z="notebooks",so=2,ke=async()=>new Promise((a,e)=>{const o=indexedDB.open(ro,so);o.onerror=()=>e(o.error),o.onsuccess=()=>a(o.result),o.onupgradeneeded=t=>{const l=o.result;if(l.objectStoreNames.contains(z)){if(t.oldVersion<2){const n=o.transaction;if(n){const u=n.objectStore(z);u.openCursor().onsuccess=d=>{const m=d.target.result;if(m){const c=m.value;c.created||(c.created=c.lastModified||Date.now(),m.update(c)),m.continue()}}}}}else{const n=l.createObjectStore(z,{keyPath:"id"});n.createIndex("lastModified","lastModified"),n.createIndex("created","created")}}}),ye=async(a,e)=>{const o=await ke();if(!o.objectStoreNames.contains(z))throw new Error("Database not properly initialized");return new Promise((t,l)=>{try{const n=o.transaction(z,"readwrite"),u=n.objectStore(z),d=u.get(a);d.onsuccess=()=>{const m=d.result,c=Date.now(),h={id:a,notebook:e,lastModified:c,created:(m==null?void 0:m.created)||c},f=u.put(h);f.onsuccess=()=>t(),f.onerror=()=>l(f.error)},d.onerror=()=>l(d.error),n.oncomplete=()=>o.close()}catch(n){l(n)}})},io=async a=>{const e=await ke();if(!e.objectStoreNames.contains(z))throw new Error("Database not properly initialized");return new Promise((o,t)=>{try{const l=e.transaction(z,"readonly"),u=l.objectStore(z).get(a);u.onsuccess=()=>{const d=u.result;if(!d){t(new Error("Notebook not found"));return}o(d.notebook)},u.onerror=()=>t(u.error),l.oncomplete=()=>e.close()}catch(l){t(l)}})},se=async()=>{const a=await ke();if(!a.objectStoreNames.contains(z))throw new Error("Database not properly initialized");return new Promise((e,o)=>{try{const t=a.transaction(z,"readonly"),n=t.objectStore(z).getAll();n.onsuccess=()=>{const d=n.result.map(m=>{var c;return{id:m.id,title:((c=m.notebook.metadata)==null?void 0:c.title)||"Untitled Notebook",lastModified:new Date(m.lastModified),created:new Date(m.created)}});d.sort((m,c)=>c.created.getTime()-m.created.getTime()),e(d)},n.onerror=()=>o(n.error),t.oncomplete=()=>a.close()}catch(t){o(t)}})},co=async a=>{const e=await ke();if(!e.objectStoreNames.contains(z))throw new Error("Database not properly initialized");return new Promise((o,t)=>{try{const l=e.transaction(z,"readwrite");l.objectStore(z).delete(a),l.oncomplete=()=>o(),l.onerror=()=>t(l.error)}catch(l){t(l)}})},uo=async()=>{try{const a=await fetch("./templates/blank.ipynb");if(!a.ok)throw new Error(`Failed to load blank notebook template: ${a.statusText}`);const e=await a.json();return e.cells.forEach(o=>{o.id||(o.id=G())}),e}catch(a){throw new Error(`Failed to load blank notebook template: ${a instanceof Error?a.message:String(a)}`)}},mo=async a=>new Promise((e,o)=>{const t=new FileReader;t.onload=async l=>{var n;try{const u=(n=l.target)==null?void 0:n.result,d=JSON.parse(u);if(!d.cells||!Array.isArray(d.cells))throw new Error("Invalid notebook format: missing or invalid cells array");d.metadata||(d.metadata={}),d.nbformat||(d.nbformat=4),d.nbformat_minor||(d.nbformat_minor=2),d.cells.forEach(c=>{c.id||(c.id=G()),c.metadata||(c.metadata={}),c.source||(c.source=[])}),d.metadata.title||(d.metadata.title=a.name.replace(".ipynb","")||"Imported Notebook");const m=G();await ye(m,d),e(m)}catch(u){o(new Error(`Failed to parse notebook file: ${u instanceof Error?u.message:String(u)}`))}},t.onerror=()=>{o(new Error("Failed to read the selected file"))},t.readAsText(a)}),po=a=>{try{const e=new URL(a);return e.protocol==="http:"||e.protocol==="https:"}catch{return!1}},fo=async a=>{if(!po(a))throw new Error("Please enter a valid URL (must start with http:// or https://)");try{const e=await fetch(a);if(!e.ok)throw new Error(`Failed to fetch notebook: ${e.status} ${e.statusText}`);const o=await e.text(),t=JSON.parse(o);if(!t.cells||!Array.isArray(t.cells))throw new Error("Invalid notebook format: missing or invalid cells array");if(t.metadata||(t.metadata={}),t.nbformat||(t.nbformat=4),t.nbformat_minor||(t.nbformat_minor=2),t.cells.forEach(n=>{n.id||(n.id=G()),n.metadata||(n.metadata={}),n.source||(n.source=[])}),!t.metadata.title){const u=new URL(a).pathname.split("/").pop()||"imported-notebook.ipynb";t.metadata.title=u.replace(".ipynb","")||"Imported Notebook"}const l=G();return await ye(l,t),l}catch(e){throw e instanceof Error?e:new Error(`Failed to import notebook from URL: ${String(e)}`)}},go=A({__name:"UrlInputDialog",props:{show:{type:Boolean}},emits:["cancel","submit"],setup(a,{emit:e}){const o=a,t=e,l=M(()=>_e[P.locale]),n=$(""),u=$(),d=$(""),m=()=>{const f=n.value.trim();if(!f){d.value=l.value.urlDialogInvalidUrl;return}try{const y=new URL(f);if(y.protocol!=="http:"&&y.protocol!=="https:"){d.value=l.value.urlDialogInvalidUrl;return}}catch{d.value=l.value.urlDialogInvalidUrl;return}d.value="",t("submit",f),n.value=""},c=()=>{t("cancel"),n.value="",d.value=""};H(()=>o.show,async f=>{var y;f&&(await Re(),(y=u.value)==null||y.focus(),d.value="")});const h=f=>{f.key==="Enter"?(f.preventDefault(),m()):f.key==="Escape"&&(f.preventDefault(),c())};return H(n,()=>{d.value&&(d.value="")}),(f,y)=>(p(),T(Be,{"model-value":f.show,"max-width":"500px",persistent:"",onKeydown:h},{default:i(()=>[r(O,null,{default:i(()=>[r(ee,null,{default:i(()=>[w(_(l.value.urlDialogTitle),1)]),_:1}),r(j,null,{default:i(()=>[r(ne,{ref_key:"inputFieldRef",ref:u,modelValue:n.value,"onUpdate:modelValue":y[0]||(y[0]=k=>n.value=k),label:l.value.urlDialogLabel,"error-messages":d.value,variant:"outlined",density:"compact",placeholder:"https://example.com/notebook.ipynb",onKeydown:h},null,8,["modelValue","label","error-messages"])]),_:1}),r(ve,null,{default:i(()=>[r(Fe),r(R,{color:"grey",variant:"text",onClick:c},{default:i(()=>[w(_(l.value.urlDialogCancel),1)]),_:1}),r(R,{color:"primary",variant:"text",onClick:m},{default:i(()=>[w(_(l.value.urlDialogOpen),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),vo={class:"notebook-index"},bo={class:"d-flex align-center mb-6 header-container"},ho={class:"text-h4 notebook-title flex-grow-1"},_o={key:0,class:"text-center mt-8"},ko=A({__name:"NotebookIndex",setup(a){const e=M(()=>_e[P.locale]),o=M(()=>he[P.locale].direction==="rtl"),t=$([]),l=$(!1),n=$({show:!1,title:"",message:""});J(async()=>{try{const k=await se();t.value=k}catch(k){console.error("Failed to load notebooks:",k)}});const u=async k=>{try{await co(k);const C=t.value.findIndex(g=>g.id===k);C>-1&&t.value.splice(C,1),console.log("Notebook deleted successfully:",k)}catch(C){console.error("Failed to delete notebook:",C)}},d=async()=>{try{console.log("Create blank notebook");const k=await uo(),C=G();await ye(C,k),console.log("Created notebook with id:",C);const g=await se();t.value=g}catch(k){console.error("Failed to create blank notebook:",k)}},m=async()=>{try{const k=document.createElement("input");k.type="file",k.accept=".ipynb",k.style.display="none",k.onchange=async C=>{var I;const g=(I=C.target.files)==null?void 0:I[0];if(!g){console.log("No file selected");return}try{const D=await mo(g);console.log("Notebook imported successfully:",D);const F=await se();t.value=F}catch(D){console.error("Failed to import notebook:",D),alert(`Failed to import notebook: ${D instanceof Error?D.message:"Unknown error"}`)}},document.body.appendChild(k),k.click(),document.body.removeChild(k)}catch(k){console.error("Failed to import notebook:",k),alert("Failed to import notebook. Please try again.")}},c=()=>{l.value=!0},h=async k=>{l.value=!1;try{console.log("Importing notebook from URL:",k);const C=await fo(k);console.log("Notebook imported successfully:",C);const g=await se();t.value=g}catch(C){console.error("Failed to import notebook from URL:",C),setTimeout(()=>{n.value={show:!0,title:e.value.urlDialogError,message:C instanceof Error?C.message:e.value.urlDialogErrorMessage}},150)}},f=()=>{l.value=!1},y=()=>{n.value.show=!1};return(k,C)=>(p(),E("div",vo,[r(be,{fluid:"",class:"pa-4"},{default:i(()=>[v("div",bo,[v("h1",ho,_(e.value.title),1),r(rt,null,{activator:i(({props:g})=>[r(R,nt({color:"primary"},g,{"prepend-icon":o.value?void 0:"mdi-plus","append-icon":o.value?"mdi-plus":void 0}),{default:i(()=>[w(_(e.value.addNotebook),1)]),_:2},1040,["prepend-icon","append-icon"])]),default:i(()=>[r(st,null,{default:i(()=>[r(ue,{onClick:d},{default:i(()=>[r(de,null,{default:i(()=>[w(_(e.value.blank),1)]),_:1})]),_:1}),r(ue,{onClick:m},{default:i(()=>[r(de,null,{default:i(()=>[w(_(e.value.fromFile),1)]),_:1})]),_:1}),r(ue,{onClick:c},{default:i(()=>[r(de,null,{default:i(()=>[w(_(e.value.fromUrl),1)]),_:1})]),_:1})]),_:1})]),_:1})]),r(Oe,null,{default:i(()=>[(p(!0),E(te,null,ge(t.value,g=>(p(),T(ze,{key:g.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:i(()=>[r(no,{notebook:g,onDelete:u},null,8,["notebook"])]),_:2},1024))),128))]),_:1}),t.value.length===0?(p(),E("div",_o,[r(B,{icon:"mdi-notebook-outline",size:"64",color:"grey"}),C[1]||(C[1]=v("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No notebooks yet",-1)),C[2]||(C[2]=v("p",{class:"text-body-2 text-medium-emphasis"},"Create your first notebook to get started",-1))])):U("",!0)]),_:1}),r(go,{show:l.value,onSubmit:h,onCancel:f},null,8,["show"]),r(Be,{modelValue:n.value.show,"onUpdate:modelValue":C[0]||(C[0]=g=>n.value.show=g),"max-width":"400px"},{default:i(()=>[r(O,null,{default:i(()=>[r(ee,null,{default:i(()=>[w(_(n.value.title),1)]),_:1}),r(j,null,{default:i(()=>[v("p",null,_(n.value.message),1)]),_:1}),r(ve,null,{default:i(()=>[r(Fe),r(R,{color:"primary",variant:"text",onClick:y},{default:i(()=>[w(_(e.value.urlDialogCancel),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),yo=W(ko,[["__scopeId","data-v-32f10594"]]),wo={cells:[],metadata:{},nbformat:4,nbformat_minor:2},S=Ae({content:{},updated:null,clear(){this.updated=null,this.content=wo},findCell(a){return this.content.cells?this.content.cells.find(e=>e.id===a):null},getSource(a){const e=this.findCell(a);return e?e.source:null},setSource(a,e){const o=this.findCell(a);o&&(e=e.map(t=>t+`
`),o.source=e,this.updated=Date.now())},getLocalizedSource(a,e){const o=this.findCell(a);if(!o)return;let t=o.source;return o.metadata.i18n&&o.metadata.i18n[e]&&(t=o.metadata.i18n[e]),t},setLocalizedSource(a,e,o){const t=this.findCell(a);t&&(e=e.map(l=>l+`
`),t.metadata.i18n||(t.metadata.i18n={}),t.metadata.i18n[o]=e,this.updated=Date.now())},parseGlobals(a,e){var l;const o=(l=this.content.metadata)==null?void 0:l.globals;return o?a.map(n=>n.replace(/\{\{\s*(\w+)\s*\}\}/g,(u,d)=>{const m=o[d];if(!m)return u;const c=m[e]||m.default;return c===void 0?u:`${c}`})):a},clearOutputs(a){const e=this.findCell(a);e&&(e.outputs=[],this.updated=Date.now())},getOutputTypes(a){var t,l,n;let e=[];const o=this.findCell(a);return o&&(((t=o.outputs)==null?void 0:t.findIndex(u=>u.output_type==="execute_result"))!==-1&&e.push("result"),((l=o.outputs)==null?void 0:l.findIndex(u=>u.output_type==="stream"&&u.name==="stdout"))!==-1&&e.push("stdout"),((n=o.outputs)==null?void 0:n.findIndex(u=>u.output_type==="error"))!==-1&&e.push("error")),e},addStdout(a,e){const o=this.findCell(a);if(o){o.outputs||(o.outputs=[]);const t=o.outputs.findIndex(l=>l.output_type==="stream"&&l.name==="stdout");t!==-1?(o.outputs[t].text||(o.outputs[t].text=[]),o.outputs[t].text.push(e)):o.outputs.push({output_type:"stream",name:"stdout",text:[e]}),this.updated=Date.now()}},getStdout(a){var t;let e="";const o=this.findCell(a);return o&&((t=o.outputs)==null||t.forEach(l=>{var n;l.output_type==="stream"&&(e+=((n=l.text)==null?void 0:n.join(""))||"")})),e},setResult(a,e){const o=this.findCell(a);if(o){o.outputs||(o.outputs=[]);const t=o.outputs.findIndex(l=>l.output_type==="execute_result");if(t!==-1){const l=o.outputs[t].data||{};o.outputs[t].data={...l,...e}}else o.outputs.push({output_type:"execute_result",data:e});this.updated=Date.now()}},getResult(a){var t;let e={};const o=this.findCell(a);return o&&((t=o.outputs)==null||t.forEach(l=>{l.output_type==="execute_result"&&l.data&&(e=l.data)})),e},setError(a,e){const o=this.findCell(a);if(o){o.outputs||(o.outputs=[]);const t=Array.isArray(e)?e:e.split(`
`);o.outputs.push({output_type:"error",traceback:t}),this.updated=Date.now()}},getError(a){var t;let e="";const o=this.findCell(a);return o&&((t=o.outputs)==null||t.forEach(l=>{var n;l.output_type==="error"&&(e+=((n=l.traceback)==null?void 0:n.join(""))||"")})),e},loadNotebook(a){a.cells&&(a.cells.forEach(e=>{(!e.id||typeof e.id!="string"||e.id.trim()==="")&&(e.id=G())}),this.content=a)},hasTag(a,e){const o=this.findCell(a);return!o||!o.metadata.tags?!1:o.metadata.tags.includes(e)},addTag(a,e){const o=this.findCell(a);o&&(o.metadata.tags||(o.metadata.tags=[]),o.metadata.tags.includes(e)||(o.metadata.tags.push(e),this.updated=Date.now()))},removeTag(a,e){const o=this.findCell(a);if(o&&o.metadata.tags){const t=o.metadata.tags.indexOf(e);t!==-1&&(o.metadata.tags.splice(t,1),this.updated=Date.now())}},toggleTag(a,e){this.hasTag(a,e)?this.removeTag(a,e):this.addTag(a,e)}}),Co=2e3,xo=2e3;function So(a){const e=$("idle"),o=$(null);let t=null;const l=async u=>{t&&clearTimeout(t),t=setTimeout(async()=>{try{console.log(`Auto-Save: Saving Notebook ${a}`),e.value="saving";const d=JSON.parse(JSON.stringify(u));await ye(a,d),e.value="saved",o.value=new Date,console.log(`Auto-Save: Saved Notebook ${a}`),setTimeout(()=>{e.value==="saved"&&(e.value="idle")},xo)}catch(d){console.error("Auto-Save: Failed:",d),e.value="error"}},Co)},n=H(()=>S.updated,()=>{var u;S.updated!=null&&S.content&&((u=S.content.cells)==null?void 0:u.length)>0&&l(S.content)});return{saveStatus:e,lastSaved:o,stopWatcher:n}}const Eo=["innerHTML"],No=A({__name:"MarkdownCell",props:{cell:{},locale:{},editMode:{type:Boolean}},setup(a){const e=a,o=$("");H(()=>e.editMode,n=>{if(n){const u=S.getLocalizedSource(e.cell.id,e.locale);o.value=u?u.join(""):""}},{immediate:!0});const t=n=>{const u=n.split(`
`);S.setLocalizedSource(e.cell.id,u,e.locale)},l=n=>n?ut.parse(n.join("")):"";return(n,u)=>(p(),T(O,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:i(()=>[r(j,null,{default:i(()=>[n.editMode?(p(),T(xt,{key:1,modelValue:o.value,"onUpdate:modelValue":[u[0]||(u[0]=d=>o.value=d),t],variant:"outlined","auto-grow":"",rows:"3","hide-details":"",class:"markdown-editor"},null,8,["modelValue"])):(p(),E("div",{key:0,innerHTML:l(x(S).parseGlobals(x(S).getLocalizedSource(e.cell.id,e.locale)||[],e.locale))},null,8,Eo))]),_:1})]),_:1}))}}),Lo=W(No,[["__scopeId","data-v-945585ca"]]),L=Ae({executionStatus:"idle",workerStatus:"initializing",runningCellId:null,interruptBuffer:null,fatalErrorTrace:"",inputStatus:"idle",inputPrompt:null,userInput:null,setInterruptBuffer(a){this.interruptBuffer=a},clearInterruptBuffer(){this.interruptBuffer&&(this.interruptBuffer[0]=0)},interruptExecution(){this.interruptBuffer&&(this.interruptBuffer[0]=2),this.executionStatus="idle"},setWorkerStatus(a){this.workerStatus=a},executeCell(a){this.executionStatus==="idle"&&this.workerStatus==="ready"&&(this.runningCellId=a,this.executionStatus="queued")},executionCompleted(){this.runningCellId=null,this.executionStatus="idle"},setFatalError(a){this.workerStatus="error",this.fatalErrorTrace=a},requestUserInput(a){this.inputStatus="waiting",this.userInput=null,this.inputPrompt=a},submitUserInput(a){this.inputStatus="submitted",this.userInput=a}}),To=A({__name:"CodeControls",props:{id:{}},setup(a){const e=a,o=()=>{S.clearOutputs(e.id),L.executeCell(e.id)},t=()=>{S.clearOutputs(e.id)},l=()=>{L.interruptExecution()},n=M(()=>S.hasTag(e.id,"hide_code")),u=()=>{S.toggleTag(e.id,"hide_code")};return(d,m)=>(p(),E("div",null,[v("div",null,[r(Ce,{rounded:"lg"},{default:i(()=>[r(R,{size:"32",icon:"mdi-play-outline",onClick:o,disabled:x(L).executionStatus!=="idle"||x(L).workerStatus!=="ready",loading:x(L).workerStatus!=="ready","aria-label":"Run code"},null,8,["disabled","loading"]),r(R,{size:"32",icon:"mdi-stop",onClick:l,disabled:x(L).executionStatus==="idle"||x(L).runningCellId!==d.id,"aria-label":"Stop code"},null,8,["disabled"])]),_:1}),r(Ce,{rounded:"lg",class:"pl-4"},{default:i(()=>[r(R,{size:"32",icon:"mdi-broom",onClick:t})]),_:1}),r(Ce,{rounded:"lg",class:"pl-2"},{default:i(()=>[r(R,{size:"32",icon:n.value?"mdi-eye-off":"mdi-eye",onClick:u,"aria-label":n.value?"Show code":"Hide code"},null,8,["icon","aria-label"])]),_:1})])]))}}),Je="#2e3440",ft="#3b4252",Ke="#434c5e",ie="#4c566a",Ve="#e5e9f0",Ue="#eceff4",Ee="#8fbcbb",Ge="#88c0d0",$o="#81a1c1",q="#5e81ac",Io="#bf616a",X="#d08770",Ne="#ebcb8b",Ye="#a3be8c",Do="#b48ead",Xe="#d30102",He=Ue,Le=He,Vo="#ffffff",Te=Ve,Uo=He,Ze=ft,Mo=le.theme({"&":{color:Je,backgroundColor:Vo},".cm-content":{caretColor:Ze,fontFamily:"JetBrainsMono, monospace"},".cm-cursor, .cm-dropCursor":{borderLeftColor:Ze},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Uo},".cm-panels":{backgroundColor:He,color:ie},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:`1px solid ${ie}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:Ve},".cm-activeLine":{backgroundColor:Le},".cm-selectionMatch":{backgroundColor:Ve},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${ie}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:Ue},".cm-gutters":{backgroundColor:Ue,color:Je,border:"none"},".cm-activeLineGutter":{backgroundColor:Le},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Te},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Te,borderBottomColor:Te},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Le,color:ie}}},{dark:!1}),Ao=dt.define([{tag:s.keyword,color:q},{tag:[s.name,s.deleted,s.character,s.propertyName,s.macroName],color:X},{tag:[s.variableName],color:X},{tag:[s.function(s.variableName)],color:q},{tag:[s.labelName],color:$o},{tag:[s.color,s.constant(s.name),s.standard(s.name)],color:q},{tag:[s.definition(s.name),s.separator],color:Ye},{tag:[s.brace],color:Ee},{tag:[s.annotation],color:Xe},{tag:[s.number,s.changed,s.annotation,s.modifier,s.self,s.namespace],color:Ge},{tag:[s.typeName,s.className],color:Ne},{tag:[s.operator,s.operatorKeyword],color:Ye},{tag:[s.tagName],color:Do},{tag:[s.squareBracket],color:Io},{tag:[s.angleBracket],color:X},{tag:[s.attributeName],color:Ne},{tag:[s.regexp],color:q},{tag:[s.quote],color:ft},{tag:[s.string],color:X},{tag:s.link,color:Ee,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[s.url,s.escape,s.special(s.string)],color:X},{tag:[s.meta],color:Ge},{tag:[s.comment],color:Ke,fontStyle:"italic"},{tag:s.strong,fontWeight:"bold",color:q},{tag:s.emphasis,fontStyle:"italic",color:q},{tag:s.strikethrough,textDecoration:"line-through"},{tag:s.heading,fontWeight:"bold",color:q},{tag:s.special(s.heading1),fontWeight:"bold",color:q},{tag:s.heading1,fontWeight:"bold",color:q},{tag:[s.heading2,s.heading3,s.heading4],fontWeight:"bold",color:q},{tag:[s.heading5,s.heading6],color:q},{tag:[s.atom,s.bool,s.special(s.variableName)],color:X},{tag:[s.processingInstruction,s.inserted],color:Ee},{tag:[s.contentSeparator],color:Ne},{tag:s.invalid,color:Ke,borderBottom:`1px dotted ${Xe}`}]),Ro=[Mo,mt(Ao)],gt="#2e3235",vt="#505d64",Me="#606f7a",fe="#707d8b",Po="#a0a4ae",me="#bdbdbd",Bo="#e0e0e0",Fo="#fdf6e3",Z="#ff5f52",Oo="#ff6e40",zo="#fa5788",K="#facf4e",Qe="#ffad42",oe="#56c8d8",jo="#7186f0",$e="#cf6edf",Ho="#6abf69",et="#99d066",tt="#4ebaaa",ot=Z,at="#202325",ce="#414b46",Wo=gt,Ie=vt,qo=vt,lt=Po,Jo=le.theme({"&":{color:me,backgroundColor:Wo},".cm-content":{caretColor:lt,fontFamily:"JetBrainsMono, monospace"},".cm-cursor, .cm-dropCursor":{borderLeftColor:lt},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:qo},".cm-panels":{backgroundColor:at,color:fe},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{outline:`1px solid ${K}`,backgroundColor:"transparent"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:ce},".cm-activeLine":{backgroundColor:ce},".cm-selectionMatch":{backgroundColor:at,outline:`1px solid ${tt}`},"&.cm-focused .cm-matchingBracket":{color:Bo,outline:`1px solid ${tt}`},"&.cm-focused .cm-nonmatchingBracket":{color:Z},".cm-gutters":{backgroundColor:gt,borderRight:"1px solid #4f5b66",color:Me},".cm-activeLineGutter":{backgroundColor:ce,color:Fo},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Ie},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Ie,borderBottomColor:Ie},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:ce,color:fe}}},{dark:!0}),Ko=dt.define([{tag:s.keyword,color:$e},{tag:[s.name,s.deleted,s.character,s.macroName],color:oe},{tag:[s.propertyName],color:K},{tag:[s.variableName],color:me},{tag:[s.function(s.variableName)],color:oe},{tag:[s.labelName],color:$e},{tag:[s.color,s.constant(s.name),s.standard(s.name)],color:K},{tag:[s.definition(s.name),s.separator],color:zo},{tag:[s.brace],color:$e},{tag:[s.annotation],color:ot},{tag:[s.number,s.changed,s.annotation,s.modifier,s.self,s.namespace],color:Qe},{tag:[s.typeName,s.className],color:Qe},{tag:[s.operator,s.operatorKeyword],color:jo},{tag:[s.tagName],color:Oo},{tag:[s.squareBracket],color:Z},{tag:[s.angleBracket],color:Me},{tag:[s.attributeName],color:me},{tag:[s.regexp],color:ot},{tag:[s.quote],color:Ho},{tag:[s.string],color:et},{tag:s.link,color:oe,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[s.url,s.escape,s.special(s.string)],color:K},{tag:[s.meta],color:fe},{tag:[s.comment],color:fe,fontStyle:"italic"},{tag:s.monospace,color:me},{tag:s.strong,fontWeight:"bold",color:Z},{tag:s.emphasis,fontStyle:"italic",color:et},{tag:s.strikethrough,textDecoration:"line-through"},{tag:s.heading,fontWeight:"bold",color:K},{tag:s.heading1,fontWeight:"bold",color:K},{tag:[s.heading2,s.heading3,s.heading4],fontWeight:"bold",color:K},{tag:[s.heading5,s.heading6],color:K},{tag:[s.atom,s.bool,s.special(s.variableName)],color:oe},{tag:[s.processingInstruction,s.inserted],color:Z},{tag:[s.contentSeparator],color:oe},{tag:s.invalid,color:Me,borderBottom:`1px dotted ${Z}`}]),Go=[Jo,mt(Ko)],Yo=["id"],Xo=A({__name:"CodeEditor",props:{source:{},metadata:{},id:{},theme:{}},setup(a){const e=a;let o=null,t=!1;return J(()=>{let l=Ro;switch(e.theme){case"dark":l=Go;break}const n=zt.create({doc:e.source?e.source.join(""):"",extensions:[Ht,jt(),l,le.lineWrapping,le.updateListener.of(u=>{if(u.docChanged&&!t){const d=u.state.doc.toString();S.setSource(e.id,d.includes(`
`)?d.split(`
`):[d])}})]});o=new le({state:n,parent:document.getElementById("code-editor-"+e.id)})}),H(()=>e.source,l=>{if(o&&l&&!t){const n=o.state.doc.toString(),u=l.join(""),d=n.replace(/\n+$/,""),m=u.replace(/\n+$/,"");d!==m&&(t=!0,o.dispatch({changes:{from:0,to:o.state.doc.length,insert:u}}),t=!1)}},{deep:!0}),(l,n)=>(p(),E("div",{id:`code-editor-${e.id}`},null,8,Yo))}}),Zo=A({__name:"Console",props:{stdout:{}},setup(a){const e=a,o=$(null),t=()=>{if(!o.value)return;const d=`${(e.stdout?e.stdout.split(`
`).length:1)*1.2+1.5}em`;o.value.style.height=d};return H(()=>e.stdout,()=>{t()},{immediate:!0}),J(()=>{t()}),(l,n)=>(p(),E("textarea",{ref_key:"consoleRef",ref:o,class:"output-console",readonly:""},_(l.stdout),513))}}),Qo=W(Zo,[["__scopeId","data-v-43c05e2b"]]),ea={class:"output-console",readonly:""},ta=A({__name:"Error",props:{stderr:{}},setup(a){return(e,o)=>(p(),E("textarea",ea,_(e.stderr),1))}}),oa=W(ta,[["__scopeId","data-v-62cb5501"]]),aa=A({__name:"TextPlain",props:{value:{}},setup(a){const e=$(null);return(o,t)=>(p(),E("textarea",{ref_key:"consoleRef",ref:e,class:"output-console",readonly:""},_(Array.isArray(o.value)?o.value.join(""):o.value),513))}}),la=W(aa,[["__scopeId","data-v-6e2abbc4"]]),na=["src"],ra=A({__name:"ImagePng",props:{value:{}},setup(a){return(e,o)=>(p(),E("img",{src:`data:image/png;base64,${e.value}`},null,8,na))}}),sa=["src"],ia=A({__name:"ImageSvg",props:{value:{}},setup(a){return(e,o)=>(p(),E("img",{src:`data:image/svg+xml;charset=utf-8,${encodeURIComponent(e.value)}`},null,8,sa))}}),ca=A({__name:"Result",props:{value:{}},setup(a){return(e,o)=>(p(),E(te,null,[e.value["image/svg+xml"]?(p(),T(ia,{key:0,value:e.value["image/svg+xml"]},null,8,["value"])):U("",!0),e.value["image/png"]?(p(),T(ra,{key:1,value:e.value["image/png"]},null,8,["value"])):U("",!0),e.value["text/plain"]?(p(),T(la,{key:2,value:e.value["text/plain"]},null,8,["value"])):U("",!0)],64))}});function ua(a){if(!a)return[];const e=[];return a.forEach((o,t)=>{const n=o.replace(/\n$/,"").trim();if(!n||n.startsWith("#"))return;const u=n.match(/^(\w+)\s*=\s*(.+?)\s*#\s*@param(.*)$/);if(!u)return;const[,d,m,c]=u;try{const h=da(m),f=ma(c.trim()),y=pa(h,f);e.push({name:d,value:h,type:y,config:f,lineNumber:t})}catch(h){console.warn(`Failed to parse parameter on line ${t+1}: ${o}`,h)}}),e}function da(a){const e=a.trim();if(e==="True")return!0;if(e==="False")return!1;if(e==="None")return null;const o=e.match(/^["'](.*)["']$/);return o?o[1]:e.match(/^-?\d+\.?\d*$/)?e.includes(".")?parseFloat(e):parseInt(e,10):e}function ma(a){if(!a)return{};const e=a.match(/^\[(.+)\]$/);if(e)return{options:e[1].split(",").map(n=>{const u=n.trim(),d=u.match(/^["'](.*)["']$/);return d?d[1]:u})};const o=a.match(/^\{(.+)\}$/);if(o)try{const t=o[1],l={};return t.split(",").forEach(u=>{const[d,m]=u.split(":").map(c=>c.trim());if(d&&m){const c=d.replace(/["']/g,""),h=m.replace(/["']/g,"");c==="type"?l.type=h:(c==="min"||c==="max"||c==="step")&&(l[c]=parseFloat(h))}}),l}catch{return console.warn("Failed to parse config JSON:",a),{}}return{}}function pa(a,e){return e.type==="slider"?"slider":e.type==="boolean"?"boolean":e.options&&e.options.length>0?"dropdown":typeof a=="boolean"?"boolean":"value"}function fa(a,e,o){if(!a||e.lineNumber>=a.length)return a;const t=[...a],l=t[e.lineNumber],n=l.endsWith(`
`),d=l.replace(/\n$/,"").match(/^(\w+\s*=\s*)(.+?)(\s*#\s*@param.*)$/);if(d){const[,m,,c]=d,h=ga(o);t[e.lineNumber]=`${m}${h}${c}${n?`
`:""}`}return t}function ga(a){return typeof a=="boolean"?a?"True":"False":a==null?"None":typeof a=="string"?`"${a}"`:String(a)}const va={key:0,class:"parameter-controls mb-4"},ba={class:"parameter-grid"},ha={key:1,class:"slider-container"},_a={class:"slider-layout"},ka={key:3,class:"boolean-container"},ya=A({__name:"ParameterControls",props:{source:{},cellId:{}},emits:["parameter-changed"],setup(a,{emit:e}){const o=a,t=e,l=M(()=>ua(o.source)),n=(d,m)=>{if(!o.source)return;const c=fa(o.source,d,m);t("parameter-changed",c)},u=d=>d.name.replace(/_/g," ").toLowerCase().replace(/\b\w/g,m=>m.toUpperCase());return(d,m)=>l.value.length>0?(p(),E("div",va,[r(O,{variant:"outlined",class:"pa-4"},{default:i(()=>[v("div",ba,[(p(!0),E(te,null,ge(l.value,c=>{var h,f,y,k;return p(),E("div",{key:c.name,class:"parameter-item"},[c.type==="value"?(p(),T(ne,{key:0,label:u(c),"model-value":c.value,"onUpdate:modelValue":C=>n(c,C),variant:"outlined",density:"compact","hide-details":""},null,8,["label","model-value","onUpdate:modelValue"])):c.type==="slider"?(p(),E("div",ha,[r(St,{class:"text-caption mb-1"},{default:i(()=>[w(_(u(c)),1)]),_:2},1024),v("div",_a,[r(Et,{"model-value":c.value,"onUpdate:modelValue":C=>n(c,C),min:((h=c.config)==null?void 0:h.min)??0,max:((f=c.config)==null?void 0:f.max)??100,step:((y=c.config)==null?void 0:y.step)??1,"thumb-label":"",class:"slider-control","hide-details":""},null,8,["model-value","onUpdate:modelValue","min","max","step"]),r(ne,{"model-value":c.value,readonly:"",variant:"outlined",density:"compact",class:"value-display","hide-details":""},null,8,["model-value"])])])):c.type==="dropdown"?(p(),T(De,{key:2,label:u(c),"model-value":c.value,"onUpdate:modelValue":C=>n(c,C),items:((k=c.config)==null?void 0:k.options)||[],variant:"outlined",density:"compact","hide-details":""},null,8,["label","model-value","onUpdate:modelValue","items"])):c.type==="boolean"?(p(),E("div",ka,[r(Nt,{"model-value":c.value,"onUpdate:modelValue":C=>n(c,C),label:u(c),color:"primary","hide-details":"",inset:""},null,8,["model-value","onUpdate:modelValue","label"])])):U("",!0)])}),128))])]),_:1})])):U("",!0)}}),wa=W(ya,[["__scopeId","data-v-9ab33d5a"]]),Ca=A({__name:"CodeCell",props:{cell:{},theme:{},locale:{}},setup(a){const e=a;let o=[];o=S.getOutputTypes(e.cell.id);const t=()=>{if(o.indexOf("result")!==-1)return"result";if(o.indexOf("stdout")!==-1)return"stdout";if(o.indexOf("error")!==-1)return"error"},l=$("result");H(()=>e.cell.outputs,()=>{o=S.getOutputTypes(e.cell.id),l.value="none",l.value=t()||l.value},{deep:!0});const n=d=>{const m=S.findCell(e.cell.id);m&&(m.source=d,S.updated=Date.now())},u=M(()=>S.hasTag(e.cell.id,"hide_code"));return(d,m)=>(p(),E("div",null,[r(wa,{source:x(S).parseGlobals(x(S).getLocalizedSource(d.cell.id,e.locale)||[],e.locale),"cell-id":d.cell.id,onParameterChanged:n},null,8,["source","cell-id"]),r(O,{"max-width":"800",variant:"elevated",elevation:"2",color:"surface-light",class:"mb-2 pt-2 pb-2 ma-auto rounded-lg"},{default:i(()=>[u.value?U("",!0):(p(),T(j,{key:0},{default:i(()=>[r(Xo,{source:x(S).parseGlobals(x(S).getLocalizedSource(d.cell.id,e.locale)||[],e.locale),id:d.cell.id,metadata:d.cell.metadata,theme:e.theme},null,8,["source","id","metadata","theme"])]),_:1})),r(ve,{class:"pl-4 pr-4 d-flex justify-space-between"},{default:i(()=>[r(To,{id:d.cell.id},null,8,["id"]),r(Lt,{modelValue:l.value,"onUpdate:modelValue":m[0]||(m[0]=c=>l.value=c),class:"ml-auto"},{default:i(()=>[x(o).indexOf("result")!==-1?(p(),T(xe,{key:0,value:"result",icon:"",size:"32",rounded:"lg","min-width":"48"},{default:i(()=>[r(B,{icon:"mdi-monitor"})]),_:1})):U("",!0),x(o).indexOf("stdout")!==-1?(p(),T(xe,{key:1,value:"stdout",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:i(()=>[r(B,{icon:"mdi-console"})]),_:1})):U("",!0),x(o).indexOf("error")!==-1?(p(),T(xe,{key:2,value:"error",icon:"",size:"32","min-width":"48",rounded:"lg"},{default:i(()=>[r(B,{icon:"mdi-alert-circle-outline"})]),_:1})):U("",!0)]),_:1},8,["modelValue"])]),_:1}),_t(r(j,null,{default:i(()=>[r(Tt,{modelValue:l.value,"onUpdate:modelValue":m[1]||(m[1]=c=>l.value=c),direction:"vertical"},{default:i(()=>[r(Se,{value:"result"},{default:i(()=>[r(ca,{value:x(S).getResult(d.cell.id)},null,8,["value"])]),_:1}),r(Se,{value:"stdout",direction:"vertical"},{default:i(()=>[r(Qo,{stdout:x(S).getStdout(d.cell.id)},null,8,["stdout"])]),_:1}),r(Se,{value:"error",direction:"vertical"},{default:i(()=>[r(oa,{stderr:x(S).getError(d.cell.id)},null,8,["stderr"])]),_:1})]),_:1},8,["modelValue"])]),_:1},512),[[kt,e.cell.outputs?e.cell.outputs.length>0:!1]])]),_:1})]))}}),xa={key:1,class:"video-container"},Sa={key:0,class:"video-iframe-container"},Ea=["src","width","height"],Na={key:1,class:"video-fallback"},La={class:"text-body-2 mb-4"},Ta={class:"text-caption mt-2 text-grey"},$a={key:2,class:"video-player-container"},Ia={key:2,class:"text-center pa-4"},Da=A({__name:"VideoCell",props:{cell:{},locale:{}},setup(a){const e=a,o=$(null),t=$(null),l=$(null),n=$(!1);$(!1);const u=g=>{const I=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,/youtube\.com\/v\/([^&\n?#]+)/];for(const D of I){const F=g.match(D);if(F)return F[1]}return null},d=g=>{const I=[/vimeo\.com\/(\d+)/,/player\.vimeo\.com\/video\/(\d+)/];for(const D of I){const F=g.match(D);if(F)return F[1]}return null},m=g=>{const I=g.url,D=u(I);if(D)return{url:`https://www.youtube.com/embed/${D}`,provider:"youtube",isEmbed:!0};const F=d(I);return F?{url:`https://player.vimeo.com/video/${F}`,provider:"vimeo",isEmbed:!0}:{url:I,provider:"direct",isEmbed:!1}},c=()=>{try{const g=S.getLocalizedSource(e.cell.id,e.locale);if(!g||g.length===0)throw new Error("No video configuration found");const I=g.join("").trim(),D=JSON.parse(I);if(!D.url)throw new Error("Video URL is required");t.value={controls:!0,autoplay:!1,width:"100%",height:"auto",loop:!1,muted:!1,...D},l.value=m(D),o.value=null}catch(g){o.value=g instanceof Error?g.message:"Invalid video configuration",t.value=null,l.value=null}},h=M(()=>{if(!t.value||!l.value)return{};const g={controls:t.value.controls,autoplay:t.value.autoplay,loop:t.value.loop,muted:t.value.muted,fluid:!0,responsive:!0,playbackRates:[.5,1,1.25,1.5,2],plugins:{}};return t.value.poster&&(g.poster=t.value.poster),l.value.provider==="direct"&&(g.sources=[{src:l.value.url,type:"video/mp4"}]),g}),f=M(()=>{var g;return((g=l.value)==null?void 0:g.isEmbed)||!1}),y=M(()=>{if(!l.value||!t.value)return"";const g=new URL(l.value.url);return t.value.autoplay&&g.searchParams.set("autoplay","1"),t.value.controls||g.searchParams.set("controls","0"),t.value.loop&&g.searchParams.set("loop","1"),t.value.muted&&g.searchParams.set("muted","1"),g.toString()}),k=()=>{n.value=!0},C=()=>{var g;(g=t.value)!=null&&g.url&&window.open(t.value.url,"_blank")};return J(()=>{var g;c(),((g=l.value)==null?void 0:g.provider)==="vimeo"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&setTimeout(()=>{n.value||(n.value=!0)},2e3)}),(g,I)=>(p(),T(O,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:i(()=>[r(j,null,{default:i(()=>[o.value?(p(),T(re,{key:0,type:"error",variant:"tonal",text:o.value,class:"mb-4"},null,8,["text"])):t.value&&l.value?(p(),E("div",xa,[f.value&&!n.value?(p(),E("div",Sa,[v("iframe",{src:y.value,width:t.value.width,height:t.value.height==="auto"?"315":t.value.height,frameborder:"0",allowfullscreen:"",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",class:"video-iframe",onError:k},null,40,Ea)])):f.value&&n.value?(p(),E("div",Na,[r(O,{variant:"outlined",class:"pa-6 text-center"},{default:i(()=>[r(B,{size:"64",color:"grey-darken-1",class:"mb-4"},{default:i(()=>I[0]||(I[0]=[w("mdi-video-off")])),_:1,__:[0]}),I[3]||(I[3]=v("h3",{class:"text-h6 mb-2"},"Video Embedding Restricted",-1)),v("p",La,[w(" This "+_(l.value.provider)+" video cannot be embedded in this environment. ",1),I[1]||(I[1]=v("br",null,null,-1)),I[2]||(I[2]=w(" This is common when running on localhost due to CORS restrictions. "))]),r(R,{color:"primary",variant:"elevated",onClick:C,"prepend-icon":"mdi-open-in-new"},{default:i(()=>[w(" Watch on "+_(l.value.provider==="youtube"?"YouTube":"Vimeo"),1)]),_:1}),v("p",Ta," URL: "+_(t.value.url),1)]),_:1,__:[3]})])):(p(),E("div",$a,[r(x(Wt),{options:h.value,class:"video-player"},null,8,["options"])]))])):(p(),E("div",Ia,[r(pe,{indeterminate:"",color:"primary"}),I[4]||(I[4]=v("p",{class:"mt-2 text-body-2"},"Loading video...",-1))]))]),_:1})]),_:1}))}}),Va=W(Da,[["__scopeId","data-v-e35261dc"]]);function Ua(a){return new URLSearchParams(window.location.search).get(a)}async function Ma(a,e,o){var t;try{const l={model:a.model,messages:e,temperature:a.temperature??.7,stream:!1};a.max_tokens&&a.max_tokens!==-1&&(l.max_tokens=a.max_tokens),console.log("Sending request to:",a.url),console.log("Request body:",JSON.stringify(l,null,2));const n={"Content-Type":"application/json",Accept:"application/json"};o&&(n.Authorization=`Bearer ${o}`,console.log("Using API key authentication"));const u=await fetch(a.url,{method:"POST",headers:n,body:JSON.stringify(l)});if(console.log("Response status:",u.status),console.log("Response headers:",u.headers),!u.ok){let c=`HTTP ${u.status}: ${u.statusText}`;try{c=((t=(await u.json()).error)==null?void 0:t.message)||c}catch{}throw new Error(c)}const d=await u.json();if(!d.choices||d.choices.length===0)throw new Error("No response choices returned from API");const m=d.choices[0].message;if(!m||!m.content)throw new Error("Invalid response format from API");return{role:"assistant",content:m.content}}catch(l){throw l instanceof TypeError&&l.message.includes("fetch")?new Error("Unable to connect to the AI service. Please check if LM Studio is running and accessible."):l instanceof Error?l:new Error("An unexpected error occurred while communicating with the AI service.")}}const Aa={key:1,class:"chat-container"},Ra={class:"text-body-2"},Pa={class:"message-role"},Ba=["innerHTML"],Fa=["innerHTML"],Oa={key:1,class:"message-content"},za={key:0,class:"message-wrapper assistant"},ja={class:"message-bubble assistant"},Ha={class:"message-content"},Wa={key:1,class:"empty-chat"},qa={class:"chat-input-area"},Ja={class:"chat-config-info mt-3"},Ka={class:"config-chips"},Ga={class:"chat-actions"},Ya={key:2,class:"text-center pa-4"},Xa=A({__name:"ChatCell",props:{cell:{},locale:{}},setup(a){const e=a,o=$(null),t=$(null),l=$(""),n=$(!1),u=$(),d=$(null),m=()=>{try{const N=S.getLocalizedSource(e.cell.id,e.locale);if(!N||N.length===0)throw new Error("No chat configuration found");const b=N.join("").trim(),V=JSON.parse(b);if(!V.url)throw new Error("Chat URL is required");if(!V.model)throw new Error("Model name is required");if(!V.messages||!Array.isArray(V.messages))throw new Error("Messages array is required");t.value={temperature:.7,max_tokens:-1,stream:!1,...V},d.value=Ua("OPENAI_API_KEY"),d.value&&console.log("Found OPENAI_API_KEY in URL parameters"),o.value=null}catch(N){o.value=N instanceof Error?N.message:"Invalid chat configuration",t.value=null}},c=M(()=>t.value?t.value.messages.filter(N=>N.role!=="system"):[]),h=M(()=>t.value?t.value.messages.find(N=>N.role==="system"):null),f=N=>{const b=/<think>([\s\S]*?)<\/think>/gi;let V=null,Y=N;const we=N.match(b);return we&&we.length>0&&(V=we.map(bt=>bt.replace(/<\/?think>/gi,"").trim()).join(`

`),Y=N.replace(b,"").trim()),{thinkingContent:V,mainContent:Y,hasThinking:!!V}},y=N=>{try{const b=ut(N,{breaks:!0,gfm:!0});return typeof b=="string"?b:N}catch(b){return console.error("Failed to render markdown:",b),N}},k=N=>{const b=f(N.content);return{...b,renderedMain:N.role==="assistant"?y(b.mainContent):b.mainContent,renderedThinking:b.thinkingContent?y(b.thinkingContent):null}},C=async()=>{await Re(),u.value&&(u.value.scrollTop=u.value.scrollHeight)},g=()=>{if(t.value)try{const b=JSON.stringify(t.value,null,2).split(`
`);S.setSource(e.cell.id,b)}catch(N){console.error("Failed to save chat configuration:",N)}},I=async()=>{if(!l.value.trim()||!t.value||n.value)return;const N={role:"user",content:l.value.trim()};t.value.messages.push(N);const b=l.value.trim();l.value="",g(),await C(),n.value=!0,o.value=null;try{const V=await Ma(t.value,t.value.messages,d.value);t.value.messages.push(V),g(),await C()}catch(V){const Y=V instanceof Error?V.message:"Failed to get response from AI";o.value=Y,t.value.messages.pop(),g(),l.value=b}finally{n.value=!1}},D=()=>{t.value&&(t.value.messages=t.value.messages.filter(N=>N.role==="system"),g())},F=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),I())};return J(()=>{m()}),(N,b)=>(p(),T(O,{variant:"text","max-width":"800",class:"pt-2 pb-2 ma-auto"},{default:i(()=>[r(j,null,{default:i(()=>[o.value?(p(),T(re,{key:0,type:"error",variant:"tonal",text:o.value,class:"mb-4"},null,8,["text"])):t.value?(p(),E("div",Aa,[h.value?(p(),T(re,{key:0,type:"info",variant:"tonal",density:"compact",class:"mb-4"},{default:i(()=>[b[1]||(b[1]=v("div",{class:"text-caption text-grey-darken-1 mb-1"},"System Message:",-1)),v("div",Ra,_(h.value.content),1)]),_:1,__:[1]})):U("",!0),v("div",{class:"chat-messages",ref_key:"messagesContainer",ref:u},[(p(!0),E(te,null,ge(c.value,(V,Y)=>(p(),E("div",{key:Y,class:Q(["message-wrapper",V.role])},[v("div",{class:Q(["message-bubble",V.role])},[v("div",Pa,_(V.role),1),V.role==="assistant"?(p(),E(te,{key:0},[k(V).hasThinking?(p(),T($t,{key:0,variant:"accordion",class:"thinking-panel mb-2"},{default:i(()=>[r(It,null,{default:i(()=>[r(Dt,{class:"thinking-title"},{default:i(()=>[r(B,{start:"",size:"small"},{default:i(()=>b[2]||(b[2]=[w("mdi-brain")])),_:1,__:[2]}),b[3]||(b[3]=v("span",{class:"text-caption"},"Thinking Process",-1))]),_:1,__:[3]}),r(Vt,null,{default:i(()=>[v("div",{class:"thinking-content markdown-content",innerHTML:k(V).renderedThinking},null,8,Ba)]),_:2},1024)]),_:2},1024)]),_:2},1024)):U("",!0),v("div",{class:"message-content markdown-content",innerHTML:k(V).renderedMain},null,8,Fa)],64)):(p(),E("div",Oa,_(V.content),1))],2)],2))),128)),n.value?(p(),E("div",za,[v("div",ja,[b[5]||(b[5]=v("div",{class:"message-role"},"assistant",-1)),v("div",Ha,[r(pe,{size:"16",width:"2",indeterminate:"",class:"mr-2"}),b[4]||(b[4]=w(" Thinking... "))])])])):U("",!0),c.value.length===0&&!n.value?(p(),E("div",Wa,[r(B,{size:"48",color:"grey-lighten-1",class:"mb-2"},{default:i(()=>b[6]||(b[6]=[w("mdi-chat-outline")])),_:1,__:[6]}),b[7]||(b[7]=v("p",{class:"text-body-2 text-grey"},"Start a conversation...",-1))])):U("",!0)],512),v("div",qa,[r(ne,{modelValue:l.value,"onUpdate:modelValue":b[0]||(b[0]=V=>l.value=V),placeholder:"Type your message...",variant:"outlined",density:"comfortable","hide-details":"",disabled:n.value,onKeypress:F,class:"chat-input"},{"append-inner":i(()=>[r(R,{icon:"mdi-send",size:"small",color:"primary",variant:"text",disabled:!l.value.trim()||n.value,onClick:I},null,8,["disabled"])]),_:1},8,["modelValue","disabled"])]),v("div",Ja,[v("div",Ka,[r(ae,{size:"small",variant:"outlined",class:"mr-2"},{default:i(()=>[r(B,{start:""},{default:i(()=>b[8]||(b[8]=[w("mdi-server")])),_:1,__:[8]}),w(" "+_(t.value.model),1)]),_:1}),r(ae,{size:"small",variant:"outlined",class:"mr-2"},{default:i(()=>[r(B,{start:""},{default:i(()=>b[9]||(b[9]=[w("mdi-thermometer")])),_:1,__:[9]}),w(" T: "+_(t.value.temperature),1)]),_:1}),r(ae,{size:"small",variant:"outlined",class:"mr-2"},{default:i(()=>[r(B,{start:""},{default:i(()=>b[10]||(b[10]=[w("mdi-counter")])),_:1,__:[10]}),w(" Max: "+_(t.value.max_tokens===-1?"∞":t.value.max_tokens),1)]),_:1}),d.value?(p(),T(ae,{key:0,size:"small",variant:"outlined",color:"success",class:"mr-2"},{default:i(()=>[r(B,{start:""},{default:i(()=>b[11]||(b[11]=[w("mdi-key")])),_:1,__:[11]}),b[12]||(b[12]=w(" Authenticated "))]),_:1,__:[12]})):U("",!0)]),v("div",Ga,[c.value.length>0?(p(),T(R,{key:0,size:"small",variant:"outlined",color:"warning","prepend-icon":"mdi-broom",onClick:D,disabled:n.value},{default:i(()=>b[13]||(b[13]=[w(" Clear Chat ")])),_:1,__:[13]},8,["disabled"])):U("",!0)])])])):(p(),E("div",Ya,[r(pe,{indeterminate:"",color:"primary"}),b[14]||(b[14]=v("p",{class:"mt-2 text-body-2"},"Loading chat...",-1))]))]),_:1})]),_:1}))}}),Za=W(Xa,[["__scopeId","data-v-92f39cb0"]]),Qa=A({__name:"PyodideProvider",props:{notebookId:{},locale:{}},setup(a){const e=a;let o;return J(async()=>{console.log("PyodideProvider: Starting new worker for "+e.notebookId),L.setWorkerStatus("initializing"),o=new Worker(new URL("/k12nb/assets/PyodideWorker-DCpjE9aV.js",import.meta.url),{type:"module"}),o.postMessage({type:"initialize"}),o.onmessage=async t=>{const{type:l,text:n,result:u,message:d,error:m,interruptBuffer:c}=t.data;switch(l){case"initialized":console.log("PyodideProvider: Pyodide is initialized"),L.setWorkerStatus("ready"),c&&(L.setInterruptBuffer(new Int32Array(c)),console.log("PyodideProvider: Set Interrupt Buffer"));break;case"stdout":L.runningCellId&&S.addStdout(L.runningCellId,n);break;case"input_request":L.requestUserInput(d);break;case"execute_result":L.runningCellId&&u&&S.setResult(L.runningCellId,u);break;case"execute_completed":L.executionCompleted();break;case"error":L.runningCellId&&S.setError(L.runningCellId,m),L.executionCompleted();break;case"fatal":L.setFatalError(m);break}}}),Pe(async()=>{console.log("PyodideProvider: Terminating worker."),L.setWorkerStatus("terminating"),o.terminate()}),H(()=>L.executionStatus,t=>{if(t==="queued"&&L.runningCellId!=null){const l=S.getLocalizedSource(L.runningCellId,e.locale);o.postMessage({type:"run",cellId:L.runningCellId,code:l==null?void 0:l.join("")})}}),H(()=>L.inputStatus,t=>{t==="submitted"&&o.postMessage({type:"input_response",value:L.userInput})}),(t,l)=>yt(t.$slots,"default")}}),el=A({__name:"InputDialog",props:{locale:{}},setup(a){const e=a,o=M(()=>pt[e.locale||"en-US"]),t=$(""),l=$(),n=M({get:()=>L.inputStatus==="waiting",set:c=>{c||(L.inputStatus="idle")}}),u=()=>{L.submitUserInput(t.value),t.value=""},d=()=>{L.submitUserInput(""),t.value=""};H(()=>n.value,async c=>{var h;c&&(await Re(),(h=l.value)==null||h.focus())});const m=c=>{c.key==="Enter"?(c.preventDefault(),u()):c.key==="Escape"&&(c.preventDefault(),d())};return(c,h)=>(p(),T(Be,{modelValue:n.value,"onUpdate:modelValue":h[1]||(h[1]=f=>n.value=f),"max-width":"400px",persistent:"",onKeydown:m},{default:i(()=>[r(O,null,{default:i(()=>[r(ee,null,{default:i(()=>[w(_(x(L).inputPrompt||o.value.inputDialogTitle),1)]),_:1}),r(j,null,{default:i(()=>[r(ne,{ref_key:"inputFieldRef",ref:l,modelValue:t.value,"onUpdate:modelValue":h[0]||(h[0]=f=>t.value=f),label:o.value.inputDialogLabel,variant:"outlined",density:"compact",onKeydown:m},null,8,["modelValue","label"])]),_:1}),r(ve,null,{default:i(()=>[r(Fe),r(R,{color:"grey",variant:"text",onClick:d},{default:i(()=>[w(_(o.value.inputDialogCancel),1)]),_:1}),r(R,{color:"primary",variant:"text",onClick:u},{default:i(()=>[w(_(o.value.inputDialogSubmit),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),tl={class:"renderer-container"},ol=A({__name:"Renderer",props:{id:{},initialNotebook:{},theme:{},locale:{},editMode:{type:Boolean}},setup(a){const e=a,o=M(()=>pt[e.locale]);return J(()=>{S.loadNotebook(e.initialNotebook)}),H(()=>e.initialNotebook,t=>{S.loadNotebook(t)}),(t,l)=>(p(),T(Qa,{notebookId:t.id,locale:e.locale},{default:i(()=>[v("div",tl,[r(We,null,{default:i(()=>[x(L).workerStatus=="initializing"?(p(),T(re,{key:0,text:o.value.notebookStarting,type:"info",variant:"tonal",density:"compact"},null,8,["text"])):U("",!0)]),_:1}),r(We,null,{default:i(()=>[x(L).workerStatus=="error"?(p(),T(re,{key:0,text:`${o.value.notebookStartError} ${x(L).fatalErrorTrace}`,type:"error",variant:"tonal",density:"compact"},null,8,["text"])):U("",!0)]),_:1}),(p(!0),E(te,null,ge(x(S).content.cells,n=>{var u,d;return p(),E("div",null,[n.cell_type==="markdown"?(p(),T(x(Lo),{key:0,cell:n,metadata:n.metadata,locale:e.locale,editMode:e.editMode},null,8,["cell","metadata","locale","editMode"])):U("",!0),n.cell_type==="code"?(p(),T(x(Ca),{key:1,cell:n,theme:e.theme,locale:e.locale},null,8,["cell","theme","locale"])):U("",!0),n.cell_type==="raw"&&((u=n.metadata.tags)!=null&&u.includes("video"))?(p(),T(x(Va),{key:2,cell:n,locale:e.locale},null,8,["cell","locale"])):U("",!0),n.cell_type==="raw"&&((d=n.metadata.tags)!=null&&d.includes("chat"))?(p(),T(x(Za),{key:3,cell:n,locale:e.locale},null,8,["cell","locale"])):U("",!0)])}),256))]),r(el,{locale:e.locale},null,8,["locale"])]),_:1},8,["notebookId","locale"]))}}),al={class:"notebook"},ll={class:"d-flex align-center mb-6 notebook-header"},nl={class:"d-flex align-center flex-grow-1"},rl={class:"text-h4 notebook-title"},sl={key:1,class:"loading"},il={class:"text-center"},cl={class:"text-h5 mb-2"},ul={class:"text-body-1 text-medium-emphasis mb-4"},dl=A({__name:"Notebook",setup(a){const e=ct(),o=je(),t=M(()=>_e[P.locale]),l=M(()=>he[P.locale].direction==="rtl"),n=M(()=>e.params.id),u=$(null),d=$(!0),m=$(null),c=$(!1),h=$(!1),{saveStatus:f,stopWatcher:y}=So(n.value);J(async()=>{try{d.value=!0,m.value=null,u.value=await io(n.value)}catch(I){console.error("Failed to load notebook:",I),m.value=I instanceof Error?I.message:"Failed to load notebook"}finally{d.value=!1}});const k=()=>{o.push("/notebooks")},C=()=>{c.value=!c.value},g=()=>{h.value=!h.value};return Pe(()=>{S.clear(),y()}),(I,D)=>(p(),E("div",al,[r(be,{fluid:"",class:"pa-4"},{default:i(()=>{var F,N;return[v("div",ll,[v("div",nl,[r(R,{icon:l.value?"mdi-arrow-right":"mdi-arrow-left",variant:"text",onClick:k,class:Q(l.value?"ms-3":"me-3")},null,8,["icon","class"]),v("h1",rl,_(((N=(F=u.value)==null?void 0:F.metadata)==null?void 0:N.title)||t.value.untitledNotebook),1)]),x(f)!=="idle"?(p(),T(ae,{key:0,color:x(f)==="saved"?"success":x(f)==="saving"?"info":"error",size:"small",variant:"tonal"},{default:i(()=>[r(B,{icon:x(f)==="saved"?"mdi-check":x(f)==="saving"?"mdi-loading":"mdi-alert",class:Q([{"mdi-spin":x(f)==="saving"},"me-1"]),size:"small"},null,8,["icon","class"]),w(" "+_(x(f)==="saved"?t.value.saved:x(f)==="saving"?t.value.saving:t.value.saveError),1)]),_:1},8,["color"])):U("",!0),v("div",{class:Q(["d-flex align-center",l.value?"ms-3":"me-3"])},[r(R,{icon:"mdi-pencil",variant:"text",size:"small",color:c.value?"primary":"default",onClick:C,class:"me-2"},{default:i(()=>[r(B,null,{default:i(()=>D[0]||(D[0]=[w("mdi-pencil")])),_:1,__:[0]}),r(qe,{activator:"parent",location:"bottom"},{default:i(()=>D[1]||(D[1]=[w(" Edit Notebook ")])),_:1,__:[1]})]),_:1},8,["color"]),r(R,{icon:"mdi-paperclip",variant:"text",size:"small",color:h.value?"primary":"default",onClick:g},{default:i(()=>[r(B,null,{default:i(()=>D[2]||(D[2]=[w("mdi-paperclip")])),_:1,__:[2]}),r(qe,{activator:"parent",location:"bottom"},{default:i(()=>D[3]||(D[3]=[w(" Resources ")])),_:1,__:[3]})]),_:1},8,["color"])],2)]),u.value&&!d.value&&!m.value?(p(),T(ol,{key:0,"initial-notebook":u.value,id:n.value,theme:x(P).theme,locale:x(P).locale,editMode:c.value},null,8,["initial-notebook","id","theme","locale","editMode"])):d.value?(p(),E("div",sl,[r(pe,{indeterminate:"",color:"primary"}),v("p",null,_(t.value.loadingNotebook),1)])):m.value?(p(),T(O,{key:2,class:"pa-6"},{default:i(()=>[v("div",il,[r(B,{icon:"mdi-alert-circle",size:"64",color:"error",class:"mb-4"}),v("h2",cl,_(t.value.failedToLoad),1),v("p",ul,_(m.value),1),r(R,{color:"primary",onClick:k},{default:i(()=>[w(_(t.value.backToNotebooks),1)]),_:1})])]),_:1})):U("",!0)]}),_:1})]))}}),ml=W(dl,[["__scopeId","data-v-6fc1f7ac"]]),pl={class:"curriculum-view"},fl=A({__name:"Curriculum",setup(a){return(e,o)=>(p(),E("div",pl,[r(be,null,{default:i(()=>[r(Oe,null,{default:i(()=>[r(ze,{cols:"12"},{default:i(()=>[o[1]||(o[1]=v("h1",{class:"text-h4 mb-4"},"Curriculum",-1)),r(O,null,{default:i(()=>[r(j,null,{default:i(()=>o[0]||(o[0]=[v("p",{class:"text-body-1"}," Curriculum content will be implemented here. This section will contain educational materials, lessons, and structured learning paths. ",-1)])),_:1,__:[0]})]),_:1})]),_:1,__:[1]})]),_:1})]),_:1})]))}}),gl=W(fl,[["__scopeId","data-v-4427f550"]]),vl={class:"settings-view"},bl={class:"text-h4 mb-4 settings-title"},hl={class:"text-body-1"},_l={class:"text-body-2 text-medium-emphasis"},kl=A({__name:"Settings",setup(a){const e=it(),o=$(P.theme),t=$(P.locale),l=M(()=>Xt.map(c=>({title:Kt[P.locale][c],value:c}))),n=qt.map(c=>({title:he[c].name,value:c})),u=M(()=>Yt[P.locale]);J(()=>{e.global.name.value=P.theme}),H(o,c=>{e.global.name.value=c});const d=c=>{P.setTheme(c),o.value=c},m=c=>{P.setLocale(c),t.value=c};return(c,h)=>(p(),E("div",vl,[r(be,null,{default:i(()=>[r(Oe,null,{default:i(()=>[r(ze,{cols:"12"},{default:i(()=>[v("h1",bl,_(u.value.title),1),r(O,{class:"mb-4"},{default:i(()=>[r(ee,null,{default:i(()=>[w(_(u.value.appearance),1)]),_:1}),r(j,null,{default:i(()=>[r(De,{modelValue:o.value,"onUpdate:modelValue":[h[0]||(h[0]=f=>o.value=f),d],items:l.value,label:u.value.theme,"item-title":"title","item-value":"value"},null,8,["modelValue","items","label"])]),_:1})]),_:1}),r(O,{class:"mb-4"},{default:i(()=>[r(ee,null,{default:i(()=>[w(_(u.value.language),1)]),_:1}),r(j,null,{default:i(()=>[r(De,{modelValue:t.value,"onUpdate:modelValue":[h[1]||(h[1]=f=>t.value=f),m],items:x(n),label:u.value.language,"item-title":"title","item-value":"value"},null,8,["modelValue","items","label"])]),_:1})]),_:1}),r(O,null,{default:i(()=>[r(ee,null,{default:i(()=>[w(_(u.value.about),1)]),_:1}),r(j,null,{default:i(()=>[v("p",hl,_(u.value.appName),1),v("p",_l,_(u.value.version)+" 0.1.0 ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}}),yl=W(kl,[["__scopeId","data-v-b8e54928"]]),wl=[{path:"/",redirect:"notebooks"},{path:"/notebooks",name:"notebooks",component:yo},{path:"/notebooks/:id",name:"notebook",component:ml},{path:"/curriculum",name:"curriculum",component:gl},{path:"/settings",name:"settings",component:yl}],Cl=Ft({history:Ot("/k12nb/"),routes:wl}),xl={class:"content-container"},Sl=A({__name:"BaseLayout",setup(a){const e=()=>{const f=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${f}px`)},o=je(),t=ct(),l={"/notebooks":0,"/curriculum":1,"/settings":2},n={0:"/notebooks",1:"/curriculum",2:"/settings"},u=M({get:()=>l[t.path]??0,set:f=>{const y=n[f];y&&t.path!==y&&o.push(y)}}),d=it(),m=M(()=>Gt[P.locale]),c=M(()=>he[P.locale].direction),h=M(()=>P.locale);return H([c,h],([f,y])=>{document.documentElement.dir=f,document.documentElement.lang=y},{immediate:!0}),J(()=>{d.global.name.value=P.theme,document.documentElement.dir=c.value,document.documentElement.lang=h.value,e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e)}),Pe(()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}),(f,y)=>{const k=wt("router-view");return p(),T(Ut,null,{default:i(()=>[r(Mt,null,{default:i(()=>[v("div",xl,[r(k)])]),_:1}),r(At,{modelValue:u.value,"onUpdate:modelValue":y[0]||(y[0]=C=>u.value=C),color:"primary",grow:"",class:Q({"rtl-navigation":c.value==="rtl"})},{default:i(()=>[r(R,{value:"0"},{default:i(()=>[r(B,null,{default:i(()=>y[1]||(y[1]=[w("mdi-notebook")])),_:1,__:[1]}),v("span",null,_(m.value.notebooks),1)]),_:1}),r(R,{value:"1"},{default:i(()=>[r(B,null,{default:i(()=>y[2]||(y[2]=[w("mdi-school")])),_:1,__:[2]}),v("span",null,_(m.value.curriculum),1)]),_:1}),r(R,{value:"2"},{default:i(()=>[r(B,null,{default:i(()=>y[3]||(y[3]=[w("mdi-cog")])),_:1,__:[3]}),v("span",null,_(m.value.settings),1)]),_:1})]),_:1},8,["modelValue","class"])]),_:1})}}}),El=W(Sl,[["__scopeId","data-v-77271b7e"]]),Nl=A({__name:"App",setup(a){return(e,o)=>(p(),T(El))}}),Ll=Rt({theme:{defaultTheme:"dark",themes:{light:{colors:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}},dark:{colors:{primary:"#2196F3",secondary:"#424242",accent:"#FF4081",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}}},icons:{defaultSet:"mdi",aliases:Bt,sets:{mdi:Pt}}});Ct(Nl).use(Ll).use(Cl).mount("#app");
